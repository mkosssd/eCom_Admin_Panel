(self.webpackChunkeCom=self.webpackChunkeCom||[]).push([[179],{6304:(Vt,je,j)=>{"use strict";j.d(je,{Dh:()=>We,GT:()=>Ae,cc:()=>Ye,hO:()=>st,on:()=>q,pX:()=>ge,xv:()=>De});var u=j(5879),K=j(120),V=j(2793);Vt=j.hmd(Vt);const ae=["ngOnDestroy"],ge=(ke,Ut,Ft,me={})=>new Proxy(ke,{get:($e,ye)=>Ft.runOutsideAngular(()=>{var Fe;if(ke[ye])return!(null===(Fe=me?.spy)||void 0===Fe)&&Fe.get&&me.spy.get(ye,ke[ye]),ke[ye];if(ae.indexOf(ye)>-1)return()=>{};const Je=Ut.toPromise().then(X=>{const Ke=X&&X[ye];return"function"==typeof Ke?Ke.bind(X):Ke&&Ke.then?Ke.then(ht=>Ft.run(()=>ht)):Ft.run(()=>Ke)});return new Proxy(()=>{},{get:(X,Ke)=>Je[Ke],apply:(X,Ke,ht)=>Je.then(Ht=>{var bn;const Qn=Ht&&Ht(...ht);return!(null===(bn=me?.spy)||void 0===bn)&&bn.apply&&me.spy.apply(ye,ht,Qn),Qn})})})}),Ae=(ke,Ut)=>{Ut.forEach(Ft=>{Object.getOwnPropertyNames(Ft.prototype||Ft).forEach(me=>{Object.defineProperty(ke.prototype,me,Object.getOwnPropertyDescriptor(Ft.prototype||Ft,me))})})};class Ue{constructor(Ut){return Ut}}const We=new u.OlP("angularfire2.app.options"),De=new u.OlP("angularfire2.app.name");function q(ke,Ut,Ft){const $e="object"==typeof Ft&&Ft||{};$e.name=$e.name||"string"==typeof Ft&&Ft||"[DEFAULT]";const Fe=K.Z.apps.filter(Je=>Je&&Je.name===$e.name)[0]||Ut.runOutsideAngular(()=>K.Z.initializeApp(ke,$e));try{JSON.stringify(ke)!==JSON.stringify(Fe.options)&&re("error",`${Fe.name} Firebase App already initialized with different options${Vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ue(Fe)}const re=(ke,...Ut)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ke](...Ut)},pe={provide:Ue,useFactory:q,deps:[We,u.R0b,[new u.FiY,De]]};let st=(()=>{class ke{constructor(Ft){K.Z.registerVersion("angularfire",V.q4.full,"core"),K.Z.registerVersion("angularfire",V.q4.full,"app-compat"),K.Z.registerVersion("angular",u.q4F.full,Ft.toString())}static initializeApp(Ft,me){return{ngModule:ke,providers:[{provide:We,useValue:Ft},{provide:De,useValue:me}]}}}return ke.\u0275fac=function(Ft){return new(Ft||ke)(u.LFG(u.Lbi))},ke.\u0275mod=u.oAB({type:ke}),ke.\u0275inj=u.cJS({providers:[pe]}),ke})();function Ye(ke,Ut,Ft,me,$e){const[,ye,Fe]=globalThis.\u0275AngularfireInstanceCache.find(Je=>Je[0]===ke)||[];if(ye)return function mt(ke,Ut){try{return ke.toString()===Ut.toString()}catch{return ke===Ut}}($e,Fe)||(vt("error",`${Ut} was already initialized on the ${Ft} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),vt("warn",{is:$e,was:Fe})),ye;{const Je=me();return globalThis.\u0275AngularfireInstanceCache.push([ke,Je,$e]),Je}}const Qe=!!Vt.hot,vt=(ke,...Ut)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ke](...Ut)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(Vt,je,j)=>{"use strict";j.d(je,{q4:()=>vu,iC:()=>Eu,fc:()=>Df,HU:()=>Jr,vb:()=>Um,JM:()=>qd,u3:()=>rs});var u=j(5879),K=j(4097),V=j(5861),ae=j(4303),ge=j(9058),Ae=j(4537),Ue=j(7879);const We=(b,S)=>S.some(M=>b instanceof M);let De,q;const st=new WeakMap,Ye=new WeakMap,mt=new WeakMap,Qe=new WeakMap,vt=new WeakMap;let Ft={get(b,S,M){if(b instanceof IDBTransaction){if("done"===S)return Ye.get(b);if("objectStoreNames"===S)return b.objectStoreNames||mt.get(b);if("store"===S)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Fe(b[S])},set:(b,S,M)=>(b[S]=M,!0),has:(b,S)=>b instanceof IDBTransaction&&("done"===S||"store"===S)||S in b};function ye(b){return"function"==typeof b?function $e(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...S){return b.apply(Je(this),S),Fe(st.get(this))}:function(...S){return Fe(b.apply(Je(this),S))}:function(S,...M){const $=b.call(Je(this),S,...M);return mt.set($,S.sort?S.sort():[S]),Fe($)}}(b):(b instanceof IDBTransaction&&function Ut(b){if(Ye.has(b))return;const S=new Promise((M,$)=>{const se=()=>{b.removeEventListener("complete",he),b.removeEventListener("error",Le),b.removeEventListener("abort",Le)},he=()=>{M(),se()},Le=()=>{$(b.error||new DOMException("AbortError","AbortError")),se()};b.addEventListener("complete",he),b.addEventListener("error",Le),b.addEventListener("abort",Le)});Ye.set(b,S)}(b),We(b,function re(){return De||(De=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,Ft):b)}function Fe(b){if(b instanceof IDBRequest)return function ke(b){const S=new Promise((M,$)=>{const se=()=>{b.removeEventListener("success",he),b.removeEventListener("error",Le)},he=()=>{M(Fe(b.result)),se()},Le=()=>{$(b.error),se()};b.addEventListener("success",he),b.addEventListener("error",Le)});return S.then(M=>{M instanceof IDBCursor&&st.set(M,b)}).catch(()=>{}),vt.set(S,b),S}(b);if(Qe.has(b))return Qe.get(b);const S=ye(b);return S!==b&&(Qe.set(b,S),vt.set(S,b)),S}const Je=b=>vt.get(b),ht=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],bn=new Map;function Qn(b,S){if(!(b instanceof IDBDatabase)||S in b||"string"!=typeof S)return;if(bn.get(S))return bn.get(S);const M=S.replace(/FromIndex$/,""),$=S!==M,se=Ht.includes(M);if(!(M in($?IDBIndex:IDBObjectStore).prototype)||!se&&!ht.includes(M))return;const he=function(){var Le=(0,V.Z)(function*(Dt,...bt){const qt=this.transaction(Dt,se?"readwrite":"readonly");let fn=qt.store;return $&&(fn=fn.index(bt.shift())),(yield Promise.all([fn[M](...bt),se&&qt.done]))[0]});return function(bt){return Le.apply(this,arguments)}}();return bn.set(S,he),he}!function me(b){Ft=b(Ft)}(b=>({...b,get:(S,M,$)=>Qn(S,M)||b.get(S,M,$),has:(S,M)=>!!Qn(S,M)||b.has(S,M)}));const tr="@firebase/installations",gn="0.6.4",Zn=1e4,Wr=`w:${gn}`,_e="FIS_v2",be="https://firebaseinstallations.googleapis.com/v1",Te=36e5,wt=new ge.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function gt(b){return b instanceof ge.ZR&&b.code.includes("request-failed")}function Vn({projectId:b}){return`${be}/projects/${b}/installations`}function Kt(b){return{token:b.token,requestStatus:2,expiresIn:br(b.expiresIn),creationTime:Date.now()}}function Tn(b,S){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,V.Z)(function*(b,S){const $=(yield S.json()).error;return wt.create("request-failed",{requestName:b,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function qn({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function or(b){return Un.apply(this,arguments)}function Un(){return(Un=(0,V.Z)(function*(b){const S=yield b();return S.status>=500&&S.status<600?b():S})).apply(this,arguments)}function br(b){return Number(b.replace("s","000"))}function cr(){return(cr=(0,V.Z)(function*({appConfig:b,heartbeatServiceProvider:S},{fid:M}){const $=Vn(b),se=qn(b),he=S.getImmediate({optional:!0});if(he){const qt=yield he.getHeartbeatsHeader();qt&&se.append("x-firebase-client",qt)}const Dt={method:"POST",headers:se,body:JSON.stringify({fid:M,authVersion:_e,appId:b.appId,sdkVersion:Wr})},bt=yield or(()=>fetch($,Dt));if(bt.ok){const qt=yield bt.json();return{fid:qt.fid||M,registrationStatus:2,refreshToken:qt.refreshToken,authToken:Kt(qt.authToken)}}throw yield Tn("Create Installation",bt)})).apply(this,arguments)}function pr(b){return new Promise(S=>{setTimeout(S,b)})}const Ji=/^[cdef][\w-]{21}$/,Wt="";function Xt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function un(b){return function Br(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Ji.test(M)?M:Wt}catch{return Wt}}function Sn(b){return`${b.appName}!${b.appId}`}const Ar=new Map;function Rr(b,S){const M=Sn(b);Bi(M,S),function Nt(b,S){const M=function _n(){return!oi&&"BroadcastChannel"in self&&(oi=new BroadcastChannel("[Firebase] FID Change"),oi.onmessage=b=>{Bi(b.data.key,b.data.fid)}),oi}();M&&M.postMessage({key:b,fid:S}),function Wn(){0===Ar.size&&oi&&(oi.close(),oi=null)}()}(M,S)}function Bi(b,S){const M=Ar.get(b);if(M)for(const $ of M)$(S)}let oi=null;const es="firebase-installations-database",ai=1,Hn="firebase-installations-store";let Dr=null;function Se(){return Dr||(Dr=function X(b,S,{blocked:M,upgrade:$,blocking:se,terminated:he}={}){const Le=indexedDB.open(b,S),Dt=Fe(Le);return $&&Le.addEventListener("upgradeneeded",bt=>{$(Fe(Le.result),bt.oldVersion,bt.newVersion,Fe(Le.transaction))}),M&&Le.addEventListener("blocked",()=>M()),Dt.then(bt=>{he&&bt.addEventListener("close",()=>he()),se&&bt.addEventListener("versionchange",()=>se())}).catch(()=>{}),Dt}(es,ai,{upgrade:(b,S)=>{0===S&&b.createObjectStore(Hn)}})),Dr}function J(b,S){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,V.Z)(function*(b,S){const M=Sn(b),se=(yield Se()).transaction(Hn,"readwrite"),he=se.objectStore(Hn),Le=yield he.get(M);return yield he.put(S,M),yield se.done,(!Le||Le.fid!==S.fid)&&Rr(b,S.fid),S})).apply(this,arguments)}function ct(b){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,V.Z)(function*(b){const S=Sn(b),$=(yield Se()).transaction(Hn,"readwrite");yield $.objectStore(Hn).delete(S),yield $.done})).apply(this,arguments)}function jt(b,S){return yn.apply(this,arguments)}function yn(){return(yn=(0,V.Z)(function*(b,S){const M=Sn(b),se=(yield Se()).transaction(Hn,"readwrite"),he=se.objectStore(Hn),Le=yield he.get(M),Dt=S(Le);return void 0===Dt?yield he.delete(M):yield he.put(Dt,M),yield se.done,Dt&&(!Le||Le.fid!==Dt.fid)&&Rr(b,Dt.fid),Dt})).apply(this,arguments)}function ee(b){return W.apply(this,arguments)}function W(){return W=(0,V.Z)(function*(b){let S;const M=yield jt(b.appConfig,$=>{const se=function z(b){return At(b||{fid:Xt(),registrationStatus:0})}($),he=function H(b,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(wt.create("app-offline"))};const M={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},$=function U(b,S){return de.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:$}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Ze(b)}:{installationEntry:S}}(b,se);return S=he.registrationPromise,he.installationEntry});return M.fid===Wt?{installationEntry:yield S}:{installationEntry:M,registrationPromise:S}}),W.apply(this,arguments)}function de(){return de=(0,V.Z)(function*(b,S){try{const M=yield function Vr(b,S){return cr.apply(this,arguments)}(b,S);return J(b.appConfig,M)}catch(M){throw gt(M)&&409===M.customData.serverCode?yield ct(b.appConfig):yield J(b.appConfig,{fid:S.fid,registrationStatus:0}),M}}),de.apply(this,arguments)}function Ze(b){return _t.apply(this,arguments)}function _t(){return(_t=(0,V.Z)(function*(b){let S=yield cn(b.appConfig);for(;1===S.registrationStatus;)yield pr(100),S=yield cn(b.appConfig);if(0===S.registrationStatus){const{installationEntry:M,registrationPromise:$}=yield ee(b);return $||M}return S})).apply(this,arguments)}function cn(b){return jt(b,S=>{if(!S)throw wt.create("installation-not-found");return At(S)})}function At(b){return function $n(b){return 1===b.registrationStatus&&b.registrationTime+Zn<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function wn(){return(wn=(0,V.Z)(function*({appConfig:b,heartbeatServiceProvider:S},M){const $=function dn(b,{fid:S}){return`${Vn(b)}/${S}/authTokens:generate`}(b,M),se=function vr(b,{refreshToken:S}){const M=qn(b);return M.append("Authorization",function Ii(b){return`${_e} ${b}`}(S)),M}(b,M),he=S.getImmediate({optional:!0});if(he){const qt=yield he.getHeartbeatsHeader();qt&&se.append("x-firebase-client",qt)}const Dt={method:"POST",headers:se,body:JSON.stringify({installation:{sdkVersion:Wr,appId:b.appId}})},bt=yield or(()=>fetch($,Dt));if(bt.ok)return Kt(yield bt.json());throw yield Tn("Generate Auth Token",bt)})).apply(this,arguments)}function Mi(b){return po.apply(this,arguments)}function po(){return po=(0,V.Z)(function*(b,S=!1){let M;const $=yield jt(b.appConfig,he=>{if(!Ds(he))throw wt.create("not-registered");const Le=he.authToken;if(!S&&function Da(b){return 2===b.requestStatus&&!function Ss(b){const S=Date.now();return S<b.creationTime||b.creationTime+b.expiresIn<S+Te}(b)}(Le))return he;if(1===Le.requestStatus)return M=function mo(b,S){return Cs.apply(this,arguments)}(b,S),he;{if(!navigator.onLine)throw wt.create("app-offline");const Dt=function vc(b){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:S})}(he);return M=function Ei(b,S){return On.apply(this,arguments)}(b,Dt),Dt}});return M?yield M:$.authToken}),po.apply(this,arguments)}function Cs(){return(Cs=(0,V.Z)(function*(b,S){let M=yield As(b.appConfig);for(;1===M.authToken.requestStatus;)yield pr(100),M=yield As(b.appConfig);const $=M.authToken;return 0===$.requestStatus?Mi(b,S):$})).apply(this,arguments)}function As(b){return jt(b,S=>{if(!Ds(S))throw wt.create("not-registered");return function go(b){return 1===b.requestStatus&&b.requestTime+Zn<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function On(){return On=(0,V.Z)(function*(b,S){try{const M=yield function Zt(b,S){return wn.apply(this,arguments)}(b,S),$=Object.assign(Object.assign({},S),{authToken:M});return yield J(b.appConfig,$),M}catch(M){if(!gt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const $=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield J(b.appConfig,$)}else yield ct(b.appConfig);throw M}}),On.apply(this,arguments)}function Ds(b){return void 0!==b&&2===b.registrationStatus}function Sa(){return(Sa=(0,V.Z)(function*(b){const S=b,{installationEntry:M,registrationPromise:$}=yield ee(S);return $?$.catch(console.error):Mi(S).catch(console.error),M.fid})).apply(this,arguments)}function xa(){return xa=(0,V.Z)(function*(b,S=!1){const M=b;return yield function _o(b){return na.apply(this,arguments)}(M),(yield Mi(M,S)).token}),xa.apply(this,arguments)}function na(){return(na=(0,V.Z)(function*(b){const{registrationPromise:S}=yield ee(b);S&&(yield S)})).apply(this,arguments)}function Ra(b){return wt.create("missing-app-config-values",{valueName:b})}const Q="installations",B=b=>{const S=b.getProvider("app").getImmediate(),M=function ji(b){if(!b||!b.options)throw Ra("App Configuration");if(!b.name)throw Ra("App Name");const S=["projectId","apiKey","appId"];for(const M of S)if(!b.options[M])throw Ra(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(S);return{app:S,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},F=b=>{const S=b.getProvider("app").getImmediate(),M=(0,ae._getProvider)(S,Q).getImmediate();return{getId:()=>function ta(b){return Sa.apply(this,arguments)}(M),getToken:se=>function sl(b){return xa.apply(this,arguments)}(M,se)}};(function ue(){(0,ae._registerComponent)(new Ae.wA(Q,B,"PUBLIC")),(0,ae._registerComponent)(new Ae.wA("installations-internal",F,"PRIVATE"))})(),(0,ae.registerVersion)(tr,gn),(0,ae.registerVersion)(tr,gn,"esm2017");const ie="@firebase/remote-config",Oe=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class rn{constructor(S,M,$,se){this.client=S,this.storage=M,this.storageCache=$,this.logger=se}isCachedDataFresh(S,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-M,se=$<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${se}.`),se}fetch(S){var M=this;return(0,V.Z)(function*(){const[$,se]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(se&&M.isCachedDataFresh(S.cacheMaxAgeMillis,$))return se;S.eTag=se&&se.eTag;const he=yield M.client.fetch(S),Le=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===he.status&&Le.push(M.storage.setLastSuccessfulFetchResponse(he)),yield Promise.all(Le),he})()}}function In(b=navigator){return b.languages&&b.languages[0]||b.language}class jr{constructor(S,M,$,se,he,Le){this.firebaseInstallations=S,this.sdkVersion=M,this.namespace=$,this.projectId=se,this.apiKey=he,this.appId=Le}fetch(S){var M=this;return(0,V.Z)(function*(){const[$,se]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Dt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},bt={sdk_version:M.sdkVersion,app_instance_id:$,app_instance_id_token:se,app_id:M.appId,language_code:In()},qt={method:"POST",headers:Dt,body:JSON.stringify(bt)},fn=fetch(Le,qt),an=new Promise((To,zr)=>{S.signal.addEventListener(()=>{const kc=new Error("The operation was aborted.");kc.name="AbortError",zr(kc)})});let Bs;try{yield Promise.race([fn,an]),Bs=yield fn}catch(To){let zr="fetch-client-network";throw"AbortError"===To?.name&&(zr="fetch-timeout"),Oe.create(zr,{originalErrorMessage:To?.message})}let ei=Bs.status;const xr=Bs.headers.get("ETag")||void 0;let Kd,zo;if(200===Bs.status){let To;try{To=yield Bs.json()}catch(zr){throw Oe.create("fetch-client-parse",{originalErrorMessage:zr?.message})}Kd=To.entries,zo=To.state}if("INSTANCE_STATE_UNSPECIFIED"===zo?ei=500:"NO_CHANGE"===zo?ei=304:("NO_TEMPLATE"===zo||"EMPTY_CONFIG"===zo)&&(Kd={}),304!==ei&&200!==ei)throw Oe.create("fetch-status",{httpStatus:ei});return{status:ei,eTag:xr,config:Kd}})()}}class yo{constructor(S,M){this.client=S,this.storage=M}fetch(S){var M=this;return(0,V.Z)(function*(){const $=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(S,$)})()}attemptFetch(S,{throttleEndTimeMillis:M,backoffCount:$}){var se=this;return(0,V.Z)(function*(){yield function hs(b,S){return new Promise((M,$)=>{const se=Math.max(S-Date.now(),0),he=setTimeout(M,se);b.addEventListener(()=>{clearTimeout(he),$(Oe.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,M);try{const he=yield se.client.fetch(S);return yield se.storage.deleteThrottleMetadata(),he}catch(he){if(!function ci(b){if(!(b instanceof ge.ZR&&b.customData))return!1;const S=Number(b.customData.httpStatus);return 429===S||500===S||503===S||504===S}(he))throw he;const Le={throttleEndTimeMillis:Date.now()+(0,ge.$s)($),backoffCount:$+1};return yield se.storage.setThrottleMetadata(Le),se.attemptFetch(S,Le)}})()}}class vo{constructor(S,M,$,se,he){this.app=S,this._client=M,this._storageCache=$,this._storage=se,this._logger=he,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yt(b,S){const M=b.target.error||void 0;return Oe.create(S,{originalErrorMessage:M&&M?.message})}const Rs="app_namespace_store";class wc{constructor(S,M,$,se=function li(){return new Promise((b,S)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=$=>{S(Yt($,"storage-open"))},M.onsuccess=$=>{b($.target.result)},M.onupgradeneeded=$=>{0===$.oldVersion&&$.target.result.createObjectStore(Rs,{keyPath:"compositeKey"})}}catch(M){S(Oe.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=S,this.appName=M,this.namespace=$,this.openDbPromise=se}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var M=this;return(0,V.Z)(function*(){const $=yield M.openDbPromise;return new Promise((se,he)=>{const Dt=$.transaction([Rs],"readonly").objectStore(Rs),bt=M.createCompositeKey(S);try{const qt=Dt.get(bt);qt.onerror=fn=>{he(Yt(fn,"storage-get"))},qt.onsuccess=fn=>{const an=fn.target.result;se(an?an.value:void 0)}}catch(qt){he(Oe.create("storage-get",{originalErrorMessage:qt?.message}))}})})()}set(S,M){var $=this;return(0,V.Z)(function*(){const se=yield $.openDbPromise;return new Promise((he,Le)=>{const bt=se.transaction([Rs],"readwrite").objectStore(Rs),qt=$.createCompositeKey(S);try{const fn=bt.put({compositeKey:qt,value:M});fn.onerror=an=>{Le(Yt(an,"storage-set"))},fn.onsuccess=()=>{he()}}catch(fn){Le(Oe.create("storage-set",{originalErrorMessage:fn?.message}))}})})()}delete(S){var M=this;return(0,V.Z)(function*(){const $=yield M.openDbPromise;return new Promise((se,he)=>{const Dt=$.transaction([Rs],"readwrite").objectStore(Rs),bt=M.createCompositeKey(S);try{const qt=Dt.delete(bt);qt.onerror=fn=>{he(Yt(fn,"storage-delete"))},qt.onsuccess=()=>{se()}}catch(qt){he(Oe.create("storage-delete",{originalErrorMessage:qt?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Ps{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,V.Z)(function*(){const M=S.storage.getLastFetchStatus(),$=S.storage.getLastSuccessfulFetchTimestampMillis(),se=S.storage.getActiveConfig(),he=yield M;he&&(S.lastFetchStatus=he);const Le=yield $;Le&&(S.lastSuccessfulFetchTimestampMillis=Le);const Dt=yield se;Dt&&(S.activeConfig=Dt)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Za(){return eo.apply(this,arguments)}function eo(){return(eo=(0,V.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}!function ts(){(0,ae._registerComponent)(new Ae.wA("remote-config",function b(S,{instanceIdentifier:M}){const $=S.getProvider("app").getImmediate(),se=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Oe.create("registration-window");if(!(0,ge.hl)())throw Oe.create("indexed-db-unavailable");const{projectId:he,apiKey:Le,appId:Dt}=$.options;if(!he)throw Oe.create("registration-project-id");if(!Le)throw Oe.create("registration-api-key");if(!Dt)throw Oe.create("registration-app-id");const bt=new wc(Dt,$.name,M=M||"firebase"),qt=new Ps(bt),fn=new Ue.Yd(ie);fn.logLevel=Ue.in.ERROR;const an=new jr(se,ae.SDK_VERSION,M,he,Le,Dt),Bs=new yo(an,bt),ei=new rn(Bs,bt,qt,fn),xr=new vo($,ei,qt,bt,fn);return function mr(b){const S=(0,ge.m9)(b);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(xr),xr},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(ie,"0.4.4"),(0,ae.registerVersion)(ie,"0.4.4","esm2017")}();const Xl=(b,S)=>S.some(M=>b instanceof M);let ks,Fn;const Ic=new WeakMap,Pi=new WeakMap,zi=new WeakMap,Pa=new WeakMap,Ya=new WeakMap;let Hi={get(b,S,M){if(b instanceof IDBTransaction){if("done"===S)return Pi.get(b);if("objectStoreNames"===S)return b.objectStoreNames||zi.get(b);if("store"===S)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Os(b[S])},set:(b,S,M)=>(b[S]=M,!0),has:(b,S)=>b instanceof IDBTransaction&&("done"===S||"store"===S)||S in b};function ia(b){return"function"==typeof b?function vd(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function yd(){return Fn||(Fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...S){return b.apply(fs(this),S),Os(Ic.get(this))}:function(...S){return Os(b.apply(fs(this),S))}:function(S,...M){const $=b.call(fs(this),S,...M);return zi.set($,S.sort?S.sort():[S]),Os($)}}(b):(b instanceof IDBTransaction&&function Zh(b){if(Pi.has(b))return;const S=new Promise((M,$)=>{const se=()=>{b.removeEventListener("complete",he),b.removeEventListener("error",Le),b.removeEventListener("abort",Le)},he=()=>{M(),se()},Le=()=>{$(b.error||new DOMException("AbortError","AbortError")),se()};b.addEventListener("complete",he),b.addEventListener("error",Le),b.addEventListener("abort",Le)});Pi.set(b,S)}(b),Xl(b,function _d(){return ks||(ks=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,Hi):b)}function Os(b){if(b instanceof IDBRequest)return function ui(b){const S=new Promise((M,$)=>{const se=()=>{b.removeEventListener("success",he),b.removeEventListener("error",Le)},he=()=>{M(Os(b.result)),se()},Le=()=>{$(b.error),se()};b.addEventListener("success",he),b.addEventListener("error",Le)});return S.then(M=>{M instanceof IDBCursor&&Ic.set(M,b)}).catch(()=>{}),Ya.set(S,b),S}(b);if(Pa.has(b))return Pa.get(b);const S=ia(b);return S!==b&&(Pa.set(b,S),Ya.set(S,b)),S}const fs=b=>Ya.get(b);function Qa(b,S,{blocked:M,upgrade:$,blocking:se,terminated:he}={}){const Le=indexedDB.open(b,S),Dt=Os(Le);return $&&Le.addEventListener("upgradeneeded",bt=>{$(Os(Le.result),bt.oldVersion,bt.newVersion,Os(Le.transaction))}),M&&Le.addEventListener("blocked",()=>M()),Dt.then(bt=>{he&&bt.addEventListener("close",()=>he()),se&&bt.addEventListener("versionchange",()=>se())}).catch(()=>{}),Dt}function ol(b,{blocked:S}={}){const M=indexedDB.deleteDatabase(b);return S&&M.addEventListener("blocked",()=>S()),Os(M).then(()=>{})}const Yh=["get","getKey","getAll","getAllKeys","count"],wm=["put","add","delete","clear"],wd=new Map;function Jl(b,S){if(!(b instanceof IDBDatabase)||S in b||"string"!=typeof S)return;if(wd.get(S))return wd.get(S);const M=S.replace(/FromIndex$/,""),$=S!==M,se=wm.includes(M);if(!(M in($?IDBIndex:IDBObjectStore).prototype)||!se&&!Yh.includes(M))return;const he=function(){var Le=(0,V.Z)(function*(Dt,...bt){const qt=this.transaction(Dt,se?"readwrite":"readonly");let fn=qt.store;return $&&(fn=fn.index(bt.shift())),(yield Promise.all([fn[M](...bt),se&&qt.done]))[0]});return function(bt){return Le.apply(this,arguments)}}();return wd.set(S,he),he}!function $i(b){Hi=b(Hi)}(b=>({...b,get:(S,M,$)=>Jl(S,M)||b.get(S,M,$),has:(S,M)=>!!Jl(S,M)||b.has(S,M)}));const Id="/firebase-messaging-sw.js",Qh="/firebase-cloud-messaging-push-scope",Im="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Em="https://fcmregistrations.googleapis.com/v1",Pr="google.c.a.c_id",bm="google.c.a.c_l",UI="google.c.a.ts";var eu=function(b){return b.PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",b}(eu||{});function wo(b){const S=new Uint8Array(b);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Cm(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(M),se=new Uint8Array($.length);for(let he=0;he<$.length;++he)se[he]=$.charCodeAt(he);return se}const Ec="fcm_token_details_db",bc=5,vy="fcm_token_object_Store";function Ed(){return Ed=(0,V.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(he=>he.name).includes(Ec))return null;let S=null;return(yield Qa(Ec,bc,{upgrade:($=(0,V.Z)(function*(se,he,Le,Dt){var bt;if(he<2||!se.objectStoreNames.contains(vy))return;const qt=Dt.objectStore(vy),fn=yield qt.index("fcmSenderId").get(b);if(yield qt.clear(),fn)if(2===he){const an=fn;if(!an.auth||!an.p256dh||!an.endpoint)return;S={token:an.fcmToken,createTime:null!==(bt=an.createTime)&&void 0!==bt?bt:Date.now(),subscriptionOptions:{auth:an.auth,p256dh:an.p256dh,endpoint:an.endpoint,swScope:an.swScope,vapidKey:"string"==typeof an.vapidKey?an.vapidKey:wo(an.vapidKey)}}}else if(3===he){const an=fn;S={token:an.fcmToken,createTime:an.createTime,subscriptionOptions:{auth:wo(an.auth),p256dh:wo(an.p256dh),endpoint:an.endpoint,swScope:an.swScope,vapidKey:wo(an.vapidKey)}}}else if(4===he){const an=fn;S={token:an.fcmToken,createTime:an.createTime,subscriptionOptions:{auth:wo(an.auth),p256dh:wo(an.p256dh),endpoint:an.endpoint,swScope:an.swScope,vapidKey:wo(an.vapidKey)}}}}),function(he,Le,Dt,bt){return $.apply(this,arguments)})})).close(),yield ol(Ec),yield ol("fcm_vapid_details_db"),yield ol("undefined"),function sa(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:S}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var $}),Ed.apply(this,arguments)}const ka="firebase-messaging-database",tu=1,Io="firebase-messaging-store";let Yr=null;function al(){return Yr||(Yr=Qa(ka,tu,{upgrade:(b,S)=>{0===S&&b.createObjectStore(Io)}})),Yr}function Gi(b){return cl.apply(this,arguments)}function cl(){return cl=(0,V.Z)(function*(b){const S=Td(b),$=yield(yield al()).transaction(Io).objectStore(Io).get(S);if($)return $;{const se=yield function Am(b){return Ed.apply(this,arguments)}(b.appConfig.senderId);if(se)return yield ll(b,se),se}}),cl.apply(this,arguments)}function ll(b,S){return bd.apply(this,arguments)}function bd(){return(bd=(0,V.Z)(function*(b,S){const M=Td(b),se=(yield al()).transaction(Io,"readwrite");return yield se.objectStore(Io).put(S,M),yield se.done,S})).apply(this,arguments)}function Oa(){return(Oa=(0,V.Z)(function*(b){const S=Td(b),$=(yield al()).transaction(Io,"readwrite");yield $.objectStore(Io).delete(S),yield $.done})).apply(this,arguments)}function Td({appConfig:b}){return b.appId}const Qr=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Dm(b,S){return ul.apply(this,arguments)}function ul(){return(ul=(0,V.Z)(function*(b,S){const M=yield nu(b),$=tf(S),se={method:"POST",headers:M,body:JSON.stringify($)};let he;try{he=yield(yield fetch(Cd(b.appConfig),se)).json()}catch(Le){throw Qr.create("token-subscribe-failed",{errorInfo:Le?.toString()})}if(he.error)throw Qr.create("token-subscribe-failed",{errorInfo:he.error.message});if(!he.token)throw Qr.create("token-subscribe-no-token");return he.token})).apply(this,arguments)}function Xa(){return(Xa=(0,V.Z)(function*(b,S){const M=yield nu(b),$=tf(S.subscriptionOptions),se={method:"PATCH",headers:M,body:JSON.stringify($)};let he;try{he=yield(yield fetch(`${Cd(b.appConfig)}/${S.token}`,se)).json()}catch(Le){throw Qr.create("token-update-failed",{errorInfo:Le?.toString()})}if(he.error)throw Qr.create("token-update-failed",{errorInfo:he.error.message});if(!he.token)throw Qr.create("token-update-no-token");return he.token})).apply(this,arguments)}function dl(b,S){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,V.Z)(function*(b,S){const $={method:"DELETE",headers:yield nu(b)};try{const he=yield(yield fetch(`${Cd(b.appConfig)}/${S}`,$)).json();if(he.error)throw Qr.create("token-unsubscribe-failed",{errorInfo:he.error.message})}catch(se){throw Qr.create("token-unsubscribe-failed",{errorInfo:se?.toString()})}})).apply(this,arguments)}function Cd({projectId:b}){return`${Em}/projects/${b}/registrations`}function nu(b){return ef.apply(this,arguments)}function ef(){return(ef=(0,V.Z)(function*({appConfig:b,installations:S}){const M=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function tf({p256dh:b,auth:S,endpoint:M,vapidKey:$}){const se={web:{endpoint:M,auth:S,p256dh:b}};return $!==Im&&(se.web.applicationPubKey=$),se}const wy=6048e5;function xm(){return xm=(0,V.Z)(function*(b){const S=yield function iu(b,S){return Ad.apply(this,arguments)}(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:S.endpoint,auth:wo(S.getKey("auth")),p256dh:wo(S.getKey("p256dh"))},$=yield Gi(b.firebaseDependencies);if($){if(function cf(b,S){return S.vapidKey===b.vapidKey&&S.endpoint===b.endpoint&&S.auth===b.auth&&S.p256dh===b.p256dh}($.subscriptionOptions,M))return Date.now()>=$.createTime+wy?function sf(b,S){return ru.apply(this,arguments)}(b,{token:$.token,createTime:Date.now(),subscriptionOptions:M}):$.token;try{yield dl(b.firebaseDependencies,$.token)}catch(se){console.warn(se)}return fl(b.firebaseDependencies,M)}return fl(b.firebaseDependencies,M)}),xm.apply(this,arguments)}function hl(){return hl=(0,V.Z)(function*(b){const S=yield Gi(b.firebaseDependencies);S&&(yield dl(b.firebaseDependencies,S.token),yield function Xh(b){return Oa.apply(this,arguments)}(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),hl.apply(this,arguments)}function ru(){return ru=(0,V.Z)(function*(b,S){try{const M=yield function Sm(b,S){return Xa.apply(this,arguments)}(b.firebaseDependencies,S),$=Object.assign(Object.assign({},S),{token:M,createTime:Date.now()});return yield ll(b.firebaseDependencies,$),M}catch(M){throw yield function rf(b){return hl.apply(this,arguments)}(b),M}}),ru.apply(this,arguments)}function fl(b,S){return af.apply(this,arguments)}function af(){return(af=(0,V.Z)(function*(b,S){const $={token:yield Dm(b,S),createTime:Date.now(),subscriptionOptions:S};return yield ll(b,$),$.token})).apply(this,arguments)}function Ad(){return(Ad=(0,V.Z)(function*(b,S){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Cm(S)})})).apply(this,arguments)}function su(b){const S={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function pl(b,S){if(!S.notification)return;b.notification={};const M=S.notification.title;M&&(b.notification.title=M);const $=S.notification.body;$&&(b.notification.body=$);const se=S.notification.image;se&&(b.notification.image=se);const he=S.notification.icon;he&&(b.notification.icon=he)}(S,b),function Iy(b,S){S.data&&(b.data=S.data)}(S,b),function Dd(b,S){var M,$,se,he,Le;if(!(S.fcmOptions||null!==(M=S.notification)&&void 0!==M&&M.click_action))return;b.fcmOptions={};const Dt=null!==(se=null===($=S.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==se?se:null===(he=S.notification)||void 0===he?void 0:he.click_action;Dt&&(b.fcmOptions.link=Dt);const bt=null===(Le=S.fcmOptions)||void 0===Le?void 0:Le.analytics_label;bt&&(b.fcmOptions.analyticsLabel=bt)}(S,b),S}function Sd(b,S){const M=[];for(let $=0;$<b.length;$++)M.push(b.charAt($)),$<S.length&&M.push(S.charAt($));return M.join("")}function xd(b){return Qr.create("missing-app-config-values",{valueName:b})}Sd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mm{constructor(S,M,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const se=function Ey(b){if(!b||!b.options)throw xd("App Configuration Object");if(!b.name)throw xd("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const $ of S)if(!M[$])throw xd($);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:se,installations:M,analyticsProvider:$}}_delete(){return Promise.resolve()}}function ml(){return(ml=(0,V.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Id,{scope:Qh}),b.swRegistration.update().catch(()=>{})}catch(S){throw Qr.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function Eo(){return(Eo=(0,V.Z)(function*(b,S){if(!S&&!b.swRegistration&&(yield function ou(b){return ml.apply(this,arguments)}(b)),S||!b.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Qr.create("invalid-sw-registration");b.swRegistration=S}})).apply(this,arguments)}function gl(){return(gl=(0,V.Z)(function*(b,S){S?b.vapidKey=S:b.vapidKey||(b.vapidKey=Im)})).apply(this,arguments)}function _l(){return _l=(0,V.Z)(function*(b,S){if(!navigator)throw Qr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qr.create("permission-blocked");return yield function Tc(b,S){return gl.apply(this,arguments)}(b,S?.vapidKey),yield function au(b,S){return Eo.apply(this,arguments)}(b,S?.serviceWorkerRegistration),function nf(b){return xm.apply(this,arguments)}(b)}),_l.apply(this,arguments)}function to(){return(to=(0,V.Z)(function*(b,S,M){const $=function uf(b){switch(b){case eu.NOTIFICATION_CLICKED:return"notification_open";case eu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:M[Pr],message_name:M[bm],message_time:M[UI],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xn(){return Xn=(0,V.Z)(function*(b,S){const M=S.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===eu.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(su(M)):b.onMessageHandler.next(su(M)));const $=M.data;(function Rm(b){return"object"==typeof b&&!!b&&Pr in b})($)&&"1"===$["google.c.a.e"]&&(yield function by(b,S,M){return to.apply(this,arguments)}(b,M.messageType,$))}),Xn.apply(this,arguments)}const yl="@firebase/messaging",ns=b=>{const S=new Mm(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function cu(b,S){return Xn.apply(this,arguments)}(S,M)),S},Ty=b=>{const S=b.getProvider("messaging").getImmediate();return{getToken:$=>function lf(b,S){return _l.apply(this,arguments)}(S,$)}};function Ja(){return qi.apply(this,arguments)}function qi(){return(qi=(0,V.Z)(function*(){try{yield(0,ge.eu)()}catch{return!1}return typeof window<"u"&&(0,ge.hl)()&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Rd(){(0,ae._registerComponent)(new Ae.wA("messaging",ns,"PUBLIC")),(0,ae._registerComponent)(new Ae.wA("messaging-internal",Ty,"PRIVATE")),(0,ae.registerVersion)(yl,"0.12.4"),(0,ae.registerVersion)(yl,"0.12.4","esm2017")}();const Cc="analytics",hf="firebase_id",ln="origin",uu=6e4,Ay="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",du="https://www.googletagmanager.com/gtag/js",hi=new Ue.Yd("@firebase/analytics"),Xr=new ge.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Na(b){if(!b.startsWith(du)){const S=Xr.create("invalid-gtag-resource",{gtagURL:b});return hi.warn(S.message),""}return b}function Ac(b){return Promise.all(b.map(S=>S.catch(M=>M)))}function Xe(){return(Xe=(0,V.Z)(function*(b,S,M,$,se,he){const Le=$[se];try{if(Le)yield S[Le];else{const bt=(yield Ac(M)).find(qt=>qt.measurementId===se);bt&&(yield S[bt.appId])}}catch(Dt){hi.error(Dt)}b("config",se,he)})).apply(this,arguments)}function Ns(){return(Ns=(0,V.Z)(function*(b,S,M,$,se){try{let he=[];if(se&&se.send_to){let Le=se.send_to;Array.isArray(Le)||(Le=[Le]);const Dt=yield Ac(M);for(const bt of Le){const qt=Dt.find(an=>an.measurementId===bt),fn=qt&&S[qt.appId];if(!fn){he=[];break}he.push(fn)}}0===he.length&&(he=Object.values(S)),yield Promise.all(he),b("event",$,se||{})}catch(he){hi.error(he)}})).apply(this,arguments)}const vl=30,Od=new class mf{constructor(S={},M=1e3){this.throttleMetadata=S,this.intervalMillis=M}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,M){this.throttleMetadata[S]=M}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Nm(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Nd(){return(Nd=(0,V.Z)(function*(b){var S;const{appId:M,apiKey:$}=b,se={method:"GET",headers:Nm($)},he=Ay.replace("{app-id}",M),Le=yield fetch(he,se);if(200!==Le.status&&304!==Le.status){let Dt="";try{const bt=yield Le.json();null!==(S=bt.error)&&void 0!==S&&S.message&&(Dt=bt.error.message)}catch{}throw Xr.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:Dt})}return Le.json()})).apply(this,arguments)}function Uo(){return(Uo=(0,V.Z)(function*(b,S=Od,M){const{appId:$,apiKey:se,measurementId:he}=b.options;if(!$)throw Xr.create("no-app-id");if(!se){if(he)return{measurementId:he,appId:$};throw Xr.create("no-api-key")}const Le=S.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Dt=new _f;return setTimeout((0,V.Z)(function*(){Dt.abort()}),void 0!==M?M:uu),gf({appId:$,apiKey:se,measurementId:he},Le,Dt,S)})).apply(this,arguments)}function gf(b,S,M){return nc.apply(this,arguments)}function nc(){return nc=(0,V.Z)(function*(b,{throttleEndTimeMillis:S,backoffCount:M},$,se=Od){var he;const{appId:Le,measurementId:Dt}=b;try{yield function Bo(b,S){return new Promise((M,$)=>{const se=Math.max(S-Date.now(),0),he=setTimeout(M,se);b.addEventListener(()=>{clearTimeout(he),$(Xr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}($,S)}catch(bt){if(Dt)return hi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:Le,measurementId:Dt};throw bt}try{const bt=yield function jI(b){return Nd.apply(this,arguments)}(b);return se.deleteThrottleMetadata(Le),bt}catch(bt){const qt=bt;if(!function Dy(b){if(!(b instanceof ge.ZR&&b.customData))return!1;const S=Number(b.customData.httpStatus);return 429===S||500===S||503===S||504===S}(qt)){if(se.deleteThrottleMetadata(Le),Dt)return hi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${qt?.message}]`),{appId:Le,measurementId:Dt};throw bt}const fn=503===Number(null===(he=qt?.customData)||void 0===he?void 0:he.httpStatus)?(0,ge.$s)(M,se.intervalMillis,vl):(0,ge.$s)(M,se.intervalMillis),an={throttleEndTimeMillis:Date.now()+fn,backoffCount:M+1};return se.setThrottleMetadata(Le,an),hi.debug(`Calling attemptFetch again in ${fn} millis`),gf(b,an,$,se)}}),nc.apply(this,arguments)}class _f{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let fu,no;function pu(){return(pu=(0,V.Z)(function*(b,S,M,$,se){if(se&&se.global)b("event",M,$);else{const he=yield S;b("event",M,Object.assign(Object.assign({},$),{send_to:he}))}})).apply(this,arguments)}function Jt(){return(Jt=(0,V.Z)(function*(){if(!(0,ge.hl)())return hi.warn(Xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ge.eu)()}catch(b){return hi.warn(Xr.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function dr(){return dr=(0,V.Z)(function*(b,S,M,$,se,he,Le){var Dt;const bt=function Oi(b){return Uo.apply(this,arguments)}(b);bt.then(ei=>{M[ei.measurementId]=ei.appId,b.options.measurementId&&ei.measurementId!==b.options.measurementId&&hi.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${ei.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ei=>hi.error(ei)),S.push(bt);const qt=function gr(){return Jt.apply(this,arguments)}().then(ei=>{if(ei)return $.getId()}),[fn,an]=yield Promise.all([bt,qt]);(function hu(b){const S=window.document.getElementsByTagName("script");for(const M of Object.values(S))if(M.src&&M.src.includes(du)&&M.src.includes(b))return M;return null})(he)||function Om(b,S){const M=function Pd(b,S){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(b,S)),M}("firebase-js-sdk-policy",{createScriptURL:Na}),$=document.createElement("script"),se=`${du}?l=${b}&id=${S}`;$.src=M?M?.createScriptURL(se):se,$.async=!0,document.head.appendChild($)}(he,fn.measurementId),no&&(se("consent","default",no),function fi(b){no=b}(void 0)),se("js",new Date);const Bs=null!==(Dt=Le?.config)&&void 0!==Dt?Dt:{};return Bs[ln]="firebase",Bs.update=!0,null!=an&&(Bs[hf]=an),se("config",fn.measurementId,Bs),fu&&(se("set",fu),function pi(b){fu=b}(void 0)),fn.measurementId}),dr.apply(this,arguments)}class Dc{constructor(S){this.app=S}_delete(){return delete Fs[this.app.options.appId],Promise.resolve()}}let Fs={},bo=[];const wf={};let oa,jo,rc="dataLayer",aa=!1;function If(b,S,M){!function Ls(){const b=[];if((0,ge.ru)()&&b.push("This is a browser extension environment."),(0,ge.zI)()||b.push("Cookies are not available."),b.length>0){const S=b.map(($,se)=>`(${se+1}) ${$}`).join(" "),M=Xr.create("invalid-analytics-context",{errorInfo:S});hi.warn(M.message)}}();const $=b.options.appId;if(!$)throw Xr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Xr.create("no-api-key");hi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Fs[$])throw Xr.create("already-exists",{id:$});if(!aa){!function ff(b){let S=[];Array.isArray(window[b])?S=window[b]:window[b]=S}(rc);const{wrappedGtag:he,gtagCore:Le}=function ki(b,S,M,$,se){let he=function(...Le){window[$].push(arguments)};return window[se]&&"function"==typeof window[se]&&(he=window[se]),window[se]=function kd(b,S,M,$){function he(){return he=(0,V.Z)(function*(Le,...Dt){try{if("event"===Le){const[bt,qt]=Dt;yield function Gn(b,S,M,$,se){return Ns.apply(this,arguments)}(b,S,M,bt,qt)}else if("config"===Le){const[bt,qt]=Dt;yield function pf(b,S,M,$,se,he){return Xe.apply(this,arguments)}(b,S,M,$,bt,qt)}else if("consent"===Le){const[bt]=Dt;b("consent","update",bt)}else if("get"===Le){const[bt,qt,fn]=Dt;b("get",bt,qt,fn)}else if("set"===Le){const[bt]=Dt;b("set",bt)}else b(Le,...Dt)}catch(bt){hi.error(bt)}}),he.apply(this,arguments)}return function se(Le){return he.apply(this,arguments)}}(he,b,S,M),{gtagCore:he,wrappedGtag:window[se]}}(Fs,bo,wf,rc,"gtag");jo=he,oa=Le,aa=!0}return Fs[$]=function _r(b,S,M,$,se,he,Le){return dr.apply(this,arguments)}(b,bo,wf,S,oa,rc,M),new Dc(b)}function Ef(){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,V.Z)(function*(){if((0,ge.ru)()||!(0,ge.zI)()||!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}const Il="@firebase/analytics";!function jd(){(0,ae._registerComponent)(new Ae.wA(Cc,(S,{options:M})=>If(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new Ae.wA("analytics-internal",function b(S){try{const M=S.getProvider(Cc).getImmediate();return{logEvent:($,se,he)=>function Tf(b,S,M,$){b=(0,ge.m9)(b),function Sy(b,S,M,$,se){return pu.apply(this,arguments)}(jo,Fs[b.app.options.appId],S,M,$).catch(se=>hi.error(se))}(M,$,se,he)}}catch(M){throw Xr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Il,"0.10.0"),(0,ae.registerVersion)(Il,"0.10.0","esm2017")}();var gu=j(1954),bl=j(2631);const Lm=new class Fm extends bl.v{}(class _u extends gu.o{constructor(S,M){super(S,M),this.scheduler=S,this.work=M}schedule(S,M=0){return M>0?super.schedule(S,M):(this.delay=M,this.state=S,this.scheduler.flush(this),this)}execute(S,M){return M>0||this.closed?super.execute(S,M):this._execute(S,M)}requestAsyncId(S,M,$=0){return null!=$&&$>0||null==$&&this.delay>0?super.requestAsyncId(S,M,$):(S.flush(this),0)}});var Vm=j(6321),Us=j(5592),zd=j(9397),ro=j(3093),Mc=j(5137);const vu=new u.GfV("7.6.1"),ic="__angularfire_symbol__analyticsIsSupportedValue",Tl="__angularfire_symbol__analyticsIsSupported",Hd="__angularfire_symbol__remoteConfigIsSupportedValue",wu="__angularfire_symbol__remoteConfigIsSupported",$d="__angularfire_symbol__messagingIsSupportedValue",Iu="__angularfire_symbol__messagingIsSupported";function qd(b,S,M){if(S){if(1===S.length)return S[0];const he=S.filter(Le=>Le.app===M);if(1===he.length)return he[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[Tl]||(globalThis[Tl]=Ef().then(b=>globalThis[ic]=b).catch(()=>globalThis[ic]=!1)),globalThis[Iu]||(globalThis[Iu]=Ja().then(b=>globalThis[$d]=b).catch(()=>globalThis[$d]=!1)),globalThis[wu]||(globalThis[wu]=Za().then(b=>globalThis[Hd]=b).catch(()=>globalThis[Hd]=!1));const Um=(b,S)=>{const M=S?[S]:(0,K.C6)(),$=[];return M.forEach(se=>{se.container.getProvider(b).instances.forEach(Le=>{$.includes(Le)||$.push(Le)})}),$};function oc(){}class ac{constructor(S,M=Lm){this.zone=S,this.delegate=M}now(){return this.delegate.now()}schedule(S,M,$){const se=this.zone;return this.delegate.schedule(function(Le){se.runGuarded(()=>{S.apply(this,[Le])})},M,$)}}class Af{constructor(S){this.zone=S,this.task=null}call(S,M){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oc,{},oc,oc)),M.pipe((0,zd.b)({next:$,complete:$,error:$})).subscribe(S).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Jr=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ac(Zone.current)),this.insideAngular=M.run(()=>new ac(Zone.current,Vm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(u.LFG(u.R0b))},b.\u0275prov=u.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function cc(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function la(b){return cc().ngZone.run(()=>b())}function Df(b){return b.pipe((0,ro.Q)(cc().outsideAngular))}function Eu(b){return cc(),function Pc(b){return function(M){return(M=M.lift(new Af(b.ngZone))).pipe((0,Mc.R)(b.outsideAngular),(0,ro.Q)(b.insideAngular))}}(cc())(b)}const Al=(b,S)=>function(){const $=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),la(()=>b.apply(void 0,$))},rs=(b,S)=>function(){let M;const $=arguments;for(let he=0;he<arguments.length;he++)"function"==typeof $[he]&&(S&&(M||(M=la(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oc,{},oc,oc)))),$[he]=Al($[he],M));const se=function Wd(b){return cc().ngZone.runOutsideAngular(()=>b())}(()=>b.apply(this,$));if(!S){if(se instanceof Us.y){const he=cc();return se.pipe((0,Mc.R)(he.outsideAngular),(0,ro.Q)(he.insideAngular))}return la(()=>se)}return se instanceof Us.y?se.pipe(Eu):se instanceof Promise?la(()=>new Promise((he,Le)=>se.then(Dt=>la(()=>he(Dt)),Dt=>la(()=>Le(Dt))))):"function"==typeof se&&M?function(){return setTimeout(()=>{M&&"scheduled"===M.state&&M.invoke()},10),se.apply(this,arguments)}:la(()=>se)}},6710:(Vt,je,j)=>{"use strict";j.d(je,{$:()=>Id,A:()=>re,D:()=>Ye,I:()=>Zl,J:()=>B,L:()=>yt,N:()=>jt,P:()=>_r,Q:()=>wc,R:()=>yf,U:()=>Ql,V:()=>Za,W:()=>eo,X:()=>Ma,Y:()=>_d,Z:()=>yd,_:()=>Ya,a:()=>lu,a0:()=>Im,a1:()=>Pr,a2:()=>BI,a3:()=>vy,a4:()=>Ed,a5:()=>ka,a6:()=>Io,a7:()=>al,a8:()=>cl,a9:()=>bd,aA:()=>X,aB:()=>Tl,aC:()=>ct,aD:()=>yn,aE:()=>zd,aF:()=>Rc,aG:()=>bf,aH:()=>Sr,aL:()=>tc,aO:()=>ks,aa:()=>Xh,ab:()=>Td,ac:()=>Jh,ad:()=>Sm,ae:()=>dl,af:()=>Cd,ai:()=>wy,aj:()=>xm,ak:()=>rf,an:()=>vd,ao:()=>pl,aq:()=>gl,ar:()=>yl,as:()=>ht,at:()=>At,au:()=>Ze,av:()=>me,aw:()=>an,ax:()=>Iu,ay:()=>$n,az:()=>$e,b:()=>Md,c:()=>jo,d:()=>If,e:()=>xc,f:()=>Il,g:()=>Fm,h:()=>gu,i:()=>Vo,j:()=>Vm,k:()=>zo,l:()=>Wi,m:()=>kc,p:()=>We,r:()=>Fa,s:()=>$t,u:()=>gr});var u=j(5861),K=j(9058),V=j(7592),ae=j(7582),ge=j(7879),Ae=j(4537);const We={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},re={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ye=function pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},mt=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Qe=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ke=new ge.Yd("@firebase/auth");function Ft(E,...g){ke.logLevel<=ge.in.ERROR&&ke.error(`Auth (${V.SDK_VERSION}): ${E}`,...g)}function me(E,...g){throw Je(E,...g)}function $e(E,...g){return Je(E,...g)}function ye(E,g,y){const T=Object.assign(Object.assign({},mt()),{[g]:y});return new K.LL("auth","Firebase",T).create(g,{appName:E.name})}function Fe(E,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&me(E,"argument-error"),ye(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(E,...g){if("string"!=typeof E){const y=g[0],T=[...g.slice(1)];return T[0]&&(T[0].appName=E.name),E._errorFactory.create(y,...T)}return Qe.create(E,...g)}function X(E,g,...y){if(!E)throw Je(g,...y)}function Ke(E){const g="INTERNAL ASSERTION FAILED: "+E;throw Ft(g),new Error(g)}function ht(E,g){E||Ke(g)}function Ht(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function bn(){return"http:"===Qn()||"https:"===Qn()}function Qn(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Zn{constructor(g,y){this.shortDelay=g,this.longDelay=y,ht(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function tr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bn()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wr(E,g){ht(E.emulator,"Emulator should always be set here");const{url:y}=E.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class _e{static initialize(g,y,T){this.fetchImpl=g,y&&(this.headersImpl=y),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const be={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Te=new Zn(3e4,6e4);function ve(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function ze(E,g,y,T){return at.apply(this,arguments)}function at(){return(at=(0,u.Z)(function*(E,g,y,T,P={}){return wt(E,P,(0,u.Z)(function*(){let L={},ce={};T&&("GET"===g?ce=T:L={body:JSON.stringify(T)});const Ce=(0,K.xO)(Object.assign({key:E.config.apiKey},ce)).slice(1),xe=yield E._getAdditionalHeaders();return xe["Content-Type"]="application/json",E.languageCode&&(xe["X-Firebase-Locale"]=E.languageCode),_e.fetch()(Tn(E,E.config.apiHost,y,Ce),Object.assign({method:g,headers:xe,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function wt(E,g,y){return gt.apply(this,arguments)}function gt(){return(gt=(0,u.Z)(function*(E,g,y){E._canInitEmulator=!1;const T=Object.assign(Object.assign({},be),g);try{const P=new Bt(E),L=yield Promise.race([y(),P.promise]);P.clearNetworkTimeout();const ce=yield L.json();if("needConfirmation"in ce)throw qn(E,"account-exists-with-different-credential",ce);if(L.ok&&!("errorMessage"in ce))return ce;{const Ce=L.ok?ce.errorMessage:ce.error.message,[xe,Et]=Ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw qn(E,"credential-already-in-use",ce);if("EMAIL_EXISTS"===xe)throw qn(E,"email-already-in-use",ce);if("USER_DISABLED"===xe)throw qn(E,"user-disabled",ce);const It=T[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw ye(E,It,Et);me(E,It)}}catch(P){if(P instanceof K.ZR)throw P;me(E,"network-request-failed",{message:String(P)})}})).apply(this,arguments)}function Vn(E,g,y,T){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,u.Z)(function*(E,g,y,T,P={}){const L=yield ze(E,g,y,T,P);return"mfaPendingCredential"in L&&me(E,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Tn(E,g,y,T){const P=`${g}${y}?${T}`;return E.config.emulator?Wr(E.config,P):`${E.config.apiScheme}://${P}`}class Bt{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,T)=>{this.timer=setTimeout(()=>T($e(this.auth,"network-request-failed")),Te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(E,g,y){const T={appName:E.name};y.email&&(T.email=y.email),y.phoneNumber&&(T.phoneNumber=y.phoneNumber);const P=$e(E,g,T);return P.customData._tokenResponse=y,P}function or(){return(or=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function br(){return(br=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Vr(){return(Vr=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function cr(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Ji(){return(Ji=(0,u.Z)(function*(E,g=!1){const y=(0,K.m9)(E),T=yield y.getIdToken(g),P=Xt(T);X(P&&P.exp&&P.auth_time&&P.iat,y.auth,"internal-error");const L="object"==typeof P.firebase?P.firebase:void 0,ce=L?.sign_in_provider;return{claims:P,token:T,authTime:cr(Wt(P.auth_time)),issuedAtTime:cr(Wt(P.iat)),expirationTime:cr(Wt(P.exp)),signInProvider:ce||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function Wt(E){return 1e3*Number(E)}function Xt(E){const[g,y,T]=E.split(".");if(void 0===g||void 0===y||void 0===T)return Ft("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,K.tV)(y);return P?JSON.parse(P):(Ft("Failed to decode base64 JWT payload"),null)}catch(P){return Ft("Caught error parsing JWT payload as JSON",P?.toString()),null}}function Sn(E,g){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(E,g,y=!1){if(y)return g;try{return yield g}catch(T){throw T instanceof K.ZR&&function Rr({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(T)&&E.auth.currentUser===E&&(yield E.auth.signOut()),T}})).apply(this,arguments)}class pn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const P=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const T=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),T)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class lr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=cr(this.lastLoginAt),this.creationTime=cr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bi(E){return Nt.apply(this,arguments)}function Nt(){return Nt=(0,u.Z)(function*(E){var g;const y=E.auth,T=yield E.getIdToken(),P=yield Sn(E,function Ii(E,g){return Vr.apply(this,arguments)}(y,{idToken:T}));X(P?.users.length,y,"internal-error");const L=P.users[0];E._notifyReloadListener(L);const ce=null!==(g=L.providerUserInfo)&&void 0!==g&&g.length?function es(E){return E.map(g=>{var{providerId:y}=g,T=(0,ae._T)(g,["providerId"]);return{providerId:y,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(L.providerUserInfo):[],Ce=function Wn(E,g){return[...E.filter(T=>!g.some(P=>P.providerId===T.providerId)),...g]}(E.providerData,ce),It=!!E.isAnonymous&&!(E.email&&L.passwordHash||Ce?.length),hn={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Ce,metadata:new lr(L.createdAt,L.lastLoginAt),isAnonymous:It};Object.assign(E,hn)}),Nt.apply(this,arguments)}function _n(){return(_n=(0,u.Z)(function*(E){const g=(0,K.m9)(E);yield Bi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Hn(){return(Hn=(0,u.Z)(function*(E,g){const y=yield wt(E,{},(0,u.Z)(function*(){const T=(0,K.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:P,apiKey:L}=E.config,ce=Tn(E,P,"/v1/token",`key=${L}`),Ce=yield E._getAdditionalHeaders();return Ce["Content-Type"]="application/x-www-form-urlencoded",_e.fetch()(ce,{method:"POST",headers:Ce,body:T})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){X(g.idToken,"internal-error"),X(typeof g.idToken<"u","internal-error"),X(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function un(E){const g=Xt(E);return X(g,"internal-error"),X(typeof g.exp<"u","internal-error"),X(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var T=this;return(0,u.Z)(function*(){return X(!T.accessToken||T.refreshToken,g,"user-token-expired"),y||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(g,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var T=this;return(0,u.Z)(function*(){const{accessToken:P,refreshToken:L,expiresIn:ce}=yield function ai(E,g){return Hn.apply(this,arguments)}(g,y);T.updateTokensAndExpiration(P,L,Number(ce))})()}updateTokensAndExpiration(g,y,T){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(g,y){const{refreshToken:T,accessToken:P,expirationTime:L}=y,ce=new Dr;return T&&(X("string"==typeof T,"internal-error",{appName:g}),ce.refreshToken=T),P&&(X("string"==typeof P,"internal-error",{appName:g}),ce.accessToken=P),L&&(X("number"==typeof L,"internal-error",{appName:g}),ce.expirationTime=L),ce}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Dr,this.toJSON())}_performRefresh(){return Ke("not implemented")}}function Se(E,g){X("string"==typeof E||typeof E>"u","internal-error",{appName:g})}class J{constructor(g){var{uid:y,auth:T,stsTokenManager:P}=g,L=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=T,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new lr(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,u.Z)(function*(){const T=yield Sn(y,y.stsTokenManager.getToken(y.auth,g));return X(T,y.auth,"internal-error"),y.accessToken!==T&&(y.accessToken=T,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),T})()}getIdTokenResult(g){return function Br(E){return Ji.apply(this,arguments)}(this,g)}reload(){return function oi(E){return _n.apply(this,arguments)}(this)}_assign(g){this!==g&&(X(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const y=new J(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(g){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var T=this;return(0,u.Z)(function*(){let P=!1;g.idToken&&g.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(g),P=!0),y&&(yield Bi(T)),yield T.auth._persistUserIfCurrent(T),P&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var g=this;return(0,u.Z)(function*(){const y=yield g.getIdToken();return yield Sn(g,function vr(E,g){return or.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var T,P,L,ce,Ce,xe,Et,It;const hn=null!==(T=y.displayName)&&void 0!==T?T:void 0,ps=null!==(P=y.email)&&void 0!==P?P:void 0,da=null!==(L=y.phoneNumber)&&void 0!==L?L:void 0,Tu=null!==(ce=y.photoURL)&&void 0!==ce?ce:void 0,ky=null!==(Ce=y.tenantId)&&void 0!==Ce?Ce:void 0,xf=null!==(xe=y._redirectEventId)&&void 0!==xe?xe:void 0,Sl=null!==(Et=y.createdAt)&&void 0!==Et?Et:void 0,xl=null!==(It=y.lastLoginAt)&&void 0!==It?It:void 0,{uid:zm,emailVerified:zI,isAnonymous:Hm,providerData:$m,stsTokenManager:Ve}=y;X(zm&&Ve,g,"internal-error");const Oy=Dr.fromJSON(this.name,Ve);X("string"==typeof zm,g,"internal-error"),Se(hn,g.name),Se(ps,g.name),X("boolean"==typeof zI,g,"internal-error"),X("boolean"==typeof Hm,g,"internal-error"),Se(da,g.name),Se(Tu,g.name),Se(ky,g.name),Se(xf,g.name),Se(Sl,g.name),Se(xl,g.name);const Rf=new J({uid:zm,auth:g,email:ps,emailVerified:zI,displayName:hn,isAnonymous:Hm,photoURL:Tu,phoneNumber:da,tenantId:ky,stsTokenManager:Oy,createdAt:Sl,lastLoginAt:xl});return $m&&Array.isArray($m)&&(Rf.providerData=$m.map(HI=>Object.assign({},HI))),xf&&(Rf._redirectEventId=xf),Rf}static _fromIdTokenResponse(g,y,T=!1){return(0,u.Z)(function*(){const P=new Dr;P.updateFromServerResponse(y);const L=new J({uid:y.localId,auth:g,stsTokenManager:P,isAnonymous:T});return yield Bi(L),L})()}}const Ie=new Map;function ct(E){ht(E instanceof Function,"Expected a class definition");let g=Ie.get(E);return g?(ht(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,Ie.set(E,g),g)}const jt=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,T){var P=this;return(0,u.Z)(function*(){P.storage[y]=T})()}_get(y){var T=this;return(0,u.Z)(function*(){const P=T.storage[y];return void 0===P?null:P})()}_remove(y){var T=this;return(0,u.Z)(function*(){delete T.storage[y]})()}_addListener(y,T){}_removeListener(y,T){}}return E.type="NONE",E})();function yn(E,g,y){return`firebase:${E}:${g}:${y}`}class ee{constructor(g,y,T){this.persistence=g,this.auth=y,this.userKey=T;const{config:P,name:L}=this.auth;this.fullUserKey=yn(this.userKey,P.apiKey,L),this.fullPersistenceKey=yn("persistence",P.apiKey,L),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?J._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,u.Z)(function*(){if(y.persistence===g)return;const T=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,T?y.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,T="authUser"){return(0,u.Z)(function*(){if(!y.length)return new ee(ct(jt),g,T);const P=(yield Promise.all(y.map(function(){var Et=(0,u.Z)(function*(It){if(yield It._isAvailable())return It});return function(It){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let L=P[0]||ct(jt);const ce=yn(T,g.config.apiKey,g.name);let Ce=null;for(const Et of y)try{const It=yield Et._get(ce);if(It){const hn=J._fromJSON(g,It);Et!==L&&(Ce=hn),L=Et;break}}catch{}const xe=P.filter(Et=>Et._shouldAllowMigration);return L._shouldAllowMigration&&xe.length?(L=xe[0],Ce&&(yield L._set(ce,Ce.toJSON())),yield Promise.all(y.map(function(){var Et=(0,u.Z)(function*(It){if(It!==L)try{yield It._remove(ce)}catch{}});return function(It){return Et.apply(this,arguments)}}())),new ee(L,g,T)):new ee(L,g,T)})()}}function W(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(de(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(z(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(_t(g))return"Blackberry";if(cn(g))return"Webos";if(H(g))return"Safari";if((g.includes("chrome/")||U(g))&&!g.includes("edge/"))return"Chrome";if(Ze(g))return"Android";{const T=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function z(E=(0,K.z$)()){return/firefox\//i.test(E)}function H(E=(0,K.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function U(E=(0,K.z$)()){return/crios\//i.test(E)}function de(E=(0,K.z$)()){return/iemobile/i.test(E)}function Ze(E=(0,K.z$)()){return/android/i.test(E)}function _t(E=(0,K.z$)()){return/blackberry/i.test(E)}function cn(E=(0,K.z$)()){return/webos/i.test(E)}function At(E=(0,K.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function $n(E=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function dn(E=(0,K.z$)()){return At(E)||Ze(E)||cn(E)||_t(E)||/windows phone/i.test(E)||de(E)}function po(E,g=[]){let y;switch(E){case"Browser":y=W((0,K.z$)());break;case"Worker":y=`${W((0,K.z$)())}-${E}`;break;default:y=E}const T=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${V.SDK_VERSION}/${T}`}function Cs(){return(Cs=(0,u.Z)(function*(E){return(yield ze(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function As(E,g){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,u.Z)(function*(E,g){return ze(E,"GET","/v2/recaptchaConfig",ve(E,g))})).apply(this,arguments)}function On(E){return void 0!==E&&void 0!==E.getResponse}function Ds(E){return void 0!==E&&void 0!==E.enterprise}class Da{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function vc(E){return new Promise((g,y)=>{const T=document.createElement("script");T.setAttribute("src",E),T.onload=g,T.onerror=P=>{const L=$e("internal-error");L.customData=P,y(L)},T.type="text/javascript",T.charset="UTF-8",function Ss(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(T)})}function go(E){return`__${E}${Math.floor(1e6*Math.random())}`}class xa{constructor(g){this.type="recaptcha-enterprise",this.auth=Sr(g)}verify(g="verify",y=!1){var T=this;return(0,u.Z)(function*(){function L(){return L=(0,u.Z)(function*(Ce){if(!y){if(null==Ce.tenantId&&null!=Ce._agentRecaptchaConfig)return Ce._agentRecaptchaConfig.siteKey;if(null!=Ce.tenantId&&void 0!==Ce._tenantRecaptchaConfigs[Ce.tenantId])return Ce._tenantRecaptchaConfigs[Ce.tenantId].siteKey}return new Promise(function(){var xe=(0,u.Z)(function*(Et,It){As(Ce,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(hn=>{if(void 0!==hn.recaptchaKey){const ps=new Da(hn);return null==Ce.tenantId?Ce._agentRecaptchaConfig=ps:Ce._tenantRecaptchaConfigs[Ce.tenantId]=ps,Et(ps.siteKey)}It(new Error("recaptcha Enterprise site key undefined"))}).catch(hn=>{It(hn)})});return function(Et,It){return xe.apply(this,arguments)}}())}),L.apply(this,arguments)}function ce(Ce,xe,Et){const It=window.grecaptcha;Ds(It)?It.enterprise.ready(()=>{It.enterprise.execute(Ce,{action:g}).then(hn=>{xe(hn)}).catch(()=>{xe("NO_RECAPTCHA")})}):Et(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ce,xe)=>{(function P(Ce){return L.apply(this,arguments)})(T.auth).then(Et=>{if(!y&&Ds(window.grecaptcha))ce(Et,Ce,xe);else{if(typeof window>"u")return void xe(new Error("RecaptchaVerifier is only supported in browser"));vc("https://www.google.com/recaptcha/enterprise.js?render="+Et).then(()=>{ce(Et,Ce,xe)}).catch(It=>{xe(It)})}}).catch(Et=>{xe(Et)})})})()}}function _o(E,g,y){return na.apply(this,arguments)}function na(){return(na=(0,u.Z)(function*(E,g,y,T=!1){const P=new xa(E);let L;try{L=yield P.verify(y)}catch{L=yield P.verify(y,!0)}const ce=Object.assign({},g);return Object.assign(ce,T?{captchaResp:L}:{captchaResponse:L}),Object.assign(ce,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ce,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ce})).apply(this,arguments)}class Ka{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const T=L=>new Promise((ce,Ce)=>{try{ce(g(L))}catch(xe){Ce(xe)}});T.onAbort=y,this.queue.push(T);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,u.Z)(function*(){if(y.auth.currentUser===g)return;const T=[];try{for(const P of y.queue)yield P(g),P.onAbort&&T.push(P.onAbort)}catch(P){T.reverse();for(const L of T)try{L()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:P?.message})}})()}}class ra{constructor(g,y,T,P){this.app=g,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=T,this.config=P,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wh(this),this.idTokenSubscription=new Wh(this),this.beforeStateQueue=new Ka(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=P.sdkClientVersion}_initializeWithPersistence(g,y){var T=this;return y&&(this._popupRedirectResolver=ct(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var P,L;if(!T._deleted&&(T.persistenceManager=yield ee.create(T,g),!T._deleted)){if(null!==(P=T._popupRedirectResolver)&&void 0!==P&&P._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(y),T.lastNotifiedUid=(null===(L=T.currentUser)||void 0===L?void 0:L.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,u.Z)(function*(){var T;const P=yield y.assertedPersistence.getCurrentUser();let L=P,ce=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Ce=null===(T=y.redirectUser)||void 0===T?void 0:T._redirectEventId,xe=L?._redirectEventId,Et=yield y.tryRedirectSignIn(g);(!Ce||Ce===xe)&&Et?.user&&(L=Et.user,ce=!0)}if(!L)return y.directlySetCurrentUser(null);if(!L._redirectEventId){if(ce)try{yield y.beforeStateQueue.runMiddleware(L)}catch(Ce){L=P,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Ce))}return L?y.reloadAndSetCurrentUserOrClear(L):y.directlySetCurrentUser(null)}return X(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===L._redirectEventId?y.directlySetCurrentUser(L):y.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(g){var y=this;return(0,u.Z)(function*(){let T=null;try{T=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,u.Z)(function*(){try{yield Bi(g)}catch(T){if("auth/network-request-failed"!==T?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function gn(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){const T=g?(0,K.m9)(g):null;return T&&X(T.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(T&&T._clone(y))})()}_updateCurrentUser(g,y=!1){var T=this;return(0,u.Z)(function*(){if(!T._deleted)return g&&X(T.tenantId===g.tenantId,T,"tenant-id-mismatch"),y||(yield T.beforeStateQueue.runMiddleware(g)),T.queue((0,u.Z)(function*(){yield T.directlySetCurrentUser(g),T.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(ct(g))}))}initializeRecaptchaConfig(){var g=this;return(0,u.Z)(function*(){const y=yield As(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new Da(y);null==g.tenantId?g._agentRecaptchaConfig=T:g._tenantRecaptchaConfigs[g.tenantId]=T,T.emailPasswordEnabled&&new xa(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new K.LL("auth","Firebase",g())}onAuthStateChanged(g,y,T){return this.registerStateListener(this.authStateSubscription,g,y,T)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,T){return this.registerStateListener(this.idTokenSubscription,g,y,T)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var T=this;return(0,u.Z)(function*(){const P=yield T.getOrInitRedirectPersistenceManager(y);return null===g?P.removeCurrentUser():P.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const T=g&&ct(g)||y._popupRedirectResolver;X(T,y,"argument-error"),y.redirectPersistenceManager=yield ee.create(y,[ct(T._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,u.Z)(function*(){var T,P;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(T=y._currentUser)||void 0===T?void 0:T._redirectEventId)===g?y._currentUser:(null===(P=y.redirectUser)||void 0===P?void 0:P._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,u.Z)(function*(){if(g===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,T,P){if(this._deleted)return()=>{};const L="function"==typeof y?y:y.next.bind(y),ce=this._isInitialized?Promise.resolve():this._initializationPromise;return X(ce,this,"internal-error"),ce.then(()=>L(this.currentUser)),"function"==typeof y?g.addObserver(y,T,P):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=po(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var y;const T={"X-Client-Version":g.clientVersion};g.app.options.appId&&(T["X-Firebase-gmpid"]=g.app.options.appId);const P=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();P&&(T["X-Firebase-Client"]=P);const L=yield g._getAppCheckToken();return L&&(T["X-Firebase-AppCheck"]=L),T})()}_getAppCheckToken(){var g=this;return(0,u.Z)(function*(){var y;const T=yield null===(y=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return T?.error&&function Ut(E,...g){ke.logLevel<=ge.in.WARN&&ke.warn(`Auth (${V.SDK_VERSION}): ${E}`,...g)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function Sr(E){return(0,K.m9)(E)}class Wh{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,K.ne)(y=>this.observer=y)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zl(E,g,y){const T=Sr(E);X(T._canInitEmulator,T,"emulator-config-failed"),X(/^https?:\/\//.test(g),T,"invalid-emulator-scheme");const P=!!y?.disableWarnings,L=ji(g),{host:ce,port:Ce}=function Ra(E){const g=ji(E),y=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!y)return{host:"",port:null};const T=y[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(T);if(P){const L=P[1];return{host:L,port:Q(T.substr(L.length+1))}}{const[L,ce]=T.split(":");return{host:L,port:Q(ce)}}}(g);T.config.emulator={url:`${L}//${ce}${null===Ce?"":`:${Ce}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:ce,port:Ce,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function k(){function E(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function ji(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function Q(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class B{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return Ke("not implemented")}_getIdTokenResponse(g){return Ke("not implemented")}_linkToIdToken(g,y){return Ke("not implemented")}_getReauthenticationResolver(g){return Ke("not implemented")}}function F(E,g){return ue.apply(this,arguments)}function ue(){return(ue=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:resetPassword",ve(E,g))})).apply(this,arguments)}function ie(E,g){return le.apply(this,arguments)}function le(){return(le=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function it(){return(it=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:update",ve(E,g))})).apply(this,arguments)}function et(E,g){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,u.Z)(function*(E,g){return Vn(E,"POST","/v1/accounts:signInWithPassword",ve(E,g))})).apply(this,arguments)}function He(E,g){return ut.apply(this,arguments)}function ut(){return(ut=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:sendOobCode",ve(E,g))})).apply(this,arguments)}function Cn(){return(Cn=(0,u.Z)(function*(E,g){return He(E,g)})).apply(this,arguments)}function ar(E,g){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,u.Z)(function*(E,g){return He(E,g)})).apply(this,arguments)}function wr(E,g){return en.apply(this,arguments)}function en(){return(en=(0,u.Z)(function*(E,g){return He(E,g)})).apply(this,arguments)}function mr(){return(mr=(0,u.Z)(function*(E,g){return He(E,g)})).apply(this,arguments)}function ot(){return(ot=(0,u.Z)(function*(E,g){return Vn(E,"POST","/v1/accounts:signInWithEmailLink",ve(E,g))})).apply(this,arguments)}function Mr(){return(Mr=(0,u.Z)(function*(E,g){return Vn(E,"POST","/v1/accounts:signInWithEmailLink",ve(E,g))})).apply(this,arguments)}class Zr extends B{constructor(g,y,T,P=null){super("password",T),this._email=g,this._password=y,this._tenantId=P}static _fromEmailAndPassword(g,y){return new Zr(g,y,"password")}static _fromEmailAndCode(g,y,T=null){return new Zr(g,y,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,u.Z)(function*(){var T;switch(y.signInMethod){case"password":const P={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=g._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const L=yield _o(g,P,"signInWithPassword");return et(g,L)}return et(g,P).catch(function(){var L=(0,u.Z)(function*(ce){if("auth/missing-recaptcha-token"===ce.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ce=yield _o(g,P,"signInWithPassword");return et(g,Ce)}return Promise.reject(ce)});return function(ce){return L.apply(this,arguments)}}());case"emailLink":return function Kr(E,g){return ot.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:me(g,"internal-error")}})()}_linkToIdToken(g,y){var T=this;return(0,u.Z)(function*(){switch(T.signInMethod){case"password":return ie(g,{idToken:y,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Yn(E,g){return Mr.apply(this,arguments)}(g,{idToken:y,email:T._email,oobCode:T._password});default:me(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function bi(E,g){return ds.apply(this,arguments)}function ds(){return(ds=(0,u.Z)(function*(E,g){return Vn(E,"POST","/v1/accounts:signInWithIdp",ve(E,g))})).apply(this,arguments)}class yt extends B{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new yt(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):me("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:P}=y,L=(0,ae._T)(y,["providerId","signInMethod"]);if(!T||!P)return null;const ce=new yt(T,P);return ce.idToken=L.idToken||void 0,ce.accessToken=L.accessToken||void 0,ce.secret=L.secret,ce.nonce=L.nonce,ce.pendingToken=L.pendingToken||null,ce}_getIdTokenResponse(g){return bi(g,this.buildRequest())}_linkToIdToken(g,y){const T=this.buildRequest();return T.idToken=y,bi(g,T)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,bi(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,K.xO)(y)}return g}}function In(){return(In=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:sendVerificationCode",ve(E,g))})).apply(this,arguments)}function hs(){return(hs=(0,u.Z)(function*(E,g){return Vn(E,"POST","/v1/accounts:signInWithPhoneNumber",ve(E,g))})).apply(this,arguments)}function yo(){return(yo=(0,u.Z)(function*(E,g){const y=yield Vn(E,"POST","/v1/accounts:signInWithPhoneNumber",ve(E,g));if(y.temporaryProof)throw qn(E,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const ur={USER_NOT_FOUND:"user-not-found"};function vo(){return(vo=(0,u.Z)(function*(E,g){return Vn(E,"POST","/v1/accounts:signInWithPhoneNumber",ve(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),ur)})).apply(this,arguments)}class Yt extends B{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Yt({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Yt({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function jr(E,g){return hs.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function ci(E,g){return yo.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Js(E,g){return vo.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:T,verificationCode:P}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:T,code:P}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:T,phoneNumber:P,temporaryProof:L}=g;return T||y||P||L?new Yt({verificationId:y,verificationCode:T,phoneNumber:P,temporaryProof:L}):null}}class Ms{constructor(g){var y,T,P,L,ce,Ce;const xe=(0,K.zd)((0,K.pd)(g)),Et=null!==(y=xe.apiKey)&&void 0!==y?y:null,It=null!==(T=xe.oobCode)&&void 0!==T?T:null,hn=function Rs(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=xe.mode)&&void 0!==P?P:null);X(Et&&It&&hn,"argument-error"),this.apiKey=Et,this.operation=hn,this.code=It,this.continueUrl=null!==(L=xe.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(ce=xe.languageCode)&&void 0!==ce?ce:null,this.tenantId=null!==(Ce=xe.tenantId)&&void 0!==Ce?Ce:null}static parseLink(g){const y=function Yl(E){const g=(0,K.zd)((0,K.pd)(E)).link,y=g?(0,K.zd)((0,K.pd)(g)).deep_link_id:null,T=(0,K.zd)((0,K.pd)(E)).deep_link_id;return(T?(0,K.zd)((0,K.pd)(T)).link:null)||T||y||g||E}(g);try{return new Ms(y)}catch{return null}}}let wc=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(y,T){return Zr._fromEmailAndPassword(y,T)}static credentialWithLink(y,T){const P=Ms.parseLink(T);return X(P,"argument-error"),Zr._fromEmailAndCode(y,P.code,P.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Ps{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ts extends Ps{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ma extends ts{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return X("providerId"in y&&"signInMethod"in y,"argument-error"),yt._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return X(g.idToken||g.accessToken,"argument-error"),yt._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ma.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ma.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:T,oauthTokenSecret:P,pendingToken:L,nonce:ce,providerId:Ce}=g;if(!T&&!P&&!y&&!L||!Ce)return null;try{return new Ma(Ce)._credential({idToken:y,accessToken:T,nonce:ce,pendingToken:L})}catch{return null}}}let Ql=(()=>{class E extends ts{constructor(){super("facebook.com")}static credential(y){return yt._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Za=(()=>{class E extends ts{constructor(){super("google.com"),this.addScope("profile")}static credential(y,T){return yt._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:T})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:P}=y;if(!T&&!P)return null;try{return E.credential(T,P)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),eo=(()=>{class E extends ts{constructor(){super("github.com")}static credential(y){return yt._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class ks extends B{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return bi(g,this.buildRequest())}_linkToIdToken(g,y){const T=this.buildRequest();return T.idToken=y,bi(g,T)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,bi(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:P,pendingToken:L}=y;return T&&P&&L&&T===P?new ks(T,L):null}static _create(g,y){return new ks(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _d extends Ps{constructor(g){X(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return _d.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return _d.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=ks.fromJSON(g);return X(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:T}=g;if(!y||!T)return null;try{return ks._create(T,y)}catch{return null}}}let yd=(()=>{class E extends ts{constructor(){super("twitter.com")}static credential(y,T){return yt._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:T})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:T,oauthTokenSecret:P}=y;if(!T||!P)return null;try{return E.credential(T,P)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Ic(E,g){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(E,g){return Vn(E,"POST","/v1/accounts:signUp",ve(E,g))})).apply(this,arguments)}class zi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,T,P=!1){return(0,u.Z)(function*(){const L=yield J._fromIdTokenResponse(g,T,P),ce=Pa(T);return new zi({user:L,providerId:ce,_tokenResponse:T,operationType:y})})()}static _forOperation(g,y,T){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(T,!0);const P=Pa(T);return new zi({user:g,providerId:P,_tokenResponse:T,operationType:y})})()}}function Pa(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Ya(E){return ui.apply(this,arguments)}function ui(){return(ui=(0,u.Z)(function*(E){var g;const y=Sr(E);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new zi({user:y.currentUser,providerId:null,operationType:"signIn"});const T=yield Ic(y,{returnSecureToken:!0}),P=yield zi._fromIdTokenResponse(y,"signIn",T,!0);return yield y._updateCurrentUser(P.user),P})).apply(this,arguments)}class Zh extends K.ZR{constructor(g,y,T,P){var L;super(y.code,y.message),this.operationType=T,this.user=P,Object.setPrototypeOf(this,Zh.prototype),this.customData={appName:g.name,tenantId:null!==(L=g.tenantId)&&void 0!==L?L:void 0,_serverResponse:y.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(g,y,T,P){return new Zh(g,y,T,P)}}function Hi(E,g,y,T){return("reauthenticate"===g?y._getReauthenticationResolver(E):y._getIdTokenResponse(E)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?Zh._fromErrorAndOperation(E,L,g,T):L})}function $i(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function vd(E,g){return ia.apply(this,arguments)}function ia(){return ia=(0,u.Z)(function*(E,g){const y=(0,K.m9)(E);yield Qa(!0,y,g);const{providerUserInfo:T}=yield function Un(E,g){return br.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),P=$i(T||[]);return y.providerData=y.providerData.filter(L=>P.has(L.providerId)),P.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),ia.apply(this,arguments)}function Os(E,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,u.Z)(function*(E,g,y=!1){const T=yield Sn(E,g._linkToIdToken(E.auth,yield E.getIdToken()),y);return zi._forOperation(E,"link",T)})).apply(this,arguments)}function Qa(E,g,y){return ol.apply(this,arguments)}function ol(){return(ol=(0,u.Z)(function*(E,g,y){yield Bi(g);const P=!1===E?"provider-already-linked":"no-such-provider";X($i(g.providerData).has(y)===E,g.auth,P)})).apply(this,arguments)}function Yh(E,g){return wm.apply(this,arguments)}function wm(){return(wm=(0,u.Z)(function*(E,g,y=!1){const{auth:T}=E,P="reauthenticate";try{const L=yield Sn(E,Hi(T,P,g,E),y);X(L.idToken,T,"internal-error");const ce=Xt(L.idToken);X(ce,T,"internal-error");const{sub:Ce}=ce;return X(E.uid===Ce,T,"user-mismatch"),zi._forOperation(E,P,L)}catch(L){throw"auth/user-not-found"===L?.code&&me(T,"user-mismatch"),L}})).apply(this,arguments)}function wd(E,g){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,u.Z)(function*(E,g,y=!1){const T="signIn",P=yield Hi(E,T,g),L=yield zi._fromIdTokenResponse(E,T,P);return y||(yield E._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Id(E,g){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,u.Z)(function*(E,g){return wd(Sr(E),g)})).apply(this,arguments)}function Im(E,g){return Em.apply(this,arguments)}function Em(){return(Em=(0,u.Z)(function*(E,g){const y=(0,K.m9)(E);return yield Qa(!1,y,g.providerId),Os(y,g)})).apply(this,arguments)}function Pr(E,g){return bm.apply(this,arguments)}function bm(){return(bm=(0,u.Z)(function*(E,g){return Yh((0,K.m9)(E),g)})).apply(this,arguments)}function Tm(){return(Tm=(0,u.Z)(function*(E,g){return Vn(E,"POST","/v1/accounts:signInWithCustomToken",ve(E,g))})).apply(this,arguments)}function BI(E,g){return eu.apply(this,arguments)}function eu(){return eu=(0,u.Z)(function*(E,g){const y=Sr(E),T=yield function UI(E,g){return Tm.apply(this,arguments)}(y,{token:g,returnSecureToken:!0}),P=yield zi._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser(P.user),P}),eu.apply(this,arguments)}class wo{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Cm._fromServerResponse(g,y):"totpInfo"in y?Ec._fromServerResponse(g,y):me(g,"internal-error")}}class Cm extends wo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Cm(y)}}class Ec extends wo{constructor(g){super("totp",g)}static _fromServerResponse(g,y){return new Ec(y)}}function bc(E,g,y){var T;X((null===(T=y.url)||void 0===T?void 0:T.length)>0,E,"invalid-continue-uri"),X(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(X(y.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(X(y.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function vy(E,g,y){return Am.apply(this,arguments)}function Am(){return Am=(0,u.Z)(function*(E,g,y){var T;const P=Sr(E),L={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=P._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const ce=yield _o(P,L,"getOobCode",!0);y&&bc(P,ce,y),yield ar(P,ce)}else y&&bc(P,L,y),yield ar(P,L).catch(function(){var ce=(0,u.Z)(function*(Ce){if("auth/missing-recaptcha-token"!==Ce.code)return Promise.reject(Ce);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const xe=yield _o(P,L,"getOobCode",!0);y&&bc(P,xe,y),yield ar(P,xe)}});return function(Ce){return ce.apply(this,arguments)}}())}),Am.apply(this,arguments)}function Ed(E,g,y){return sa.apply(this,arguments)}function sa(){return(sa=(0,u.Z)(function*(E,g,y){yield F((0,K.m9)(E),{oobCode:g,newPassword:y})})).apply(this,arguments)}function ka(E,g){return tu.apply(this,arguments)}function tu(){return tu=(0,u.Z)(function*(E,g){yield function Be(E,g){return it.apply(this,arguments)}((0,K.m9)(E),{oobCode:g})}),tu.apply(this,arguments)}function Io(E,g){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,u.Z)(function*(E,g){const y=(0,K.m9)(E),T=yield F(y,{oobCode:g}),P=T.requestType;switch(X(P,y,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(T.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(T.mfaInfo,y,"internal-error");default:X(T.email,y,"internal-error")}let L=null;return T.mfaInfo&&(L=wo._fromServerResponse(Sr(y),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:L},operation:P}})).apply(this,arguments)}function al(E,g){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,u.Z)(function*(E,g){const{data:y}=yield Io((0,K.m9)(E),g);return y.email})).apply(this,arguments)}function cl(E,g,y){return ll.apply(this,arguments)}function ll(){return ll=(0,u.Z)(function*(E,g,y){var T;const P=Sr(E),L={returnSecureToken:!0,email:g,password:y,clientType:"CLIENT_TYPE_WEB"};let ce;if(null!==(T=P._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const Et=yield _o(P,L,"signUpPassword");ce=Ic(P,Et)}else ce=Ic(P,L).catch(function(){var Et=(0,u.Z)(function*(It){if("auth/missing-recaptcha-token"===It.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const hn=yield _o(P,L,"signUpPassword");return Ic(P,hn)}return Promise.reject(It)});return function(It){return Et.apply(this,arguments)}}());const Ce=yield ce.catch(Et=>Promise.reject(Et)),xe=yield zi._fromIdTokenResponse(P,"signIn",Ce);return yield P._updateCurrentUser(xe.user),xe}),ll.apply(this,arguments)}function bd(E,g,y){return Id((0,K.m9)(E),wc.credential(g,y))}function Xh(E,g,y){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,u.Z)(function*(E,g,y){var T;const P=Sr(E),L={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function ce(Ce,xe){X(xe.handleCodeInApp,P,"argument-error"),xe&&bc(P,Ce,xe)}if(null!==(T=P._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const Ce=yield _o(P,L,"getOobCode",!0);ce(Ce,y),yield wr(P,Ce)}else ce(L,y),yield wr(P,L).catch(function(){var Ce=(0,u.Z)(function*(xe){if("auth/missing-recaptcha-token"!==xe.code)return Promise.reject(xe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Et=yield _o(P,L,"getOobCode",!0);ce(Et,y),yield wr(P,Et)}});return function(xe){return Ce.apply(this,arguments)}}())}),Oa.apply(this,arguments)}function Td(E,g){const y=Ms.parseLink(g);return"EMAIL_SIGNIN"===y?.operation}function Jh(E,g,y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,u.Z)(function*(E,g,y){const T=(0,K.m9)(E),P=wc.credentialWithLink(g,y||Ht());return X(P._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Id(T,P)})).apply(this,arguments)}function ul(){return(ul=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:createAuthUri",ve(E,g))})).apply(this,arguments)}function Sm(E,g){return Xa.apply(this,arguments)}function Xa(){return Xa=(0,u.Z)(function*(E,g){const T={identifier:g,continueUri:bn()?Ht():"http://localhost"},{signinMethods:P}=yield function Dm(E,g){return ul.apply(this,arguments)}((0,K.m9)(E),T);return P||[]}),Xa.apply(this,arguments)}function dl(E,g){return Fo.apply(this,arguments)}function Fo(){return Fo=(0,u.Z)(function*(E,g){const y=(0,K.m9)(E),P={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&bc(y.auth,P,g);const{email:L}=yield function Mn(E,g){return Cn.apply(this,arguments)}(y.auth,P);L!==E.email&&(yield E.reload())}),Fo.apply(this,arguments)}function Cd(E,g,y){return nu.apply(this,arguments)}function nu(){return nu=(0,u.Z)(function*(E,g,y){const T=(0,K.m9)(E),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};y&&bc(T.auth,L,y);const{email:ce}=yield function An(E,g){return mr.apply(this,arguments)}(T.auth,L);ce!==E.email&&(yield E.reload())}),nu.apply(this,arguments)}function tf(){return(tf=(0,u.Z)(function*(E,g){return ze(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function wy(E,g){return nf.apply(this,arguments)}function nf(){return nf=(0,u.Z)(function*(E,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const T=(0,K.m9)(E),L={idToken:yield T.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},ce=yield Sn(T,function ef(E,g){return tf.apply(this,arguments)}(T.auth,L));T.displayName=ce.displayName||null,T.photoURL=ce.photoUrl||null;const Ce=T.providerData.find(({providerId:xe})=>"password"===xe);Ce&&(Ce.displayName=T.displayName,Ce.photoURL=T.photoURL),yield T._updateTokensIfNecessary(ce)}),nf.apply(this,arguments)}function xm(E,g){return hl((0,K.m9)(E),g,null)}function rf(E,g){return hl((0,K.m9)(E),null,g)}function hl(E,g,y){return sf.apply(this,arguments)}function sf(){return(sf=(0,u.Z)(function*(E,g,y){const{auth:T}=E,L={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(L.email=g),y&&(L.password=y);const ce=yield Sn(E,ie(T,L));yield E._updateTokensIfNecessary(ce,!0)})).apply(this,arguments)}class fl{constructor(g,y,T={}){this.isNewUser=g,this.providerId=y,this.profile=T}}class af extends fl{constructor(g,y,T,P){super(g,y,T),this.username=P}}class iu extends fl{constructor(g,y){super(g,"facebook.com",y)}}class Ad extends af{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class cf extends fl{constructor(g,y){super(g,"google.com",y)}}class su extends af{constructor(g,y,T){super(g,"twitter.com",y,T)}}function pl(E){const{user:g,_tokenResponse:y}=E;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function ru(E){var g,y;if(!E)return null;const{providerId:T}=E,P=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},L=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!T&&E?.idToken){const ce=null===(y=null===(g=Xt(E.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(ce)return new fl(L,"anonymous"!==ce&&"custom"!==ce?ce:null)}if(!T)return null;switch(T){case"facebook.com":return new iu(L,P);case"github.com":return new Ad(L,P);case"google.com":return new cf(L,P);case"twitter.com":return new su(L,P,E.screenName||null);case"custom":case"anonymous":return new fl(L,null);default:return new fl(L,T,P)}}(y)}class Eo{constructor(g,y,T){this.type=g,this.credential=y,this.auth=T}static _fromIdtoken(g,y){return new Eo("enroll",g,y)}static _fromMfaPendingCredential(g){return new Eo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,T;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Eo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(T=g.multiFactorSession)&&void 0!==T&&T.idToken)return Eo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Tc{constructor(g,y,T){this.session=g,this.hints=y,this.signInResolver=T}static _fromError(g,y){const T=Sr(g),P=y.customData._serverResponse,L=(P.mfaInfo||[]).map(Ce=>wo._fromServerResponse(T,Ce));X(P.mfaPendingCredential,T,"internal-error");const ce=Eo._fromMfaPendingCredential(P.mfaPendingCredential);return new Tc(ce,L,function(){var Ce=(0,u.Z)(function*(xe){const Et=yield xe._process(T,ce);delete P.mfaInfo,delete P.mfaPendingCredential;const It=Object.assign(Object.assign({},P),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(y.operationType){case"signIn":const hn=yield zi._fromIdTokenResponse(T,y.operationType,It);return yield T._updateCurrentUser(hn.user),hn;case"reauthenticate":return X(y.user,T,"internal-error"),zi._forOperation(y.user,y.operationType,It);default:me(T,"internal-error")}});return function(xe){return Ce.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,u.Z)(function*(){return y.signInResolver(g)})()}}function gl(E,g){var y;const T=(0,K.m9)(E),P=g;return X(g.customData.operationType,T,"argument-error"),X(null===(y=P.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,T,"argument-error"),Tc._fromError(T,P)}class cu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(T=>wo._fromServerResponse(g.auth,T)))})}static _fromUser(g){return new cu(g)}getSession(){var g=this;return(0,u.Z)(function*(){return Eo._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var T=this;return(0,u.Z)(function*(){const P=g,L=yield T.getSession(),ce=yield Sn(T.user,P._process(T.user.auth,L,y));return yield T.user._updateTokensIfNecessary(ce),T.user.reload()})()}unenroll(g){var y=this;return(0,u.Z)(function*(){const T="string"==typeof g?g:g.uid,P=yield y.user.getIdToken();try{const L=yield Sn(y.user,function uf(E,g){return ze(E,"POST","/v2/accounts/mfaEnrollment:withdraw",ve(E,g))}(y.user.auth,{idToken:P,mfaEnrollmentId:T}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ce})=>ce!==T),yield y.user._updateTokensIfNecessary(L),yield y.user.reload()}catch(L){throw L}})()}}const Xn=new WeakMap;function yl(E){const g=(0,K.m9)(E);return Xn.has(g)||Xn.set(g,cu._fromUser(g)),Xn.get(g)}const Lo="__sak";class ns{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Lo,"1"),this.storage.removeItem(Lo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Md=(()=>{class E extends ns{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,T)=>this.onStorageEvent(y,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ty(){const E=(0,K.z$)();return H(E)||At(E)}()&&function Mi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=dn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const T of Object.keys(this.listeners)){const P=this.storage.getItem(T),L=this.localCache[T];P!==L&&y(T,L,P)}}onStorageEvent(y,T=!1){if(!y.key)return void this.forAllChangedKeys((Ce,xe,Et)=>{this.notifyListeners(Ce,Et)});const P=y.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ce=this.storage.getItem(P);if(y.newValue!==Ce)null!==y.newValue?this.storage.setItem(P,y.newValue):this.storage.removeItem(P);else if(this.localCache[P]===y.newValue&&!T)return}const L=()=>{const Ce=this.storage.getItem(P);!T&&this.localCache[P]===Ce||this.notifyListeners(P,Ce)},ce=this.storage.getItem(P);!function wn(){return(0,K.w1)()&&10===document.documentMode}()||ce===y.newValue||y.newValue===y.oldValue?L():setTimeout(L,10)}notifyListeners(y,T){this.localCache[y]=T;const P=this.listeners[y];if(P)for(const L of Array.from(P))L(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,T,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:T,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,T){var P=()=>super._set,L=this;return(0,u.Z)(function*(){yield P().call(L,y,T),L.localCache[y]=JSON.stringify(T)})()}_get(y){var T=()=>super._get,P=this;return(0,u.Z)(function*(){const L=yield T().call(P,y);return P.localCache[y]=JSON.stringify(L),L})()}_remove(y){var T=()=>super._remove,P=this;return(0,u.Z)(function*(){yield T().call(P,y),delete P.localCache[y]})()}}return E.type="LOCAL",E})(),lu=(()=>{class E extends ns{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,T){}_removeListener(y,T){}}return E.type="SESSION",E})();let Pm=(()=>{class E{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const T=this.receivers.find(L=>L.isListeningto(y));if(T)return T;const P=new E(y);return this.receivers.push(P),P}isListeningto(y){return this.eventTarget===y}handleEvent(y){var T=this;return(0,u.Z)(function*(){const P=y,{eventId:L,eventType:ce,data:Ce}=P.data,xe=T.handlersMap[ce];if(!xe?.size)return;P.ports[0].postMessage({status:"ack",eventId:L,eventType:ce});const Et=Array.from(xe).map(function(){var hn=(0,u.Z)(function*(ps){return ps(P.origin,Ce)});return function(ps){return hn.apply(this,arguments)}}()),It=yield function ec(E){return Promise.all(E.map(function(){var g=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(T){return{fulfilled:!1,reason:T}}});return function(y){return g.apply(this,arguments)}}()))}(Et);P.ports[0].postMessage({status:"done",eventId:L,eventType:ce,response:It})})()}_subscribe(y,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(T)}_unsubscribe(y,T){this.handlersMap[y]&&T&&this.handlersMap[y].delete(T),(!T||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function tc(E="",g=10){let y="";for(let T=0;T<g;T++)y+=Math.floor(10*Math.random());return E+y}class Cy{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,T=50){var P=this;return(0,u.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let ce,Ce;return new Promise((xe,Et)=>{const It=tc("",20);L.port1.start();const hn=setTimeout(()=>{Et(new Error("unsupported_event"))},T);Ce={messageChannel:L,onMessage(ps){const da=ps;if(da.data.eventId===It)switch(da.data.status){case"ack":clearTimeout(hn),ce=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(ce),xe(da.data.response);break;default:clearTimeout(hn),clearTimeout(ce),Et(new Error("invalid_response"))}}},P.handlers.add(Ce),L.port1.addEventListener("message",Ce.onMessage),P.target.postMessage({eventType:g,eventId:It,data:y},[L.port2])}).finally(()=>{Ce&&P.removeMessageHandler(Ce)})})()}}function di(){return window}function hf(){return typeof di().WorkerGlobalScope<"u"&&"function"==typeof di().importScripts}function uu(){return(uu=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const hi="firebaseLocalStorageDb",Xr="firebaseLocalStorage",Na="fbase_key";class Ac{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Pd(E,g){return E.transaction([Xr],g?"readwrite":"readonly").objectStore(Xr)}function ff(){const E=indexedDB.open(hi,1);return new Promise((g,y)=>{E.addEventListener("error",()=>{y(E.error)}),E.addEventListener("upgradeneeded",()=>{const T=E.result;try{T.createObjectStore(Xr,{keyPath:Na})}catch(P){y(P)}}),E.addEventListener("success",(0,u.Z)(function*(){const T=E.result;T.objectStoreNames.contains(Xr)?g(T):(T.close(),yield function Om(){const E=indexedDB.deleteDatabase(hi);return new Ac(E).toPromise()}(),g(yield ff()))}))})}function pf(E,g,y){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,u.Z)(function*(E,g,y){const T=Pd(E,!0).put({[Na]:g,value:y});return new Ac(T).toPromise()})).apply(this,arguments)}function Ns(){return(Ns=(0,u.Z)(function*(E,g){const y=Pd(E,!1).get(g),T=yield new Ac(y).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function kd(E,g){const y=Pd(E,!0).delete(g);return new Ac(y).toPromise()}const Vo=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield ff()),y.db})()}_withRetries(y){var T=this;return(0,u.Z)(function*(){let P=0;for(;;)try{const L=yield T._openDb();return yield y(L)}catch(L){if(P++>3)throw L;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return hf()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=Pm._getInstance(function du(){return hf()?self:null}()),y.receiver._subscribe("keyChanged",function(){var T=(0,u.Z)(function*(P,L){return{keyProcessed:(yield y._poll()).includes(L.key)}});return function(P,L){return T.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var T=(0,u.Z)(function*(P,L){return["keyChanged"]});return function(P,L){return T.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var T,P;if(y.activeServiceWorker=yield function ln(){return uu.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Cy(y.activeServiceWorker);const L=yield y.sender._send("ping",{},800);L&&null!==(T=L[0])&&void 0!==T&&T.fulfilled&&null!==(P=L[0])&&void 0!==P&&P.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var T=this;return(0,u.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function Ay(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:y},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield ff();return yield pf(y,Lo,"1"),yield kd(y,Lo),!0}catch{}return!1})()}_withPendingWrite(y){var T=this;return(0,u.Z)(function*(){T.pendingWrites++;try{yield y()}finally{T.pendingWrites--}})()}_set(y,T){var P=this;return(0,u.Z)(function*(){return P._withPendingWrite((0,u.Z)(function*(){return yield P._withRetries(L=>pf(L,y,T)),P.localCache[y]=T,P.notifyServiceWorker(y)}))})()}_get(y){var T=this;return(0,u.Z)(function*(){const P=yield T._withRetries(L=>function Gn(E,g){return Ns.apply(this,arguments)}(L,y));return T.localCache[y]=P,P})()}_remove(y){var T=this;return(0,u.Z)(function*(){return T._withPendingWrite((0,u.Z)(function*(){return yield T._withRetries(P=>kd(P,y)),delete T.localCache[y],T.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const T=yield y._withRetries(ce=>{const Ce=Pd(ce,!1).getAll();return new Ac(Ce).toPromise()});if(!T)return[];if(0!==y.pendingWrites)return[];const P=[],L=new Set;for(const{fbase_key:ce,value:Ce}of T)L.add(ce),JSON.stringify(y.localCache[ce])!==JSON.stringify(Ce)&&(y.notifyListeners(ce,Ce),P.push(ce));for(const ce of Object.keys(y.localCache))y.localCache[ce]&&!L.has(ce)&&(y.notifyListeners(ce,null),P.push(ce));return P})()}notifyListeners(y,T){this.localCache[y]=T;const P=this.listeners[y];if(P)for(const L of Array.from(P))L(T)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),Oi=1e12;class Uo{constructor(g){this.auth=g,this.counter=Oi,this._widgets=new Map}render(g,y){const T=this.counter;return this._widgets.set(T,new gf(g,this.auth.name,y||{})),this.counter++,T}reset(g){var y;const T=g||Oi;null===(y=this._widgets.get(T))||void 0===y||y.delete(),this._widgets.delete(T)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Oi))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,u.Z)(function*(){var T;return null===(T=y._widgets.get(g||Oi))||void 0===T||T.execute(),""})()}}class gf{constructor(g,y,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof g?document.getElementById(g):g;X(P,"argument-error",{appName:y}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function nc(E){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<E;T++)g.push(y.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bo=go("rcb"),Dy=new Zn(3e4,6e4);class fu{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=di().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return X(function Sy(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(y),g,"argument-error"),this.shouldResolveImmediately(y)&&On(di().grecaptcha)?Promise.resolve(di().grecaptcha):new Promise((T,P)=>{const L=di().setTimeout(()=>{P($e(g,"network-request-failed"))},Dy.get());di()[Bo]=()=>{di().clearTimeout(L),delete di()[Bo];const Ce=di().grecaptcha;if(!Ce||!On(Ce))return void P($e(g,"internal-error"));const xe=Ce.render;Ce.render=(Et,It)=>{const hn=xe(Et,It);return this.counter++,hn},this.hostLanguage=y,T(Ce)},vc(`https://www.google.com/recaptcha/api.js??${(0,K.xO)({onload:Bo,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(L),P($e(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=di().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class pu{load(g){return(0,u.Z)(function*(){return new Uo(g)})()}clearedOneInstance(){}}const Fd="recaptcha",Ld={theme:"light",type:"image"};class yf{constructor(g,y=Object.assign({},Ld),T){this.parameters=y,this.type=Fd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Sr(T),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof g?document.getElementById(g):g;X(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pu:new fu,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),T=g.getAssertedRecaptcha();return T.getResponse(y)||new Promise(L=>{const ce=Ce=>{Ce&&(g.tokenChangeListeners.delete(ce),L(Ce))};g.tokenChangeListeners.add(ce),g.isInvisible&&T.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(T=>T(y)),"function"==typeof g)g(y);else if("string"==typeof g){const T=di()[g];"function"==typeof T&&T(y)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const T=document.createElement("div");y.appendChild(T),y=T}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){X(bn()&&!hf(),g.auth,"internal-error"),yield function vf(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function mo(E){return Cs.apply(this,arguments)}(g.auth);X(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vd{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Yt._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function $t(E,g,y){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,u.Z)(function*(E,g,y){const T=Sr(E),P=yield fi(T,g,(0,K.m9)(y));return new Vd(P,L=>Id(T,L))})).apply(this,arguments)}function Wi(E,g,y){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,u.Z)(function*(E,g,y){const T=(0,K.m9)(E);yield Qa(!1,T,"phone");const P=yield fi(T.auth,g,(0,K.m9)(y));return new Vd(P,L=>Im(T,L))})).apply(this,arguments)}function Fa(E,g,y){return no.apply(this,arguments)}function no(){return(no=(0,u.Z)(function*(E,g,y){const T=(0,K.m9)(E),P=yield fi(T.auth,g,(0,K.m9)(y));return new Vd(P,L=>Pr(T,L))})).apply(this,arguments)}function fi(E,g,y){return pi.apply(this,arguments)}function pi(){return pi=(0,u.Z)(function*(E,g,y){var T;const P=yield y.verify();try{let L;if(X("string"==typeof P,E,"argument-error"),X(y.type===Fd,E,"argument-error"),L="string"==typeof g?{phoneNumber:g}:g,"session"in L){const ce=L.session;if("phoneNumber"in L)return X("enroll"===ce.type,E,"internal-error"),(yield function lf(E,g){return ze(E,"POST","/v2/accounts/mfaEnrollment:start",ve(E,g))}(E,{idToken:ce.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{X("signin"===ce.type,E,"internal-error");const Ce=(null===(T=L.multiFactorHint)||void 0===T?void 0:T.uid)||L.multiFactorUid;return X(Ce,E,"missing-multi-factor-info"),(yield function mf(E,g){return ze(E,"POST","/v2/accounts/mfaSignIn:start",ve(E,g))}(E,{mfaPendingCredential:ce.credential,mfaEnrollmentId:Ce,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ce}=yield function rn(E,g){return In.apply(this,arguments)}(E,{phoneNumber:L.phoneNumber,recaptchaToken:P});return ce}}finally{y._reset()}}),pi.apply(this,arguments)}function gr(E,g){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,u.Z)(function*(E,g){yield Os((0,K.m9)(E),g)})).apply(this,arguments)}let _r=(()=>{class E{constructor(y){this.providerId=E.PROVIDER_ID,this.auth=Sr(y)}verifyPhoneNumber(y,T){return fi(this.auth,y,(0,K.m9)(T))}static credential(y,T){return Yt._fromVerification(y,T)}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:T,temporaryProof:P}=y;return T&&P?Yt._fromTokenResponse(T,P):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function dr(E,g){return g?ct(g):(X(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Dc extends B{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return bi(g,this._buildIdpRequest())}_linkToIdToken(g,y){return bi(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return bi(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Fs(E){return wd(E.auth,new Dc(E),E.bypassAuthState)}function bo(E){const{auth:g,user:y}=E;return X(y,g,"internal-error"),Yh(y,new Dc(E),E.bypassAuthState)}function wf(E){return rc.apply(this,arguments)}function rc(){return(rc=(0,u.Z)(function*(E){const{auth:g,user:y}=E;return X(y,g,"internal-error"),Os(y,new Dc(E),E.bypassAuthState)})).apply(this,arguments)}class Sc{constructor(g,y,T,P,L=!1){this.auth=g,this.resolver=T,this.user=P,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,u.Z)(function*(T,P){g.pendingPromise={resolve:T,reject:P};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(L){g.reject(L)}});return function(T,P){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,u.Z)(function*(){const{urlResponse:T,sessionId:P,postBody:L,tenantId:ce,error:Ce,type:xe}=g;if(Ce)return void y.reject(Ce);const Et={auth:y.auth,requestUri:T,sessionId:P,tenantId:ce||void 0,postBody:L||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(xe)(Et))}catch(It){y.reject(It)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Fs;case"linkViaPopup":case"linkViaRedirect":return wf;case"reauthViaPopup":case"reauthViaRedirect":return bo;default:me(this.auth,"internal-error")}}resolve(g){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oa=new Zn(2e3,1e4);function jo(E,g,y){return aa.apply(this,arguments)}function aa(){return(aa=(0,u.Z)(function*(E,g,y){const T=Sr(E);Fe(E,g,Ps);const P=dr(T,y);return new mu(T,"signInViaPopup",g,P).executeNotNull()})).apply(this,arguments)}function xc(E,g,y){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,u.Z)(function*(E,g,y){const T=(0,K.m9)(E);Fe(T.auth,g,Ps);const P=dr(T.auth,y);return new mu(T.auth,"reauthViaPopup",g,P,T).executeNotNull()})).apply(this,arguments)}function If(E,g,y){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,u.Z)(function*(E,g,y){const T=(0,K.m9)(E);Fe(T.auth,g,Ps);const P=dr(T.auth,y);return new mu(T.auth,"linkViaPopup",g,P,T).executeNotNull()})).apply(this,arguments)}let mu=(()=>{class E extends Sc{constructor(y,T,P,L,ce){super(y,T,L,ce),this.provider=P,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const T=yield y.execute();return X(T,y.auth,"internal-error"),T})()}onExecution(){var y=this;return(0,u.Z)(function*(){ht(1===y.filter.length,"Popup operations only handle one event");const T=tc();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],T),y.authWindow.associatedEvent=T,y.resolver._originValidation(y.auth).catch(P=>{y.reject(P)}),y.resolver._isIframeWebStorageSupported(y.auth,P=>{P||y.reject($e(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject($e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const y=()=>{var T,P;this.pollId=null!==(P=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==P&&P.closed?window.setTimeout(()=>{this.pollId=null,this.reject($e(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,oa.get())};y()}}return E.currentPopupAction=null,E})();const Ef="pendingRedirect",Vs=new Map;class wl extends Sc{constructor(g,y,T=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,T),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,u.Z)(function*(){let T=Vs.get(y.auth._key());if(!T){try{const L=(yield function xy(E,g){return La.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;T=()=>Promise.resolve(L)}catch(P){T=()=>Promise.reject(P)}Vs.set(y.auth._key(),T)}return y.bypassAuthState||Vs.set(y.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,T=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(T,g);if("unknown"!==g.type){if(g.eventId){const P=yield T.auth._redirectUserForId(g.eventId);if(P)return T.user=P,y().call(T,g);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function La(){return(La=(0,u.Z)(function*(E,g){const y=Cf(g),T=Tf(E);if(!(yield T._isAvailable()))return!1;const P="true"===(yield T._get(y));return yield T._remove(y),P})).apply(this,arguments)}function ca(E,g){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,u.Z)(function*(E,g){return Tf(E)._set(Cf(g),"true")})).apply(this,arguments)}function bf(){Vs.clear()}function Rc(E,g){Vs.set(E._key(),g)}function Tf(E){return ct(E._redirectPersistence)}function Cf(E){return yn(Ef,E.config.apiKey,E.name)}function Il(E,g,y){return function El(E,g,y){return jd.apply(this,arguments)}(E,g,y)}function jd(){return(jd=(0,u.Z)(function*(E,g,y){const T=Sr(E);Fe(E,g,Ps),yield T._initializationPromise;const P=dr(T,y);return yield ca(P,T),P._openRedirect(T,g,"signInViaRedirect")})).apply(this,arguments)}function gu(E,g,y){return function _u(E,g,y){return bl.apply(this,arguments)}(E,g,y)}function bl(){return(bl=(0,u.Z)(function*(E,g,y){const T=(0,K.m9)(E);Fe(T.auth,g,Ps),yield T.auth._initializationPromise;const P=dr(T.auth,y);yield ca(P,T.auth);const L=yield Mc(T);return P._openRedirect(T.auth,g,"reauthViaRedirect",L)})).apply(this,arguments)}function Fm(E,g,y){return function Lm(E,g,y){return yu.apply(this,arguments)}(E,g,y)}function yu(){return(yu=(0,u.Z)(function*(E,g,y){const T=(0,K.m9)(E);Fe(T.auth,g,Ps),yield T.auth._initializationPromise;const P=dr(T.auth,y);yield Qa(!1,T,g.providerId),yield ca(P,T.auth);const L=yield Mc(T);return P._openRedirect(T.auth,g,"linkViaRedirect",L)})).apply(this,arguments)}function Vm(E,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,u.Z)(function*(E,g){return yield Sr(E)._initializationPromise,zd(E,g,!1)})).apply(this,arguments)}function zd(E,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,u.Z)(function*(E,g,y=!1){const T=Sr(E),P=dr(T,g),ce=yield new wl(T,P,y).execute();return ce&&!y&&(delete ce.user._redirectEventId,yield T._persistUserIfCurrent(ce.user),yield T._setRedirectUser(null,g)),ce})).apply(this,arguments)}function Mc(E){return vu.apply(this,arguments)}function vu(){return(vu=(0,u.Z)(function*(E){const g=tc(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class Tl{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(g,T)&&(y=!0,this.sendToConsumer(g,T),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function $d(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wu(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var T;if(g.error&&!wu(g)){const P=(null===(T=g.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";y.onError($e(this.auth,P))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const T=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&T}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hd(g))}saveEventToCache(g){this.cachedEventUids.add(Hd(g)),this.lastProcessedEventTime=Date.now()}}function Hd(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function wu({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===g?.code}function Iu(E){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,u.Z)(function*(E,g={}){return ze(E,"GET","/v1/projects",g)})).apply(this,arguments)}const Ry=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gd=/^https?/;function qd(){return(qd=(0,u.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield Iu(E);for(const y of g)try{if(Um(y))return}catch{}me(E,"unauthorized-domain")})).apply(this,arguments)}function Um(E){const g=Ht(),{protocol:y,hostname:T}=new URL(g);if(E.startsWith("chrome-extension://")){const ce=new URL(E);return""===ce.hostname&&""===T?"chrome-extension:"===y&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&ce.hostname===T}if(!Gd.test(y))return!1;if(Ry.test(E))return T===E;const P=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(T)}const oc=new Zn(3e4,6e4);function ac(){const E=di().___jsl;if(E?.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let y=0;y<E.CP.length;y++)E.CP[y]=null}let Jr=null;const Wd=new Zn(5e3,15e3),la="__/auth/iframe",Df="emulator/auth/iframe",Sf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pc(E){const g=E.config;X(g.authDomain,E,"auth-domain-config-required");const y=g.emulator?Wr(g,Df):`https://${E.config.authDomain}/${la}`,T={apiKey:g.apiKey,appName:E.name,v:V.SDK_VERSION},P=Eu.get(E.config.apiHost);P&&(T.eid=P);const L=E._getFrameworks();return L.length&&(T.fw=L.join(",")),`${y}?${(0,K.xO)(T).slice(1)}`}function rs(){return rs=(0,u.Z)(function*(E){const g=yield function cc(E){return Jr=Jr||function Af(E){return new Promise((g,y)=>{var T,P,L;function ce(){ac(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ac(),y($e(E,"network-request-failed"))},timeout:oc.get()})}if(null!==(P=null===(T=di().gapi)||void 0===T?void 0:T.iframes)&&void 0!==P&&P.Iframe)g(gapi.iframes.getContext());else{if(null===(L=di().gapi)||void 0===L||!L.load){const Ce=go("iframefcb");return di()[Ce]=()=>{gapi.load?ce():y($e(E,"network-request-failed"))},vc(`https://apis.google.com/js/api.js?onload=${Ce}`).catch(xe=>y(xe))}ce()}}).catch(g=>{throw Jr=null,g})}(E),Jr}(E),y=di().gapi;return X(y,E,"internal-error"),g.open({where:document.body,url:Pc(E),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sf,dontclear:!0},T=>new Promise(function(){var P=(0,u.Z)(function*(L,ce){yield T.restyle({setHideOnLeave:!1});const Ce=$e(E,"network-request-failed"),xe=di().setTimeout(()=>{ce(Ce)},Wd.get());function Et(){di().clearTimeout(xe),L(T)}T.ping(Et).then(Et,()=>{ce(Ce)})});return function(L,ce){return P.apply(this,arguments)}}()))}),rs.apply(this,arguments)}const b={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class he{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const bt="__/auth/handler",qt="emulator/auth/handler",fn=encodeURIComponent("fac");function an(E,g,y,T,P,L){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,u.Z)(function*(E,g,y,T,P,L){X(E.config.authDomain,E,"auth-domain-config-required"),X(E.config.apiKey,E,"invalid-api-key");const ce={apiKey:E.config.apiKey,appName:E.name,authType:y,redirectUrl:T,v:V.SDK_VERSION,eventId:P};if(g instanceof Ps){g.setDefaultLanguage(E.languageCode),ce.providerId=g.providerId||"",(0,K.xb)(g.getCustomParameters())||(ce.customParameters=JSON.stringify(g.getCustomParameters()));for(const[It,hn]of Object.entries(L||{}))ce[It]=hn}if(g instanceof ts){const It=g.getScopes().filter(hn=>""!==hn);It.length>0&&(ce.scopes=It.join(","))}E.tenantId&&(ce.tid=E.tenantId);const Ce=ce;for(const It of Object.keys(Ce))void 0===Ce[It]&&delete Ce[It];const xe=yield E._getAppCheckToken(),Et=xe?`#${fn}=${encodeURIComponent(xe)}`:"";return`${function ei({config:E}){return E.emulator?Wr(E,qt):`https://${E.authDomain}/${bt}`}(E)}?${(0,K.xO)(Ce).slice(1)}${Et}`})).apply(this,arguments)}const xr="webStorageSupport",zo=class Kd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lu,this._completeRedirectFn=zd,this._overrideRedirectResult=Rc}_openPopup(g,y,T,P){var L=this;return(0,u.Z)(function*(){var ce;ht(null===(ce=L.eventManagers[g._key()])||void 0===ce?void 0:ce.manager,"_initialize() not called before _openPopup()");const Ce=yield an(g,y,T,Ht(),P);return function Le(E,g,y,T=500,P=600){const L=Math.max((window.screen.availHeight-P)/2,0).toString(),ce=Math.max((window.screen.availWidth-T)/2,0).toString();let Ce="";const xe=Object.assign(Object.assign({},b),{width:T.toString(),height:P.toString(),top:L,left:ce}),Et=(0,K.z$)().toLowerCase();y&&(Ce=U(Et)?"_blank":y),z(Et)&&(g=g||"http://localhost",xe.scrollbars="yes");const It=Object.entries(xe).reduce((ps,[da,Tu])=>`${ps}${da}=${Tu},`,"");if(function Zt(E=(0,K.z$)()){var g;return At(E)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Et)&&"_self"!==Ce)return function Dt(E,g){const y=document.createElement("a");y.href=E,y.target=g;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(T)}(g||"",Ce),new he(null);const hn=window.open(g||"",Ce,It);X(hn,E,"popup-blocked");try{hn.focus()}catch{}return new he(hn)}(g,Ce,tc())})()}_openRedirect(g,y,T,P){var L=this;return(0,u.Z)(function*(){return yield L._originValidation(g),function Cc(E){di().location.href=E}(yield an(g,y,T,Ht(),P)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:P,promise:L}=this.eventManagers[y];return P?Promise.resolve(P):(ht(L,"If manager is not set, promise should be"),L)}const T=this.initAndGetManager(g);return this.eventManagers[y]={promise:T},T.catch(()=>{delete this.eventManagers[y]}),T}initAndGetManager(g){var y=this;return(0,u.Z)(function*(){const T=yield function Al(E){return rs.apply(this,arguments)}(g),P=new Tl(g);return T.register("authEvent",L=>(X(L?.authEvent,g,"invalid-auth-event"),{status:P.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:P},y.iframes[g._key()]=T,P})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(xr,{type:xr},P=>{var L;const ce=null===(L=P?.[0])||void 0===L?void 0:L[xr];void 0!==ce&&y(!!ce),me(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function sc(E){return qd.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return dn()||H()||At()}};class To{constructor(g){this.factorId=g}_process(g,y,T){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,T);case"signin":return this._finalizeSignIn(g,y.credential);default:return Ke("unexpected MultiFactorSessionType")}}}class zr extends To{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new zr(g)}_finalizeEnroll(g,y,T){return function _l(E,g){return ze(E,"POST","/v2/accounts/mfaEnrollment:finalize",ve(E,g))}(g,{idToken:y,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Od(E,g){return ze(E,"POST","/v2/accounts/mfaSignIn:finalize",ve(E,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kc=(()=>{class E{constructor(){}static assertion(y){return zr._fromCredential(y)}}return E.FACTOR_ID="phone",E})();var BA="@firebase/auth";class Py{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(T=>{g(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);y&&(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,K.Pz)("authIdTokenMaxAge"),function Bm(E){(0,V._registerComponent)(new Ae.wA("auth",(g,{options:y})=>{const T=g.getProvider("app").getImmediate(),P=g.getProvider("heartbeat"),L=g.getProvider("app-check-internal"),{apiKey:ce,authDomain:Ce}=T.options;X(ce&&!ce.includes(":"),"invalid-api-key",{appName:T.name});const xe={apiKey:ce,authDomain:Ce,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:po(E)},Et=new ra(T,P,L,xe);return function Kh(E,g){const y=g?.persistence||[],T=(Array.isArray(y)?y:[y]).map(ct);g?.errorMap&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(T,g?.popupRedirectResolver)}(Et,y),Et},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,T)=>{g.getProvider("auth-internal").initialize()})),(0,V._registerComponent)(new Ae.wA("auth-internal",g=>{const y=Sr(g.getProvider("auth").getImmediate());return new Py(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,V.registerVersion)(BA,"0.23.2",function Co(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,V.registerVersion)(BA,"0.23.2","esm2017")}("Browser")},9058:(Vt,je,j)=>{"use strict";j.d(je,{$s:()=>ct,BH:()=>ye,G6:()=>Wr,L:()=>De,LL:()=>at,P0:()=>Ft,Pz:()=>$e,Sg:()=>Fe,UG:()=>Ke,US:()=>Ae,ZB:()=>pe,ZR:()=>ze,aH:()=>me,b$:()=>bn,eu:()=>be,hl:()=>_e,jU:()=>ht,m9:()=>yn,ne:()=>Sn,pd:()=>Xt,r3:()=>Un,ru:()=>Ht,tV:()=>q,uI:()=>X,vZ:()=>cr,w1:()=>tr,xO:()=>Ji,xb:()=>Ii,z$:()=>Je,zI:()=>Te,zd:()=>Wt});const ae=function(ee){const W=[];let z=0;for(let H=0;H<ee.length;H++){let U=ee.charCodeAt(H);U<128?W[z++]=U:U<2048?(W[z++]=U>>6|192,W[z++]=63&U|128):55296==(64512&U)&&H+1<ee.length&&56320==(64512&ee.charCodeAt(H+1))?(U=65536+((1023&U)<<10)+(1023&ee.charCodeAt(++H)),W[z++]=U>>18|240,W[z++]=U>>12&63|128,W[z++]=U>>6&63|128,W[z++]=63&U|128):(W[z++]=U>>12|224,W[z++]=U>>6&63|128,W[z++]=63&U|128)}return W},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ee,W){if(!Array.isArray(ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let U=0;U<ee.length;U+=3){const de=ee[U],Ze=U+1<ee.length,_t=Ze?ee[U+1]:0,cn=U+2<ee.length,At=cn?ee[U+2]:0;let wn=(15&_t)<<2|At>>6,dn=63&At;cn||(dn=64,Ze||(wn=64)),H.push(z[de>>2],z[(3&de)<<4|_t>>4],z[wn],z[dn])}return H.join("")},encodeString(ee,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(ee):this.encodeByteArray(ae(ee),W)},decodeString(ee,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(ee):function(ee){const W=[];let z=0,H=0;for(;z<ee.length;){const U=ee[z++];if(U<128)W[H++]=String.fromCharCode(U);else if(U>191&&U<224){const de=ee[z++];W[H++]=String.fromCharCode((31&U)<<6|63&de)}else if(U>239&&U<365){const cn=((7&U)<<18|(63&ee[z++])<<12|(63&ee[z++])<<6|63&ee[z++])-65536;W[H++]=String.fromCharCode(55296+(cn>>10)),W[H++]=String.fromCharCode(56320+(1023&cn))}else{const de=ee[z++],Ze=ee[z++];W[H++]=String.fromCharCode((15&U)<<12|(63&de)<<6|63&Ze)}}return W.join("")}(this.decodeStringToByteArray(ee,W))},decodeStringToByteArray(ee,W){this.init_();const z=W?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let U=0;U<ee.length;){const de=z[ee.charAt(U++)],_t=U<ee.length?z[ee.charAt(U)]:0;++U;const At=U<ee.length?z[ee.charAt(U)]:64;++U;const Zt=U<ee.length?z[ee.charAt(U)]:64;if(++U,null==de||null==_t||null==At||null==Zt)throw new Ue;H.push(de<<2|_t>>4),64!==At&&(H.push(_t<<4&240|At>>2),64!==Zt&&H.push(At<<6&192|Zt))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ee=0;ee<this.ENCODED_VALS.length;ee++)this.byteToCharMap_[ee]=this.ENCODED_VALS.charAt(ee),this.charToByteMap_[this.byteToCharMap_[ee]]=ee,this.byteToCharMapWebSafe_[ee]=this.ENCODED_VALS_WEBSAFE.charAt(ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ee]]=ee,ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ee)]=ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ee)]=ee)}}};class Ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const De=function(ee){return function(ee){const W=ae(ee);return Ae.encodeByteArray(W,!0)}(ee).replace(/\./g,"")},q=function(ee){try{return Ae.decodeString(ee,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function pe(ee,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===ee&&(ee={});break;case Array:ee=[];break;default:return W}for(const z in W)!W.hasOwnProperty(z)||!st(z)||(ee[z]=pe(ee[z],W[z]));return ee}function st(ee){return"__proto__"!==ee}const ke=()=>{try{return function Ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ee=process.env.__FIREBASE_DEFAULTS__;return ee?JSON.parse(ee):void 0})()||(()=>{if(typeof document>"u")return;let ee;try{ee=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=ee&&q(ee[1]);return W&&JSON.parse(W)})()}catch(ee){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ee}`)}},Ft=ee=>{const W=(ee=>{var W,z;return null===(z=null===(W=ke())||void 0===W?void 0:W.emulatorHosts)||void 0===z?void 0:z[ee]})(ee);if(!W)return;const z=W.lastIndexOf(":");if(z<=0||z+1===W.length)throw new Error(`Invalid host ${W} with no separate hostname and port!`);const H=parseInt(W.substring(z+1),10);return"["===W[0]?[W.substring(1,z-1),H]:[W.substring(0,z),H]},me=()=>{var ee;return null===(ee=ke())||void 0===ee?void 0:ee.config},$e=ee=>{var W;return null===(W=ke())||void 0===W?void 0:W[`_${ee}`]};class ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,z)=>{this.resolve=W,this.reject=z})}wrapCallback(W){return(z,H)=>{z?this.reject(z):this.resolve(H),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(z):W(z,H))}}}function Fe(ee,W){if(ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=W||"demo-project",U=ee.iat||0,de=ee.sub||ee.user_id;if(!de)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ze=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:U,exp:U+3600,auth_time:U,sub:de,user_id:de,firebase:{sign_in_provider:"custom",identities:{}}},ee);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(Ze)),""].join(".")}function Je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function X(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function Ke(){var ee;const W=null===(ee=ke())||void 0===ee?void 0:ee.forceEnvironment;if("node"===W)return!0;if("browser"===W)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ht(){return"object"==typeof self&&self.self===self}function Ht(){const ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ee&&void 0!==ee.id}function bn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function tr(){const ee=Je();return ee.indexOf("MSIE ")>=0||ee.indexOf("Trident/")>=0}function Wr(){return!Ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){try{return"object"==typeof indexedDB}catch{return!1}}function be(){return new Promise((ee,W)=>{try{let z=!0;const H="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(H);U.onsuccess=()=>{U.result.close(),z||self.indexedDB.deleteDatabase(H),ee(!0)},U.onupgradeneeded=()=>{z=!1},U.onerror=()=>{var de;W((null===(de=U.error)||void 0===de?void 0:de.message)||"")}}catch(z){W(z)}})}function Te(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ze extends Error{constructor(W,z,H){super(z),this.code=W,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,at.prototype.create)}}class at{constructor(W,z,H){this.service=W,this.serviceName=z,this.errors=H}create(W,...z){const H=z[0]||{},U=`${this.service}/${W}`,de=this.errors[W],Ze=de?function wt(ee,W){return ee.replace(gt,(z,H)=>{const U=W[H];return null!=U?String(U):`<${H}?>`})}(de,H):"Error";return new ze(U,`${this.serviceName}: ${Ze} (${U}).`,H)}}const gt=/\{\$([^}]+)}/g;function Un(ee,W){return Object.prototype.hasOwnProperty.call(ee,W)}function Ii(ee){for(const W in ee)if(Object.prototype.hasOwnProperty.call(ee,W))return!1;return!0}function cr(ee,W){if(ee===W)return!0;const z=Object.keys(ee),H=Object.keys(W);for(const U of z){if(!H.includes(U))return!1;const de=ee[U],Ze=W[U];if(pr(de)&&pr(Ze)){if(!cr(de,Ze))return!1}else if(de!==Ze)return!1}for(const U of H)if(!z.includes(U))return!1;return!0}function pr(ee){return null!==ee&&"object"==typeof ee}function Ji(ee){const W=[];for(const[z,H]of Object.entries(ee))Array.isArray(H)?H.forEach(U=>{W.push(encodeURIComponent(z)+"="+encodeURIComponent(U))}):W.push(encodeURIComponent(z)+"="+encodeURIComponent(H));return W.length?"&"+W.join("&"):""}function Wt(ee){const W={};return ee.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[U,de]=H.split("=");W[decodeURIComponent(U)]=decodeURIComponent(de)}}),W}function Xt(ee){const W=ee.indexOf("?");if(!W)return"";const z=ee.indexOf("#",W);return ee.substring(W,z>0?z:void 0)}function Sn(ee,W){const z=new Ar(ee,W);return z.subscribe.bind(z)}class Ar{constructor(W,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{W(this)}).catch(H=>{this.error(H)})}next(W){this.forEachObserver(z=>{z.next(W)})}error(W){this.forEachObserver(z=>{z.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,z,H){let U;if(void 0===W&&void 0===z&&void 0===H)throw new Error("Missing Observer.");U=function pn(ee,W){if("object"!=typeof ee||null===ee)return!1;for(const z of W)if(z in ee&&"function"==typeof ee[z])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:z,complete:H},void 0===U.next&&(U.next=lr),void 0===U.error&&(U.error=lr),void 0===U.complete&&(U.complete=lr);const de=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?U.error(this.finalError):U.complete()}catch{}}),this.observers.push(U),de}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,W)}sendOne(W,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{z(this.observers[W])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lr(){}const Dr=1e3,Se=2,J=144e5,Ie=.5;function ct(ee,W=Dr,z=Se){const H=W*Math.pow(z,ee),U=Math.round(Ie*H*(Math.random()-.5)*2);return Math.min(J,H+U)}function yn(ee){return ee&&ee._delegate?ee._delegate:ee}},6297:(Vt,je,j)=>{"use strict";var u=j(5879);let K=null;function V(){return K}class ge{}const Ae=new u.OlP("DocumentToken");let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(De)},providedIn:"platform"})}return n})();const We=new u.OlP("Location Initialized");let De=(()=>{class n extends Ue{constructor(){super(),this._doc=(0,u.f3M)(Ae),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function q(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function pe(n){return n&&"?"!==n[0]?"?"+n:n}let st=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(mt)},providedIn:"root"})}return n})();const Ye=new u.OlP("appBaseHref");let mt=(()=>{class n extends st{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(Ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return q(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+pe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const c=this.prepareExternalUrl(i+pe(s));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){const c=this.prepareExternalUrl(i+pe(s));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ue),u.LFG(Ye,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qe=(()=>{class n extends st{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=q(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let c=this.prepareExternalUrl(i+pe(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){let c=this.prepareExternalUrl(i+pe(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ue),u.LFG(Ye,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})(),vt=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function me(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(re(Ft(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+pe(r))}normalize(t){return n.stripTrailingSlash(function Ut(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ft(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=pe;static#t=this.joinWithSlash=q;static#n=this.stripTrailingSlash=re;static#r=this.\u0275fac=function(r){return new(r||n)(u.LFG(st))};static#i=this.\u0275prov=u.Yz7({token:n,factory:function(){return function ke(){return new vt((0,u.LFG)(st))}()},providedIn:"root"})}return n})();function Ft(n){return n.replace(/\/index.html$/,"")}function ta(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class Ka{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ra=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ka(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,c),Sr(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Sr(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Sr(n,e){n.context.$implicit=e.item}let xs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Kh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.s_b),u.Y36(u.Rgc))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Kh{constructor(){this.$implicit=null,this.ngIf=null}}function Zl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}let wr=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function it(n,e){return new u.vHH(2100,!1)}();return t.toUpperCase()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=u.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0})}return n})(),ur=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const Js="browser";function Ms(n){return"server"===n}let ts=(()=>{class n{static#e=this.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Ma((0,u.LFG)(Ae),window)})}return n})();class Ma{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ql(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class eo{}class cf extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class su extends cf{static makeCurrent(){!function ae(n){K||(K=n)}(new su)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Iy(){return pl=pl||document.querySelector("base"),pl?pl.getAttribute("href"):null}();return null==t?null:function Rm(n){Dd=Dd||document.createElement("a"),Dd.setAttribute("href",n);const e=Dd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ta(document.cookie,e)}}let Dd,pl=null,Ey=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const xd=new u.OlP("EventManagerPlugins");let Mm=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(xd),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class ou{constructor(e){this._doc=e}}const ml="ng-app-id";let au=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ms(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${ml}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(ml),s;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(ml,this.appId),c}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,c=s.get(r)?.elements;c?c.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ae),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Eo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tc=/%COMP%/g,to=new u.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Xn(n,e){return e.map(t=>t.replace(Tc,n))}let yl=(()=>{class n{constructor(t,r,i,s,c,h,p,_=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=c,this.platformId=h,this.ngZone=p,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=Ms(h),this.defaultRenderer=new Lo(t,c,p,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===u.ifc.ShadowDom&&(r={...r,encapsulation:u.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Md?i.applyToHost(t):i instanceof qi&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const c=this.doc,h=this.ngZone,p=this.eventManager,_=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,C=this.platformIsServer;switch(r.encapsulation){case u.ifc.Emulated:s=new Md(p,_,r,this.appId,w,c,h,C);break;case u.ifc.ShadowDom:return new Ja(p,_,t,r,c,h,this.nonce,C);default:s=new qi(p,_,r,w,c,h,C)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Mm),u.LFG(au),u.LFG(u.AFp),u.LFG(to),u.LFG(Ae),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class Lo{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Eo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Rd(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Rd(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new u.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Eo[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Eo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=V().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Rd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ja extends Lo{constructor(e,t,r,i,s,c,h,p){super(e,s,c,p),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=Xn(i.id,i.styles);for(const w of _){const C=document.createElement("style");h&&C.setAttribute("nonce",h),C.textContent=w,this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class qi extends Lo{constructor(e,t,r,i,s,c,h,p){super(e,s,c,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=p?Xn(p,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Md extends qi{constructor(e,t,r,i,s,c,h,p){const _=i+"-"+r.id;super(e,t,r,s,c,h,p,_),this.contentAttr=function uf(n){return"_ngcontent-%COMP%".replace(Tc,n)}(_),this.hostAttr=function cu(n){return"_nghost-%COMP%".replace(Tc,n)}(_)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let df=(()=>{class n extends ou{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ae))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const lu=["alt","control","meta","shift"],ec={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pm={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tc=(()=>{class n extends ou{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),lu.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),c+=_+".")}),c+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static matchEventFullKeyCode(t,r){let i=ec[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),lu.forEach(c=>{c!==i&&(0,Pm[c])(t)&&(s+=c+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ae))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const hi=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:Js},{provide:u.g9A,useValue:function ln(){su.makeCurrent()},multi:!0},{provide:Ae,useFactory:function Ay(){return(0,u.RDi)(document),document},deps:[]}]),km=new u.OlP(""),Xr=[{provide:u.rWj,useClass:class Sd{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new u.vHH(5103,!1);return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let s=i.length,c=!1;const h=function(p){c=c||p,s--,0==s&&r(c)};i.forEach(p=>{p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Na=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function uu(){return new u.qLn},deps:[]},{provide:xd,useClass:df,multi:!0,deps:[Ae,u.R0b,u.Lbi]},{provide:xd,useClass:tc,multi:!0,deps:[Ae]},yl,au,Mm,{provide:u.FYo,useExisting:yl},{provide:eo,useClass:Ey,deps:[]},[]];let Ac=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(km,12))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[...Na,...Xr],imports:[ur,u.hGG]})}return n})(),Xe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ae))};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function pf(){return new Xe((0,u.LFG)(Ae))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var $t=j(2096),Jn=j(2459),Wi=j(5592),Ti=j(1631),Fa=j(4674);function no(n,e){return(0,Fa.m)(e)?(0,Ti.z)(n,e,1):(0,Ti.z)(n,1)}var fi=j(9360),pi=j(8251);function gr(n,e){return(0,fi.e)((t,r)=>{let i=0;t.subscribe((0,pi.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Jt=j(7398);function _r(n){return(0,fi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var dr=j(4664);class Dc{}class Fs{}class bo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof bo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new bo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof bo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class rc{encodeKey(e){return aa(e)}encodeValue(e){return aa(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const oa=/%(\d[a-f0-9])/gi,jo={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function aa(n){return encodeURIComponent(n).replace(oa,(e,t)=>jo[t]??e)}function xc(n){return`${n}`}class Ls{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rc,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Sc(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[c,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(c)||[];p.push(h),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(xc):[xc(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ls({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(xc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(xc(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ud{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Ef(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Vs(n){return typeof Blob<"u"&&n instanceof Blob}function wl(n){return typeof FormData<"u"&&n instanceof FormData}class La{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function mu(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new bo),this.context||(this.context=new Ud),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new Ls,this.urlWithParams=t}serializeBody(){return null===this.body?null:Ef(this.body)||Vs(this.body)||wl(this.body)||function xy(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ls?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||wl(this.body)?null:Vs(this.body)?this.body.type||null:Ef(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ls?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,_=e.params||this.params;const w=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((C,R)=>C.set(R,e.setHeaders[R]),p)),e.setParams&&(_=Object.keys(e.setParams).reduce((C,R)=>C.set(R,e.setParams[R]),_)),new La(t,r,s,{params:_,headers:p,context:w,reportProgress:h,responseType:i,withCredentials:c})}}var ca=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ca||{});class Bd{constructor(e,t=200,r="OK"){this.headers=e.headers||new bo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bf extends Bd{constructor(e={}){super(e),this.type=ca.ResponseHeader}clone(e={}){return new bf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Rc extends Bd{constructor(e={}){super(e),this.type=ca.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Rc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Tf extends Bd{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Cf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Il=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof La)s=t;else{let p,_;p=i.headers instanceof bo?i.headers:new bo(i.headers),i.params&&(_=i.params instanceof Ls?i.params:new Ls({fromObject:i.params})),s=new La(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=(0,$t.of)(s).pipe(no(p=>this.handler.handle(p)));if(t instanceof La||"events"===i.observe)return c;const h=c.pipe(gr(p=>p instanceof Rc));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,Jt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,Jt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,Jt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,Jt.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ls).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Cf(i,r))}post(t,r,i={}){return this.request("POST",t,Cf(i,r))}put(t,r,i={}){return this.request("PUT",t,Cf(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Dc))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function yu(n,e){return e(n)}function Vm(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const zd=new u.OlP(""),ro=new u.OlP(""),Mc=new u.OlP("");function vu(){let n=null;return(e,t)=>{null===n&&(n=((0,u.f3M)(zd,{optional:!0})??[]).reduceRight(Vm,yu));const r=(0,u.f3M)(u.HDt),i=r.add();return n(e,t).pipe(_r(()=>r.remove(i)))}}let ic=(()=>{class n extends Dc{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,u.f3M)(u.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(ro),...this.injector.get(Mc,[])]));this.chain=i.reduceRight((s,c)=>function Us(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,c,this.injector),yu)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(_r(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Fs),u.LFG(u.lqb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const oc=/^\)\]\}',?\n/;let Af=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new u.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,Jn.D)(r.\u0275loadImpl()):(0,$t.of)(null)).pipe((0,dr.w)(()=>new Wi.y(s=>{const c=r.build();if(c.open(t.method,t.urlWithParams),t.withCredentials&&(c.withCredentials=!0),t.headers.forEach((ne,te)=>c.setRequestHeader(ne,te.join(","))),t.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const ne=t.detectContentTypeHeader();null!==ne&&c.setRequestHeader("Content-Type",ne)}if(t.responseType){const ne=t.responseType.toLowerCase();c.responseType="json"!==ne?ne:"text"}const h=t.serializeBody();let p=null;const _=()=>{if(null!==p)return p;const ne=c.statusText||"OK",te=new bo(c.getAllResponseHeaders()),Ne=function ac(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(c)||t.url;return p=new bf({headers:te,status:c.status,statusText:ne,url:Ne}),p},w=()=>{let{headers:ne,status:te,statusText:Ne,url:qe}=_(),Pe=null;204!==te&&(Pe=typeof c.response>"u"?c.responseText:c.response),0===te&&(te=Pe?200:0);let rt=te>=200&&te<300;if("json"===t.responseType&&"string"==typeof Pe){const Tt=Pe;Pe=Pe.replace(oc,"");try{Pe=""!==Pe?JSON.parse(Pe):null}catch(Pt){Pe=Tt,rt&&(rt=!1,Pe={error:Pt,text:Pe})}}rt?(s.next(new Rc({body:Pe,headers:ne,status:te,statusText:Ne,url:qe||void 0})),s.complete()):s.error(new Tf({error:Pe,headers:ne,status:te,statusText:Ne,url:qe||void 0}))},C=ne=>{const{url:te}=_(),Ne=new Tf({error:ne,status:c.status||0,statusText:c.statusText||"Unknown Error",url:te||void 0});s.error(Ne)};let R=!1;const N=ne=>{R||(s.next(_()),R=!0);let te={type:ca.DownloadProgress,loaded:ne.loaded};ne.lengthComputable&&(te.total=ne.total),"text"===t.responseType&&c.responseText&&(te.partialText=c.responseText),s.next(te)},Y=ne=>{let te={type:ca.UploadProgress,loaded:ne.loaded};ne.lengthComputable&&(te.total=ne.total),s.next(te)};return c.addEventListener("load",w),c.addEventListener("error",C),c.addEventListener("timeout",C),c.addEventListener("abort",C),t.reportProgress&&(c.addEventListener("progress",N),null!==h&&c.upload&&c.upload.addEventListener("progress",Y)),c.send(h),s.next({type:ca.Sent}),()=>{c.removeEventListener("error",C),c.removeEventListener("abort",C),c.removeEventListener("load",w),c.removeEventListener("timeout",C),t.reportProgress&&(c.removeEventListener("progress",N),null!==h&&c.upload&&c.upload.removeEventListener("progress",Y)),c.readyState!==c.DONE&&c.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(eo))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Jr=new u.OlP("XSRF_ENABLED"),Wd=new u.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Df=new u.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Sf{}let Eu=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ta(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ae),u.LFG(u.Lbi),u.LFG(Wd))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function Pc(n,e){const t=n.url.toLowerCase();if(!(0,u.f3M)(Jr)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,u.f3M)(Sf).getToken(),i=(0,u.f3M)(Df);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var rs=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(rs||{});function S(...n){const e=[Il,Af,ic,{provide:Dc,useExisting:ic},{provide:Fs,useExisting:Af},{provide:ro,useValue:Pc,multi:!0},{provide:Jr,useValue:!0},{provide:Sf,useClass:Eu}];for(const t of n)e.push(...t.\u0275providers);return(0,u.MR2)(e)}const $=new u.OlP("LEGACY_INTERCEPTOR_FN");function se(){return function b(n,e){return{\u0275kind:n,\u0275providers:e}}(rs.LegacyInterceptors,[{provide:$,useFactory:vu},{provide:ro,useExisting:$,multi:!0}])}let an=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[S(se())]})}return n})();var Dl=j(4097),Bn=j(2793);class ua{constructor(e){return e}}class Zd{constructor(){return(0,Dl.C6)()}}const Py=new u.OlP("angularfire2._apps"),Co={provide:ua,useFactory:function My(n){return n&&1===n.length?n[0]:new ua((0,Dl.Mq)())},deps:[[new u.FiY,Py]]},Bm={provide:Zd,deps:[[new u.FiY,Py]]};function bu(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ua(r)}}let jA=(()=>{class n{constructor(t){(0,Dl.KN)("angularfire",Bn.q4.full,"core"),(0,Dl.KN)("angularfire",Bn.q4.full,"app"),(0,Dl.KN)("angular",u.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Co,Bm]}),n})();function jm(n,...e){return{ngModule:jA,providers:[{provide:Py,useFactory:bu(n),multi:!0,deps:[u.R0b,u.zs3,Bn.HU,...e]}]}}const g=(0,Bn.u3)(Dl.ZF,!0);var L=j(6304),ce=j(6321);function Ce(n,e=ce.z){return(0,fi.e)((t,r)=>{let i=null,s=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const _=s;s=null,r.next(_)}};function p(){const _=c+n,w=e.now();if(w<_)return i=this.schedule(void 0,_-w),void r.add(i);h()}t.subscribe((0,pi.x)(r,_=>{s=_,c=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}var xe=j(9058),Et=j(4537),It=j(4303),hn=j(7879);class ps{constructor(e,t){this._delegate=e,this.firebase=t,(0,It._addComponent)(e,new Et.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,It.deleteApp)(this._delegate)))}_getService(e,t=It._DEFAULT_ENTRY_NAME){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=It._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,It._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,It._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Tu=new xe.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Sl=function xf(){const n=function ky(n){const e={},t={__esModule:!0,initializeApp:function s(_,w={}){const C=It.initializeApp(_,w);if((0,xe.r3)(e,C.name))return e[C.name];const R=new n(C,t);return e[C.name]=R,R},app:i,registerVersion:It.registerVersion,setLogLevel:It.setLogLevel,onLog:It.onLog,apps:null,SDK_VERSION:It.SDK_VERSION,INTERNAL:{registerComponent:function h(_){const w=_.name,C=w.replace("-compat","");if(It._registerComponent(_)&&"PUBLIC"===_.type){const R=(N=i())=>{if("function"!=typeof N[C])throw Tu.create("invalid-app-argument",{appName:w});return N[C]()};void 0!==_.serviceProps&&(0,xe.ZB)(R,_.serviceProps),t[C]=R,n.prototype[C]=function(...N){return this._getService.bind(this,w).apply(this,_.multipleInstances?N:[])}}return"PUBLIC"===_.type?t[C]:null},removeApp:function r(_){delete e[_]},useAsService:function p(_,w){return"serverAuth"===w?null:w},modularAPIs:It}};function i(_){if(!(0,xe.r3)(e,_=_||It._DEFAULT_ENTRY_NAME))throw Tu.create("no-app",{appName:_});return e[_]}return t.default=t,Object.defineProperty(t,"apps",{get:function c(){return Object.keys(e).map(_=>e[_])}}),i.App=n,t}(ps);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:xf,extendNamespace:function e(t){(0,xe.ZB)(n,t)},createSubscribe:xe.ne,ErrorFactory:xe.LL,deepExtend:xe.ZB}),n}(),xl=new hn.Yd("@firebase/app-compat");if((0,xe.jU)()&&void 0!==self.firebase){xl.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&xl.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $m=Sl;!function Hm(n){(0,It.registerVersion)("@firebase/app-compat","0.2.19",n)}();var Ve=j(5861);const Oy="firebasestorage.googleapis.com",Rf="storageBucket";class mi extends xe.ZR{constructor(e,t,r=0){super($A(e),`Firebase Storage: ${t} (${$A(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $A(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Hr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Hr||{});function $A(n){return"storage/"+n}function Fy(){return new mi(Hr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function jP(){return new mi(Hr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ly(){return new mi(Hr.CANCELED,"User canceled the upload/download.")}function zP(){return new mi(Hr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Rl(n){return new mi(Hr.INVALID_ARGUMENT,n)}function GI(){return new mi(Hr.APP_DELETED,"The Firebase app was deleted.")}function qI(n){return new mi(Hr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mf(n,e){return new mi(Hr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Oc(n){throw new mi(Hr.INTERNAL_ERROR,"Internal error: "+n)}class js{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=js.makeFromUrl(e,t)}catch{return new js(e,"")}if(""===r.path)return r;throw function JU(n){return new mi(Hr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(rt){rt.path_=decodeURIComponent(rt.path)}const C=t.replace(/[.]/g,"\\."),Pe=[{regex:h,indices:{bucket:1,path:3},postModify:function s(rt){"/"===rt.path.charAt(rt.path.length-1)&&(rt.path_=rt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${C}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===Oy?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let rt=0;rt<Pe.length;rt++){const Tt=Pe[rt],Pt=Tt.regex.exec(e);if(Pt){let Ur=Pt[Tt.indices.path];Ur||(Ur=""),r=new js(Pt[Tt.indices.bucket],Ur),Tt.postModify(r);break}}if(null==r)throw function XU(n){return new mi(Hr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class GA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function zy(n){return"string"==typeof n||n instanceof String}function WI(n){return Gm()&&n instanceof Blob}function Gm(){return typeof Blob<"u"&&!(0,xe.UG)()}function KI(n,e,t,r){if(r<e)throw Rl(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Rl(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ml(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function qA(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Yd=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Yd||{});function WA(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class qP{constructor(e,t,r,i,s,c,h,p,_,w,C,R=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=w,this.connectionFactory_=C,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,Y)=>{this.resolve_=N,this.reject_=Y,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function jy(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==h){const p=Fy();p.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,p):p)}else c(i.canceled?this.appDelete_?GI():Ly():jP())};this.canceled_?t(0,new zs(!1,null,!0)):this.backoffId_=function Uy(n,e,t){let r=1,i=null,s=null,c=!1,h=0;function p(){return 2===h}let _=!1;function w(...te){_||(_=!0,e.apply(null,te))}function C(te){i=setTimeout(()=>{i=null,n(N,p())},te)}function R(){s&&clearTimeout(s)}function N(te,...Ne){if(_)return void R();if(te)return R(),void w.call(null,te,...Ne);if(p()||c)return R(),void w.call(null,te,...Ne);let Pe;r<64&&(r*=2),1===h?(h=2,Pe=0):Pe=1e3*(r+Math.random()),C(Pe)}let Y=!1;function ne(te){Y||(Y=!0,R(),!_&&(null!==i?(te||(h=2),clearTimeout(i),C(0)):te||(h=1)))}return C(0),s=setTimeout(()=>{c=!0,ne(!0)},t),ne}((r,i)=>{if(i)return void r(!1,new zs(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===Yd.NO_ERROR,p=s.getStatus();if(!h||WA(p,this.additionalRetryCodes_)&&this.retry){const w=s.getErrorCode()===Yd.ABORT;return void r(!1,new zs(!1,null,w))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new zs(_,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function By(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class zs{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function YA(...n){const e=function ZA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Gm())return new Blob(n);throw new mi(Hr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ha={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hy{constructor(e,t){this.data=e,this.contentType=t||null}}function QI(n,e){switch(n){case ha.RAW:return new Hy(XI(e));case ha.BASE64:case ha.BASE64URL:return new Hy(XA(n,e));case ha.DATA_URL:return new Hy(function JI(n){const e=new $y(n);return e.base64?XA(ha.BASE64,e.rest):function KP(n){let e;try{e=decodeURIComponent(n)}catch{throw Mf(ha.DATA_URL,"Malformed data URL.")}return XI(e)}(e.rest)}(e),function ZP(n){return new $y(n).contentType}(e))}throw Fy()}function XI(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function XA(n,e){switch(n){case ha.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Mf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ha.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Mf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function QA(n){if(typeof atob>"u")throw function Vy(n){return new mi(Hr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Mf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class $y{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Mf(ha.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Wm(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Nc{constructor(e,t){let r=0,i="";WI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(WI(this.data_)){const i=function WP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Nc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Nc(r,!0)}}static getBlob(...e){if(Gm()){const t=e.map(r=>r instanceof Nc?r.data_:r);return new Nc(YA.apply(null,t))}{const t=e.map(c=>zy(c)?QI(ha.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[s++]=c[h]}),new Nc(i,!0)}}uploadData(){return this.data_}}function eE(n){let e;try{e=JSON.parse(n)}catch{return null}return function GP(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function tE(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Pf(n,e){return e}class ms{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Pf}}let Km=null;function Cu(){if(Km)return Km;const n=[];n.push(new ms("bucket")),n.push(new ms("generation")),n.push(new ms("metageneration")),n.push(new ms("name","fullPath",!0));const t=new ms("name");t.xform=function e(s,c){return function nE(n){return!zy(n)||n.length<2?n:tE(n)}(c)},n.push(t);const i=new ms("size");return i.xform=function r(s,c){return void 0!==c?Number(c):c},n.push(i),n.push(new ms("timeCreated")),n.push(new ms("updated")),n.push(new ms("md5Hash",null,!0)),n.push(new ms("cacheControl",null,!0)),n.push(new ms("contentDisposition",null,!0)),n.push(new ms("contentEncoding",null,!0)),n.push(new ms("contentLanguage",null,!0)),n.push(new ms("contentType",null,!0)),n.push(new ms("metadata","customMetadata",!0)),Km=n,Km}function tD(n,e,t){const r=eE(e);return null===r?null:function QP(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const c=t[s];r[c.local]=c.xform(r,e[c.server])}return function YP(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new js(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function rE(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const nD="prefixes",iE="items";class Va{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Fc(n){if(!n)throw Fy()}function qy(n,e){return function t(r,i){const s=tD(n,i,e);return Fc(null!==s),s}}function Ua(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function $I(){return new mi(Hr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function BP(){return new mi(Hr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function UP(n){return new mi(Hr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function QU(n){return new mi(Hr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function kf(n){const e=Ua(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function YU(n){return new mi(Hr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function aE(n,e,t){const i=Ml(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Va(i,"GET",qy(n,t),c);return h.errorHandler=kf(e),h}function JP(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=Ml(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,w=new Va(h,"GET",function oE(n,e){return function t(r,i){const s=function sE(n,e,t){const r=eE(t);return null===r?null:function Gy(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[nD])for(const i of t[nD]){const s=i.replace(/\/$/,""),c=n._makeStorageReference(new js(e,s));r.prefixes.push(c)}if(t[iE])for(const i of t[iE]){const s=n._makeStorageReference(new js(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Fc(null!==s),s}}(n,e.bucket),_);return w.urlParams=s,w.errorHandler=Ua(e),w}function cE(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function sD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function Ky(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let Pe="";for(let rt=0;rt<2;rt++)Pe+=Math.random().toString().slice(2);return Pe}();c["Content-Type"]="multipart/related; boundary="+p;const _=cE(e,r,i),w=rE(_,t),N=Nc.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===N)throw zP();const Y={name:_.fullPath},ne=Ml(s,n.host,n._protocol),Ne=n.maxUploadRetryTime,qe=new Va(ne,"POST",qy(n,t),Ne);return qe.urlParams=Y,qe.headers=c,qe.body=N.uploadData(),qe.errorHandler=Ua(e),qe}class Zm{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Of(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Fc(!1)}return Fc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const aD={STATE_CHANGED:"state_changed"},Hs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qd(n){switch(n){case"running":case"pausing":case"canceling":return Hs.RUNNING;case"paused":return Hs.PAUSED;case"success":return Hs.SUCCESS;case"canceled":return Hs.CANCELED;default:return Hs.ERROR}}class nk{constructor(e,t,r){if(function $P(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Xd(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let cD=null;class rk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Oc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ik extends rk{initXhr(){this.xhr_.responseType="text"}}function Ba(){return cD?cD():new ik}class uD{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Cu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Hr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(WA(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=jP()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Hr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Ym(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c=cE(e,r,i),h={name:c.fullPath},p=Ml(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},C=rE(c,t),Y=new Va(p,"POST",function N(ne){let te;Of(ne);try{te=ne.getResponseHeader("X-Goog-Upload-URL")}catch{Fc(!1)}return Fc(zy(te)),te},n.maxUploadRetryTime);return Y.urlParams=h,Y.headers=w,Y.body=C,Y.errorHandler=Ua(e),Y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ba,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function oD(n,e,t,r){const p=new Va(t,"POST",function s(_){const w=Of(_,["active","final"]);let C=null;try{C=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fc(!1)}C||Fc(!1);const R=Number(C);return Fc(!isNaN(R)),new Zm(R,r.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Ua(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ba,t,r);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Zm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let c;try{c=function Yy(n,e,t,r,i,s,c,h){const p=new Zm(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function tB(){return new mi(Hr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let w=_;i>0&&(w=Math.min(w,i));const C=p.current;let N="";N=0===w?"finalize":_===w?"upload, finalize":"upload";const Y={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${p.current}`},ne=r.slice(C,C+w);if(null===ne)throw zP();const Pe=new Va(t,"POST",function te(rt,Tt){const Pt=Of(rt,["active","final"]),Ln=p.current+w,Ur=r.size();let gd;return gd="final"===Pt?qy(e,s)(rt,Tt):null,new Zm(Ln,Ur,"final"===Pt,gd)},e.maxUploadRetryTime);return Pe.headers=Y,Pe.body=ne.uploadData(),Pe.progressCallback=h||null,Pe.errorHandler=Ua(n),Pe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Ba,i,s,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=aE(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ba,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=Ky(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ba,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ly(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Qd(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new nk(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Qd(this._state)){case Hs.SUCCESS:Xd(this._resolve.bind(null,this.snapshot))();break;case Hs.CANCELED:case Hs.ERROR:Xd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Qd(this._state)){case Hs.RUNNING:case Hs.PAUSED:e.next&&Xd(e.next.bind(e,this.snapshot))();break;case Hs.SUCCESS:e.complete&&Xd(e.complete.bind(e))();break;default:e.error&&Xd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Jd{constructor(e,t){this._service=e,this._location=t instanceof js?t:js.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Jd(e,t)}get root(){const e=new js(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tE(this._location.path)}get storage(){return this._service}get parent(){const e=function JA(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new js(this._location.bucket,e);return new Jd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw qI(e)}}function ev(n,e,t){return tv.apply(this,arguments)}function tv(){return(tv=(0,Ve.Z)(function*(n,e,t){const i=yield uE(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield ev(n,e,i.nextPageToken))})).apply(this,arguments)}function uE(n,e){null!=e&&"number"==typeof e.maxResults&&KI("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=JP(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ba)}function ak(n){n._throwIfRoot("getDownloadURL");const e=function Wy(n,e,t){const i=Ml(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Va(i,"GET",function rD(n,e){return function t(r,i){const s=tD(n,i,e);return Fc(null!==s),function XP(n,e,t,r){const i=eE(e);if(null===i||!zy(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(_=>{const C=n.fullPath;return Ml("/b/"+c(n.bucket)+"/o/"+c(C),t,r)+qA({alt:"media",token:_})})[0]}(s,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=kf(e),h}(n.storage,n._location,Cu());return n.storage.makeRequestWithTokens(e,Ba).then(t=>{if(null===t)throw function HP(){return new mi(Hr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function fD(n,e){const t=function eD(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new js(n._location.bucket,t);return new Jd(n.storage,r)}function Pl(n,e){if(n instanceof mD){const t=n;if(null==t._bucket)throw function eB(){return new mi(Hr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rf+"' property when initializing the app?")}();const r=new Jd(t,t._bucket);return null!=e?Pl(r,e):r}return void 0!==e?fD(n,e):n}function Qm(n,e){if(e&&function lk(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof mD)return function uk(n,e){return new Jd(n,e)}(n,e);throw Rl("To use ref(service, url), the first argument must be a Storage instance.")}return Pl(n,e)}function pD(n,e){const t=e?.[Rf];return null==t?null:js.makeFromBucketSpec(t,n)}class mD{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Oy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?js.makeFromBucketSpec(i,this._host):pD(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?js.makeFromBucketSpec(this._url,e):pD(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ve.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ve.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jd(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new GA(GI());{const c=function qm(n,e,t,r,i,s,c=!0){const h=qA(n.urlParams),p=n.url+h,_=Object.assign({},n.headers);return function YI(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function ZI(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function KA(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,s),function io(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new qP(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,Ve.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const dk="@firebase/storage",fk="storage";function hE(n){return ak(n=(0,xe.m9)(n))}function nv(n,e){return Qm(n=(0,xe.m9)(n),e)}function yk(n,e,t,r={}){!function rB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,xe.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function aB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new mD(t,r,i,e,It.SDK_VERSION)}!function cB(){(0,It._registerComponent)(new Et.wA(fk,aB,"PUBLIC").setMultipleInstances(!0)),(0,It.registerVersion)(dk,"0.11.2",""),(0,It.registerVersion)(dk,"0.11.2","esm2017")}();class Jm{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class vD{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Jm(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Jm(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?c=>t(new Jm(c,this,this._ref)):{next:t.next?c=>t.next(new Jm(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class wD{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ol(e,this._service))}get items(){return this._delegate.items.map(e=>new Ol(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ol{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function sB(n,e){return fD(n,e)}(this._delegate,e);return new Ol(t,this.storage)}get root(){return new Ol(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ol(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new vD(function gk(n,e,t){return function ok(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new uD(n,new Nc(e),t)}(n=(0,xe.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ha.RAW,r){this._throwIfRoot("putString");const i=QI(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new vD(new uD(this._delegate,new Nc(i.data,!0),s),this)}listAll(){return function Xm(n){return function Jy(n){const e={prefixes:[],items:[]};return ev(n,e).then(()=>e)}(n=(0,xe.m9)(n))}(this._delegate).then(e=>new wD(e,this.storage))}list(e){return function kl(n,e){return uE(n=(0,xe.m9)(n),e)}(this._delegate,e||void 0).then(t=>new wD(t,this.storage))}getMetadata(){return function _k(n){return function dD(n){n._throwIfRoot("getMetadata");const e=aE(n.storage,n._location,Cu());return n.storage.makeRequestWithTokens(e,Ba)}(n=(0,xe.m9)(n))}(this._delegate)}updateMetadata(e){return function dE(n,e){return function hD(n,e){n._throwIfRoot("updateMetadata");const t=function tk(n,e,t,r){const s=Ml(e.fullServerUrl(),n.host,n._protocol),h=rE(t,r),_=n.maxOperationRetryTime,w=new Va(s,"PATCH",qy(n,r),_);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=h,w.errorHandler=kf(e),w}(n.storage,n._location,e,Cu());return n.storage.makeRequestWithTokens(t,Ba)}(n=(0,xe.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return hE(this._delegate)}delete(){return this._throwIfRoot("delete"),function gD(n){return function ck(n){n._throwIfRoot("deleteObject");const e=function iD(n,e){const r=Ml(e.fullServerUrl(),n.host,n._protocol),h=new Va(r,"DELETE",function c(p,_){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=kf(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ba)}(n=(0,xe.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw qI(e)}}class ID{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(fE(e))throw Rl("ref() expected a child path but got a URL, use refFromURL instead.");return new Ol(nv(this._delegate,e),this)}refFromURL(e){if(!fE(e))throw Rl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{js.makeFromUrl(e,this._delegate.host)}catch{throw Rl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ol(nv(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){yk(this._delegate,e,t,r)}}function fE(n){return/^[A-Za-z]+:\/\//.test(n)}function wk(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new ID(t,r)}!function Lf(n){const e={TaskState:Hs,TaskEvent:aD,StringFormat:ha,Storage:ID,Reference:Ol};n.INTERNAL.registerComponent(new Et.wA("storage-compat",wk,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}($m);const mE=new Map,ED={activated:!1,tokenObservers:[]},gE={initialized:!1,enabled:!1};function gi(n){return mE.get(n)||Object.assign({},ED)}function iv(){return gE}const _E="https://content-firebaseappcheck.googleapis.com/v1",lB="exchangeDebugToken",bk={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class yr{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ve.Z)(function*(){t.stop();try{t.pending=new xe.BH,yield function tg(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xe.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gs=new xe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ng(n){if(!gi(n).activated)throw gs.create("use-before-activation",{appName:n.name})}function ig(n,e){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,Ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const C=yield i.getHeartbeatsHeader();C&&(r["X-Firebase-Client"]=C)}const s={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,s)}catch(C){throw gs.create("fetch-network-error",{originalErrorMessage:C?.message})}if(200!==c.status)throw gs.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(C){throw gs.create("fetch-parse-error",{originalErrorMessage:C?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const _=1e3*Number(p[1]),w=Date.now();return{token:h.token,expireTimeMillis:w+_,issuedAtTimeMillis:w}})).apply(this,arguments)}function CD(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${_E}/projects/${t}/apps/${r}:${lB}?key=${i}`,body:{debug_token:e}}}const wE="firebase-app-check-database",AD=1,Bf="firebase-app-check-store";let sv=null;function jf(){return(jf=(0,Ve.Z)(function*(n,e){const r=(yield function ov(){return sv||(sv=new Promise((n,e)=>{try{const t=indexedDB.open(wE,AD);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(gs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Bf,{keyPath:"compositeKey"})}}catch(t){e(gs.create("storage-open",{originalErrorMessage:t?.message}))}}),sv)}()).transaction(Bf,"readwrite"),s=r.objectStore(Bf).put({compositeKey:n,value:e});return new Promise((c,h)=>{s.onsuccess=p=>{c()},r.onerror=p=>{var _;h(gs.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const zf=new hn.Yd("@firebase/app-check");function TE(n,e){return(0,xe.hl)()?function Tk(n,e){return function lc(n,e){return jf.apply(this,arguments)}(function DD(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{zf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function uv(){return iv().enabled}function CE(){return dv.apply(this,arguments)}function dv(){return(dv=(0,Ve.Z)(function*(){const n=iv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const dB={error:"UNKNOWN_ERROR"};function hB(n){return xe.US.encodeString(JSON.stringify(n),!1)}function hv(n){return DE.apply(this,arguments)}function DE(){return(DE=(0,Ve.Z)(function*(n,e=!1){const t=n.app;ng(t);const r=gi(t);let s,i=r.token;if(i&&!Du(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(Du(p)?i=p:yield TE(t,void 0))}if(!e&&i&&Du(i))return{token:i.token};let h,c=!1;if(uv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ig(CD(t,yield CE()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const p=yield r.exchangeTokenPromise;return yield TE(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield gi(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?zf.warn(p.message):zf.error(p),s=p}return i?s?h=Du(i)?{token:i.token,internalError:s}:pv(s):(h={token:i.token},r.token=i,yield TE(t,i)):h=pv(s),c&&function eh(n,e){const t=gi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function Ak(n){return SD.apply(this,arguments)}function SD(){return(SD=(0,Ve.Z)(function*(n){const e=n.app;ng(e);const{provider:t}=gi(e);if(uv()){const r=yield CE(),{token:i}=yield ig(CD(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function SE(n,e){const t=gi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function fv(n){const{app:e}=n,t=gi(e);let r=t.tokenRefresher;r||(r=function xE(n){const{app:e}=n;return new yr((0,Ve.Z)(function*(){let r;if(r=gi(e).token?yield hv(n,!0):yield hv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},bk.RETRIAL_MIN_WAIT,bk.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Du(n){return n.expireTimeMillis-Date.now()>0}function pv(n){return{token:hB(dB),error:n}}class og{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gi(this.app);for(const t of e)SE(this.app,t.next);return Promise.resolve()}}const Rk="app-check-internal";!function Mk(){(0,It._registerComponent)(new Et.wA("app-check",n=>function mv(n,e){return new og(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Rk).initialize()})),(0,It._registerComponent)(new Et.wA(Rk,n=>function Gf(n){return{getToken:e=>hv(n,e),getLimitedUseToken:()=>Ak(n),addTokenListener:e=>function $f(n,e,t,r){const{app:i}=n,s=gi(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Du(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),fv(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>fv(n))}(n,"INTERNAL",e),removeTokenListener:e=>SE(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,It.registerVersion)("@firebase/app-check","0.8.0")}();class Lc{constructor(){return(0,Bn.vb)("app-check")}}typeof window<"u"&&window;var Vk=j(120);function BD(n){const e=function UD(n){return new Wi.y(e=>{const t=c=>e.next(c);t(n.snapshot);const s=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){s()}}).pipe(Ce(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Jt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function wv(n){return{getDownloadURL:()=>(0,$t.of)(void 0).pipe(Bn.fc,(0,dr.w)(()=>n.getDownloadURL()),Bn.iC),getMetadata:()=>(0,$t.of)(void 0).pipe(Bn.fc,(0,dr.w)(()=>n.getMetadata()),Bn.iC),delete:()=>(0,Jn.D)(n.delete()),child:e=>wv(n.child(e)),updateMetadata:e=>(0,Jn.D)(n.updateMetadata(e)),put:(e,t)=>BD(n.put(e,t)),putString:(e,t,r)=>BD(n.putString(e,t,r)),list:e=>(0,Jn.D)(n.list(e)),listAll:()=>(0,Jn.D)(n.listAll())}}const wB=new u.OlP("angularfire2.storageBucket"),jD=new u.OlP("angularfire2.storage.maxUploadRetryTime"),zD=new u.OlP("angularfire2.storage.maxOperationRetryTime"),uc=new u.OlP("angularfire2.storage.use-emulator");let HD=(()=>{class n{constructor(t,r,i,s,c,h,p,_,w,C){const R=(0,L.on)(t,c,r);this.storage=(0,L.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const N=c.runOutsideAngular(()=>R.storage(i||void 0)),Y=w;return Y&&N.useEmulator(...Y),p&&N.setMaxUploadRetryTime(p),_&&N.setMaxOperationRetryTime(_),N},[p,_])}ref(t){return wv(this.storage.ref(t))}refFromURL(t){return wv(this.storage.refFromURL(t))}upload(t,r,i){return wv(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(L.Dh),u.LFG(L.xv,8),u.LFG(wB,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Bn.HU),u.LFG(jD,8),u.LFG(zD,8),u.LFG(uc,8),u.LFG(Lc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),Su=(()=>{class n{constructor(){Vk.Z.registerVersion("angularfire",Bn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[HD],imports:[BE]}),n})();j(6710);var qf=j(7592);class Iv{constructor(){return(0,Bn.vb)("auth")}}var kt,qE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fa={},pg=pg||{},En=qE||self;function Cv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function mg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var WE="closure_uid_"+(1e9*Math.random()>>>0),aO=0;function cO(n,e,t){return n.call.apply(n.bind,arguments)}function lO(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Gs(n,e,t){return(Gs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cO:lO).apply(null,arguments)}function gg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function _s(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Ru(){this.s=this.s,this.o=this.o}Ru.prototype.s=!1,Ru.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ZD(n){Object.prototype.hasOwnProperty.call(n,WE)&&n[WE]||(n[WE]=++aO)}(this)},Ru.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const YD=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function KE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function uO(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Cv(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let c=0;c<s;c++)n[i+c]=r[c]}else n.push(r)}}function ys(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ys.prototype.h=function(){this.defaultPrevented=!0};var QD=function(){if(!En.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{En.addEventListener("test",()=>{},e),En.removeEventListener("test",()=>{},e)}catch{}return n}();function _g(n){return/^[\s\xa0]*$/.test(n)}function Av(){var n=En.navigator;return n&&(n=n.userAgent)?n:""}function Vc(n){return-1!=Av().indexOf(n)}function Dv(n){return Dv[" "](n),n}Dv[" "]=function(){};var ja,n,hO=Vc("Opera"),Mu=Vc("Trident")||Vc("MSIE"),XD=Vc("Edge"),ZE=XD||Mu,JD=Vc("Gecko")&&!(-1!=Av().toLowerCase().indexOf("webkit")&&!Vc("Edge"))&&!(Vc("Trident")||Vc("MSIE"))&&!Vc("Edge"),fO=-1!=Av().toLowerCase().indexOf("webkit")&&!Vc("Edge");function eS(){var n=En.document;return n?n.documentMode:void 0}e:{var yg="",YE=(n=Av(),JD?/rv:([^\);]+)(\)|;)/.exec(n):XD?/Edge\/([\d\.]+)/.exec(n):Mu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):fO?/WebKit\/(\S+)/.exec(n):hO?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(YE&&(yg=YE?YE[1]:""),Mu){var Sv=eS();if(null!=Sv&&Sv>parseFloat(yg)){ja=String(Sv);break e}}ja=yg}var tS=En.document&&Mu&&(eS()||parseInt(ja,10))||void 0;function Pu(n,e){if(ys.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(JD){e:{try{Dv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:JE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pu.$.h.call(this)}}_s(Pu,ys);var JE={2:"touch",3:"pen",4:"mouse"};Pu.prototype.h=function(){Pu.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var xv="closure_listenable_"+(1e6*Math.random()|0),nS=0;function rS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++nS,this.fa=this.ia=!1}function vg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Rv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Uc(n){const e={};for(const t in n)e[t]=n[t];return e}const iS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sS(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<iS.length;s++)t=iS[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Wf(n){this.src=n,this.g={},this.h=0}function tb(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=YD(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(vg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Mv(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}Wf.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=Mv(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new rS(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var nb="closure_lm_"+(1e6*Math.random()|0),Kf={};function Zf(n,e,t,r,i){if(r&&r.once)return pO(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Zf(n,e[s],t,r,i);return null}return t=Nv(t),n&&n[xv]?n.O(e,t,mg(r)?!!r.capture:!!r,i):rb(n,e,t,!1,r,i)}function rb(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var c=mg(i)?!!i.capture:!!i,h=sb(n);if(h||(n[nb]=h=new Wf(n)),(t=h.add(e,t,r,c,s)).proxy)return t;if(r=function Pv(){const e=mO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)QD||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ib(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function pO(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)pO(n,e[s],t,r,i);return null}return t=Nv(t),n&&n[xv]?n.P(e,t,mg(r)?!!r.capture:!!r,i):rb(n,e,t,!0,r,i)}function oS(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)oS(n,e[s],t,r,i);else r=mg(r)?!!r.capture:!!r,t=Nv(t),n&&n[xv]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Mv(s=n.g[e],t,r,i))&&(vg(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=sb(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Mv(e,t,r,i)),(t=-1<n?e[n]:null)&&kv(t))}function kv(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[xv])tb(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ib(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=sb(e))?(tb(t,n),0==t.h&&(t.src=null,e[nb]=null)):vg(n)}}}function ib(n){return n in Kf?Kf[n]:Kf[n]="on"+n}function mO(n,e){if(n.fa)n=!0;else{e=new Pu(e,this);var t=n.listener,r=n.la||n.src;n.ia&&kv(n),n=t.call(r,e)}return n}function sb(n){return(n=n[nb])instanceof Wf?n:null}var Ov="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nv(n){return"function"==typeof n?n:(n[Ov]||(n[Ov]=function(e){return n.handleEvent(e)}),n[Ov])}function Ci(){Ru.call(this),this.i=new Wf(this),this.S=this,this.J=null}function qs(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ys(e,n);else if(e instanceof ys)e.target=e.target||n;else{var i=e;sS(e=new ys(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];i=wg(c,r,!0,e)&&i}if(i=wg(c=e.g=n,r,!0,e)&&i,i=wg(c,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=wg(c=e.g=t[s],r,!1,e)&&i}function wg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.fa&&c.capture==t){var h=c.listener,p=c.la||c.src;c.ia&&tb(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}_s(Ci,Ru),Ci.prototype[xv]=!0,Ci.prototype.removeEventListener=function(n,e,t,r){oS(this,n,e,t,r)},Ci.prototype.N=function(){if(Ci.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)vg(t[r]);delete n.g[e],n.h--}}this.J=null},Ci.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ci.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Fv=En.JSON.stringify;function _O(){var n=ob;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var aS=new class gO{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new yO,n=>n.reset());class yO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vO(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function wO(n){En.setTimeout(()=>{throw n},0)}let Eg,bg=!1,ob=new class Ig{constructor(){this.h=this.g=null}add(e,t){const r=aS.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},cS=()=>{const n=En.Promise.resolve(void 0);Eg=()=>{n.then(lS)}};var lS=()=>{for(var n;n=_O();){try{n.h.call(n.g)}catch(t){wO(t)}var e=aS;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bg=!1};function Yf(n,e){Ci.call(this),this.h=n||1,this.g=e||En,this.j=Gs(this.qb,this),this.l=Date.now()}function ab(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Qf(n,e,t){if("function"==typeof n)t&&(n=Gs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gs(n.handleEvent,n)}return 2147483647<Number(e)?-1:En.setTimeout(n,e||0)}function uS(n){n.g=Qf(()=>{n.g=null,n.i&&(n.i=!1,uS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}_s(Yf,Ci),(kt=Yf.prototype).ga=!1,kt.T=null,kt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qs(this,"tick"),this.ga&&(ab(this),this.start()))}},kt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},kt.N=function(){Yf.$.N.call(this),ab(this),delete this.g};class IO extends Ru{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uS(this)}N(){super.N(),this.g&&(En.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tg(n){Ru.call(this),this.h=n,this.g={}}_s(Tg,Ru);var dS=[];function hS(n,e,t,r){Array.isArray(t)||(t&&(dS[0]=t.toString()),t=dS);for(var i=0;i<t.length;i++){var s=Zf(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function fS(n){Rv(n.g,function(e,t){this.g.hasOwnProperty(t)&&kv(e)},n),n.g={}}function Lv(){this.g=!0}function Xf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function gS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return Fv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Tg.prototype.N=function(){Tg.$.N.call(this),fS(this)},Tg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lv.prototype.Ea=function(){this.g=!1},Lv.prototype.info=function(){};var ku={},EO=null;function th(){return EO=EO||new Ci}function _S(n){ys.call(this,ku.Ta,n)}function Cg(n){const e=th();qs(e,new _S(e))}function Vv(n,e){ys.call(this,ku.STAT_EVENT,n),this.stat=e}function Ao(n){const e=th();qs(e,new Vv(e,n))}function dc(n,e){ys.call(this,ku.Ua,n),this.size=e}function Fl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return En.setTimeout(function(){n()},e)}ku.Ta="serverreachability",_s(_S,ys),ku.STAT_EVENT="statevent",_s(Vv,ys),ku.Ua="timingevent",_s(dc,ys);var is={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ou={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jf(){}function Uv(){}Jf.prototype.h=null;var Lu,Bc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nu(){ys.call(this,"d")}function Fu(){ys.call(this,"c")}function Ll(){}function jc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Tg(this),this.P=ep,this.V=new Yf(n=ZE?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new nh}function nh(){this.i=null,this.g="",this.h=!1}_s(Nu,ys),_s(Fu,ys),_s(Ll,Jf),Ll.prototype.g=function(){return new XMLHttpRequest},Ll.prototype.i=function(){return{}},Lu=new Ll;var ep=45e3,Vu={},Ag={};function Bv(n,e,t){n.L=1,n.v=rp(Vl(e)),n.s=t,n.S=!0,cb(n,null)}function cb(n,e){n.G=Date.now(),tp(n),n.A=Vl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Pg(t.i,"t",r),n.C=0,t=n.l.J,n.h=new nh,n.g=iw(n.l,t?e:null,!n.s),0<n.O&&(n.M=new IO(Gs(n.Pa,n,n.g),n.O)),hS(n.U,n.g,"readystatechange",n.nb),e=n.I?Uc(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Cg(),function pS(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var w=_[0];_=_[1];var C=w.split("_");c=2<=C.length&&"type"==C[1]?c+(w+"=")+_+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function lb(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function ub(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=yS(n,t),i==Ag){4==e&&(n.o=4,Ao(14),r=!1),Xf(n.j,n.m,null,"[Incomplete Response]");break}if(i==Vu){n.o=4,Ao(15),Xf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xf(n.j,n.m,i,null),vS(n,i)}lb(n)&&i!=Ag&&i!=Vu&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ao(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),rw(e),e.M=!0,Ao(11))):(Xf(n.j,n.m,t,"[Invalid Chunked Response]"),ih(n),rh(n))}function yS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ag:(t=Number(e.substring(t,r)),isNaN(t)?Vu:(r+=1)+t>e.length?Ag:(e=e.slice(r,r+t),n.C=r+t,e))}function tp(n){n.Y=Date.now()+n.P,db(n,n.P)}function db(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fl(Gs(n.lb,n),e)}function Dg(n){n.B&&(En.clearTimeout(n.B),n.B=null)}function rh(n){0==n.l.H||n.J||Tb(n.l,n)}function ih(n){Dg(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,ab(n.V),fS(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function vS(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||pb(t.i,n)))if(!n.K&&pb(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Lg(t),ew(t)}nw(t),Ao(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Fl(Gs(t.ib,t),6e3));if(1>=IS(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ho(t,11)}else if((n.K||t.g==n)&&Lg(t),!_g(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.V=_[0],_=_[1],2==t.H)if("c"==_[0]){t.K=_[1],t.pa=_[2];const w=_[3];null!=w&&(t.ra=w,t.l.info("VER="+t.ra));const C=_[4];null!=C&&(t.Ga=C,t.l.info("SVER="+t.Ga));const R=_[5];null!=R&&"number"==typeof R&&0<R&&(t.L=r=1.5*R,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const Y=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var s=r.i;s.g||-1==Y.indexOf("spdy")&&-1==Y.indexOf("quic")&&-1==Y.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(qv(s,s.h),s.h=null))}if(r.F){const ne=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.Da=ne,Tr(r.I,r.F,ne))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=RS(r,r.J?r.pa:null,r.Y),c.K){mb(r.i,c);var h=c,p=r.L;p&&h.setTimeout(p),h.B&&(Dg(h),tp(h)),r.g=c}else Eb(r);0<t.j.length&&Fg(t)}else"stop"!=_[0]&&"close"!=_[0]||Ho(t,7);else 3==t.H&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Ho(t,7):Jv(t):"noop"!=_[0]&&t.h&&t.h.Aa(_),t.A=0)}Cg()}catch{}}function wS(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Cv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function bO(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Cv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function UB(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Cv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(kt=jc.prototype).setTimeout=function(n){this.P=n},kt.nb=function(n){n=n.target;const e=this.M;e&&3==hc(n)?e.l():this.Pa(n)},kt.Pa=function(n){try{if(n==this.g)e:{const w=hc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>w)&&(3!=w||ZE||this.g&&(this.h.h||this.g.ja()||Qv(this.g)))){this.J||4!=w||7==e||Cg(),Dg(this);var t=this.g.da();this.ca=t;t:if(lb(this)){var r=Qv(this.g);n="";var i=r.length,s=4==hc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ih(this),rh(this);var c="";break t}this.h.i=new En.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function mS(n,e,t,r,i,s,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.W,w,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_g(h)){var _=h;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,Ao(12),ih(this),rh(this);break e}Xf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vS(this,t)}this.S?(ub(this,w,c),ZE&&this.i&&3==w&&(hS(this.U,this.V,"tick",this.mb),this.V.start())):(Xf(this.j,this.m,c,null),vS(this,c)),4==w&&ih(this),this.i&&!this.J&&(4==w?Tb(this.l,this):(this.i=!1,tp(this)))}else(function AS(n){const e={};n=(n.g&&2<=hc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(_g(n[r]))continue;var t=vO(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function eb(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ao(12)):(this.o=0,Ao(13)),ih(this),rh(this)}}}catch{}},kt.mb=function(){if(this.g){var n=hc(this.g),e=this.g.ja();this.C<e.length&&(Dg(this),ub(this,n,e),this.i&&4!=n&&tp(this))}},kt.cancel=function(){this.J=!0,ih(this)},kt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function VB(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Cg(),Ao(17)),ih(this),this.o=2,rh(this)):db(this,this.Y-n)};var TO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function np(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof np){this.h=n.h,jv(this,n.j),this.s=n.s,this.g=n.g,zv(this,n.m),this.l=n.l;var e=n.i,t=new Rg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Hv(this,t),this.o=n.o}else n&&(e=String(n).match(TO))?(this.h=!1,jv(this,e[1]||"",!0),this.s=Uu(e[2]||""),this.g=Uu(e[3]||"",!0),zv(this,e[4]),this.l=Uu(e[5]||"",!0),Hv(this,e[6]||"",!0),this.o=Uu(e[7]||"")):(this.h=!1,this.i=new Rg(null,this.h))}function Vl(n){return new np(n)}function jv(n,e,t){n.j=t?Uu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Hv(n,e,t){e instanceof Rg?(n.i=e,function xO(n,e){e&&!n.j&&(Bu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&($v(this,r),Pg(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ip(e,DO)),n.i=new Rg(e,n.h))}function Tr(n,e,t){n.i.set(e,t)}function rp(n){return Tr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Uu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ip(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Sg),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Sg(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}np.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ip(e,hb,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ip(e,hb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ip(t,"/"==t.charAt(0)?xg:AO,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ip(t,SO)),n.join("")};var hb=/[#\/\?@]/g,AO=/[#\?:]/g,xg=/[#\?]/g,DO=/[#\?@]/g,SO=/#/g;function Rg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Bu(n){n.g||(n.g=new Map,n.h=0,n.i&&function CO(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $v(n,e){Bu(n),e=kg(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Mg(n,e){return Bu(n),e=kg(n,e),n.g.has(e)}function Pg(n,e,t){$v(n,e),0<t.length&&(n.i=null,n.g.set(kg(n,e),KE(t)),n.h+=t.length)}function kg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Gv(n){this.l=n||MO,n=En.PerformanceNavigationTiming?0<(n=En.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(En.g&&En.g.Ka&&En.g.Ka()&&En.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(kt=Rg.prototype).add=function(n,e){Bu(this),this.i=null,n=kg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},kt.forEach=function(n,e){Bu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},kt.ta=function(){Bu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},kt.Z=function(n){Bu(this);let e=[];if("string"==typeof n)Mg(this,n)&&(e=e.concat(this.g.get(kg(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},kt.set=function(n,e){return Bu(this),this.i=null,Mg(this,n=kg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},kt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=s;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var MO=10;function fb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function IS(n){return n.h?1:n.g?n.g.size:0}function pb(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function qv(n,e){n.g?n.g.add(e):n.h=e}function mb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function gb(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return KE(n.i)}Gv.prototype.cancel=function(){if(this.i=gb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var PO=class{stringify(n){return En.JSON.stringify(n,void 0)}parse(n){return En.JSON.parse(n,void 0)}};function kO(){this.g=new PO}function OO(n,e,t){const r=t||"";try{wS(n,function(i,s){let c=i;mg(i)&&(c=Fv(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function sp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function sh(n){this.l=n.fc||null,this.j=n.ob||!1}function Wv(n,e){Ci.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=op,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_s(sh,Jf),sh.prototype.g=function(){return new Wv(this.l,this.j)},sh.prototype.i=function(n){return function(){return n}}({}),_s(Wv,Ci);var op=0;function Og(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function oh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ap(n)}function ap(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(kt=Wv.prototype).open=function(n,e){if(this.readyState!=op)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ap(this)},kt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||En).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,oh(this)),this.readyState=op},kt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof En.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Og(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},kt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?oh(this):ap(this),3==this.readyState&&Og(this)}},kt.Za=function(n){this.g&&(this.response=this.responseText=n,oh(this))},kt.Ya=function(n){this.g&&(this.response=n,oh(this))},kt.ka=function(){this.g&&oh(this)},kt.setRequestHeader=function(n,e){this.v.append(n,e)},kt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},kt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Wv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var NO=En.JSON.parse;function Ai(n){Ci.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bS,this.L=this.M=!1}_s(Ai,Ci);var bS="",Kv=/^https?$/i,Zv=["POST","PUT"];function yb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,TS(n),Ng(n)}function TS(n){n.F||(n.F=!0,qs(n,"complete"),qs(n,"error"))}function CS(n){if(n.h&&typeof pg<"u"&&(!n.C[1]||4!=hc(n)||2!=n.da()))if(n.v&&4==hc(n))Qf(n.La,0,n);else if(qs(n,"readystatechange"),4==hc(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(TO)[1]||null;!i&&En.self&&En.self.location&&(i=En.self.location.protocol.slice(0,-1)),r=!Kv.test(i?i.toLowerCase():"")}t=r}if(t)qs(n,"complete"),qs(n,"success");else{n.m=6;try{var s=2<hc(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",TS(n)}}finally{Ng(n)}}}function Ng(n,e){if(n.g){Yv(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||qs(n,"ready");try{t.onreadystatechange=r}catch{}}}function Yv(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(En.clearTimeout(n.A),n.A=null)}function hc(n){return n.g?n.g.readyState:0}function Qv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case bS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function DS(n){let e="";return Rv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Xv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=DS(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tr(n,e,t))}function cp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function vb(n){this.Ga=0,this.j=[],this.l=new Lv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cp("baseRetryDelayMs",5e3,n),this.hb=cp("retryDelaySeedMs",1e4,n),this.eb=cp("forwardChannelMaxRetries",2,n),this.xa=cp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Gv(n&&n.concurrentRequestLimit),this.Ja=new kO,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Jv(n){if(wb(n),3==n.H){var e=n.W++,t=Vl(n.I);if(Tr(t,"SID",n.K),Tr(t,"RID",e),Tr(t,"TYPE","terminate"),lp(n,t),(e=new jc(n,n.l,e)).L=2,e.v=rp(Vl(t)),t=!1,En.navigator&&En.navigator.sendBeacon)try{t=En.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&En.Image&&((new Image).src=e.v,t=!0),t||(e.g=iw(e.l,null),e.g.ha(e.v)),e.G=Date.now(),tp(e)}xS(n)}function ew(n){n.g&&(rw(n),n.g.cancel(),n.g=null)}function wb(n){ew(n),n.u&&(En.clearTimeout(n.u),n.u=null),Lg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&En.clearTimeout(n.m),n.m=null)}function Fg(n){if(!fb(n.i)&&!n.m){n.m=!0;var e=n.Na;Eg||cS(),bg||(Eg(),bg=!0),ob.add(e,n),n.C=0}}function tw(n,e){var t;t=e?e.m:n.W++;const r=Vl(n.I);Tr(r,"SID",n.K),Tr(r,"RID",t),Tr(r,"AID",n.V),lp(n,r),n.o&&n.s&&Xv(r,n.o,n.s),t=new jc(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Ib(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),qv(n.i,t),Bv(t,r,e)}function lp(n,e){n.na&&Rv(n.na,function(t,r){Tr(e,r,t)}),n.h&&wS({},function(t,r){Tr(e,r,t)})}function Ib(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Gs(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=i[0].g,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let _=i[p].g;const w=i[p].map;if(_-=s,0>_)s=Math.max(0,i[p].g-100),h=!1;else try{OO(w,c,"req"+_+"_")}catch{r&&r(w)}}if(h){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Eb(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Eg||cS(),bg||(Eg(),bg=!0),ob.add(e,n),n.A=0}}function nw(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Fl(Gs(n.Ma,n),Vg(n,n.A)),n.A++,0))}function rw(n){null!=n.B&&(En.clearTimeout(n.B),n.B=null)}function bb(n){n.g=new jc(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Vl(n.wa);Tr(e,"RID","rpc"),Tr(e,"SID",n.K),Tr(e,"AID",n.V),Tr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Tr(e,"TO",n.qa),Tr(e,"TYPE","xmlhttp"),lp(n,e),n.o&&n.s&&Xv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=rp(Vl(e)),t.s=null,t.S=!0,cb(t,n)}function Lg(n){null!=n.v&&(En.clearTimeout(n.v),n.v=null)}function Tb(n,e){var t=null;if(n.g==e){Lg(n),rw(n),n.g=null;var r=2}else{if(!pb(n.i,e))return;t=e.F,mb(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;qs(r=th(),new dc(r,t)),Fg(n)}else Eb(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function SS(n,e){return!(IS(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Fl(Gs(n.Na,n,e),Vg(n,n.C)),n.C++,0)))}(n,e)||2==r&&nw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ho(n,5);break;case 4:Ho(n,10);break;case 3:Ho(n,6);break;default:Ho(n,2)}}function Vg(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ho(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Gs(n.pb,n);t||(t=new np("//www.google.com/images/cleardot.gif"),En.location&&"http"==En.location.protocol||jv(t,"https"),rp(t)),function ES(n,e){const t=new Lv;if(En.Image){const r=new Image;r.onload=gg(sp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=gg(sp,t,r,"TestLoadImage: error",!1,e),r.onabort=gg(sp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=gg(sp,t,r,"TestLoadImage: timeout",!1,e),En.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ao(2);n.H=0,n.h&&n.h.za(e),xS(n),wb(n)}function xS(n){if(n.H=0,n.ma=[],n.h){const e=gb(n.i);(0!=e.length||0!=n.j.length)&&(uO(n.ma,e),uO(n.ma,n.j),n.i.i.length=0,KE(n.j),n.j.length=0),n.h.ya()}}function RS(n,e,t){var r=t instanceof np?Vl(t):new np(t);if(""!=r.g)e&&(r.g=e+"."+r.g),zv(r,r.m);else{var i=En.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new np(null);r&&jv(s,r),e&&(s.g=e),i&&zv(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Tr(r,t,e),Tr(r,"VER",n.ra),lp(n,r),r}function iw(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ai(t&&n.Ha&&!n.va?new sh({ob:!0}):n.va)).Oa(n.J),e}function ju(){}function up(){if(Mu&&!(10<=Number(tS)))throw Error("Environmental error: no available transport.")}function ga(n,e){Ci.call(this),this.g=new vb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_g(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_g(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ug(this)}function sw(n){Nu.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function FO(){Fu.call(this),this.status=1}function Ug(n){this.g=n}function fc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ow(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],c=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;c=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(c<<7&4294967295|c>>>25))+((c=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((s=(e=t+((c=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=s+((c=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Cr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(kt=Ai.prototype).Oa=function(n){this.M=n},kt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lu.g(),this.C=function ma(n){return n.h||(n.h=n.i())}(this.u?this.u:Lu),this.g.onreadystatechange=Gs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void yb(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=En.FormData&&n instanceof En.FormData,!(0<=YD(Zv,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of t)this.g.setRequestHeader(s,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Yv(this),0<this.B&&((this.L=function _b(n){return Mu&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gs(this.ua,this)):this.A=Qf(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){yb(this,s)}},kt.ua=function(){typeof pg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qs(this,"timeout"),this.abort(8))},kt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qs(this,"complete"),qs(this,"abort"),Ng(this))},kt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ng(this,!0)),Ai.$.N.call(this)},kt.La=function(){this.s||(this.G||this.v||this.l?CS(this):this.kb())},kt.kb=function(){CS(this)},kt.isActive=function(){return!!this.g},kt.da=function(){try{return 2<hc(this)?this.g.status:-1}catch{return-1}},kt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},kt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),NO(e)}},kt.Ia=function(){return this.m},kt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(kt=vb.prototype).ra=8,kt.H=1,kt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new jc(this,this.l,n);let s=this.s;if(this.U&&(s?(s=Uc(s),sS(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ib(this,i,e),Tr(t=Vl(this.I),"RID",n),Tr(t,"CVER",22),this.F&&Tr(t,"X-HTTP-Session-Id",this.F),lp(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(DS(s)))+"&"+e:this.o&&Xv(t,this.o,s)),qv(this.i,i),this.bb&&Tr(t,"TYPE","init"),this.P?(Tr(t,"$req",e),Tr(t,"SID","null"),i.aa=!0,Bv(i,t,null)):Bv(i,t,e),this.H=2}}else 3==this.H&&(n?tw(this,n):0==this.j.length||fb(this.i)||tw(this))},kt.Ma=function(){if(this.u=null,bb(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Fl(Gs(this.jb,this),n)}},kt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ao(10),ew(this),bb(this))},kt.ib=function(){null!=this.v&&(this.v=null,ew(this),nw(this),Ao(19))},kt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ao(2)):(this.l.info("Failed to ping google.com"),Ao(1))},kt.isActive=function(){return!!this.h&&this.h.isActive(this)},(kt=ju.prototype).Ba=function(){},kt.Aa=function(){},kt.za=function(){},kt.ya=function(){},kt.isActive=function(){return!0},kt.Va=function(){},up.prototype.g=function(n,e){return new ga(n,e)},_s(ga,Ci),ga.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ao(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=RS(n,null,n.Y),Fg(n)},ga.prototype.close=function(){Jv(this.g)},ga.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Fv(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Fg(e)},ga.prototype.N=function(){this.g.h=null,delete this.j,Jv(this.g),delete this.g,ga.$.N.call(this)},_s(sw,Nu),_s(FO,Fu),_s(Ug,ju),Ug.prototype.Ba=function(){qs(this.g,"a")},Ug.prototype.Aa=function(n){qs(this.g,new sw(n))},Ug.prototype.za=function(n){qs(this.g,new FO)},Ug.prototype.ya=function(){qs(this.g,"b")},_s(fc,function LO(){this.blockSize=-1}),fc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},fc.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)ow(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){ow(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){ow(this,r),i=0;break}}this.h=i,this.i+=e},fc.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var ss={};function aw(n){return-128<=n&&128>n?function dO(n,e){var t=ss;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Cr([0|e],0>e?-1:0)}):new Cr([0|n],0>n?-1:0)}function zc(n){if(isNaN(n)||!isFinite(n))return dp;if(0>n)return Ws(zc(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=cw;return new Cr(e,0)}var cw=4294967296,dp=aw(0),lw=aw(1),Cb=aw(16777216);function $o(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function za(n){return-1==n.h}function Ws(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Cr(t,~n.h).add(lw)}function Bg(n,e){return n.add(Ws(e))}function uw(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function hp(n,e){this.g=n,this.h=e}function Ab(n,e){if($o(e))throw Error("division by zero");if($o(n))return new hp(dp,dp);if(za(n))return e=Ab(Ws(n),e),new hp(Ws(e.g),Ws(e.h));if(za(e))return e=Ab(n,Ws(e)),new hp(Ws(e.g),e.h);if(30<n.g.length){if(za(n)||za(e))throw Error("slowDivide_ only works with positive integers.");for(var t=lw,r=e;0>=r.X(n);)t=dw(t),r=dw(r);var i=zu(t,1),s=zu(r,1);for(r=zu(r,2),t=zu(t,2);!$o(r);){var c=s.add(r);0>=c.X(n)&&(i=i.add(t),s=c),r=zu(r,1),t=zu(t,1)}return e=Bg(n,i.R(e)),new hp(i,e)}for(i=dp;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(s=zc(t)).R(e);za(c)||0<c.X(n);)c=(s=zc(t-=r)).R(e);$o(s)&&(s=lw),i=i.add(s),n=Bg(n,c)}return new hp(i,n)}function dw(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Cr(t,n.h)}function zu(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Cr(i,n.h)}(kt=Cr.prototype).ea=function(){if(za(this))return-Ws(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:cw+r)*e,e*=cw}return n},kt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if($o(this))return"0";if(za(this))return"-"+Ws(this).toString(n);for(var e=zc(Math.pow(n,6)),t=this,r="";;){var i=Ab(t,e).g,s=((0<(t=Bg(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if($o(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},kt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},kt.X=function(n){return za(n=Bg(this,n))?-1:$o(n)?0:1},kt.abs=function(){return za(this)?Ws(this):this},kt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),c=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(s&=65535)}return new Cr(t,-2147483648&t[t.length-1]?-1:0)},kt.R=function(n){if($o(this)||$o(n))return dp;if(za(this))return za(n)?Ws(this).R(Ws(n)):Ws(Ws(this).R(n));if(za(n))return Ws(this.R(Ws(n)));if(0>this.X(Cb)&&0>n.X(Cb))return zc(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,c=65535&this.D(r),h=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=c*p,uw(t,2*r+2*i),t[2*r+2*i+1]+=s*p,uw(t,2*r+2*i+1),t[2*r+2*i+1]+=c*h,uw(t,2*r+2*i+1),t[2*r+2*i+2]+=s*h,uw(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Cr(t,0)},kt.gb=function(n){return Ab(this,n).h},kt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Cr(t,this.h&n.h)},kt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Cr(t,this.h|n.h)},kt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Cr(t,this.h^n.h)},up.prototype.createWebChannel=up.prototype.g,ga.prototype.send=ga.prototype.u,ga.prototype.open=ga.prototype.m,ga.prototype.close=ga.prototype.close,is.NO_ERROR=0,is.TIMEOUT=8,is.HTTP_ERROR=6,Ou.COMPLETE="complete",Uv.EventType=Bc,Bc.OPEN="a",Bc.CLOSE="b",Bc.ERROR="c",Bc.MESSAGE="d",Ci.prototype.listen=Ci.prototype.O,Ai.prototype.listenOnce=Ai.prototype.P,Ai.prototype.getLastError=Ai.prototype.Sa,Ai.prototype.getLastErrorCode=Ai.prototype.Ia,Ai.prototype.getStatus=Ai.prototype.da,Ai.prototype.getResponseJson=Ai.prototype.Wa,Ai.prototype.getResponseText=Ai.prototype.ja,Ai.prototype.send=Ai.prototype.ha,Ai.prototype.setWithCredentials=Ai.prototype.Oa,fc.prototype.digest=fc.prototype.l,fc.prototype.reset=fc.prototype.reset,fc.prototype.update=fc.prototype.j,Cr.prototype.add=Cr.prototype.add,Cr.prototype.multiply=Cr.prototype.R,Cr.prototype.modulo=Cr.prototype.gb,Cr.prototype.compare=Cr.prototype.X,Cr.prototype.toNumber=Cr.prototype.ea,Cr.prototype.toString=Cr.prototype.toString,Cr.prototype.getBits=Cr.prototype.D,Cr.fromNumber=zc,Cr.fromString=function MS(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ws(MS(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=zc(Math.pow(e,8)),r=dp,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+s),e);8>s?(s=zc(Math.pow(e,s)),r=r.R(s).add(zc(c))):r=(r=r.R(t)).add(zc(c))}return r};var Hc=fa.createWebChannelTransport=function(){return new up},VO=fa.getStatEventTarget=function(){return th()},Db=fa.ErrorCode=is,$c=fa.EventType=Ou,pc=fa.Event=ku,Ha=fa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},PS=fa.FetchXmlHttpFactory=sh,jg=fa.WebChannel=Uv,UO=fa.XhrIo=Ai,BO=fa.Md5=fc,fp=fa.Integer=Cr;const kS="@firebase/firestore";class Ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");let Gc="9.23.0";const Hu=new hn.Yd("@firebase/firestore");function hw(){return Hu.logLevel}function pt(n,...e){if(Hu.logLevel<=hn.in.DEBUG){const t=e.map(pp);Hu.debug(`Firestore (${Gc}): ${n}`,...t)}}function Di(n,...e){if(Hu.logLevel<=hn.in.ERROR){const t=e.map(pp);Hu.error(`Firestore (${Gc}): ${n}`,...t)}}function _a(n,...e){if(Hu.logLevel<=hn.in.WARN){const t=e.map(pp);Hu.warn(`Firestore (${Gc}): ${n}`,...t)}}function pp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function zt(n="Unexpected state"){const e=`FIRESTORE (${Gc}) INTERNAL ASSERTION FAILED: `+n;throw Di(e),new Error(e)}function Qt(n,e){n||zt()}function Rt(n,e){return n}const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends xe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class FS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class LS{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let c=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ni,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const _=c;e.enqueueRetryable((0,Ve.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},p=_=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ni)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt("string"==typeof r.accessToken),new zg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qt(null===e||"string"==typeof e),new Ki(e)}}class VS{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class US{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new VS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.T;return this.T=s.token,pt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qt("string"==typeof t.token),this.T=t.token,new Sb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function HO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class jS{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=HO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function vn(n,e){return n<e?-1:n>e?1:0}function mp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function zS(n){return n+"\0"}class ti{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nt(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nt(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new nt(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ti.fromMillis(Date.now())}static fromDate(e){return ti.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ti(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vn(this.nanoseconds,e.nanoseconds):vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tn(e)}static min(){return new tn(new ti(0,0))}static max(){return new tn(new ti(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hg{constructor(e,t,r){void 0===t?t=0:t>e.length&&zt(),void 0===r?r=e.length-t:r>e.length-t&&zt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Hg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),c=t.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rr extends Hg{construct(e,t,r){return new rr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new nt(Re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new rr(t)}static emptyPath(){return new rr([])}}const $O=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Si extends Hg{construct(e,t,r){return new Si(e,t,r)}static isValidIdentifier(e){return $O.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Si.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Si(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new nt(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new nt(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new nt(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(s(),i++)}if(s(),c)throw new nt(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Si(t)}static emptyPath(){return new Si([])}}class St{constructor(e){this.path=e}static fromPath(e){return new St(rr.fromString(e))}static fromName(e){return new St(rr.fromString(e).popFirst(5))}static empty(){return new St(rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new St(new rr(e.slice()))}}class fw{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function xb(n){return n.fields.find(e=>2===e.kind)}function ah(n){return n.fields.filter(e=>2!==e.kind)}fw.UNKNOWN_ID=-1;class pw{constructor(e,t){this.fieldPath=e,this.kind=t}}class gp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gp(0,Go.min())}}function Rb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=tn.fromTimestamp(1e9===r?new ti(t+1,0):new ti(t,r));return new Go(i,St.empty(),e)}function Mb(n){return new Go(n.readTime,n.key,-1)}class Go{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Go(tn.min(),St.empty(),-1)}static max(){return new Go(tn.max(),St.empty(),-1)}}function mw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=St.comparator(n.documentKey,e.documentKey),0!==t?t:vn(n.largestBatchId,e.largestBatchId))}const Pb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ul(n){return gw.apply(this,arguments)}function gw(){return gw=(0,Ve.Z)(function*(n){if(n.code!==Re.FAILED_PRECONDITION||n.message!==Pb)throw n;pt("LocalStore","Unexpectedly lost primary lease")}),gw.apply(this,arguments)}class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ee((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ee?t:Ee.resolve(t)}catch(t){return Ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ee.reject(t)}static resolve(e){return new Ee((t,r)=>{t(e)})}static reject(e){return new Ee((t,r)=>{r(e)})}static waitFor(e){return new Ee((t,r)=>{let i=0,s=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++s,c&&s===i&&t()},p=>r(p))}),c=!0,s===i&&t()})}static or(e){let t=Ee.resolve(!1);for(const r of e)t=t.next(i=>i?Ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Ee((r,i)=>{const s=e.length,c=new Array(s);let h=0;for(let p=0;p<s;p++){const _=p;t(e[_]).next(w=>{c[_]=w,++h,h===s&&r(c)},w=>i(w))}})}static doWhile(e,t){return new Ee((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class $g{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ni,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Gg(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=_w(r.target.error);this.v.reject(new Gg(e,i))}}static open(e,t,r,i){try{return new $g(t,e.transaction(i,r))}catch(s){throw new Gg(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(pt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new BB(t)}}class Ks{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Ks.S((0,xe.z$)())&&Di("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pt("SimpleDb","Removing database:",e),Bl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,xe.hl)())return!1;if(Ks.C())return!0;const e=(0,xe.z$)(),t=Ks.S(e),r=0<t&&t<10,i=Ks.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ve.Z)(function*(){return t.db||(pt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{i(new Gg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new nt(Re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new nt(Re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Gg(e,h))},s.onupgradeneeded=c=>{pt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{pt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Ve.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.$(e);const p=$g.open(s.db,e,c?"readonly":"readwrite",r),_=i(p).next(w=>(p.P(),w)).catch(w=>(p.abort(w),Ee.reject(w))).toPromise();return _.catch(()=>{}),yield p.R,_}catch(p){const _=p,w="FirebaseError"!==_.name&&h<3;if(pt("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),s.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class WO{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Bl(this.L.delete())}}class Gg extends nt{constructor(e,t){super(Re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ya(n){return"IndexedDbTransactionError"===n.name}class BB{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(pt("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(pt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bl(r)}add(e){return pt("SimpleDb","ADD",this.store.name,e,e),Bl(this.store.add(e))}get(e){return Bl(this.store.get(e)).next(t=>(void 0===t&&(t=null),pt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return pt("SimpleDb","DELETE",this.store.name,e),Bl(this.store.delete(e))}count(){return pt("SimpleDb","COUNT",this.store.name),Bl(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(c,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new Ee((s,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ee((i,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){pt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,c,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new Ee((r,i)=>{t.onerror=s=>{const c=_w(s.target.error);i(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}W(e,t){const r=[];return new Ee((i,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new WO(h),_=t(h.primaryKey,h.value,p);if(_ instanceof Ee){const w=_.catch(C=>(p.done(),Ee.reject(C)));r.push(w)}p.isDone?i():null===p.K?h.continue():h.continue(p.K)}}).next(()=>Ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bl(n){return new Ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=_w(r.target.error);t(i)}})}let KO=!1;function _w(n){const e=Ks.S((0,xe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KO||(KO=!0,setTimeout(()=>{throw r},0)),r}}return n}class HS{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;pt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ve.Z)(function*(){t.task=null;try{pt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){ya(r)?pt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ul(r)}yield t.et(6e4)}))}}class jB{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return Ee.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return pt("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(h=>{i-=h,r.add(c)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,s)).next(h=>(pt("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const c=Mb(s);mw(c,r)>0&&(r=c)}),new Go(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let vs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function qg(n){return null==n}function Wg(n){return 0===n&&1/n==-1/0}function $S(n){return"number"==typeof n&&Number.isInteger(n)&&!Wg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Fi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Kg(e)),e=ZO(n.get(t),e);return Kg(e)}function ZO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function Kg(n){return n+"\x01\x01"}function va(n){const e=n.length;if(Qt(e>=2),2===e)return Qt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rr.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&zt(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,c),i+="\0";break;case"\x11":i+=n.substring(s,c+1);break;default:zt()}s=c+2}return new rr(r)}const Do=["userId","batchId"];function Ob(n,e){return[n,Fi(e)]}function Nb(n,e,t){return[n,Fi(e),t]}const GS={},YO=["prefixPath","collectionGroup","readTime","documentId"],qS=["prefixPath","collectionGroup","documentId"],WS=["collectionGroup","readTime","prefixPath","documentId"],KS=["canonicalId","targetId"],ZS=["targetId","path"],QO=["path","targetId"],XO=["collectionId","parent"],JO=["indexId","uid"],Zg=["uid","sequenceNumber"],eN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tN=["indexId","uid","orderedDocumentKey"],nN=["userId","collectionPath","documentId"],yw=["userId","collectionPath","largestBatchId"],YS=["userId","collectionGroup","largestBatchId"],Fb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QS=[...Fb,"documentOverlays"],XS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_p=XS,Yg=[..._p,"indexConfiguration","indexState","indexEntries"];class Lb extends kb{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ws(n,e){const t=Rt(n);return Ks.M(t.ht,e)}function JS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class kr{constructor(e,t){this.comparator=e,this.root=t||Is.EMPTY}insert(e,t){return new kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Is.BLACK,null,null))}remove(e){return new kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Is.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vw(this.root,e,this.comparator,!1)}getReverseIterator(){return new vw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vw(this.root,e,this.comparator,!0)}}class vw{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Is{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Is.RED,this.left=i??Is.EMPTY,this.right=s??Is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Is(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Is.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zt();const e=this.left.check();if(e!==this.right.check())throw zt();return e+(this.isRed()?0:1)}}Is.EMPTY=null,Is.RED=!0,Is.BLACK=!1,Is.EMPTY=new class{constructor(){this.size=0}get key(){throw zt()}get value(){throw zt()}get color(){throw zt()}get left(){throw zt()}get right(){throw zt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Is(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $r{constructor(e){this.comparator=e,this.data=new kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ex(this.data.getIterator())}getIteratorFrom(e){return new ex(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $r)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $r(this.comparator);return t.data=e,t}}class ex{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qg(n){return n.hasNext()?n.getNext():void 0}class wa{constructor(e){this.fields=e,e.sort(Si.comparator)}static empty(){return new wa([])}unionWith(e){let t=new $r(Si.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new wa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class rN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new rN("Invalid base64 string: "+i):i}}(e);return new Zi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Zi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zi.EMPTY_BYTE_STRING=new Zi("");const ww=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $u(n){if(Qt(!!n),"string"==typeof n){let e=0;const t=ww.exec(n);if(Qt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xi(n.seconds),nanos:xi(n.nanos)}}function xi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qc(n){return"string"==typeof n?Zi.fromBase64String(n):Zi.fromUint8Array(n)}function Gu(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Iw(n){const e=n.mapValue.fields.__previous_value__;return Gu(e)?Iw(e):e}function Xg(n){const e=$u(n.mapValue.fields.__local_write_time__.timestampValue);return new ti(e.seconds,e.nanos)}class iN{constructor(e,t,r,i,s,c,h,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=_}}class qu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}const ch={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ew={nullValue:"NULL_VALUE"};function zl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gu(n)?4:rx(n)?9007199254740991:10:zt()}function Wc(n,e){if(n===e)return!0;const t=zl(n);if(t!==zl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xg(n).isEqual(Xg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=$u(r.timestampValue),c=$u(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,qc(n.bytesValue).isEqual(qc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return xi(r.geoPointValue.latitude)===xi(i.geoPointValue.latitude)&&xi(r.geoPointValue.longitude)===xi(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xi(r.integerValue)===xi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=xi(r.doubleValue),c=xi(i.doubleValue);return s===c?Wg(s)===Wg(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return mp(n.arrayValue.values||[],e.arrayValue.values||[],Wc);case 10:return function(r,i){const s=r.mapValue.fields||{},c=i.mapValue.fields||{};if(JS(s)!==JS(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!Wc(s[h],c[h])))return!1;return!0}(n,e);default:return zt()}var i}function Jg(n,e){return void 0!==(n.values||[]).find(t=>Wc(t,e))}function $a(n,e){if(n===e)return 0;const t=zl(n),r=zl(e);if(t!==r)return vn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return vn(n.booleanValue,e.booleanValue);case 2:return function(i,s){const c=xi(i.integerValue||i.doubleValue),h=xi(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return tx(n.timestampValue,e.timestampValue);case 4:return tx(Xg(n),Xg(e));case 5:return vn(n.stringValue,e.stringValue);case 6:return function(i,s){const c=qc(i),h=qc(s);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const c=i.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const _=vn(c[p],h[p]);if(0!==_)return _}return vn(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const c=vn(xi(i.latitude),xi(s.latitude));return 0!==c?c:vn(xi(i.longitude),xi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const c=i.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const _=$a(c[p],h[p]);if(_)return _}return vn(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===ch.mapValue&&s===ch.mapValue)return 0;if(i===ch.mapValue)return 1;if(s===ch.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=s.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let w=0;w<h.length&&w<_.length;++w){const C=vn(h[w],_[w]);if(0!==C)return C;const R=$a(c[h[w]],p[_[w]]);if(0!==R)return R}return vn(h.length,_.length)}(n.mapValue,e.mapValue);default:throw zt()}}function tx(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return vn(n,e);const t=$u(n),r=$u(e),i=vn(t.seconds,r.seconds);return 0!==i?i:vn(t.nanos,r.nanos)}function lh(n){return Ub(n)}function Ub(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=$u(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qc(n.bytesValue).toBase64():"referenceValue"in n?St.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const c of r.values||[])s?s=!1:i+=",",i+=Ub(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const h of i)c?c=!1:s+=",",s+=`${h}:${Ub(r.fields[h])}`;return s+"}"}(n.mapValue):zt();var e}function uh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bw(n){return!!n&&"integerValue"in n}function t_(n){return!!n&&"arrayValue"in n}function Tw(n){return!!n&&"nullValue"in n}function nx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function n_(n){return!!n&&"mapValue"in n}function yp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return jl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rx(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function sN(n){return"nullValue"in n?Ew:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?uh(qu.empty(),St.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:zt()}function oN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?uh(qu.empty(),St.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ch:zt()}function Cw(n,e){const t=$a(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ix(n,e){const t=$a(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!n_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yp(t)}setAll(e){let t=Si.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=yp(c):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());n_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];n_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){jl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Es(yp(this.value))}}function sx(n){const e=[];return jl(n.fields,(t,r)=>{const i=new Si([t]);if(n_(r)){const s=sx(r.mapValue).fields;if(0===s.length)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)}),new wa(e)}class Gr{constructor(e,t,r,i,s,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Gr(e,0,tn.min(),tn.min(),tn.min(),Es.empty(),0)}static newFoundDocument(e,t,r,i){return new Gr(e,1,t,tn.min(),r,i,0)}static newNoDocument(e,t){return new Gr(e,2,t,tn.min(),tn.min(),Es.empty(),0)}static newUnknownDocument(e,t){return new Gr(e,3,t,tn.min(),tn.min(),Es.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wu{constructor(e,t){this.position=e,this.inclusive=t}}function ox(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],c=n.position[i];if(r=s.field.isKeyField()?St.comparator(St.fromName(c.referenceValue),t.key):$a(c,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ax(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wc(n.position[t],e.position[t]))return!1;return!0}class vp{constructor(e,t="asc"){this.field=e,this.dir=t}}function aN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class cx{}class Kn extends cx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new zb(e,t,r):"array-contains"===t?new cN(e,r):"in"===t?new Sw(e,r):"not-in"===t?new lN(e,r):"array-contains-any"===t?new px(e,r):new Kn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new hx(e,r):new Hb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($a(t,this.value)):null!==t&&zl(this.value)===zl(t)&&this.matchesComparison($a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ir extends cx{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ir(e,t)}matches(e){return wp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function wp(n){return"and"===n.op}function Bb(n){return"or"===n.op}function Aw(n){return lx(n)&&wp(n)}function lx(n){for(const e of n.filters)if(e instanceof Ir)return!1;return!0}function jb(n){if(n instanceof Kn)return n.field.canonicalString()+n.op.toString()+lh(n.value);if(Aw(n))return n.filters.map(e=>jb(e)).join(",");{const e=n.filters.map(t=>jb(t)).join(",");return`${n.op}(${e})`}}function ux(n,e){return n instanceof Kn?(t=n,(r=e)instanceof Kn&&t.op===r.op&&t.field.isEqual(r.field)&&Wc(t.value,r.value)):n instanceof Ir?function(t,r){return r instanceof Ir&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,c)=>i&&ux(s,r.filters[c]),!0)}(n,e):void zt();var t,r}function dx(n,e){const t=n.filters.concat(e);return Ir.create(t,n.op)}function Dw(n){return n instanceof Kn?`${(e=n).field.canonicalString()} ${e.op} ${lh(e.value)}`:n instanceof Ir?function(e){return e.op.toString()+" {"+e.getFilters().map(Dw).join(" ,")+"}"}(n):"Filter";var e}class zb extends Kn{constructor(e,t,r){super(e,t,r),this.key=St.fromName(r.referenceValue)}matches(e){const t=St.comparator(e.key,this.key);return this.matchesComparison(t)}}class hx extends Kn{constructor(e,t){super(e,"in",t),this.keys=fx(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Hb extends Kn{constructor(e,t){super(e,"not-in",t),this.keys=fx(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fx(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>St.fromName(r.referenceValue))}class cN extends Kn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return t_(t)&&Jg(t.arrayValue,this.value)}}class Sw extends Kn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jg(this.value.arrayValue,t)}}class lN extends Kn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jg(this.value.arrayValue,t)}}class px extends Kn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!t_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jg(this.value.arrayValue,r))}}class dh{constructor(e,t=null,r=[],i=[],s=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=h,this.dt=null}}function xw(n,e=null,t=[],r=[],i=null,s=null,c=null){return new dh(n,e,t,r,i,s,c)}function hh(n){const e=Rt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),qg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lh(r)).join(",")),e.dt=t}return e.dt}function Rw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ux(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ax(n.startAt,e.startAt)&&ax(n.endAt,e.endAt)}function Ip(n){return St.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ep(n,e){return n.filters.filter(t=>t instanceof Kn&&t.field.isEqual(e))}function mx(n,e,t){let r=Ew,i=!0;for(const s of Ep(n,e)){let c=Ew,h=!0;switch(s.op){case"<":case"<=":c=sN(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=Ew}Cw({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];Cw({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function $b(n,e,t){let r=ch,i=!0;for(const s of Ep(n,e)){let c=ch,h=!0;switch(s.op){case">=":case">":c=oN(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=ch}ix({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];ix({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Kc{constructor(e,t=null,r=[],i=[],s=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this.wt=null,this._t=null}}function gx(n,e,t,r,i,s,c,h){return new Kc(n,e,t,r,i,s,c,h)}function fh(n){return new Kc(n)}function Mw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Pw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function r_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function kw(n){return null!==n.collectionGroup}function Ku(n){const e=Rt(n);if(null===e.wt){e.wt=[];const t=r_(e),r=Pw(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new vp(t)),e.wt.push(new vp(Si.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new vp(Si.keyField(),s))}}}return e.wt}function So(n){const e=Rt(n);if(!e._t)if("F"===e.limitType)e._t=xw(e.path,e.collectionGroup,Ku(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Ku(e))t.push(new vp(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Wu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Wu(e.startAt.position,e.startAt.inclusive):null;e._t=xw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Gb(n,e){e.getFirstInequalityField(),r_(n);const t=n.filters.concat([e]);return new Kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ow(n,e,t){return new Kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function i_(n,e){return Rw(So(n),So(e))&&n.limitType===e.limitType}function qb(n){return`${hh(So(n))}|lt:${n.limitType}`}function _x(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Dw(r)).join(", ")}]`),qg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lh(r)).join(",")),`Target(${t})`}(So(n))}; limitType=${n.limitType})`}function bp(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):St.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ku(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,c){const h=ox(i,s,c);return i.inclusive?h<=0:h<0}(t.startAt,Ku(t),r)||t.endAt&&!function(i,s,c){const h=ox(i,s,c);return i.inclusive?h>=0:h>0}(t.endAt,Ku(t),r)));var t,r}function yx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vx(n){return(e,t)=>{let r=!1;for(const i of Ku(n)){const s=HB(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function HB(n,e,t){const r=n.field.isKeyField()?St.comparator(e.key,t.key):function(i,s,c){const h=s.data.field(i),p=c.data.field(i);return null!==h&&null!==p?$a(h,p):zt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return zt()}}class Hl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Vb(this.inner)}size(){return this.innerSize}}const uN=new kr(St.comparator);function qo(){return uN}const wx=new kr(St.comparator);function s_(...n){let e=wx;for(const t of n)e=e.insert(t.key,t);return e}function Ix(n){let e=wx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zc(){return o_()}function Ex(){return o_()}function o_(){return new Hl(n=>n.toString(),(n,e)=>n.isEqual(e))}const dN=new kr(St.comparator),hN=new $r(St.comparator);function Pn(...n){let e=hN;for(const t of n)e=e.add(t);return e}const a_=new $r(vn);function Nw(){return a_}function Wb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wg(e)?"-0":e}}function Kb(n){return{integerValue:""+n}}function Zb(n,e){return $S(e)?Kb(e):Wb(n,e)}class c_{constructor(){this._=void 0}}function bx(n,e,t){return n instanceof l_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Gu(i)&&(i=Iw(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Zu?Tx(n,e):n instanceof ph?Cx(n,e):function(r,i){const s=pN(r,i),c=Cp(s)+Cp(r.gt);return bw(s)&&bw(r.gt)?Kb(c):Wb(r.serializer,c)}(n,e)}function fN(n,e,t){return n instanceof Zu?Tx(n,e):n instanceof ph?Cx(n,e):t}function pN(n,e){return n instanceof Tp?bw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class l_ extends c_{}class Zu extends c_{constructor(e){super(),this.elements=e}}function Tx(n,e){const t=Ax(e);for(const r of n.elements)t.some(i=>Wc(i,r))||t.push(r);return{arrayValue:{values:t}}}class ph extends c_{constructor(e){super(),this.elements=e}}function Cx(n,e){let t=Ax(e);for(const r of n.elements)t=t.filter(i=>!Wc(i,r));return{arrayValue:{values:t}}}class Tp extends c_{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Cp(n){return xi(n.integerValue||n.doubleValue)}function Ax(n){return t_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mh{constructor(e,t){this.field=e,this.transform=t}}class $B{constructor(e,t){this.version=e,this.transformResults=t}}class ni{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Yu{}function Dx(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gh(n.key,ni.none()):new Ap(n.key,n.data,ni.none());{const t=n.data,r=Es.empty();let i=new $r(Si.comparator);for(let s of e.fields)if(!i.has(s)){let c=t.field(s);null===c&&s.length>1&&(s=s.popLast(),c=t.field(s)),null===c?r.delete(s):r.set(s,c),i=i.add(s)}return new Yc(n.key,r,new wa(i.toArray()),ni.none())}}function gN(n,e,t){n instanceof Ap?function(r,i,s){const c=r.value.clone(),h=Sx(r.fieldTransforms,i,s.transformResults);c.setAll(h),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Yc?function(r,i,s){if(!Yb(r.precondition,i))return void i.convertToUnknownDocument(s.version);const c=Sx(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(d_(r)),h.setAll(c),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function u_(n,e,t,r){return n instanceof Ap?function(i,s,c,h){if(!Yb(i.precondition,s))return c;const p=i.value.clone(),_=xx(i.fieldTransforms,h,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yc?function(i,s,c,h){if(!Yb(i.precondition,s))return c;const p=xx(i.fieldTransforms,h,s),_=s.data;return _.setAll(d_(i)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(w=>w.field))}(n,e,t,r):(c=t,Yb(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function Fw(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=pN(r.transform,i||null);null!=s&&(null===t&&(t=Es.empty()),t.set(r.field,s))}return t||null}function Qb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&mp(t,r,(i,s)=>function mN(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Zu&&r instanceof Zu||t instanceof ph&&r instanceof ph?mp(t.elements,r.elements,Wc):t instanceof Tp&&r instanceof Tp?Wc(t.gt,r.gt):t instanceof l_&&r instanceof l_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ap extends Yu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yc extends Yu{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function d_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Sx(n,e,t){const r=new Map;Qt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],c=s.transform,h=e.data.field(s.field);r.set(s.field,fN(c,h,t[i]))}return r}function xx(n,e,t){const r=new Map;for(const i of n){const s=i.transform,c=t.data.field(i.field);r.set(i.field,bx(s,c,e))}return r}class gh extends Yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xb extends Yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gN(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=u_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=u_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ex();return this.mutations.forEach(i=>{const s=e.get(i.key),c=s.overlayedDocument;let h=this.applyToLocalView(c,s.mutatedFields);h=t.has(i.key)?null:h;const p=Dx(c,h);null!==p&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(tn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pn())}isEqual(e){return this.batchId===e.batchId&&mp(this.mutations,e.mutations,(t,r)=>Qb(t,r))&&mp(this.baseMutations,e.baseMutations,(t,r)=>Qb(t,r))}}class Lw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Qt(e.mutations.length===r.length);let i=dN;const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new Lw(e,t,r,i)}}class Dp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yN{constructor(e,t){this.count=e,this.unchangedNames=t}}var Li,er;function Vw(n){switch(n){default:return zt();case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0}}function eT(n){if(void 0===n)return Di("GRPC error has no .code"),Re.UNKNOWN;switch(n){case Li.OK:return Re.OK;case Li.CANCELLED:return Re.CANCELLED;case Li.UNKNOWN:return Re.UNKNOWN;case Li.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case Li.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case Li.INTERNAL:return Re.INTERNAL;case Li.UNAVAILABLE:return Re.UNAVAILABLE;case Li.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case Li.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case Li.NOT_FOUND:return Re.NOT_FOUND;case Li.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case Li.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case Li.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case Li.ABORTED:return Re.ABORTED;case Li.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case Li.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case Li.DATA_LOSS:return Re.DATA_LOSS;default:return zt()}}(er=Li||(Li={}))[er.OK=0]="OK",er[er.CANCELLED=1]="CANCELLED",er[er.UNKNOWN=2]="UNKNOWN",er[er.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",er[er.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",er[er.NOT_FOUND=5]="NOT_FOUND",er[er.ALREADY_EXISTS=6]="ALREADY_EXISTS",er[er.PERMISSION_DENIED=7]="PERMISSION_DENIED",er[er.UNAUTHENTICATED=16]="UNAUTHENTICATED",er[er.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",er[er.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",er[er.ABORTED=10]="ABORTED",er[er.OUT_OF_RANGE=11]="OUT_OF_RANGE",er[er.UNIMPLEMENTED=12]="UNIMPLEMENTED",er[er.INTERNAL=13]="INTERNAL",er[er.UNAVAILABLE=14]="UNAVAILABLE",er[er.DATA_LOSS=15]="DATA_LOSS";class tT{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return h_}static getOrCreateInstance(){return null===h_&&(h_=new tT),h_}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let h_=null;function nT(){return new TextEncoder}const vN=new fp([4294967295,4294967295],0);function Rx(n){const e=nT().encode(n),t=new BO;return t.update(e),new Uint8Array(t.digest())}function Uw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fp([t,r],0),new fp([i,s],0)]}class f_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Sp(`Invalid padding: ${t}`);if(r<0)throw new Sp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Sp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Sp(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=fp.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(fp.fromNumber(r)));return 1===i.compare(vN)&&(i=new fp([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Rx(e),[r,i]=Uw(t);for(let s=0;s<this.hashCount;s++){const c=this.Et(r,i,s);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),c=new f_(s,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(0===this.It)return;const t=Rx(e),[r,i]=Uw(t);for(let s=0;s<this.hashCount;s++){const c=this.Et(r,i,s);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Sp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _h{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,yh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _h(tn.min(),i,new kr(vn),qo(),Pn())}}class yh{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new yh(r,t,Pn(),Pn(),Pn())}}class Bw{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class Mx{constructor(e,t){this.targetId=e,this.Vt=t}}class Px{constructor(e,t,r=Zi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kx{constructor(){this.St=0,this.Dt=rT(),this.Ct=Zi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Pn(),t=Pn(),r=Pn();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:zt()}}),new yh(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=rT()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Ox{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=qo(),this.zt=jw(),this.Wt=new kr(vn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:zt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const c=s.target;if(Ip(c))if(0===i){const h=new St(c.path);this.Yt(r,h,Gr.newNoDocument(h,tn.min()))}else Qt(1===i);else{const h=this.ie(r);if(h!==i){const p=this.re(e,h);0!==p&&(this.ee(r),this.Wt=this.Wt.insert(r,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=tT.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(_,w,C){var R,N,Y,ne,te,Ne;const qe={localCacheCount:w,existenceFilterCount:C.count},Pe=C.unchangedNames;return Pe&&(qe.bloomFilter={applied:0===_,hashCount:null!==(R=Pe?.hashCount)&&void 0!==R?R:0,bitmapLength:null!==(ne=null===(Y=null===(N=Pe?.bits)||void 0===N?void 0:N.bitmap)||void 0===Y?void 0:Y.length)&&void 0!==ne?ne:0,padding:null!==(Ne=null===(te=Pe?.bits)||void 0===te?void 0:te.padding)&&void 0!==Ne?Ne:0}),qe}(p,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=r;let p,_;try{p=qc(s).toUint8Array()}catch(w){if(w instanceof rN)return _a("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw w}try{_=new f_(p,c,h)}catch(w){return _a(w instanceof Sp?"BloomFilter error: ":"Applying bloom filter failed: ",w),1}return 0===_.It?1:i!==t-this.oe(e.targetId,_)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const c=this.Gt.ue(),h=`projects/${c.projectId}/databases/${c.database}/documents/${s.path.canonicalString()}`;t.vt(h)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,c)=>{const h=this.se(c);if(h){if(s.current&&Ip(h.target)){const p=new St(h.target.path);null!==this.jt.get(p)||this.ae(c,p)||this.Yt(c,p,Gr.newNoDocument(p,e))}s.Mt&&(t.set(c,s.Ot()),s.Ft())}});let r=Pn();this.zt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const _=this.se(p);return!_||"TargetPurposeLimboResolution"===_.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.jt.forEach((s,c)=>c.setReadTime(e));const i=new _h(e,t,this.Wt,this.jt,r);return this.jt=qo(),this.zt=jw(),this.Wt=new kr(vn),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new kx,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new $r(vn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||pt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new kx),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function jw(){return new kr(St.comparator)}function rT(){return new kr(St.comparator)}const Nx={asc:"ASCENDING",desc:"DESCENDING"},Fx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lx={and:"AND",or:"OR"};class wN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zw(n,e){return n.useProto3Json||qg(e)?e:{value:e}}function vh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ux(n,e){return vh(n,e.toTimestamp())}function Vi(n){return Qt(!!n),tn.fromTimestamp(function(e){const t=$u(e);return new ti(t.seconds,t.nanos)}(n))}function Zs(n,e){return(t=n,new rr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wh(n){const e=rr.fromString(n);return Qt(aT(e)),e}function p_(n,e){return Zs(n.databaseId,e.path)}function Qc(n,e){const t=wh(e);if(t.get(1)!==n.databaseId.projectId)throw new nt(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new nt(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new St(Hw(t))}function Bx(n,e){return Zs(n.databaseId,e)}function IN(n){const e=wh(n);return 4===e.length?rr.emptyPath():Hw(e)}function xp(n){return new rr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Hw(n){return Qt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function EN(n,e,t){return{name:p_(n,e),fields:t.value.mapValue.fields}}function bN(n,e,t){const r=Qc(n,e.name),i=Vi(e.updateTime),s=e.createTime?Vi(e.createTime):tn.min(),c=new Es({mapValue:{fields:e.fields}}),h=Gr.newFoundDocument(r,i,s,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function g_(n,e){let t;if(e instanceof Ap)t={update:EN(n,e.key,e.value)};else if(e instanceof gh)t={delete:p_(n,e.key)};else if(e instanceof Yc)t={update:EN(n,e.key,e.data),updateMask:DN(e.fieldMask)};else{if(!(e instanceof Xb))return zt();t={verify:p_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const c=s.transform;if(c instanceof l_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Zu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ph)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Tp)return{fieldPath:s.field.canonicalString(),increment:c.gt};throw zt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Ux(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:zt()),t;var i}function __(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ni.updateTime(Vi(i.updateTime)):void 0!==i.exists?ni.exists(i.exists):ni.none():ni.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,c){let h=null;"setToServerValue"in c?(Qt("REQUEST_TIME"===c.setToServerValue),h=new l_):"appendMissingElements"in c?h=new Zu(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new ph(c.removeAllFromArray.values||[]):"increment"in c?h=new Tp(s,c.increment):zt();const p=Si.fromServerFormat(c.fieldPath);return new mh(p,h)}(n,i)):[];var i;if(e.update){const i=Qc(n,e.update.name),s=new Es({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new wa((e.updateMask.fieldPaths||[]).map(_=>Si.fromServerFormat(_)));return new Yc(i,s,c,t,r)}return new Ap(i,s,t,r)}if(e.delete){const i=Qc(n,e.delete);return new gh(i,t)}if(e.verify){const i=Qc(n,e.verify);return new Xb(i,t)}return zt()}function iT(n,e){return{documents:[Bx(n,e.path)]}}function sT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Bx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Bx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return oT(Ir.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:Xc((w=_).field),direction:zx(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=zw(n,e.limit);var h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function jx(n){let e=IN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Qt(1===r);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=function(w){const C=$w(w);return C instanceof Ir&&Aw(C)?C.getFilters():[C]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(w=>{return new vp(y_((C=w).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let h=null;t.limit&&(h=function(w){let C;return C="object"==typeof w?w.value:w,qg(C)?null:C}(t.limit));let p=null;var w;t.startAt&&(p=new Wu((w=t.startAt).values||[],!!w.before));let _=null;return t.endAt&&(_=function(w){return new Wu(w.values||[],!w.before)}(t.endAt)),gx(e,i,c,s,h,"F",p,_)}function $w(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=y_(e.unaryFilter.field);return Kn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=y_(e.unaryFilter.field);return Kn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=y_(e.unaryFilter.field);return Kn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=y_(e.unaryFilter.field);return Kn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return zt()}}(n):void 0!==n.fieldFilter?Kn.create(y_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Ir.create(e.compositeFilter.filters.map(t=>$w(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return zt()}}(e.compositeFilter.op))}(n):zt();var e}function zx(n){return Nx[n]}function AN(n){return Fx[n]}function Gw(n){return Lx[n]}function Xc(n){return{fieldPath:n.canonicalString()}}function y_(n){return Si.fromServerFormat(n.fieldPath)}function oT(n){return n instanceof Kn?function(e){if("=="===e.op){if(nx(e.value))return{unaryFilter:{field:Xc(e.field),op:"IS_NAN"}};if(Tw(e.value))return{unaryFilter:{field:Xc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nx(e.value))return{unaryFilter:{field:Xc(e.field),op:"IS_NOT_NAN"}};if(Tw(e.value))return{unaryFilter:{field:Xc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xc(e.field),op:AN(e.op),value:e.value}}}(n):n instanceof Ir?function(e){const t=e.getFilters().map(r=>oT(r));return 1===t.length?t[0]:{compositeFilter:{op:Gw(e.op),filters:t}}}(n):zt()}function DN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Wo{constructor(e,t,r,i,s=tn.min(),c=tn.min(),h=Zi.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Hx{constructor(e){this.fe=e}}function qw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:p_(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:vh(i,s.version.toTimestamp()),createTime:vh(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ih(e.version)};else{if(!e.isUnknownDocument())return zt();r.unknownDocument={path:t.path.toArray(),version:Ih(e.version)}}var i,s;return r}function cT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ih(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rp(n){const e=new ti(n.seconds,n.nanoseconds);return tn.fromTimestamp(e)}function Eh(n,e){const t=(e.baseMutations||[]).map(s=>__(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>__(n.fe,s)),i=ti.fromMillis(e.localWriteTimeMs);return new Jb(e.batchId,i,t,r)}function v_(n){const e=Rp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rp(n.lastLimboFreeSnapshotVersion):tn.min();let r;var i;return void 0!==n.query.documents?(Qt(1===(i=n.query).documents.length),r=So(fh(IN(i.documents[0])))):r=So(jx(n.query)),new Wo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Zi.fromBase64String(n.resumeToken))}function Gx(n,e){const t=Ih(e.snapshotVersion),r=Ih(e.lastLimboFreeSnapshotVersion);let i;i=Ip(e.target)?iT(n.fe,e.target):sT(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hh(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ww(n){const e=jx({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ow(e,e.limit,"L"):e}function Kw(n,e){return new Dp(e.largestBatchId,__(n.fe,e.overlayMutation))}function qx(n,e){const t=e.path.lastSegment();return[n,Fi(e.path.popLast()),t]}function lT(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ih(r.readTime),documentKey:Fi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Wx{getBundleMetadata(e,t){return Kx(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Rp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Kx(e).put({bundleId:(r=t).id,createTime:Ih(Vi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Zx(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Ww(i.bundledQuery),readTime:Rp(i.readTime)};var i})}saveNamedQuery(e,t){return Zx(e).put({name:(r=t).name,readTime:Ih(Vi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Kx(n){return ws(n,"bundles")}function Zx(n){return ws(n,"namedQueries")}class w_{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new w_(e,t.uid||"")}getOverlay(e,t){return I_(e).get(qx(this.userId,t)).next(r=>r?Kw(this.serializer,r):null)}getOverlays(e,t){const r=Zc();return Ee.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,c)=>{const h=new Dp(t,c);i.push(this.we(e,h))}),Ee.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Fi(c.getCollectionPath())));const s=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(I_(e).J("collectionPathOverlayIndex",h))}),Ee.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Zc(),s=Fi(t),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return I_(e).j("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const _=Kw(this.serializer,p);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Zc();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return I_(e).X({index:"collectionGroupOverlayIndex",range:h},(p,_,w)=>{const C=Kw(this.serializer,_);s.size()<i||C.largestBatchId===c?(s.set(C.getKey(),C),c=C.largestBatchId):w.done()}).next(()=>s)}we(e,t){return I_(e).put(function(r,i,s){const[c,h,p]=qx(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:g_(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function I_(n){return ws(n,"documentOverlays")}class Qu{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(xi(e.integerValue));else if("doubleValue"in e){const r=xi(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Wg(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(qc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?rx(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):zt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),St.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Yx(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function uT(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=Yx(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Qu.Ve=new Qu;class Qx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=uT(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=uT(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class SN{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class xN{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Zw{constructor(){this.je=new Qx,this.ze=new SN(this.je),this.We=new xN(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Xu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xu(this.indexId,this.documentKey,this.arrayValue,r)}}function bh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=RN(n.arrayValue,e.arrayValue),0!==t?t:(t=RN(n.directionalValue,e.directionalValue),0!==t?t:St.comparator(n.documentKey,e.documentKey)))}function RN(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class qB{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Qt(e.collectionGroup===this.collectionId);const t=xb(e);if(void 0!==t&&!this.en(t))return!1;const r=ah(e);let i=new Set,s=0,c=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[s];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[c++],h))return!1}++s}for(;s<r.length;++s)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function MN(n){var e,t;if(Qt(n instanceof Kn||n instanceof Ir),n instanceof Kn){if(n instanceof Sw){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Kn.create(n.field,"==",s)))||[];return Ir.create(i,"or")}return n}const r=n.filters.map(i=>MN(i));return Ir.create(r,n.op)}function WB(n){if(0===n.getFilters().length)return[];const e=eR(MN(n));return Qt(PN(e)),Xx(e)||Jx(e)?[e]:e.getFilters()}function Xx(n){return n instanceof Kn}function Jx(n){return n instanceof Ir&&Aw(n)}function PN(n){return Xx(n)||Jx(n)||function(e){if(e instanceof Ir&&Bb(e)){for(const t of e.getFilters())if(!Xx(t)&&!Jx(t))return!1;return!0}return!1}(n)}function eR(n){if(Qt(n instanceof Kn||n instanceof Ir),n instanceof Kn)return n;if(1===n.filters.length)return eR(n.filters[0]);const e=n.filters.map(r=>eR(r));let t=Ir.create(e,n.op);return t=E_(t),PN(t)?t:(Qt(t instanceof Ir),Qt(wp(t)),Qt(t.filters.length>1),t.filters.reduce((r,i)=>Yw(r,i)))}function Yw(n,e){let t;return Qt(n instanceof Kn||n instanceof Ir),Qt(e instanceof Kn||e instanceof Ir),t=n instanceof Kn?e instanceof Kn?Ir.create([n,e],"and"):Qw(n,e):e instanceof Kn?Qw(e,n):function(r,i){if(Qt(r.filters.length>0&&i.filters.length>0),wp(r)&&wp(i))return dx(r,i.getFilters());const s=Bb(r)?r:i,c=Bb(r)?i:r,h=s.filters.map(p=>Yw(p,c));return Ir.create(h,"or")}(n,e),E_(t)}function Qw(n,e){if(wp(e))return dx(e,n.getFilters());{const t=e.filters.map(r=>Yw(n,r));return Ir.create(t,"or")}}function E_(n){if(Qt(n instanceof Kn||n instanceof Ir),n instanceof Kn)return n;const e=n.getFilters();if(1===e.length)return E_(e[0]);if(lx(n))return n;const t=e.map(i=>E_(i)),r=[];return t.forEach(i=>{i instanceof Kn?r.push(i):i instanceof Ir&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Ir.create(r,n.op)}class kN{constructor(){this.rn=new Mp}addToCollectionParentIndex(e,t){return this.rn.add(t),Ee.resolve()}getCollectionParents(e,t){return Ee.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ee.resolve()}deleteFieldIndex(e,t){return Ee.resolve()}getDocumentsMatchingTarget(e,t){return Ee.resolve(null)}getIndexType(e,t){return Ee.resolve(0)}getFieldIndexes(e,t){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,t){return Ee.resolve(Go.min())}getMinOffsetFromCollectionGroup(e,t){return Ee.resolve(Go.min())}updateCollectionGroup(e,t,r){return Ee.resolve()}updateIndexEntries(e,t){return Ee.resolve()}}class Mp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $r(rr.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $r(rr.comparator)).toArray()}}const Xw=new Uint8Array(0);class KB{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Mp,this.un=new Hl(r=>hh(r),(r,i)=>Rw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:Fi(i)};return ON(e).put(s)}return Ee.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[zS(t),""],!1,!0);return ON(e).j(i).next(s=>{for(const c of s){if(c.collectionId!==t)break;r.push(va(c.parent))}return r})}addFieldIndex(e,t){const r=T_(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const s=r.add(i);if(t.indexState){const c=C_(e);return s.next(h=>{c.put(lT(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=T_(e),i=C_(e),s=b_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=b_(e);let i=!0;const s=new Map;return Ee.forEach(this.cn(t),c=>this.an(e,c).next(h=>{i&&(i=!!h),s.set(c,h)})).next(()=>{if(i){let c=Pn();const h=[];return Ee.forEach(s,(p,_)=>{var w;pt("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Pe=>`${Pe.fieldPath}:${Pe.kind}`).join(",")}`} to execute ${hh(t)}`);const C=function(Pe,rt){const Tt=xb(rt);if(void 0===Tt)return null;for(const Pt of Ep(Pe,Tt.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(_,p),R=function(Pe,rt){const Tt=new Map;for(const Pt of ah(rt))for(const Ln of Ep(Pe,Pt.fieldPath))switch(Ln.op){case"==":case"in":Tt.set(Pt.fieldPath.canonicalString(),Ln.value);break;case"not-in":case"!=":return Tt.set(Pt.fieldPath.canonicalString(),Ln.value),Array.from(Tt.values())}return null}(_,p),N=function(Pe,rt){const Tt=[];let Pt=!0;for(const Ln of ah(rt)){const Ur=0===Ln.kind?mx(Pe,Ln.fieldPath,Pe.startAt):$b(Pe,Ln.fieldPath,Pe.startAt);Tt.push(Ur.value),Pt&&(Pt=Ur.inclusive)}return new Wu(Tt,Pt)}(_,p),Y=function(Pe,rt){const Tt=[];let Pt=!0;for(const Ln of ah(rt)){const Ur=0===Ln.kind?$b(Pe,Ln.fieldPath,Pe.endAt):mx(Pe,Ln.fieldPath,Pe.endAt);Tt.push(Ur.value),Pt&&(Pt=Ur.inclusive)}return new Wu(Tt,Pt)}(_,p),ne=this.hn(p,_,N),te=this.hn(p,_,Y),Ne=this.ln(p,_,R),qe=this.fn(p.indexId,C,ne,N.inclusive,te,Y.inclusive,Ne);return Ee.forEach(qe,Pe=>r.H(Pe,t.limit).next(rt=>{rt.forEach(Tt=>{const Pt=St.fromSegments(Tt.documentKey);c.has(Pt)||(c=c.add(Pt),h.push(Pt))})}))}).next(()=>h)}return Ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:WB(Ir.create(e.filters,"and")).map(r=>xw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,c,h){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),_=p/(null!=t?t.length:1),w=[];for(let C=0;C<p;++C){const R=t?this.dn(t[C/_]):Xw,N=this.wn(e,R,r[C%_],i),Y=this._n(e,R,s[C%_],c),ne=h.map(te=>this.wn(e,R,te,!0));w.push(...this.createRange(N,Y,ne))}return w}wn(e,t,r,i){const s=new Xu(e,St.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new Xu(e,St.empty(),t,r);return i?s.Je():s}an(e,t){const r=new qB(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let c=null;for(const h of s)r.tn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return Ee.forEach(i,s=>this.an(e,s).next(c=>{c?0!==r&&c.fields.length<function(h){let p=new $r(Si.comparator),_=!1;for(const w of h.filters)for(const C of w.getFlattenedFilters())C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?_=!0:p=p.add(C.field));for(const w of h.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(_?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Zw;for(const i of ah(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const c=r.He(i.kind);Qu.Ve._e(s,c)}return r.Qe()}dn(e){const t=new Zw;return Qu.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Zw;return Qu.Ve._e(uh(this.databaseId,t),r.He(function(i){const s=ah(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Zw);let s=0;for(const c of ah(e)){const h=r[s++];for(const p of i)if(this.yn(t,c.fieldPath)&&t_(h))i=this.pn(i,c,h);else{const _=p.He(c.kind);Qu.Ve._e(h,_)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new Zw;p.seed(h.Qe()),Qu.Ve._e(c,p.He(t.kind)),s.push(p)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof Kn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=T_(e),i=C_(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const c=[];return Ee.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(_,w){const C=w?new gp(w.sequenceNumber,new Go(Rp(w.readTime),new St(va(w.documentKey)),w.largestBatchId)):gp.empty(),R=_.fields.map(([N,Y])=>new pw(Si.fromServerFormat(N),Y));return new fw(_.indexId,_.collectionGroup,R,C)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:vn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=T_(e),s=C_(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>Ee.forEach(h,p=>s.put(lT(p.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return Ee.forEach(t,(i,s)=>{const c=r.get(i.collectionGroup);return(c?Ee.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),Ee.forEach(h,p=>this.En(e,i,p).next(_=>{const w=this.An(s,p);return _.isEqual(w)?Ee.resolve():this.vn(e,s,p,_,w)}))))})}Rn(e,t,r,i){return b_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return b_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=b_(e);let s=new $r(bh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,h)=>{s=s.add(new Xu(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}An(e,t){let r=new $r(bh);const i=this.mn(t,e);if(null==i)return r;const s=xb(t);if(null!=s){const c=e.data.field(s.fieldPath);if(t_(c))for(const h of c.arrayValue.values||[])r=r.add(new Xu(t.indexId,e.key,this.dn(h),i))}else r=r.add(new Xu(t.indexId,e.key,Xw,i));return r}vn(e,t,r,i,s){pt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,p,_,w,C){const R=h.getIterator(),N=p.getIterator();let Y=Qg(R),ne=Qg(N);for(;Y||ne;){let te=!1,Ne=!1;if(Y&&ne){const qe=_(Y,ne);qe<0?Ne=!0:qe>0&&(te=!0)}else null!=Y?Ne=!0:te=!0;te?(w(ne),ne=Qg(N)):Ne?(C(Y),Y=Qg(R)):(Y=Qg(R),ne=Qg(N))}}(i,s,bh,h=>{c.push(this.Rn(e,t,r,h))},h=>{c.push(this.Pn(e,t,r,h))}),Ee.waitFor(c)}Tn(e){let t=1;return C_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>bh(c,h)).filter((c,h,p)=>!h||0!==bh(c,p[h-1]));const i=[];i.push(e);for(const c of r){const h=bh(c,e),p=bh(c,t);if(0===h)i[0]=e.Je();else if(h>0&&p<0)i.push(c),i.push(c.Je());else if(p>0)break}i.push(t);const s=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];s.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Xw,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Xw,[]]))}return s}bn(e,t){return bh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tR)}getMinOffset(e,t){return Ee.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||zt())).next(tR)}}function ON(n){return ws(n,"collectionParents")}function b_(n){return ws(n,"indexEntries")}function T_(n){return ws(n,"indexConfiguration")}function C_(n){return ws(n,"indexState")}function tR(n){Qt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;mw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Go(e.readTime,e.documentKey,t)}const nR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xo(e,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rR(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=r.X({range:c},(w,C,R)=>(h++,R.delete()));s.push(p.next(()=>{Qt(1===h)}));const _=[];for(const w of t.mutations){const C=Nb(e,w.key.path,t.batchId);s.push(i.delete(C)),_.push(w.key)}return Ee.waitFor(s).next(()=>_)}function Ju(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw zt();e=n.noDocument}return JSON.stringify(e).length}xo.DEFAULT_COLLECTION_PERCENTILE=10,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xo.DEFAULT=new xo(41943040,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xo.DISABLED=new xo(-1,0,0);class Th{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Qt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Th(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ed(e).X({index:"userMutationsIndex",range:r},(i,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Pp(e),c=ed(e);return c.add({}).next(h=>{Qt("number"==typeof h);const p=new Jb(h,t,r,i),_=function(R,N,Y){const ne=Y.baseMutations.map(Ne=>g_(R.fe,Ne)),te=Y.mutations.map(Ne=>g_(R.fe,Ne));return{userId:N,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:ne,mutations:te}}(this.serializer,this.userId,p),w=[];let C=new $r((R,N)=>vn(R.canonicalString(),N.canonicalString()));for(const R of i){const N=Nb(this.userId,R.key.path,h);C=C.add(R.key.path.popLast()),w.push(c.put(_)),w.push(s.put(N,GS))}return C.forEach(R=>{w.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.Vn[h]=p.keys()}),Ee.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return ed(e).get(t).next(r=>r?(Qt(r.userId===this.userId),Eh(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?Ee.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ed(e).X({index:"userMutationsIndex",range:i},(c,h,p)=>{h.userId===this.userId&&(Qt(h.batchId>=r),s=Eh(this.serializer,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ed(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ed(e).j("userMutationsIndex",t).next(r=>r.map(i=>Eh(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ob(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Pp(e).X({range:i},(c,h,p)=>{const[_,w,C]=c,R=va(w);if(_===this.userId&&t.path.isEqual(R))return ed(e).get(C).next(N=>{if(!N)throw zt();Qt(N.userId===this.userId),s.push(Eh(this.serializer,N))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $r(vn);const i=[];return t.forEach(s=>{const c=Ob(this.userId,s.path),h=IDBKeyRange.lowerBound(c),p=Pp(e).X({range:h},(_,w,C)=>{const[R,N,Y]=_,ne=va(N);R===this.userId&&s.path.isEqual(ne)?r=r.add(Y):C.done()});i.push(p)}),Ee.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Ob(this.userId,r),c=IDBKeyRange.lowerBound(s);let h=new $r(vn);return Pp(e).X({range:c},(p,_,w)=>{const[C,R,N]=p,Y=va(R);C===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(h=h.add(N)):w.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ed(e).get(s).next(c=>{if(null===c)throw zt();Qt(c.userId===this.userId),r.push(Eh(this.serializer,c))}))}),Ee.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return rR(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Pp(e).X({range:r},(s,c,h)=>{if(s[0]===this.userId){const p=va(s[1]);i.push(p)}else h.done()}).next(()=>{Qt(0===i.length)})})}containsKey(e,t){return iR(e,this.userId,t)}xn(e){return sR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iR(n,e,t){const r=Ob(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return Pp(n).X({range:s,Y:!0},(h,p,_)=>{const[w,C,R]=h;w===e&&C===i&&(c=!0),_.done()}).next(()=>c)}function ed(n){return ws(n,"mutations")}function Pp(n){return ws(n,"documentMutations")}function sR(n){return ws(n,"mutationQueues")}class Ch{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ch(0)}static Mn(){return new Ch(-1)}}class NN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Ch(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>tn.fromTimestamp(new ti(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>td(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Qt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return td(e).X((c,h)=>{const p=v_(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>Ee.waitFor(s)).next(()=>i)}forEachTarget(e,t){return td(e).X((r,i)=>{const s=v_(i);t(s)})}$n(e){return oR(e).get("targetGlobalKey").next(t=>(Qt(null!==t),t))}On(e,t){return oR(e).put("targetGlobalKey",t)}Fn(e,t){return td(e).put(Gx(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=hh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return td(e).X({range:i,index:"queryTargetsIndex"},(c,h,p)=>{const _=v_(h);Rw(t,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=nd(e);return t.forEach(c=>{const h=Fi(c.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),Ee.waitFor(i)}removeMatchingKeys(e,t,r){const i=nd(e);return Ee.forEach(t,s=>{const c=Fi(s.path);return Ee.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=nd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=nd(e);let s=Pn();return i.X({range:r,Y:!0},(c,h,p)=>{const _=va(c[1]),w=new St(_);s=s.add(w)}).next(()=>s)}containsKey(e,t){const r=Fi(t.path),i=IDBKeyRange.bound([r],[zS(r)],!1,!0);let s=0;return nd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,h],p,_)=>{0!==c&&(s++,_.done())}).next(()=>s>0)}le(e,t){return td(e).get(t).next(r=>r?v_(r):null)}}function td(n){return ws(n,"targets")}function oR(n){return ws(n,"targetGlobal")}function nd(n){return ws(n,"targetDocuments")}function aR([n,e],[t,r]){const i=vn(n,t);return 0===i?vn(e,r):i}class FN{constructor(e){this.Ln=e,this.buffer=new $r(aR),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();aR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;pt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ve.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ya(r)?pt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ul(r)}yield t.Qn(3e5)}))}}class LN{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ee.resolve(vs.ct);const r=new FN(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(nR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nR):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,c,h,p,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),i=this.params.maximumSequenceNumbersToCollect):i=C,c=Date.now(),this.nthSequenceNumber(e,i))).next(C=>(r=C,h=Date.now(),this.removeTargets(e,r,t))).next(C=>(s=C,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(C=>(_=Date.now(),hw()<=hn.in.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${C} documents in `+(_-p)+`ms\nTotal Duration: ${_-w}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:C})))}}class VN{constructor(e,t){this.db=e,this.garbageCollector=function lR(n,e){return new LN(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return Jw(e,r)}removeReference(e,t,r){return Jw(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Jw(e,t)}Xn(e,t){return function(r,i){let s=!1;return sR(r).Z(c=>iR(r,c,i).next(h=>(h&&(s=!0),Ee.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(c,h)=>{if(h<=t){const p=this.Xn(e,c).next(_=>{if(!_)return s++,r.getEntry(e,c).next(()=>(r.removeEntry(c,tn.min()),nd(e).delete([0,Fi(c.path)])))});i.push(p)}}).next(()=>Ee.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Jw(e,t)}Yn(e,t){const r=nd(e);let i,s=vs.ct;return r.X({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:_})=>{0===c?(s!==vs.ct&&t(new St(va(i)),s),s=_,i=p):s=vs.ct}).next(()=>{s!==vs.ct&&t(new St(va(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jw(n,e){return nd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Fi(e.path),sequenceNumber:r}));var r}class dT{constructor(){this.changes=new Hl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hT{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return rd(e).put(r)}removeEntry(e,t,r){return rd(e).delete(function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],cT(s),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Gr.newInvalidDocument(t);return rd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(e0(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:Gr.newInvalidDocument(t)};return rd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(e0(t))},(i,s)=>{r={document:this.ts(t,s),size:Ju(s)}}).next(()=>r)}getEntries(e,t){let r=qo();return this.ns(e,t,(i,s)=>{const c=this.ts(i,s);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=qo(),i=new kr(St.comparator);return this.ns(e,t,(s,c)=>{const h=this.ts(s,c);r=r.insert(s,h),i=i.insert(s,Ju(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return Ee.resolve();let i=new $r(pT);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(e0(i.first()),e0(i.last())),c=i.getIterator();let h=c.getNext();return rd(e).X({index:"documentKeyIndex",range:s},(p,_,w)=>{const C=St.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;h&&pT(h,C)<0;)r(h,null),h=c.getNext();h&&h.isEqual(C)&&(r(h,_),h=c.hasNext()?c.getNext():null),h?w.G(e0(h)):w.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,c=[s.popLast().toArray(),s.lastSegment(),cT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rd(e).j(IDBKeyRange.bound(c,h,!0)).next(p=>{let _=qo();for(const w of p){const C=this.ts(St.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);C.isFoundDocument()&&(bp(t,C)||i.has(C.key))&&(_=_.insert(C.key,C))}return _})}getAllFromCollectionGroup(e,t,r,i){let s=qo();const c=Ro(t,r),h=Ro(t,Go.max());return rd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,_,w)=>{const C=this.ts(St.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(C.key,C),s.size===i&&w.done()}).next(()=>s)}newChangeBuffer(e){return new UN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fT(e).get("remoteDocumentGlobalKey").next(t=>(Qt(!!t),t))}Zn(e,t){return fT(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function $x(n,e){let t;if(e.document)t=bN(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=St.fromSegments(e.noDocument.path),i=Rp(e.noDocument.readTime);t=Gr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return zt();{const r=St.fromSegments(e.unknownDocument.path),i=Rp(e.unknownDocument.version);t=Gr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ti(r[0],r[1]);return tn.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(tn.min()))return r}return Gr.newInvalidDocument(e)}}function uR(n){return new hT(n)}class UN extends dT{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Hl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new $r((s,c)=>vn(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.us.get(s);if(t.push(this.os.removeEntry(e,s,h.readTime)),c.isValidDocument()){const p=qw(this.os.serializer,c);i=i.add(s.path.popLast());const _=Ju(p);r+=_-h.size,t.push(this.os.addEntry(e,s,p))}else if(r-=h.size,this.trackRemovals){const p=qw(this.os.serializer,c.convertToNoDocument(tn.min()));t.push(this.os.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),Ee.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,c)=>{this.us.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function fT(n){return ws(n,"remoteDocumentGlobal")}function rd(n){return ws(n,"remoteDocumentsV14")}function e0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ro(n,e){const t=e.documentKey.path.toArray();return[n,cT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=vn(t[s],r[s]),i)return i;return i=vn(t.length,r.length),i||(i=vn(t[t.length-2],r[r.length-2]),i||vn(t[t.length-1],r[r.length-1]))}class dR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hR{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&u_(r.mutation,i,wa.empty(),ti.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pn()){const i=Zc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let c=s_();return s.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Zc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let s=qo();const c=o_(),h=o_();return t.forEach((p,_)=>{const w=r.get(_.key);i.has(_.key)&&(void 0===w||w.mutation instanceof Yc)?s=s.insert(_.key,_):void 0!==w?(c.set(_.key,w.mutation.getFieldMask()),u_(w.mutation,_,w.mutation.getFieldMask(),ti.now())):c.set(_.key,wa.empty())}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((_,w)=>c.set(_,w)),t.forEach((_,w)=>{var C;return h.set(_,new dR(w,null!==(C=c.get(_))&&void 0!==C?C:null))}),h))}recalculateAndSaveOverlays(e,t){const r=o_();let i=new kr((c,h)=>c-h),s=Pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let w=r.get(p)||wa.empty();w=h.applyToLocalView(_,w),r.set(p,w);const C=(i.get(h.batchId)||Pn()).add(p);i=i.insert(h.batchId,C)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),_=p.key,w=p.value,C=Ex();w.forEach(R=>{if(!s.has(R)){const N=Dx(t.get(R),r.get(R));null!==N&&C.set(R,N),s=s.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,_,C))}return Ee.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return St.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const c=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Ee.resolve(Zc());let h=-1,p=s;return c.next(_=>Ee.forEach(_,(w,C)=>(h<C.largestBatchId&&(h=C.largestBatchId),s.get(w)?Ee.resolve():this.remoteDocumentCache.getEntry(e,w).next(R=>{p=p.insert(w,R)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,p,_,Pn())).next(w=>({batchId:h,changes:Ix(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new St(t)).next(r=>{let i=s_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=s_();return this.indexManager.getCollectionParents(e,i).next(c=>Ee.forEach(c,h=>{const p=(_=t,w=h.child(i),new Kc(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,w;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(_=>{_.forEach((w,C)=>{s=s.insert(w,C)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((h,p)=>{const _=p.getKey();null===s.get(_)&&(s=s.insert(_,Gr.newInvalidDocument(_)))});let c=s_();return s.forEach((h,p)=>{const _=i.get(h);void 0!==_&&u_(_.mutation,p,wa.empty(),ti.now()),bp(t,p)&&(c=c.insert(h,p))}),c})}}class fR{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ee.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Vi(r.createTime)}),Ee.resolve()}getNamedQuery(e,t){return Ee.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Ww(r.bundledQuery),readTime:Vi(r.readTime)}),Ee.resolve();var r}}class BN{constructor(){this.overlays=new kr(St.comparator),this.ls=new Map}getOverlay(e,t){return Ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zc();return Ee.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),Ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),Ee.resolve()}getOverlaysForCollection(e,t,r){const i=Zc(),s=t.length+1,c=new St(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new kr((_,w)=>_-w);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let w=s.get(_.largestBatchId);null===w&&(w=Zc(),s=s.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const h=Zc(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,w)=>h.set(_,w)),!(h.size()>=i)););return Ee.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Dp(t,r));let s=this.ls.get(t);void 0===s&&(s=Pn(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class A_{constructor(){this.fs=new $r(qr.ds),this.ws=new $r(qr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new qr(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new qr(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new St(new rr([])),r=new qr(t,e),i=new qr(t,e+1),s=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),s.push(c.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new St(new rr([])),r=new qr(t,e),i=new qr(t,e+1);let s=Pn();return this.ws.forEachInRange([r,i],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new qr(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class qr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return St.comparator(e.key,t.key)||vn(e.As,t.As)}static _s(e,t){return vn(e.As,t.As)||St.comparator(e.key,t.key)}}class pR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new $r(qr.ds)}checkEmpty(e){return Ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const c=new Jb(s,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Rs=this.Rs.add(new qr(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Ee.resolve(c)}lookupMutationBatch(e,t){return Ee.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return Ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qr(t,0),i=new qr(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],c=>{const h=this.Ps(c.As);s.push(h)}),Ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $r(vn);return t.forEach(i=>{const s=new qr(i,0),c=new qr(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,c],h=>{r=r.add(h.As)})}),Ee.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;St.isDocumentKey(s)||(s=s.child(""));const c=new qr(new St(s),0);let h=new $r(vn);return this.Rs.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(h=h.add(p.As)),!0)},c),Ee.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Qt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return Ee.forEach(t.mutations,i=>{const s=new qr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new qr(t,0),i=this.Rs.firstAfterOrEqual(r);return Ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ee.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mT{constructor(e){this.Ds=e,this.docs=new kr(St.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ee.resolve(r?r.document.mutableCopy():Gr.newInvalidDocument(t))}getEntries(e,t){let r=qo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Gr.newInvalidDocument(i))}),Ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=qo();const c=t.path,h=new St(c.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:_,value:{document:w}}=p.getNext();if(!c.isPrefixOf(_.path))break;_.path.length>c.length+1||mw(Mb(w),r)<=0||(i.has(w.key)||bp(t,w))&&(s=s.insert(w.key,w.mutableCopy()))}return Ee.resolve(s)}getAllFromCollectionGroup(e,t,r,i){zt()}Cs(e,t){return Ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gT(this)}getSize(e){return Ee.resolve(this.size)}}class gT extends dT{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),Ee.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class jN{constructor(e){this.persistence=e,this.xs=new Hl(t=>hh(t),Rw),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new A_,this.targetCount=0,this.Ms=Ch.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),Ee.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ch(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ee.resolve()}updateTargetData(e,t){return this.Fn(t),Ee.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(c),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),Ee.waitFor(s).next(()=>i)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return Ee.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),Ee.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(c=>{s.push(i.markPotentiallyOrphaned(e,c))}),Ee.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return Ee.resolve(r)}containsKey(e,t){return Ee.resolve(this.ks.containsKey(t))}}class mR{constructor(e,t){this.$s={},this.overlays={},this.Os=new vs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new jN(this),this.indexManager=new kN,this.remoteDocumentCache=new mT(r=>this.referenceDelegate.Ls(r)),this.serializer=new Hx(t),this.qs=new fR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new pR(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){pt("MemoryPersistence","Starting transaction:",e);const i=new gR(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return Ee.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class gR extends kb{constructor(e){super(),this.currentSequenceNumber=e}}class t0{constructor(e){this.persistence=e,this.Qs=new A_,this.js=null}static zs(e){return new t0(e)}get Ws(){if(this.js)return this.js;throw zt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),Ee.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ee.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Ws,r=>{const i=St.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,tn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Ee.or([()=>Ee.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class zN{constructor(e){this.serializer=e}O(e,t,r,i){const s=new $g("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Do,{unique:!0}),h.createObjectStore("documentMutations"),_R(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=Ee.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),_R(e)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tn.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").j().next(_=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Do,{unique:!0});const w=p.store("mutations"),C=_.map(R=>w.put(R));return Ee.waitFor(C)})}(e,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(s))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(s))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,s))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(s))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:nN});p.createIndex("collectionPathOverlayIndex",yw,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",YS,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:YO});p.createIndex("documentKeyIndex",qS),p.createIndex("collectionGroupIndex",WS)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,s))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:JO}).createIndex("sequenceNumberIndex",Zg,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:eN}).createIndex("documentKeyIndex",tN,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Ju(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>Ee.forEach(i,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(h=>Ee.forEach(h,p=>{Qt(p.userId===s.userId);const _=Eh(this.serializer,p);return rR(e,s.userId,_).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((c,h)=>{const p=new rr(c),_=[0,Fi(p)];s.push(t.get(_).next(w=>w?Ee.resolve():t.put({targetId:0,path:Fi(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ee.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:XO});const r=t.store("collectionParents"),i=new Mp,s=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:Fi(p)})}};return t.store("remoteDocuments").X({Y:!0},(c,h)=>{const p=new rr(c);return s(p.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,h,p],_)=>{const w=va(h);return s(w.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=v_(i),c=Gx(this.serializer,s);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,c)=>{const h=t.store("remoteDocumentsV14"),p=(_=c,_.document?new St(rr.fromString(_.document.name).popFirst(5)):_.noDocument?St.fromSegments(_.noDocument.path):_.unknownDocument?St.fromSegments(_.unknownDocument.path):zt()).path.toArray();var _;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(w))}).next(()=>Ee.waitFor(i))}si(e,t){const r=t.store("mutations"),i=uR(this.serializer),s=new mR(t0.zs,this.serializer.fe);return r.j().next(c=>{const h=new Map;return c.forEach(p=>{var _;let w=null!==(_=h.get(p.userId))&&void 0!==_?_:Pn();Eh(this.serializer,p).keys().forEach(C=>w=w.add(C)),h.set(p.userId,w)}),Ee.forEach(h,(p,_)=>{const w=new Ki(_),C=w_.de(this.serializer,w),R=s.getIndexManager(w),N=Th.de(w,this.serializer,R,s.referenceDelegate);return new hR(i,N,C,R).recalculateAndSaveOverlaysForDocumentKeys(new Lb(t,vs.ct),p).next()})})}}function _R(n){n.createObjectStore("targetDocuments",{keyPath:ZS}).createIndex("documentTargetsIndex",QO,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KS,{unique:!0}),n.createObjectStore("targetGlobal")}const r0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yR{constructor(e,t,r,i,s,c,h,p,_,w,C=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=c,this.document=h,this.ri=_,this.oi=w,this.ui=C,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=R=>Promise.resolve(),!yR.D())throw new nt(Re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VN(this,i),this.di=t+"main",this.serializer=new Hx(p),this.wi=new Ks(this.di,this.ui,new zN(this.serializer)),this.Bs=new NN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uR(this.serializer),this.qs=new Wx,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===w&&Di("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nt(Re.FAILED_PRECONDITION,r0);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new vs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ve.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>s0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(ya(e))return pt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return kp(e).get("owner").next(t=>Ee.resolve(this.Ri(t)))}Pi(e){return s0(e).delete(this.clientId)}bi(){var e=this;return(0,Ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ws(r,"clientMetadata");return i.j().next(s=>{const c=e.Si(s,18e5),h=s.filter(p=>-1===c.indexOf(p));return Ee.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Ee.resolve(!0):kp(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new nt(Re.FAILED_PRECONDITION,r0);return!1}}return!(!this.networkEnabled||!this.inForeground)||s0(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&pt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Lb(t,vs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>s0(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Th.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KB(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return w_.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){pt("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(c=this.ui)?Yg:14===c?_p:13===c?XS:12===c?QS:11===c?Fb:void zt();var c;let h;return this.wi.runTransaction(e,i,s,p=>(h=new Lb(p,this.Os?this.Os.next():vs.ct),"readwrite-primary"===t?this.Ti(h).next(_=>!!_||this.Ei(h)).next(_=>{if(!_)throw Di(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new nt(Re.FAILED_PRECONDITION,Pb);return r(h)}).next(_=>this.vi(h).next(()=>_)):this.Oi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Oi(e){return kp(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new nt(Re.FAILED_PRECONDITION,r0)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kp(e).put("owner",t)}static D(){return Ks.D()}Ai(e){const t=kp(e);return t.get("owner").next(r=>this.Ri(r)?(pt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ee.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Di(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,xe.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return pt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Di("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Di("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kp(n){return ws(n,"owner")}function s0(n){return ws(n,"clientMetadata")}function o0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class vR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Pn(),i=Pn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new vR(e,t.fromCache,r,i)}}class a0{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(Mw(t))return Ee.resolve(null);let r=So(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ow(t,null,"F"),r=So(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const c=Pn(...s);return this.Ui.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.ji(t,h);return this.zi(t,_,c,p.readTime)?this.Ki(e,Ow(t,null,"F")):this.Wi(e,_,t,p)}))})))}Gi(e,t,r,i){return Mw(t)||i.isEqual(tn.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const c=this.ji(t,s);return this.zi(t,c,r,i)?this.Qi(e,t):(hw()<=hn.in.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_x(t)),this.Wi(e,c,t,Rb(i,-1)))})}ji(e,t){let r=new $r(vx(e));return t.forEach((i,s)=>{bp(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return hw()<=hn.in.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",_x(t)),this.Ui.getDocumentsMatchingQuery(e,t,Go.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(c=>{s=s.insert(c.key,c)}),s))}}class wR{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new kr(vn),this.Yi=new Hl(s=>hh(s),Rw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hR(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function _T(n,e,t,r){return new wR(n,e,t,r)}function IR(n,e){return c0.apply(this,arguments)}function c0(){return c0=(0,Ve.Z)(function*(n,e){const t=Rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const c=[],h=[];let p=Pn();for(const _ of i){c.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}for(const _ of s){h.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(r,p).next(_=>({er:_,removedBatchIds:c,addedBatchIds:h}))})})}),c0.apply(this,arguments)}function Ah(n){const e=Rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function yT(n,e,t){let r=Pn(),i=Pn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let c=qo();return t.forEach((h,p)=>{const _=s.get(h);p.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(tn.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):pt("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",p.version)}),{nr:c,sr:i}})}function bR(n,e){const t=Rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Op(n,e){const t=Rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,Ee.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new Wo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Np(n,e,t){return TR.apply(this,arguments)}function TR(){return TR=(0,Ve.Z)(function*(n,e,t){const r=Rt(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!ya(c))throw c;pt("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),TR.apply(this,arguments)}function D_(n,e,t){const r=Rt(n);let i=tn.min(),s=Pn();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,_){const w=Rt(h),C=w.Yi.get(_);return void 0!==C?Ee.resolve(w.Ji.get(C)):w.Bs.getTargetData(p,_)}(r,c,So(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:tn.min(),t?s:Pn())).next(h=>(HN(r,yx(e),h),{documents:h,ir:s})))}function CR(n,e){const t=Rt(n),r=Rt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(c=>c?c.target:null))}function AR(n,e){const t=Rt(n),r=t.Xi.get(e)||tn.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,Rb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(HN(t,e,i),i))}function HN(n,e,t){let r=n.Xi.get(e)||tn.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function DR(){return DR=(0,Ve.Z)(function*(n,e,t,r){const i=Rt(n);let s=Pn(),c=qo();for(const _ of t){const w=e.rr(_.metadata.name);_.document&&(s=s.add(w));const C=e.ur(_);C.setReadTime(e.cr(_.metadata.readTime)),c=c.insert(w,C)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),p=yield Op(i,(_=r,So(fh(rr.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>yT(_,h,c).next(w=>(h.apply(_),w)).next(w=>i.Bs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>i.Bs.addMatchingKeys(_,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,w.nr,w.sr)).next(()=>w.nr)))}),DR.apply(this,arguments)}function SR(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,Ve.Z)(function*(n,e,t=Pn()){const r=yield Op(n,So(Ww(e.bundledQuery))),i=Rt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const c=Vi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(s,e);const h=r.withResumeToken(Zi.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(s,h).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),vT.apply(this,arguments)}function xR(n,e){return`firestore_clients_${n}_${e}`}function RR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function MR(n,e){return`firestore_targets_${n}_${e}`}class wT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(s=new nt(i.error.code,i.error.message))),c?new wT(e,t,i.state,s):(Di("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class u0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new nt(r.error.code,r.error.message))),s?new u0(e,r.state,i):(Di("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class IT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Nw();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=$S(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return i?new IT(e,s):(Di("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class PR{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new PR(t.clientId,t.onlineState):(Di("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ET{constructor(){this.activeTargetIds=Nw()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fp{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new kr(vn),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=xR(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new ET),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ve.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(xR(e.persistenceKey,i));if(s){const c=IT.ar(i,s);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(MR(this.persistenceKey,e));if(r){const i=u0.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(MR(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return pt("SharedClientState","READ",e,t),t}setItem(e,t){pt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){pt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(pt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Di("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let c=vs.ct;if(null!=s)try{const h=JSON.parse(s);Qt("number"==typeof h),c=h}catch(h){Di("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==vs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new wT(this.currentUser,e,t,r),s=RR(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=RR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=MR(this.persistenceKey,e),s=new u0(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return IT.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return wT.ar(new Ki(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return u0.ar(i,t)}br(e){return PR.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);pt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),c=[],h=[];return s.forEach(p=>{i.has(p)||c.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Wr(c,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Nw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class kR{constructor(){this.Hr=new ET,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ET,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $N{Yr(e){}shutdown(){}}class bT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jc=null;function d0(){return null===Jc?Jc=268435456+Math.round(2147483648*Math.random()):Jc++,"0x"+Jc.toString(16)}const TT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CT{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const so="WebChannelConnection";class AT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const c=d0(),h=this.To(e,t);pt("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);const p={};return this.Eo(p,i,s),this.Ao(e,h,p,r).then(_=>(pt("RestConnection",`Received RPC '${e}' ${c}: `,_),_),_=>{throw _a("RestConnection",`RPC '${e}' ${c} failed with error: `,_,"url: ",h,"request:",r),_})}vo(e,t,r,i,s,c){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${TT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=d0();return new Promise((c,h)=>{const p=new UO;p.setWithCredentials(!0),p.listenOnce($c.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Db.NO_ERROR:const w=p.getResponseJson();pt(so,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(w)),c(w);break;case Db.TIMEOUT:pt(so,`RPC '${e}' ${s} timed out`),h(new nt(Re.DEADLINE_EXCEEDED,"Request time out"));break;case Db.HTTP_ERROR:const C=p.getStatus();if(pt(so,`RPC '${e}' ${s} failed with status:`,C,"response text:",p.getResponseText()),C>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const N=R?.error;if(N&&N.status&&N.message){const Y=function(ne){const te=ne.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(te)>=0?te:Re.UNKNOWN}(N.status);h(new nt(Y,N.message))}else h(new nt(Re.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new nt(Re.UNAVAILABLE,"Connection failed."));break;default:zt()}}finally{pt(so,`RPC '${e}' ${s} completed.`)}});const _=JSON.stringify(i);pt(so,`RPC '${e}' ${s} sending request:`,i),p.send(t,"POST",_,r,15)})}Ro(e,t,r){const i=d0(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Hc(),h=VO(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.xmlHttpFactory=new PS({})),this.Eo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const w=s.join("");pt(so,`Creating RPC '${e}' stream ${i}: ${w}`,p);const C=c.createWebChannel(w,p);let R=!1,N=!1;const Y=new CT({ro:te=>{N?pt(so,`Not sending because RPC '${e}' stream ${i} is closed:`,te):(R||(pt(so,`Opening RPC '${e}' stream ${i} transport.`),C.open(),R=!0),pt(so,`RPC '${e}' stream ${i} sending:`,te),C.send(te))},oo:()=>C.close()}),ne=(te,Ne,qe)=>{te.listen(Ne,Pe=>{try{qe(Pe)}catch(rt){setTimeout(()=>{throw rt},0)}})};return ne(C,jg.EventType.OPEN,()=>{N||pt(so,`RPC '${e}' stream ${i} transport opened.`)}),ne(C,jg.EventType.CLOSE,()=>{N||(N=!0,pt(so,`RPC '${e}' stream ${i} transport closed`),Y.wo())}),ne(C,jg.EventType.ERROR,te=>{N||(N=!0,_a(so,`RPC '${e}' stream ${i} transport errored:`,te),Y.wo(new nt(Re.UNAVAILABLE,"The operation could not be completed")))}),ne(C,jg.EventType.MESSAGE,te=>{var Ne;if(!N){const qe=te.data[0];Qt(!!qe);const rt=qe.error||(null===(Ne=qe[0])||void 0===Ne?void 0:Ne.error);if(rt){pt(so,`RPC '${e}' stream ${i} received error:`,rt);const Tt=rt.status;let Pt=function(Ur){const gd=Li[Ur];if(void 0!==gd)return eT(gd)}(Tt),Ln=rt.message;void 0===Pt&&(Pt=Re.INTERNAL,Ln="Unknown error status: "+Tt+" with message "+rt.message),N=!0,Y.wo(new nt(Pt,Ln)),C.close()}else pt(so,`RPC '${e}' stream ${i} received:`,qe),Y._o(qe)}}),ne(h,pc.STAT_EVENT,te=>{te.stat===Ha.PROXY?pt(so,`RPC '${e}' stream ${i} detected buffering proxy`):te.stat===Ha.NOPROXY&&pt(so,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Y.fo()},0),Y}}function h0(){return typeof window<"u"?window:null}function Dh(){return typeof document<"u"?document:null}function f0(n){return new wN(n,!0)}class OR{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&pt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class GN{constructor(e,t,r,i,s,c,h,p){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new OR(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ve.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===Re.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===Re.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new nt(Re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return pt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NR extends GN{constructor(e,t,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function m_(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:zt(),i=e.targetChange.targetIds||[],s=function(p,_){return p.useProto3Json?(Qt(void 0===_||"string"==typeof _),Zi.fromBase64String(_||"")):(Qt(void 0===_||_ instanceof Uint8Array),Zi.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const _=void 0===p.code?Re.UNKNOWN:eT(p.code);return new nt(_,p.message||"")}(c);t=new Px(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Qc(n,r.document.name),s=Vi(r.document.updateTime),c=r.document.createTime?Vi(r.document.createTime):tn.min(),h=new Es({mapValue:{fields:r.document.fields}}),p=Gr.newFoundDocument(i,s,c,h);t=new Bw(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Qc(n,r.document),s=r.readTime?Vi(r.readTime):tn.min(),c=Gr.newNoDocument(i,s);t=new Bw([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Qc(n,r.document);t=new Bw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return zt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,c=new yN(i,s);t=new Mx(r.targetId,c)}}var p;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return tn.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?tn.min():s.readTime?Vi(s.readTime):tn.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=xp(this.serializer),t.addTarget=function(i,s){let c;const h=s.target;if(c=Ip(h)?{documents:iT(i,h)}:{query:sT(i,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=Vx(i,s.resumeToken);const p=zw(i,s.expectedCount);null!==p&&(c.expectedCount=p)}else if(s.snapshotVersion.compareTo(tn.min())>0){c.readTime=vh(i,s.snapshotVersion.toTimestamp());const p=zw(i,s.expectedCount);null!==p&&(c.expectedCount=p)}return c}(this.serializer,e);const r=function CN(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=xp(this.serializer),t.removeTarget=e,this.Wo(t)}}class qN extends GN{constructor(e,t,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function TN(n,e){return n&&n.length>0?(Qt(void 0!==e),n.map(t=>function(r,i){let s=Vi(r.updateTime?r.updateTime:i);return s.isEqual(tn.min())&&(s=Vi(i)),new $B(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Vi(e.commitTime);return this.listener.cu(r,t)}return Qt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=xp(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>g_(this.serializer,r))};this.Wo(t)}}class WN extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new nt(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new nt(Re.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.vo(e,t,r,s,c,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new nt(Re.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class FR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Di(t),this.mu=!1):pt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class LR{constructor(e,t,r,i,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(h=>{r.enqueueAndForget((0,Ve.Z)(function*(){var p;Sh(c)&&(pt("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ve.Z)(function*(_){const w=Rt(_);w.vu.add(4),yield Vp(w),w.bu.set("Unknown"),w.vu.delete(4),yield Lp(w)}),function(_){return p.apply(this,arguments)})(c))}))}),this.bu=new FR(r,i)}}function Lp(n){return ST.apply(this,arguments)}function ST(){return ST=(0,Ve.Z)(function*(n){if(Sh(n))for(const e of n.Ru)yield e(!0)}),ST.apply(this,arguments)}function Vp(n){return p0.apply(this,arguments)}function p0(){return p0=(0,Ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),p0.apply(this,arguments)}function Up(n,e){const t=Rt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),RT(t)?xT(t):Bp(t).Ko()&&g0(t,e))}function m0(n,e){const t=Rt(n),r=Bp(t);t.Au.delete(e),r.Ko()&&_0(t,e),0===t.Au.size&&(r.Ko()?r.jo():Sh(t)&&t.bu.set("Unknown"))}function g0(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bp(n).su(e)}function _0(n,e){n.Vu.qt(e),Bp(n).iu(e)}function xT(n){n.Vu=new Ox({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Bp(n).start(),n.bu.gu()}function RT(n){return Sh(n)&&!Bp(n).Uo()&&n.Au.size>0}function Sh(n){return 0===Rt(n).vu.size}function ZN(n){n.Vu=void 0}function YN(n){return MT.apply(this,arguments)}function MT(){return MT=(0,Ve.Z)(function*(n){n.Au.forEach((e,t)=>{g0(n,e)})}),MT.apply(this,arguments)}function QN(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,Ve.Z)(function*(n,e){ZN(n),RT(n)?(n.bu.Iu(e),xT(n)):n.bu.set("Unknown")}),PT.apply(this,arguments)}function VR(n,e,t){return y0.apply(this,arguments)}function y0(){return y0=(0,Ve.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof Px&&2===e.state&&e.cause)try{yield(r=(0,Ve.Z)(function*(i,s){const c=s.cause;for(const h of s.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){pt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield v0(n,r)}else if(e instanceof Bw?n.Vu.Ht(e):e instanceof Mx?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(tn.min()))try{const r=yield Ah(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const c=i.Vu.ce(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=i.Au.get(p);_&&i.Au.set(p,_.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach((h,p)=>{const _=i.Au.get(h);if(!_)return;i.Au.set(h,_.withResumeToken(Zi.EMPTY_BYTE_STRING,_.snapshotVersion)),_0(i,h);const w=new Wo(_.target,h,p,_.sequenceNumber);g0(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){pt("RemoteStore","Failed to raise snapshot:",r),yield v0(n,r)}var r}),y0.apply(this,arguments)}function v0(n,e,t){return w0.apply(this,arguments)}function w0(){return w0=(0,Ve.Z)(function*(n,e,t){if(!ya(e))throw e;n.vu.add(1),yield Vp(n),n.bu.set("Offline"),t||(t=()=>Ah(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ve.Z)(function*(){pt("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Lp(n)}))}),w0.apply(this,arguments)}function kT(n,e){return e().catch(t=>v0(n,t,e))}function S_(n){return OT.apply(this,arguments)}function OT(){return OT=(0,Ve.Z)(function*(n){const e=Rt(n),t=xh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;NT(e);)try{const i=yield bR(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,UR(e,i)}catch(i){yield v0(e,i)}FT(e)&&BR(e)}),OT.apply(this,arguments)}function NT(n){return Sh(n)&&n.Eu.length<10}function UR(n,e){n.Eu.push(e);const t=xh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function FT(n){return Sh(n)&&!xh(n).Uo()&&n.Eu.length>0}function BR(n){xh(n).start()}function I0(n){return LT.apply(this,arguments)}function LT(){return LT=(0,Ve.Z)(function*(n){xh(n).hu()}),LT.apply(this,arguments)}function XN(n){return E0.apply(this,arguments)}function E0(){return E0=(0,Ve.Z)(function*(n){const e=xh(n);for(const t of n.Eu)e.uu(t.mutations)}),E0.apply(this,arguments)}function jR(n,e,t){return zR.apply(this,arguments)}function zR(){return zR=(0,Ve.Z)(function*(n,e,t){const r=n.Eu.shift(),i=Lw.from(r,e,t);yield kT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield S_(n)}),zR.apply(this,arguments)}function JN(n,e){return HR.apply(this,arguments)}function HR(){return HR=(0,Ve.Z)(function*(n,e){var t;e&&xh(n).ou&&(yield(t=(0,Ve.Z)(function*(r,i){if(Vw(s=i.code)&&s!==Re.ABORTED){const c=r.Eu.shift();xh(r).Qo(),yield kT(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield S_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),FT(n)&&BR(n)}),HR.apply(this,arguments)}function $R(n,e){return GR.apply(this,arguments)}function GR(){return GR=(0,Ve.Z)(function*(n,e){const t=Rt(n);t.asyncQueue.verifyOperationInProgress(),pt("RemoteStore","RemoteStore received new credentials");const r=Sh(t);t.vu.add(3),yield Vp(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Lp(t)}),GR.apply(this,arguments)}function qR(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,Ve.Z)(function*(n,e){const t=Rt(n);e?(t.vu.delete(2),yield Lp(t)):e||(t.vu.add(2),yield Vp(t),t.bu.set("Unknown"))}),VT.apply(this,arguments)}function Bp(n){return n.Su||(n.Su=function(e,t,r){const i=Rt(e);return i.fu(),new NR(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:YN.bind(null,n),ao:QN.bind(null,n),nu:VR.bind(null,n)}),n.Ru.push(function(){var e=(0,Ve.Z)(function*(t){t?(n.Su.Qo(),RT(n)?xT(n):n.bu.set("Unknown")):(yield n.Su.stop(),ZN(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function xh(n){return n.Du||(n.Du=function(e,t,r){const i=Rt(e);return i.fu(),new qN(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:I0.bind(null,n),ao:JN.bind(null,n),au:XN.bind(null,n),cu:jR.bind(null,n)}),n.Ru.push(function(){var e=(0,Ve.Z)(function*(t){t?(n.Du.Qo(),yield S_(n)):(yield n.Du.stop(),n.Eu.length>0&&(pt("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class WR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,s){const c=Date.now()+r,h=new WR(e,t,c,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nt(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x_(n,e){if(Di("AsyncQueue",`${e}: ${n}`),ya(n))return new nt(Re.UNAVAILABLE,`${e}: ${n}`);throw n}class R_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||St.comparator(t.key,r.key):(t,r)=>St.comparator(t.key,r.key),this.keyedMap=s_(),this.sortedSet=new kr(this.comparator)}static emptySet(e){return new R_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof R_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new R_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class eF{constructor(){this.Cu=new kr(St.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):zt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class jp{constructor(e,t,r,i,s,c,h,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,s){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new jp(e,t,R_.emptySet(t),c,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&i_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class YB{constructor(){this.Nu=void 0,this.listeners=[]}}class QB{constructor(){this.queries=new Hl(e=>qb(e),i_),this.onlineState="Unknown",this.ku=new Set}}function KR(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,Ve.Z)(function*(n,e){const t=Rt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new YB),i)try{s.Nu=yield t.onListen(r)}catch(c){const h=x_(c,`Initialization of query '${_x(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&a(t)}),ZR.apply(this,arguments)}function YR(n,e){return UT.apply(this,arguments)}function UT(){return UT=(0,Ve.Z)(function*(n,e){const t=Rt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),UT.apply(this,arguments)}function XB(n,e){const t=Rt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.$u(i)&&(r=!0);c.Nu=i}}r&&a(t)}function o(n,e,t){const r=Rt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function a(n){n.ku.forEach(e=>{e.next()})}class l{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new jp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=jp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class d{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class f{constructor(e){this.serializer=e}rr(e){return Qc(this.serializer,e)}ur(e){return e.metadata.exists?bN(this.serializer,e.document,!1):Gr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Vi(e)}}class m{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=v(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=rr.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new f(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Pn()).add(s);t.set(c,h)}}return t}complete(){var e=this;return(0,Ve.Z)(function*(){const t=yield function ZB(n,e,t,r){return DR.apply(this,arguments)}(e.localStore,new f(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield SR(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function v(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class I{constructor(e){this.key=e}}class D{constructor(e){this.key=e}}class x{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Pn(),this.mutatedKeys=Pn(),this.tc=vx(e),this.ec=new R_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new eF,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,C)=>{const R=i.get(w),N=bp(this.query,C)?C:null,Y=!!R&&this.mutatedKeys.has(R.key),ne=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let te=!1;R&&N?R.data.isEqual(N.data)?Y!==ne&&(r.track({type:3,doc:N}),te=!0):this.rc(R,N)||(r.track({type:2,doc:N}),te=!0,(p&&this.tc(N,p)>0||_&&this.tc(N,_)<0)&&(h=!0)):!R&&N?(r.track({type:0,doc:N}),te=!0):R&&!N&&(r.track({type:1,doc:R}),te=!0,(p||_)&&(h=!0)),te&&(N?(c=c.add(N),s=ne?s.add(w):s.delete(w)):(c=c.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{ec:c,ic:r,zi:h,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((_,w)=>function(C,R){const N=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zt()}};return N(C)-N(R)}(_.type,w.type)||this.tc(_.doc,w.doc)),this.oc(r);const c=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,p=h!==this.Xu;return this.Xu=h,0!==s.length||p?{snapshot:new jp(this.query,e.ec,i,s,e.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new eF,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Pn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new D(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new I(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Pn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return jp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class O{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class G{constructor(e){this.key=e,this.fc=!1}}class oe{constructor(e,t,r,i,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Hl(h=>qb(h),i_),this._c=new Map,this.mc=new Set,this.gc=new kr(St.comparator),this.yc=new Map,this.Ic=new A_,this.Tc={},this.Ec=new Map,this.Ac=Ch.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function fe(n,e){return Ge.apply(this,arguments)}function Ge(){return Ge=(0,Ve.Z)(function*(n,e){const t=_F(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const c=yield Op(t.localStore,So(e)),h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield dt(t,e,r,"current"===h,c.resumeToken),t.isPrimaryClient&&Up(t.remoteStore,c)}return i}),Ge.apply(this,arguments)}function dt(n,e,t,r,i){return xt.apply(this,arguments)}function xt(){return xt=(0,Ve.Z)(function*(n,e,t,r,i){n.Rc=(C,R,N)=>{return(Y=(0,Ve.Z)(function*(ne,te,Ne,qe){let Pe=te.view.sc(Ne);Pe.zi&&(Pe=yield D_(ne.localStore,te.query,!1).then(({documents:Pt})=>te.view.sc(Pt,Pe)));const rt=qe&&qe.targetChanges.get(te.targetId),Tt=te.view.applyChanges(Pe,ne.isPrimaryClient,rt);return oF(ne,te.targetId,Tt.cc),Tt.snapshot}),function(ne,te,Ne,qe){return Y.apply(this,arguments)})(n,C,R,N);var Y};const s=yield D_(n.localStore,e,!0),c=new x(e,s.ir),h=c.sc(s.documents),p=yh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=c.applyChanges(h,n.isPrimaryClient,p);oF(n,t,_.cc);const w=new O(e,t,c);return n.wc.set(e,w),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),_.snapshot}),xt.apply(this,arguments)}function nn(n,e){return tt.apply(this,arguments)}function tt(){return tt=(0,Ve.Z)(function*(n,e){const t=Rt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!i_(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Np(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),m0(t.remoteStore,r.targetId),b0(t,r.targetId)}).catch(Ul))):(b0(t,r.targetId),yield Np(t.localStore,r.targetId,!0))}),tt.apply(this,arguments)}function kn(){return kn=(0,Ve.Z)(function*(n,e,t){const r=yF(n);try{const i=yield function(s,c){const h=Rt(s),p=ti.now(),_=c.reduce((R,N)=>R.add(N.key),Pn());let w,C;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let N=qo(),Y=Pn();return h.Zi.getEntries(R,_).next(ne=>{N=ne,N.forEach((te,Ne)=>{Ne.isValidDocument()||(Y=Y.add(te))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,N)).next(ne=>{w=ne;const te=[];for(const Ne of c){const qe=Fw(Ne,w.get(Ne.key).overlayedDocument);null!=qe&&te.push(new Yc(Ne.key,qe,sx(qe.value.mapValue),ni.exists(!0)))}return h.mutationQueue.addMutationBatch(R,p,te,c)}).next(ne=>{C=ne;const te=ne.applyToLocalDocumentSet(w,Y);return h.documentOverlayCache.saveOverlays(R,ne.batchId,te)})}).then(()=>({batchId:C.batchId,changes:Ix(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,h){let p=s.Tc[s.currentUser.toKey()];p||(p=new kr(vn)),p=p.insert(c,h),s.Tc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Rh(r,i.changes),yield S_(r.remoteStore)}catch(i){const s=x_(i,"Failed to persist write");t.reject(s)}}),kn.apply(this,arguments)}function Er(n,e){return oo.apply(this,arguments)}function oo(){return oo=(0,Ve.Z)(function*(n,e){const t=Rt(n);try{const r=yield function l0(n,e){const t=Rt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((w,C)=>{const R=i.get(C);if(!R)return;h.push(t.Bs.removeMatchingKeys(s,w.removedDocuments,C).next(()=>t.Bs.addMatchingKeys(s,w.addedDocuments,C)));let N=R.withSequenceNumber(s.currentSequenceNumber);var Y,ne,te;null!==e.targetMismatches.get(C)?N=N.withResumeToken(Zi.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,r)),i=i.insert(C,N),ne=N,te=w,(0===(Y=R).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(s,N))});let p=qo(),_=Pn();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),h.push(yT(s,c,e.documentUpdates).next(w=>{p=w.nr,_=w.sr})),!r.isEqual(tn.min())){const w=t.Bs.getLastRemoteSnapshotVersion(s).next(C=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(w)}return Ee.waitFor(h).next(()=>c.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const c=t.yc.get(s);c&&(Qt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?Qt(c.fc):i.removedDocuments.size>0&&(Qt(c.fc),c.fc=!1))}),yield Rh(t,r,e)}catch(r){yield Ul(r)}}),oo.apply(this,arguments)}function el(n,e,t){const r=Rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,c)=>{const h=c.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(s,c){const h=Rt(s);h.onlineState=c;let p=!1;h.queries.forEach((_,w)=>{for(const C of w.listeners)C.Mu(c)&&(p=!0)}),p&&a(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zp(n,e,t){return M_.apply(this,arguments)}function M_(){return M_=(0,Ve.Z)(function*(n,e,t){const r=Rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let c=new kr(St.comparator);c=c.insert(s,Gr.newNoDocument(s,tn.min()));const h=Pn().add(s),p=new _h(tn.min(),new Map,new kr(vn),c,h);yield Er(r,p),r.gc=r.gc.remove(s),r.yc.delete(e),aF(r)}else yield Np(r.localStore,e,!1).then(()=>b0(r,e,t)).catch(Ul)}),M_.apply(this,arguments)}function tF(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,Ve.Z)(function*(n,e){const t=Rt(n),r=e.batch.batchId;try{const i=yield function ER(n,e){const t=Rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,_){const w=p.batch,C=w.keys();let R=Ee.resolve();return C.forEach(N=>{R=R.next(()=>_.getEntry(h,N)).next(Y=>{const ne=p.docVersions.get(N);Qt(null!==ne),Y.version.compareTo(ne)<0&&(w.applyToRemoteDocument(Y,p),Y.isValidDocument()&&(Y.setReadTime(p.commitVersion),_.addEntry(Y)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(h,w))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Pn();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);sF(t,r,null),iF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Rh(t,i)}catch(i){yield Ul(i)}}),BT.apply(this,arguments)}function Z9(n,e,t){return nF.apply(this,arguments)}function nF(){return nF=(0,Ve.Z)(function*(n,e,t){const r=Rt(n);try{const i=yield function(s,c){const h=Rt(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return h.mutationQueue.lookupMutationBatch(p,c).next(w=>(Qt(null!==w),_=w.keys(),h.mutationQueue.removeMutationBatch(p,w))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,_,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>h.localDocuments.getDocuments(p,_))})}(r.localStore,e);sF(r,e,t),iF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Rh(r,i)}catch(i){yield Ul(i)}}),nF.apply(this,arguments)}function rF(){return rF=(0,Ve.Z)(function*(n,e){const t=Rt(n);Sh(t.remoteStore)||pt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=Rt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=x_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),rF.apply(this,arguments)}function iF(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function sF(n,e,t){const r=Rt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function b0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||JB(n,r)})}function JB(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(m0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),aF(n))}function oF(n,e,t){for(const r of t)r instanceof I?(n.Ic.addReference(r.key,e),Q9(n,r)):r instanceof D?(pt("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||JB(n,r.key)):zt()}function Q9(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(pt("SyncEngine","New document in limbo: "+t),n.mc.add(r),aF(n))}function aF(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new St(rr.fromString(e)),r=n.Ac.next();n.yc.set(r,new G(t)),n.gc=n.gc.insert(t,r),Up(n.remoteStore,new Wo(So(fh(t.path)),r,"TargetPurposeLimboResolution",vs.ct))}}function Rh(n,e,t){return cF.apply(this,arguments)}function cF(){return cF=(0,Ve.Z)(function*(n,e,t){const r=Rt(n),i=[],s=[],c=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,p)=>{c.push(r.Rc(p,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const w=vR.Li(p.targetId,_);s.push(w)}}))}),yield Promise.all(c),r.dc.nu(i),yield(h=(0,Ve.Z)(function*(p,_){const w=Rt(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>Ee.forEach(_,R=>Ee.forEach(R.Fi,N=>w.persistence.referenceDelegate.addReference(C,R.targetId,N)).next(()=>Ee.forEach(R.Bi,N=>w.persistence.referenceDelegate.removeReference(C,R.targetId,N)))))}catch(C){if(!ya(C))throw C;pt("LocalStore","Failed to update sequence numbers: "+C)}for(const C of _){const R=C.targetId;if(!C.fromCache){const N=w.Ji.get(R),ne=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);w.Ji=w.Ji.insert(R,ne)}}}),function(p,_){return h.apply(this,arguments)})(r.localStore,s))}),cF.apply(this,arguments)}function X9(n,e){return lF.apply(this,arguments)}function lF(){return lF=(0,Ve.Z)(function*(n,e){const t=Rt(n);if(!t.currentUser.isEqual(e)){pt("SyncEngine","User change. New user:",e.toKey());const r=yield IR(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(h=>{h.reject(new nt(Re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Rh(t,r.er)}var i}),lF.apply(this,arguments)}function J9(n,e){const t=Rt(n),r=t.yc.get(e);if(r&&r.fc)return Pn().add(r.key);{let i=Pn();const s=t._c.get(e);if(!s)return i;for(const c of s){const h=t.wc.get(c);i=i.unionWith(h.view.nc)}return i}}function eq(n,e){return uF.apply(this,arguments)}function uF(){return uF=(0,Ve.Z)(function*(n,e){const t=Rt(n),r=yield D_(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&oF(t,e.targetId,i.cc),i}),uF.apply(this,arguments)}function tq(n,e){return dF.apply(this,arguments)}function dF(){return dF=(0,Ve.Z)(function*(n,e){const t=Rt(n);return AR(t.localStore,e).then(r=>Rh(t,r))}),dF.apply(this,arguments)}function nq(n,e,t,r){return hF.apply(this,arguments)}function hF(){return hF=(0,Ve.Z)(function*(n,e,t,r){const i=Rt(n),s=yield function(c,h){const p=Rt(c),_=Rt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>_.Sn(w,h).next(C=>C?p.localDocuments.getDocuments(w,C):Ee.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield S_(i.remoteStore):"acknowledged"===t||"rejected"===t?(sF(i,e,r||null),iF(i,e),h=e,Rt(Rt(i.localStore).mutationQueue).Cn(h)):zt(),yield Rh(i,s)):pt("SyncEngine","Cannot apply mutation batch with id: "+e)}),hF.apply(this,arguments)}function fF(){return fF=(0,Ve.Z)(function*(n,e){const t=Rt(n);if(_F(t),yF(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ej(t,r.toArray());t.vc=!0,yield qR(t.remoteStore,!0);for(const s of i)Up(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(b0(t,c),Np(t.localStore,c,!0))),m0(t.remoteStore,c)}),yield i,yield ej(t,r),function(s){const c=Rt(s);c.yc.forEach((h,p)=>{m0(c.remoteStore,p)}),c.Ic.Ts(),c.yc=new Map,c.gc=new kr(St.comparator)}(t),t.vc=!1,yield qR(t.remoteStore,!1)}}),fF.apply(this,arguments)}function ej(n,e,t){return pF.apply(this,arguments)}function pF(){return pF=(0,Ve.Z)(function*(n,e,t){const r=Rt(n),i=[],s=[];for(const c of e){let h;const p=r._c.get(c);if(p&&0!==p.length){h=yield Op(r.localStore,So(p[0]));for(const _ of p){const w=r.wc.get(_),C=yield eq(r,w);C.snapshot&&s.push(C.snapshot)}}else{const _=yield CR(r.localStore,c);h=yield Op(r.localStore,_),yield dt(r,tj(_),c,!1,h.resumeToken)}i.push(h)}return r.dc.nu(s),i}),pF.apply(this,arguments)}function tj(n){return gx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function iq(n){const e=Rt(n);return Rt(Rt(e.localStore).persistence).$i()}function sq(n,e,t,r){return mF.apply(this,arguments)}function mF(){return mF=(0,Ve.Z)(function*(n,e,t,r){const i=Rt(n);if(i.vc)return void pt("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const c=yield AR(i.localStore,yx(s[0])),h=_h.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Zi.EMPTY_BYTE_STRING);yield Rh(i,c,h);break}case"rejected":yield Np(i.localStore,e,!0),b0(i,e,r);break;default:zt()}}),mF.apply(this,arguments)}function oq(n,e,t){return gF.apply(this,arguments)}function gF(){return gF=(0,Ve.Z)(function*(n,e,t){const r=_F(n);if(r.vc){for(const i of e){if(r._c.has(i)){pt("SyncEngine","Adding an already active target "+i);continue}const s=yield CR(r.localStore,i),c=yield Op(r.localStore,s);yield dt(r,tj(s),c.targetId,!1,c.resumeToken),Up(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield Np(r.localStore,i,!1).then(()=>{m0(r.remoteStore,i),b0(r,i)}).catch(Ul))}}),gF.apply(this,arguments)}function _F(n){const e=Rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Er.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zp.bind(null,e),e.dc.nu=XB.bind(null,e.eventManager),e.dc.Pc=o.bind(null,e.eventManager),e}function yF(n){const e=Rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z9.bind(null,e),e}class jT{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ve.Z)(function*(){t.serializer=f0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return _T(this.persistence,new a0,e.initialUser,this.serializer)}createPersistence(e){return new mR(t0.zs,this.serializer)}createSharedClientState(e){return new kR}terminate(){var e=this;return(0,Ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class vF extends jT{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ve.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield yF(r.Vc.syncEngine),yield S_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return _T(this.persistence,new a0,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new cR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new jB(t,this.persistence);return new HS(e.asyncQueue,r)}createPersistence(e){const t=o0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?xo.withCacheSize(this.cacheSizeBytes):xo.DEFAULT;return new yR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,h0(),Dh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new kR}}class nj extends vF{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ve.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof Fp&&(r.sharedClientState.syncEngine={jr:nq.bind(null,i),zr:sq.bind(null,i),Wr:oq.bind(null,i),$i:iq.bind(null,i),Qr:tq.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,Ve.Z)(function*(c){yield function rq(n,e){return fF.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=h0();if(!Fp.D(t))throw new nt(Re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=o0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class T0{initialize(e,t){var r=this;return(0,Ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>el(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=X9.bind(null,r.syncEngine),yield qR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new QB}createDatastore(e){const t=f0(e.databaseInfo.databaseId),r=new AT(e.databaseInfo);return new WN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>el(this.syncEngine,h,0),c=bT.D()?new bT:new $N,new LR(t,r,i,s,c);var t,r,i,s,c}createSyncEngine(e,t){return function(r,i,s,c,h,p,_){const w=new oe(r,i,s,c,h,p);return _&&(w.vc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ve.Z)(function*(t){const r=Rt(t);pt("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Vp(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rj(n,e=10240){let t=0;return{read:()=>(0,Ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class QR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lq{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ni,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ve.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new d(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ve.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class uq{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new nt(Re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ve.Z)(function*(s,c){const h=Rt(s),p=xp(h.serializer)+"/documents",_={documents:c.map(N=>p_(h.serializer,N))},w=yield h.vo("BatchGetDocuments",p,_,c.length),C=new Map;w.forEach(N=>{const Y=function GB(n,e){return"found"in e?function(t,r){Qt(!!r.found);const i=Qc(t,r.found.name),s=Vi(r.found.updateTime),c=r.found.createTime?Vi(r.found.createTime):tn.min(),h=new Es({mapValue:{fields:r.found.fields}});return Gr.newFoundDocument(i,s,c,h)}(n,e):"missing"in e?function(t,r){Qt(!!r.missing),Qt(!!r.readTime);const i=Qc(t,r.missing),s=Vi(r.readTime);return Gr.newNoDocument(i,s)}(n,e):zt()}(h.serializer,N);C.set(Y.key.toString(),Y)});const R=[];return c.forEach(N=>{const Y=C.get(N.toString());Qt(!!Y),R.push(Y)}),R}),function(s,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=St.fromPath(i);e.mutations.push(new Xb(s,e.precondition(s)))}),yield(r=(0,Ve.Z)(function*(i,s){const c=Rt(i),h=xp(c.serializer)+"/documents",p={writes:s.map(_=>g_(c.serializer,_))};yield c.Io("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zt();t=tn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new nt(Re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(tn.min())?ni.exists(!1):ni.updateTime(t):ni.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(tn.min()))throw new nt(Re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ni.updateTime(t)}return ni.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class dq{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new OR(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ve.Z)(function*(){const t=new uq(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!qg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Vw(t)}return!1}}class hq{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ki.UNAUTHENTICATED,this.clientId=jS.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ve.Z)(function*(h){pt("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(pt("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nt(Re.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=x_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function XR(n,e){return wF.apply(this,arguments)}function wF(){return wF=(0,Ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),pt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ve.Z)(function*(s){r.isEqual(s)||(yield IR(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),wF.apply(this,arguments)}function IF(n,e){return EF.apply(this,arguments)}function EF(){return EF=(0,Ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield bF(n);pt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>$R(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>$R(e.remoteStore,s)),n._onlineComponents=e}),EF.apply(this,arguments)}function ij(n){return"FirebaseError"===n.name?n.code===Re.FAILED_PRECONDITION||n.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function bF(n){return TF.apply(this,arguments)}function TF(){return TF=(0,Ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield XR(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!ij(t))throw t;_a("Error using user provided cache. Falling back to memory cache: "+t),yield XR(n,new jT)}}else pt("FirestoreClient","Using default OfflineComponentProvider"),yield XR(n,new jT);return n._offlineComponents}),TF.apply(this,arguments)}function JR(n){return CF.apply(this,arguments)}function CF(){return CF=(0,Ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pt("FirestoreClient","Using user provided OnlineComponentProvider"),yield IF(n,n._uninitializedComponentsProvider._online)):(pt("FirestoreClient","Using default OnlineComponentProvider"),yield IF(n,new T0))),n._onlineComponents}),CF.apply(this,arguments)}function sj(n){return bF(n).then(e=>e.persistence)}function eM(n){return bF(n).then(e=>e.localStore)}function oj(n){return JR(n).then(e=>e.remoteStore)}function AF(n){return JR(n).then(e=>e.syncEngine)}function C0(n){return DF.apply(this,arguments)}function DF(){return DF=(0,Ve.Z)(function*(n){const e=yield JR(n),t=e.eventManager;return t.onListen=fe.bind(null,e.syncEngine),t.onUnlisten=nn.bind(null,e.syncEngine),t}),DF.apply(this,arguments)}function cj(n,e,t={}){const r=new Ni;return n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(i,s,c,h,p){const _=new QR({next:C=>{s.enqueueAndForget(()=>YR(i,w));const R=C.docs.has(c);!R&&C.fromCache?p.reject(new nt(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&C.fromCache&&h&&"server"===h.source?p.reject(new nt(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(C)},error:C=>p.reject(C)}),w=new l(fh(c.path),_,{includeMetadataChanges:!0,Ku:!0});return KR(i,w)}(yield C0(n),n.asyncQueue,e,t,r)})),r.promise}function lj(n,e,t={}){const r=new Ni;return n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(i,s,c,h,p){const _=new QR({next:C=>{s.enqueueAndForget(()=>YR(i,w)),C.fromCache&&"server"===h.source?p.reject(new nt(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(C)},error:C=>p.reject(C)}),w=new l(c,_,{includeMetadataChanges:!0,Ku:!0});return KR(i,w)}(yield C0(n),n.asyncQueue,e,t,r)})),r.promise}function uj(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const dj=new Map;function SF(n,e,t){if(!t)throw new nt(Re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hj(n,e,t,r){if(!0===e&&!0===r)throw new nt(Re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fj(n){if(!St.isDocumentKey(n))throw new nt(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pj(n){if(St.isDocumentKey(n))throw new nt(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tM(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":zt()}function ir(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new nt(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tM(n);throw new nt(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mj(n,e){if(e<=0)throw new nt(Re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class gj{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new nt(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nt(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=uj(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new nt(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new nt(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new nt(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zT{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gj({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new nt(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nt(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gj(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NS;switch(t.type){case"firstParty":return new US(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new nt(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dj.get(e);t&&(pt("ComponentProvider","Removing Datastore"),dj.delete(e),t.terminate())}(this),Promise.resolve()}}function _j(n,e,t,r={}){var i;const s=(n=ir(n,zT))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==c&&_a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:c,ssl:!1})),r.mockUserToken){let h,p;if("string"==typeof r.mockUserToken)h=r.mockUserToken,p=Ki.MOCK_USER;else{h=(0,xe.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new nt(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ki(_)}n._authCredentials=new FS(new zg(h,p))}}class _i{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new id(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _i(this.firestore,e,this._key)}}class Mo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class id extends Mo{constructor(e,t,r){super(e,t,fh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _i(this.firestore,null,new St(e))}withConverter(e){return new id(this.firestore,e,this._path)}}function yj(n,e,...t){if(n=(0,xe.m9)(n),SF("collection","path",e),n instanceof zT){const r=rr.fromString(e,...t);return pj(r),new id(n,null,r)}{if(!(n instanceof _i||n instanceof id))throw new nt(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rr.fromString(e,...t));return pj(r),new id(n.firestore,null,r)}}function nM(n,e,...t){if(n=(0,xe.m9)(n),1===arguments.length&&(e=jS.A()),SF("doc","path",e),n instanceof zT){const r=rr.fromString(e,...t);return fj(r),new _i(n,null,new St(r))}{if(!(n instanceof _i||n instanceof id))throw new nt(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rr.fromString(e,...t));return fj(r),new _i(n.firestore,n instanceof id?n.converter:null,new St(r))}}function vj(n,e){return n=(0,xe.m9)(n),e=(0,xe.m9)(e),(n instanceof _i||n instanceof id)&&(e instanceof _i||e instanceof id)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function xF(n,e){return n=(0,xe.m9)(n),e=(0,xe.m9)(e),n instanceof Mo&&e instanceof Mo&&n.firestore===e.firestore&&i_(n._query,e._query)&&n.converter===e.converter}class Eq{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new OR(this,"async_queue_retry"),this.Xc=()=>{const t=Dh();t&&pt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Dh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Dh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ni;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!ya(t))throw t;pt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Di("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=WR.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&zt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ve.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function RF(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class bq{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ni,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class yi extends zT{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Eq,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wj(this),this._firestoreClient.terminate()}}function Cq(n,e){const t="object"==typeof n?n:(0,qf.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,qf._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,xe.P0)("firestore");s&&_j(i,...s)}return i}function os(n){return n._firestoreClient||wj(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wj(n){var e,t,r;const i=n._freezeSettings(),s=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new iN(n._databaseId,h,n._persistenceKey,(_=i).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,uj(_.experimentalLongPollingOptions),_.useFetchStreams));var h,_;n._firestoreClient=new hq(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Ij(n,e,t){const r=new Ni;return n.asyncQueue.enqueue((0,Ve.Z)(function*(){try{yield XR(n,t),yield IF(n,e),r.resolve()}catch(i){const s=i;if(!ij(s))throw s;_a("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function Ej(n){if(n._initialized||n._terminated)throw new nt(Re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sd(Zi.fromBase64String(e))}catch(t){throw new nt(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sd(Zi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new nt(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class P_{constructor(e){this._methodName=e}}class rM{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nt(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nt(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vn(this._lat,e._lat)||vn(this._long,e._long)}}const Nq=/^__.*__$/;class Fq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Yc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ap(e,this.data,t,this.fieldTransforms)}}class bj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zt()}}class iM{constructor(e,t,r,i,s,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new iM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return aM(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Tj(this.ca)&&Nq.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Lq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||f0(e)}ya(e,t,r,i=!1){return new iM({ca:e,methodName:t,ga:r,path:Si.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function k_(n){const e=n._freezeSettings(),t=f0(n._databaseId);return new Lq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sM(n,e,t,r,i,s={}){const c=n.ya(s.merge||s.mergeFields?2:0,e,t,i);OF("Data must be an object, but it was:",c,r);const h=Dj(r,c);let p,_;if(s.merge)p=new wa(c.fieldMask),_=c.fieldTransforms;else if(s.mergeFields){const w=[];for(const C of s.mergeFields){const R=GT(e,C,t);if(!c.contains(R))throw new nt(Re.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);xj(w,R)||w.push(R)}p=new wa(w),_=c.fieldTransforms.filter(C=>p.covers(C.field))}else p=null,_=c.fieldTransforms;return new Fq(new Es(h),p,_)}class $T extends P_{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $T}}function Cj(n,e,t){return new iM({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class MF extends P_{_toFieldTransform(e){return new mh(e.path,new l_)}isEqual(e){return e instanceof MF}}class Vq extends P_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Cj(this,e,!0),r=this.pa.map(s=>O_(s,t)),i=new Zu(r);return new mh(e.path,i)}isEqual(e){return this===e}}class Uq extends P_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Cj(this,e,!0),r=this.pa.map(s=>O_(s,t)),i=new ph(r);return new mh(e.path,i)}isEqual(e){return this===e}}class Bq extends P_{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Tp(e.serializer,Zb(e.serializer,this.Ia));return new mh(e.path,t)}isEqual(e){return this===e}}function PF(n,e,t,r){const i=n.ya(1,e,t);OF("Data must be an object, but it was:",i,r);const s=[],c=Es.empty();jl(r,(p,_)=>{const w=oM(e,p,t);_=(0,xe.m9)(_);const C=i.da(w);if(_ instanceof $T)s.push(w);else{const R=O_(_,C);null!=R&&(s.push(w),c.set(w,R))}});const h=new wa(s);return new bj(c,h,i.fieldTransforms)}function kF(n,e,t,r,i,s){const c=n.ya(1,e,t),h=[GT(e,r,t)],p=[i];if(s.length%2!=0)throw new nt(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<s.length;R+=2)h.push(GT(e,s[R])),p.push(s[R+1]);const _=[],w=Es.empty();for(let R=h.length-1;R>=0;--R)if(!xj(_,h[R])){const N=h[R];let Y=p[R];Y=(0,xe.m9)(Y);const ne=c.da(N);if(Y instanceof $T)_.push(N);else{const te=O_(Y,ne);null!=te&&(_.push(N),w.set(N,te))}}const C=new wa(_);return new bj(w,C,c.fieldTransforms)}function Aj(n,e,t,r=!1){return O_(t,n.ya(r?4:3,e))}function O_(n,e){if(Sj(n=(0,xe.m9)(n)))return OF("Unsupported field value:",e,n),Dj(n,e);if(n instanceof P_)return function(t,r){if(!Tj(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const c of t){let h=O_(c,r.wa(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,xe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zb(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ti.fromDate(t);return{timestampValue:vh(r.serializer,i)}}if(t instanceof ti){const i=new ti(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vh(r.serializer,i)}}if(t instanceof rM)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof sd)return{bytesValue:Vx(r.serializer,t._byteString)};if(t instanceof _i){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zs(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${tM(t)}`)}(n,e)}function Dj(n,e){const t={};return Vb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jl(n,(r,i)=>{const s=O_(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Sj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ti||n instanceof rM||n instanceof sd||n instanceof _i||n instanceof P_)}function OF(n,e,t){if(!Sj(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=tM(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function GT(n,e,t){if((e=(0,xe.m9)(e))instanceof Mh)return e._internalPath;if("string"==typeof e)return oM(n,e);throw aM("Field path arguments must be of type string or ",n,!1,void 0,t)}const jq=new RegExp("[~\\*/\\[\\]]");function oM(n,e,t){if(e.search(jq)>=0)throw aM(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mh(...e.split("."))._internalPath}catch{throw aM(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aM(n,e,t,r,i){const s=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new nt(Re.INVALID_ARGUMENT,h+n+p)}function xj(n,e){return n.some(t=>t.isEqual(e))}class qT{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _i(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cM("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zq extends qT{data(){return super.data()}}function cM(n,e){return"string"==typeof e?oM(n,e):e instanceof Mh?e._internalPath:e._delegate._internalPath}function Rj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new nt(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NF{}class WT extends NF{}function Hp(n,e,...t){let r=[];e instanceof NF&&r.push(e),r=r.concat(t),function(i){const s=i.filter(h=>h instanceof A0).length,c=i.filter(h=>h instanceof KT).length;if(s>1||s>0&&c>0)throw new nt(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class KT extends WT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new KT(e,t,r)}_apply(e){const t=this._parse(e);return Oj(e._query,t),new Mo(e.firestore,e.converter,Gb(e._query,t))}_parse(e){const t=k_(e.firestore);return function(i,s,c,h,p,_,w){let C;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new nt(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){kj(w,_);const R=[];for(const N of w)R.push(Pj(h,i,N));C={arrayValue:{values:R}}}else C=Pj(h,i,w)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||kj(w,_),C=Aj(c,"where",w,"in"===_||"not-in"===_);return Kn.create(p,_,C)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class A0 extends NF{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new A0(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Ir.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const c=i.getFlattenedFilters();for(const h of c)Oj(s,h),s=Gb(s,h)}(e._query,t),new Mo(e.firestore,e.converter,Gb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class FF extends WT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new FF(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new nt(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new nt(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new vp(i,s);return function(h,p){if(null===Pw(h)){const _=r_(h);null!==_&&Nj(0,_,p.field)}}(r,c),c}(e._query,this._field,this._direction);return new Mo(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Kc(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class lM extends WT{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lM(e,t,r)}_apply(e){return new Mo(e.firestore,e.converter,Ow(e._query,this._limit,this._limitType))}}class uM extends WT{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uM(e,t,r)}_apply(e){const t=Mj(e,this.type,this._docOrFields,this._inclusive);return new Mo(e.firestore,e.converter,(i=t,new Kc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class dM extends WT{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new dM(e,t,r)}_apply(e){const t=Mj(e,this.type,this._docOrFields,this._inclusive);return new Mo(e.firestore,e.converter,(i=t,new Kc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Mj(n,e,t,r){if(t[0]=(0,xe.m9)(t[0]),t[0]instanceof qT)return function(i,s,c,h,p){if(!h)throw new nt(Re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const w of Ku(i))if(w.field.isKeyField())_.push(uh(s,h.key));else{const C=h.data.field(w.field);if(Gu(C))throw new nt(Re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===C){const R=w.field.canonicalString();throw new nt(Re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}_.push(C)}return new Wu(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=k_(n.firestore);return function(s,c,h,p,_,w){const C=s.explicitOrderBy;if(_.length>C.length)throw new nt(Re.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let N=0;N<_.length;N++){const Y=_[N];if(C[N].field.isKeyField()){if("string"!=typeof Y)throw new nt(Re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof Y}`);if(!kw(s)&&-1!==Y.indexOf("/"))throw new nt(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${Y}' contains a slash.`);const ne=s.path.child(rr.fromString(Y));if(!St.isDocumentKey(ne))throw new nt(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const te=new St(ne);R.push(uh(c,te))}else{const ne=Aj(h,p,Y);R.push(ne)}}return new Wu(R,w)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Pj(n,e,t){if("string"==typeof(t=(0,xe.m9)(t))){if(""===t)throw new nt(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&-1!==t.indexOf("/"))throw new nt(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rr.fromString(t));if(!St.isDocumentKey(r))throw new nt(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uh(n,new St(r))}if(t instanceof _i)return uh(n,t._key);throw new nt(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tM(t)}.`)}function kj(n,e){if(!Array.isArray(n)||0===n.length)throw new nt(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Oj(n,e){if(e.isInequality()){const r=r_(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new nt(Re.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Pw(n);null!==s&&Nj(0,i,s)}const t=function(r,i){for(const s of r)for(const c of s.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new nt(Re.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Nj(n,e,t){if(!t.isEqual(e))throw new nt(Re.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class LF{convertValue(e,t="none"){switch(zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return jl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new rM(xi(e.latitude),xi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Iw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xg(e));default:return null}}convertTimestamp(e){const t=$u(e);return new ti(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rr.fromString(e);Qt(aT(r));const i=new qu(r.get(1),r.get(3)),s=new St(r.popFirst(5));return i.isEqual(t)||Di(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function hM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Qq extends LF{constructor(e){super(),this.firestore=e}convertBytes(e){return new sd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _i(this.firestore,null,t)}}class N_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ph extends qT{constructor(e,t,r,i,s,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ZT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cM("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ZT extends Ph{data(e={}){return super.data(e)}}class $p{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new N_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ZT(this._firestore,this._userDataWriter,r.key,r,new N_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nt(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new ZT(r._firestore,r._userDataWriter,c.doc.key,c.doc,new N_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new ZT(r._firestore,r._userDataWriter,c.doc.key,c.doc,new N_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),_=s.indexOf(c.doc.key)),{type:Jq(c.type),doc:h,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Jq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zt()}}function Lj(n,e){return n instanceof Ph&&e instanceof Ph?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $p&&e instanceof $p&&n._firestore===e._firestore&&xF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Gp extends LF{constructor(e){super(),this.firestore=e}convertBytes(e){return new sd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _i(this.firestore,null,t)}}function Vj(n,e,t){n=ir(n,_i);const r=ir(n.firestore,yi),i=hM(n.converter,e,t);return D0(r,[sM(k_(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ni.none())])}function Uj(n,e,t,...r){n=ir(n,_i);const i=ir(n.firestore,yi),s=k_(i);let c;return c="string"==typeof(e=(0,xe.m9)(e))||e instanceof Mh?kF(s,"updateDoc",n._key,e,t,r):PF(s,"updateDoc",n._key,e),D0(i,[c.toMutation(n._key,ni.exists(!0))])}function Bj(n,...e){var t,r,i;n=(0,xe.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||RF(e[c])||(s=e[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(RF(e[c])){const C=e[c];e[c]=null===(t=C.next)||void 0===t?void 0:t.bind(C),e[c+1]=null===(r=C.error)||void 0===r?void 0:r.bind(C),e[c+2]=null===(i=C.complete)||void 0===i?void 0:i.bind(C)}let p,_,w;if(n instanceof _i)_=ir(n.firestore,yi),w=fh(n._key.path),p={next:C=>{e[c]&&e[c](VF(_,n,C))},error:e[c+1],complete:e[c+2]};else{const C=ir(n,Mo);_=ir(C.firestore,yi),w=C._query;const R=new Gp(_);p={next:N=>{e[c]&&e[c](new $p(_,R,C,N))},error:e[c+1],complete:e[c+2]},Rj(n._query)}return function(C,R,N,Y){const ne=new QR(Y),te=new l(R,ne,N);return C.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return KR(yield C0(C),te)})),()=>{ne.Dc(),C.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return YR(yield C0(C),te)}))}}(os(_),w,h,p)}function D0(n,e){return function(t,r){const i=new Ni;return t.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function mn(n,e,t){return kn.apply(this,arguments)}(yield AF(t),r,i)})),i.promise}(os(n),e)}function VF(n,e,t){const r=t.docs.get(e._key),i=new Gp(n);return new Ph(n,i,e._key,r,new N_(t.hasPendingWrites,t.fromCache),e.converter)}const y5={maxAttempts:5};class jj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=k_(e)}set(e,t,r){this._verifyNotCommitted();const i=qp(e,this._firestore),s=hM(i.converter,t,r),c=sM(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,ni.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=qp(e,this._firestore);let c;return c="string"==typeof(t=(0,xe.m9)(t))||t instanceof Mh?kF(this._dataReader,"WriteBatch.update",s._key,t,r,i):PF(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,ni.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qp(e,this._firestore);return this._mutations=this._mutations.concat(new gh(t._key,ni.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(Re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qp(n,e){if((n=(0,xe.m9)(n)).firestore!==e)throw new nt(Re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class v5 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=k_(e)}get(e){const t=qp(e,this._firestore),r=new Qq(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return zt();const s=i[0];if(s.isFoundDocument())return new qT(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new qT(this._firestore,r,t._key,null,t.converter);throw zt()})}set(e,t,r){const i=qp(e,this._firestore),s=hM(i.converter,t,r),c=sM(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const s=qp(e,this._firestore);let c;return c="string"==typeof(t=(0,xe.m9)(t))||t instanceof Mh?kF(this._dataReader,"Transaction.update",s._key,t,r,i):PF(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=qp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qp(e,this._firestore),r=new Gp(this._firestore);return super.get(e).then(i=>new Ph(this._firestore,r,t._key,i._document,new N_(!1,!1),t.converter))}}!function(n,e=!0){Gc=qf.SDK_VERSION,(0,qf._registerComponent)(new Et.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),c=new yi(new LS(t.getProvider("auth-internal")),new BS(t.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new nt(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(h.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,qf.registerVersion)(kS,"3.13.0",n),(0,qf.registerVersion)(kS,"3.13.0","esm2017")}();class UF{constructor(e){return e}}const Hj="firestore",BF=new u.OlP("angularfire2.firestore-instances");function S5(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new UF(r)}}const x5={provide:class A5{constructor(){return(0,Bn.vb)(Hj)}},deps:[[new u.FiY,BF]]},R5={provide:UF,useFactory:function D5(n,e){const t=(0,Bn.JM)(Hj,n,e);return t&&new UF(t)},deps:[[new u.FiY,BF],ua]};let M5=(()=>{class n{constructor(){(0,Dl.KN)("angularfire",Bn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[R5,x5]}),n})();function P5(n,...e){return{ngModule:M5,providers:[{provide:BF,useFactory:S5(n),multi:!0,deps:[u.R0b,u.zs3,Bn.HU,Zd,[new u.FiY,Iv],[new u.FiY,Lc],...e]}]}}const k5=(0,Bn.u3)(Cq,!0),{isArray:O5}=Array,{getPrototypeOf:N5,prototype:F5,keys:L5}=Object;function $j(n){if(1===n.length){const e=n[0];if(O5(e))return{args:e,keys:null};if(function V5(n){return n&&"object"==typeof n&&N5(n)===F5}(e)){const t=L5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var YT=j(4829),QT=j(9940);const{isArray:U5}=Array;function Gj(n){return(0,Jt.U)(e=>function B5(n,e){return U5(e)?n(...e):n(e)}(n,e))}function qj(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Wj=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq))};static#t=this.\u0275dir=u.lG2({type:n})}return n})(),F_=(()=>{class n extends Wj{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275dir=u.lG2({type:n,features:[u.qOj]})}return n})();const tl=new u.OlP("NgValueAccessor"),H5={provide:tl,useExisting:(0,u.Gpc)(()=>Wp),multi:!0},G5=new u.OlP("CompositionEventMode");let Wp=(()=>{class n extends Wj{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $5(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(G5,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&u.NdJ("input",function(c){return i._handleInput(c.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(c){return i._compositionEnd(c.target.value)})},features:[u._Bn([H5]),u.qOj]})}return n})();function Kp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Zj(n){return null!=n&&"number"==typeof n.length}const Ko=new u.OlP("NgValidators"),Zp=new u.OlP("NgAsyncValidators"),q5=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bs{static min(e){return function Yj(n){return e=>{if(Kp(e.value)||Kp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Qj(n){return e=>{if(Kp(e.value)||Kp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Xj(e)}static requiredTrue(e){return function Jj(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return ez(e)}static minLength(e){return tz(e)}static maxLength(e){return function nz(n){return e=>Zj(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function rz(n){if(!n)return fM;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Kp(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return lz(e)}static composeAsync(e){return uz(e)}}function Xj(n){return Kp(n.value)?{required:!0}:null}function ez(n){return Kp(n.value)||q5.test(n.value)?null:{email:!0}}function tz(n){return e=>Kp(e.value)||!Zj(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function fM(n){return null}function iz(n){return null!=n}function sz(n){return(0,u.QGY)(n)?(0,Jn.D)(n):n}function oz(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function az(n,e){return e.map(t=>t(n))}function cz(n){return n.map(e=>function W5(n){return!n.validate}(e)?e:t=>e.validate(t))}function lz(n){if(!n)return null;const e=n.filter(iz);return 0==e.length?null:function(t){return oz(az(t,e))}}function jF(n){return null!=n?lz(cz(n)):null}function uz(n){if(!n)return null;const e=n.filter(iz);return 0==e.length?null:function(t){return function j5(...n){const e=(0,QT.jO)(n),{args:t,keys:r}=$j(n),i=new Wi.y(s=>{const{length:c}=t;if(!c)return void s.complete();const h=new Array(c);let p=c,_=c;for(let w=0;w<c;w++){let C=!1;(0,YT.Xf)(t[w]).subscribe((0,pi.x)(s,R=>{C||(C=!0,_--),h[w]=R},()=>p--,void 0,()=>{(!p||!C)&&(_||s.next(r?qj(r,h):h),s.complete())}))}});return e?i.pipe(Gj(e)):i}(az(t,e).map(sz)).pipe((0,Jt.U)(oz))}}function zF(n){return null!=n?uz(cz(n)):null}function dz(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function hz(n){return n._rawValidators}function fz(n){return n._rawAsyncValidators}function HF(n){return n?Array.isArray(n)?n:[n]:[]}function pM(n,e){return Array.isArray(n)?n.includes(e):n===e}function pz(n,e){const t=HF(e);return HF(n).forEach(i=>{pM(t,i)||t.push(i)}),t}function mz(n,e){return HF(e).filter(t=>!pM(n,t))}class gz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jF(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ia extends gz{get formDirective(){return null}get path(){return null}}class Yp extends gz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _z{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let S0=(()=>{class n extends _z{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Yp,2))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[u.qOj]})}return n})(),x0=(()=>{class n extends _z{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Ia,10))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[u.qOj]})}return n})();const XT="VALID",gM="INVALID",R0="PENDING",JT="DISABLED";function qF(n){return(_M(n)?n.validators:n)||null}function WF(n,e){return(_M(e)?e.asyncValidators:n)||null}function _M(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Iz{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===XT}get invalid(){return this.status===gM}get pending(){return this.status==R0}get disabled(){return this.status===JT}get enabled(){return this.status!==JT}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(pz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(pz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mz(e,this._rawAsyncValidators))}hasValidator(e){return pM(this._rawValidators,e)}hasAsyncValidator(e){return pM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=R0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=JT,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=XT,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===XT||this.status===R0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?JT:XT}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=R0,this._hasOwnPendingAsyncValidator=!0;const t=sz(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?JT:this.errors?gM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(R0)?R0:this._anyControlsHaveStatus(gM)?gM:XT}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_M(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Q5(n){return Array.isArray(n)?jF(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function X5(n){return Array.isArray(n)?zF(n):n||null}(this._rawAsyncValidators)}}class L_ extends Iz{constructor(e,t,r){super(qF(t),WF(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function wz(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function vz(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const V_=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>eC}),eC="always";function yM(n,e){return[...e.path,n]}function tC(n,e,t=eC){KF(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function t7(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ez(n,e)})}(n,e),function r7(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function n7(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ez(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function e7(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function vM(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),IM(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KF(n,e){const t=hz(n);null!==e.validator?n.setValidators(dz(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=fz(n);null!==e.asyncValidator?n.setAsyncValidators(dz(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();wM(e._rawValidators,i),wM(e._rawAsyncValidators,i)}function IM(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=hz(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=fz(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return wM(e._rawValidators,r),wM(e._rawAsyncValidators,r),t}function Ez(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function bz(n,e){KF(n,e)}function YF(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Tz(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function QF(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Wp?t=s:function o7(n){return Object.getPrototypeOf(n.constructor)===F_}(s)?r=s:i=s}),i||r||t||null}const c7={provide:Ia,useExisting:(0,u.Gpc)(()=>EM)},nC=(()=>Promise.resolve())();let EM=(()=>{class n extends Ia{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new L_({},jF(t),zF(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){nC.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),tC(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){nC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){nC.then(()=>{const r=this._findContainer(t.path),i=new L_({});bz(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){nC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){nC.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Tz(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Ko,10),u.Y36(Zp,10),u.Y36(V_,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&u.NdJ("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([c7]),u.qOj]})}return n})();function Cz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Az(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Ea=class extends Iz{constructor(e=null,t,r){super(qF(t),WF(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_M(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Az(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Az(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},d7={provide:Yp,useExisting:(0,u.Gpc)(()=>XF)},xz=(()=>Promise.resolve())();let XF=(()=>{class n extends Yp{constructor(t,r,i,s,c,h){super(),this._changeDetectorRef=c,this.callSetDisabledState=h,this.control=new Ea,this._registered=!1,this.name="",this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=QF(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),YF(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){tC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){xz.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,u.VuI)(r);xz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?yM(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Ia,9),u.Y36(Ko,10),u.Y36(Zp,10),u.Y36(tl,10),u.Y36(u.sBO,8),u.Y36(V_,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([d7]),u.qOj,u.TTD]})}return n})(),M0=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),Mz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const JF=new u.OlP("NgModelWithFormControlWarning"),_7={provide:Ia,useExisting:(0,u.Gpc)(()=>U_)};let U_=(()=>{class n extends Ia{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(IM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return tC(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){vM(t.control||null,t,!1),function a7(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Tz(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(vM(r||null,t),(n=>n instanceof Ea)(i)&&(tC(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);bz(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function i7(n,e){return IM(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){KF(this.form,this),this._oldForm&&IM(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Ko,10),u.Y36(Zp,10),u.Y36(V_,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&u.NdJ("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([_7]),u.qOj,u.TTD]})}return n})();const w7={provide:Yp,useExisting:(0,u.Gpc)(()=>P0)};let P0=(()=>{class n extends Yp{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=QF(0,s)}ngOnChanges(t){this._added||this._setUpControl(),YF(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return yM(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(u.Y36(Ia,13),u.Y36(Ko,10),u.Y36(Zp,10),u.Y36(tl,10),u.Y36(JF,8))};static#n=this.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([w7]),u.qOj,u.TTD]})}return n})();const I7={provide:tl,useExisting:(0,u.Gpc)(()=>rC),multi:!0};function Fz(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let rC=(()=>{class n extends F_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=Fz(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function E7(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&u.NdJ("change",function(c){return i.onChange(c.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([I7]),u.qOj]})}return n})(),n2=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Fz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(rC,9))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const b7={provide:tl,useExisting:(0,u.Gpc)(()=>r2),multi:!0};function Lz(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let r2=(()=>{class n extends F_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,c)=>{s._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const c=s;for(let h=0;h<c.length;h++){const _=this._getOptionValue(c[h].value);i.push(_)}}else{const c=r.options;for(let h=0;h<c.length;h++){const p=c[h];if(p.selected){const _=this._getOptionValue(p.value);i.push(_)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function T7(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&u.NdJ("change",function(c){return i.onChange(c.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([b7]),u.qOj]})}return n})(),s2=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Lz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Lz(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(r2,9))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();let B_=(()=>{class n{constructor(){this._validator=fM}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fM,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=u.lG2({type:n,features:[u.TTD]})}return n})();const D7={provide:Ko,useExisting:(0,u.Gpc)(()=>iC),multi:!0};let iC=(()=>{class n extends B_{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=u.VuI,this.createValidator=t=>Xj}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&u.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([D7]),u.qOj]})}return n})();const x7={provide:Ko,useExisting:(0,u.Gpc)(()=>bM),multi:!0};let bM=(()=>{class n extends B_{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=u.VuI,this.createValidator=t=>ez}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[u._Bn([x7]),u.qOj]})}return n})();const R7={provide:Ko,useExisting:(0,u.Gpc)(()=>TM),multi:!0};let o2,TM=(()=>{class n extends B_{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function Vz(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>tz(t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&u.uIk("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[u._Bn([R7]),u.qOj]})}return n})(),Gz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[Mz]})}return n})(),O7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:V_,useValue:t.callSetDisabledState??eC}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[Gz]})}return n})(),N7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:JF,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:V_,useValue:t.callSetDisabledState??eC}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[Gz]})}return n})();try{o2=typeof Intl<"u"&&Intl.v8BreakIterator}catch{o2=!1}let oC,sC=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Yl(n){return n===Js}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!o2)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(u.Lbi))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CM(n){return function F7(){if(null==oC&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>oC=!0}))}finally{oC=oC||!1}return oC}()?n:!!n.capture}function Wz(n){return Array.isArray(n)?n:[n]}var Ga=j(8645),DM=j(2737),q7=j(7103);function SM(...n){const e=(0,QT.yG)(n),t=(0,QT.jO)(n),{args:r,keys:i}=$j(n);if(0===r.length)return(0,Jn.D)([],e);const s=new Wi.y(function W7(n,e,t=DM.y){return r=>{Zz(e,()=>{const{length:i}=n,s=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)Zz(e,()=>{const _=(0,Jn.D)(n[p],e);let w=!1;_.subscribe((0,pi.x)(r,C=>{s[p]=C,w||(w=!0,h--),h||r.next(t(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>qj(i,c):DM.y));return t?s.pipe(Gj(t)):s}function Zz(n,e,t){n?(0,q7.f)(t,n,e):e()}var aC=j(7537);function xM(...n){return function K7(){return(0,aC.J)(1)}()((0,Jn.D)(n,(0,QT.yG)(n)))}var Xp=j(6232);function kh(n){return n<=0?()=>Xp.E:(0,fi.e)((e,t)=>{let r=0;e.subscribe((0,pi.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function cC(...n){const e=(0,QT.yG)(n);return(0,fi.e)((t,r)=>{(e?xM(n,t,e):xM(n,t)).subscribe(r)})}var Y7=j(2420);function z_(n){return(0,fi.e)((e,t)=>{(0,YT.Xf)(n).subscribe((0,pi.x)(t,()=>t.complete(),Y7.Z)),!t.closed&&e.subscribe(t)})}const Yz=new Set;let H_,Q7=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):J7}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function X7(n,e){if(!Yz.has(n))try{H_||(H_=document.createElement("style"),e&&(H_.nonce=e),H_.setAttribute("type","text/css"),document.head.appendChild(H_)),H_.sheet&&(H_.sheet.insertRule(`@media ${n} {body{ }}`,0),Yz.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(sC),u.LFG(u.Ojb,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J7(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let eW=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Ga.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Qz(Wz(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=SM(Qz(Wz(t)).map(c=>this._registerQuery(c).observable));return s=xM(s.pipe(kh(1)),s.pipe(function Z7(n){return gr((e,t)=>n<=t)}(1),Ce(0))),s.pipe((0,Jt.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:_})=>{h.matches=h.matches||p,h.breakpoints[_]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Wi.y(c=>{const h=p=>this._zone.run(()=>c.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(cC(r),(0,Jt.U)(({matches:c})=>({query:t,matches:c})),z_(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Q7),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qz(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const tH="cdk-high-contrast-black-on-white",nH="cdk-high-contrast-white-on-black",c2="cdk-high-contrast-active";let dW=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,u.f3M)(eW).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(c2,tH,nH),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(c2,tH):2===r&&t.add(c2,nH)}}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(sC),u.LFG(Ae))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RM=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const yW=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function _W(){return!0}});let $l=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function U7(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(dW),u.LFG(yW,8),u.LFG(Ae))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[RM,RM]})}return n})(),sH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[$l,$l]})}return n})();const oH=CM({passive:!0,capture:!0});class IW{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function V7(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const c=s.get(r);c?c.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,oH)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,oH)))}}class l2{static#e=this._eventManager=new IW;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Kz(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...aH,...r.animation},c=r.radius||function bW(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,p=t-i.top,_=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=h-c+"px",w.style.top=p-c+"px",w.style.height=2*c+"px",w.style.width=2*c+"px",null!=r.color&&(w.style.backgroundColor=r.color),w.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(w);const C=window.getComputedStyle(w),N=C.transitionDuration,Y="none"===C.transitionProperty||"0s"===N||"0s, 0s"===N||0===i.width&&0===i.height,ne=new wW(this,w,r,Y);w.style.transform="scale3d(1, 1, 1)",ne.state=0,r.persistent||(this._mostRecentTransientRipple=ne);return!Y&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ne=()=>this._finishRippleTransition(ne),qe=()=>this._destroyRipple(ne);w.addEventListener("transitionend",Ne),w.addEventListener("transitioncancel",qe)}),this._activeRipples.set(ne,null),(Y||!_)&&this._finishRippleTransition(ne),ne}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...aH,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Kz(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,lH.forEach(r=>{l2._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{uH.forEach(t=>{this._triggerElement.addEventListener(t,this,cH)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function cW(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function lW(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(lH.forEach(t=>l2._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&uH.forEach(t=>e.removeEventListener(t,this,cH)))}}let TW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[$l,$l]})}return n})(),MW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[$l,ur,$l]})}return n})(),OW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[sH,$l,sH,$l]})}return n})(),HW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[$l,ur,TW]})}return n})();var MM=j(7394);function u2(){return(0,fi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class d2 extends Wi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,fi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new MM.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=MM.w0.EMPTY)}return e}refCount(){return u2()(this)}}var gH=j(1954);const dC={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=dC;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new MM.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=dC;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=dC;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var _H=j(2631);new class GW extends _H.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class $W extends gH.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=dC.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(dC.cancelAnimationFrame(t),e._scheduled=void 0)}});let f2,WW=1;const PM={};function yH(n){return n in PM&&(delete PM[n],!0)}const KW={setImmediate(n){const e=WW++;return PM[e]=!0,f2||(f2=Promise.resolve()),f2.then(()=>yH(e)&&n()),e},clearImmediate(n){yH(n)}},{setImmediate:ZW,clearImmediate:YW}=KW,kM={setImmediate(...n){const{delegate:e}=kM;return(e?.setImmediate||ZW)(...n)},clearImmediate(n){const{delegate:e}=kM;return(e?.clearImmediate||YW)(n)},delegate:void 0};new class XW extends _H.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class QW extends gH.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=kM.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(kM.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});j(671);let vH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),a8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[RM,vH,RM,vH]})}return n})();var mc=j(5619);let I8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[a8]})}return n})(),R8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[$l,I8,$l]})}return n})();var P8=j(3061),k8=j.n(P8);let O8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[ur]}),n})(),U8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ur]]}),n})();const HM_firebaseConfig={apiKey:"AIzaSyBsv9RRWMipsQbrgOvq16gClAraUZRZA3U",authDomain:"anywhere-ecom.firebaseapp.com",projectId:"anywhere-ecom",storageBucket:"anywhere-ecom.appspot.com",messagingSenderId:"24709365004",appId:"1:24709365004:web:84a49a9af3b72dc0eedd29"},$M=(0,j(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function MH(n){return new Wi.y(e=>{(0,YT.Xf)(n()).subscribe(e)})}var j8=j(8407);function pC(n,e){const t=(0,Fa.m)(n)?n:()=>n,r=i=>i.error(t());return new Wi.y(e?i=>e.schedule(r,0,i):r)}function GM(n){return(0,fi.e)((e,t)=>{let r=!1;e.subscribe((0,pi.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function PH(n=z8){return(0,fi.e)((e,t)=>{let r=!1;e.subscribe((0,pi.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function z8(){return new $M}function Jp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gr((i,s)=>n(i,s,r)):DM.y,kh(1),t?GM(e):PH(()=>new $M))}var ao=j(9397);function Fh(n){return(0,fi.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,pi.x)(t,void 0,void 0,c=>{s=(0,YT.Xf)(n(c,Fh(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function qM(n,e){return(0,fi.e)(function H8(n,e,t,r,i){return(s,c)=>{let h=t,p=e,_=0;s.subscribe((0,pi.x)(c,w=>{const C=_++;p=h?n(p,w,C):(h=!0,w),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}(n,e,arguments.length>=2,!0))}function T2(n){return n<=0?()=>Xp.E:(0,fi.e)((e,t)=>{let r=[];e.subscribe((0,pi.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const jn="primary",mC=Symbol("RouteTitle");class q8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function V0(n){return new q8(n)}function W8(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const c=r[s],h=n[s];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function od(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!kH(n[i],e[i]))return!1;return!0}function kH(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function OH(n){return n.length>0?n[n.length-1]:null}function em(n){return function wH(n){return!!n&&(n instanceof Wi.y||(0,Fa.m)(n.lift)&&(0,Fa.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,Jn.D)(Promise.resolve(n)):(0,$t.of)(n)}const Z8={exact:function LH(n,e,t){if(!G_(n.segments,e.segments)||!WM(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!LH(n.children[r],e.children[r],t))return!1;return!0},subset:VH},NH={exact:function Y8(n,e){return od(n,e)},subset:function Q8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kH(n[t],e[t]))},ignored:()=>!0};function FH(n,e,t){return Z8[t.paths](n.root,e.root,t.matrixParams)&&NH[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function VH(n,e,t){return UH(n,e,e.segments,t)}function UH(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!G_(i,t)||e.hasChildren()||!WM(i,t,r))}if(n.segments.length===t.length){if(!G_(n.segments,t)||!WM(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!VH(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(G_(n.segments,i)&&WM(n.segments,i,r)&&n.children[jn])&&UH(n.children[jn],e,s,r)}}function WM(n,e,t){return e.every((r,i)=>NH[t](n[i].parameters,r.parameters))}class U0{constructor(e=new Or([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=V0(this.queryParams)),this._queryParamMap}toString(){return eK.serialize(this)}}class Or{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return KM(this)}}class gC{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=V0(this.parameters)),this._parameterMap}toString(){return zH(this)}}function G_(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let _C=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new C2},providedIn:"root"})}return n})();class C2{parse(e){const t=new dK(e);return new U0(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${yC(e.root,!0)}`,r=function rK(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ZM(t)}=${ZM(i)}`).join("&"):`${ZM(t)}=${ZM(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function tK(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const eK=new C2;function KM(n){return n.segments.map(e=>zH(e)).join("/")}function yC(n,e){if(!n.hasChildren())return KM(n);if(e){const t=n.children[jn]?yC(n.children[jn],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==jn&&r.push(`${i}:${yC(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function J8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===jn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==jn&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===jn?[yC(n.children[jn],!1)]:[`${i}:${yC(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jn]?`${KM(n)}/${t[0]}`:`${KM(n)}/(${t.join("//")})`}}function BH(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ZM(n){return BH(n).replace(/%3B/gi,";")}function A2(n){return BH(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function YM(n){return decodeURIComponent(n)}function jH(n){return YM(n.replace(/\+/g,"%20"))}function zH(n){return`${A2(n.path)}${function nK(n){return Object.keys(n).map(e=>`;${A2(e)}=${A2(n[e])}`).join("")}(n.parameters)}`}const iK=/^[^\/()?;#]+/;function D2(n){const e=n.match(iK);return e?e[0]:""}const sK=/^[^\/()?;=#]+/,aK=/^[^=?&#]+/,lK=/^[^&#]+/;class dK{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Or([],{}):new Or([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jn]=new Or(e,t)),r}parseSegment(){const e=D2(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new gC(YM(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function oK(n){const e=n.match(sK);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=D2(this.remaining);i&&(r=i,this.capture(r))}e[YM(t)]=YM(r)}parseQueryParam(e){const t=function cK(n){const e=n.match(aK);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function uK(n){const e=n.match(lK);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=jH(t),s=jH(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=D2(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=jn);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[jn]:new Or([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function HH(n){return n.segments.length>0?new Or([],{[jn]:n}):n}function $H(n){const e={};for(const r of Object.keys(n.children)){const s=$H(n.children[r]);if(r===jn&&0===s.segments.length&&s.hasChildren())for(const[c,h]of Object.entries(s.children))e[c]=h;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function hK(n){if(1===n.numberOfChildren&&n.children[jn]){const e=n.children[jn];return new Or(n.segments.concat(e.segments),e.children)}return n}(new Or(n.segments,e))}function q_(n){return n instanceof U0}function GH(n){let e;const i=HH(function t(s){const c={};for(const p of s.children){const _=t(p);c[p.outlet]=_}const h=new Or(s.url,c);return s===n&&(e=h),h}(n.root));return e??i}function qH(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return S2(i,i,i,t,r);const s=function pK(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new KH(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Object.entries(s.outlets).forEach(([p,_])=>{h[p]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new KH(t,e,r)}(e);if(s.toRoot())return S2(i,i,new Or([],{}),t,r);const c=function mK(n,e,t){if(n.isAbsolute)return new XM(e,!0,0);if(!t)return new XM(e,!1,NaN);if(null===t.parent)return new XM(t,!0,0);const r=QM(n.commands[0])?0:1;return function gK(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new u.vHH(4005,!1);i=r.segments.length}return new XM(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),h=c.processChildren?wC(c.segmentGroup,c.index,s.commands):ZH(c.segmentGroup,c.index,s.commands);return S2(i,c.segmentGroup,h,t,r)}function QM(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function vC(n){return"object"==typeof n&&null!=n&&n.outlets}function S2(n,e,t,r,i){let c,s={};r&&Object.entries(r).forEach(([p,_])=>{s[p]=Array.isArray(_)?_.map(w=>`${w}`):`${_}`}),c=n===e?t:WH(n,e,t);const h=HH($H(c));return new U0(h,s,i)}function WH(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:WH(s,e,t)}),new Or(n.segments,r)}class KH{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&QM(r[0]))throw new u.vHH(4003,!1);const i=r.find(vC);if(i&&i!==OH(r))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class XM{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ZH(n,e,t){if(n||(n=new Or([],{})),0===n.segments.length&&n.hasChildren())return wC(n,e,t);const r=function yK(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const c=n.segments[i],h=t[r];if(vC(h))break;const p=`${h}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!QH(p,_,c))return s;r+=2}else{if(!QH(p,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Or(n.segments.slice(0,r.pathIndex),{});return s.children[jn]=new Or(n.segments.slice(r.pathIndex),n.children),wC(s,0,i)}return r.match&&0===i.length?new Or(n.segments,{}):r.match&&!n.hasChildren()?x2(n,e,t):r.match?wC(n,0,i):x2(n,e,t)}function wC(n,e,t){if(0===t.length)return new Or(n.segments,{});{const r=function _K(n){return vC(n[0])?n[0].outlets:{[jn]:n}}(t),i={};if(Object.keys(r).some(s=>s!==jn)&&n.children[jn]&&1===n.numberOfChildren&&0===n.children[jn].segments.length){const s=wC(n.children[jn],e,t);return new Or(n.segments,s.children)}return Object.entries(r).forEach(([s,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[s]=ZH(n.children[s],e,c))}),Object.entries(n.children).forEach(([s,c])=>{void 0===r[s]&&(i[s]=c)}),new Or(n.segments,i)}}function x2(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(vC(s)){const p=vK(s.outlets);return new Or(r,p)}if(0===i&&QM(t[0])){r.push(new gC(n.segments[e].path,YH(t[0]))),i++;continue}const c=vC(s)?s.outlets[jn]:`${s}`,h=i<t.length-1?t[i+1]:null;c&&h&&QM(h)?(r.push(new gC(c,YH(h))),i+=2):(r.push(new gC(c,{})),i++)}return new Or(r,{})}function vK(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=x2(new Or([],{}),0,r))}),e}function YH(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function QH(n,e,t){return n==t.path&&od(e,t.parameters)}const IC="imperative";class ad{constructor(e,t){this.id=e,this.url=t}}class JM extends ad{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class tm extends ad{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class EC extends ad{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class B0 extends ad{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class e1 extends ad{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class XH extends ad{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wK extends ad{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IK extends ad{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class EK extends ad{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bK extends ad{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TK{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class CK{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class AK{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DK{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SK{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xK{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JH{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class R2{}class M2{constructor(e){this.url=e}}class RK{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bC,this.attachRef=null}}let bC=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new RK,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class e${constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=P2(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=P2(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=k2(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return k2(e,this._root).map(t=>t.value)}}function P2(n,e){if(n===e.value)return e;for(const t of e.children){const r=P2(n,t);if(r)return r}return null}function k2(n,e){if(n===e.value)return[e];for(const t of e.children){const r=k2(n,t);if(r.length)return r.unshift(e),r}return[]}class Lh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function j0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class t$ extends e${constructor(e,t){super(e),this.snapshot=t,O2(this,e)}toString(){return this.snapshot.toString()}}function n$(n,e){const t=function MK(n,e){const c=new t1([],{},{},"",{},jn,e,null,{});return new i$("",new Lh(c,[]))}(0,e),r=new mc.X([new gC("",{})]),i=new mc.X({}),s=new mc.X({}),c=new mc.X({}),h=new mc.X(""),p=new W_(r,i,c,h,s,jn,e,t.root);return p.snapshot=t.root,new t$(new Lh(p,[]),t)}class W_{constructor(e,t,r,i,s,c,h,p){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=c,this.component=h,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,Jt.U)(_=>_[mC]))??(0,$t.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Jt.U)(e=>V0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Jt.U)(e=>V0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function r$(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function PK(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class t1{get title(){return this.data?.[mC]}constructor(e,t,r,i,s,c,h,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.routeConfig=p,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=V0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=V0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class i$ extends e${constructor(e,t){super(t),this.url=e,O2(this,t)}toString(){return s$(this._root)}}function O2(n,e){e.value._routerState=n,e.children.forEach(t=>O2(n,t))}function s$(n){const e=n.children.length>0?` { ${n.children.map(s$).join(", ")} } `:"";return`${n.value}${e}`}function N2(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,od(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),od(e.params,t.params)||n.paramsSubject.next(t.params),function K8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!od(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),od(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function F2(n,e){const t=od(n.params,e.params)&&function X8(n,e){return G_(n,e)&&n.every((t,r)=>od(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||F2(n.parent,e.parent))}let n1=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=jn,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(bC),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(r1,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new kK(t,h,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]})}return n})();class kK{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===W_?this.route:e===bC?this.childContexts:this.parent.get(e,t)}}const r1=new u.OlP("");let o$=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=SM([r.queryParams,r.params,r.data]).pipe((0,dr.w)(([s,c,h],p)=>(h={...s,...c,...h},0===p?(0,$t.of)(h):Promise.resolve(h)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const c=(0,u.qFp)(r.component);if(c)for(const{templateName:h}of c.inputs)t.activatedComponentRef.setInput(h,s[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function TC(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function NK(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return TC(n,r,i);return TC(n,r)})}(n,e,t);return new Lh(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>TC(n,h)),c}}const r=function FK(n){return new W_(new mc.X(n.url),new mc.X(n.params),new mc.X(n.queryParams),new mc.X(n.fragment),new mc.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>TC(n,s));return new Lh(r,i)}}const L2="ngNavigationCancelingError";function a$(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=q_(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=c$(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function c$(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[L2]=!0,r.cancellationCode=e,t&&(r.url=t),r}function l$(n){return n&&n[L2]}let u$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(r,i){1&r&&u._UZ(0,"router-outlet")},dependencies:[n1],encapsulation:2})}return n})();function V2(n){const e=n.children&&n.children.map(V2),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jn&&(t.component=u$),t}function Gl(n){return n.outlet||jn}function CC(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class $K{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),N2(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=j0(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=j0(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=j0(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=j0(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new xK(s.value.snapshot))}),e.children.length&&this.forwardEvent(new DK(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(N2(i),i===s)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),N2(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=CC(i.snapshot);c.attachRef=null,c.route=i,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class d${constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class s1{constructor(e,t){this.component=e,this.route=t}}function GK(n,e,t){const r=n._root;return AC(r,e?e._root:null,t,[r.value])}function z0(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function AC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=j0(e);return n.children.forEach(c=>{(function WK(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function KK(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!G_(n.url,e.url);case"pathParamsOrQueryParamsChange":return!G_(n.url,e.url)||!od(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!F2(n,e)||!od(n.queryParams,e.queryParams);default:return!F2(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new d$(r)):(s.data=c.data,s._resolvedData=c._resolvedData),AC(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new s1(h.outlet.component,c))}else c&&DC(e,h,i),i.canActivateChecks.push(new d$(r)),AC(n,null,s.component?h?h.children:null:t,r,i)})(c,s[c.value.outlet],t,r.concat([c.value]),i),delete s[c.value.outlet]}),Object.entries(s).forEach(([c,h])=>DC(h,t.getContext(c),i)),i}function DC(n,e,t){const r=j0(n),i=n.value;Object.entries(r).forEach(([s,c])=>{DC(c,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new s1(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function SC(n){return"function"==typeof n}function h$(n){return n instanceof $M||"EmptyError"===n?.name}const o1=Symbol("INITIAL_VALUE");function H0(){return(0,dr.w)(n=>SM(n.map(e=>e.pipe(kh(1),cC(o1)))).pipe((0,Jt.U)(e=>{for(const t of e)if(!0!==t){if(t===o1)return o1;if(!1===t||t instanceof U0)return t}return!0}),gr(e=>e!==o1),kh(1)))}function f$(n){return(0,j8.z)((0,ao.b)(e=>{if(q_(e))throw a$(0,e)}),(0,Jt.U)(e=>!0===e))}class a1{constructor(e){this.segmentGroup=e||null}}class p${constructor(e){this.urlTree=e}}function $0(n){return pC(new a1(n))}function m$(n){return pC(new p$(n))}class pZ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new u.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,$t.of)(r);if(i.numberOfChildren>1||!i.children[jn])return pC(new u.vHH(4e3,!1));i=i.children[jn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new U0(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const h=s.substring(1);r[i]=t[h]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([h,p])=>{c[h]=this.createSegmentGroup(e,p,r,i)}),new Or(s,c)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const U2={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mZ(n,e,t,r,i){const s=B2(n,e,t);return s.matched?(r=function VK(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function dZ(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,$t.of)(!0);const s=i.map(c=>{const h=z0(c,n);return em(function eZ(n){return n&&SC(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,$t.of)(s).pipe(H0(),f$())}(r,e,t).pipe((0,Jt.U)(c=>!0===c?s:{...U2}))):(0,$t.of)(s)}function B2(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...U2}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||W8)(t,n,e);if(!i)return{...U2};const s={};Object.entries(i.posParams??{}).forEach(([h,p])=>{s[h]=p.path});const c=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function g$(n,e,t,r){return t.length>0&&function yZ(n,e,t){return t.some(r=>c1(n,e,r)&&Gl(r)!==jn)}(n,t,r)?{segmentGroup:new Or(e,_Z(r,new Or(t,n.children))),slicedSegments:[]}:0===t.length&&function vZ(n,e,t){return t.some(r=>c1(n,e,r))}(n,t,r)?{segmentGroup:new Or(n.segments,gZ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Or(n.segments,n.children),slicedSegments:t}}function gZ(n,e,t,r,i){const s={};for(const c of r)if(c1(n,t,c)&&!i[Gl(c)]){const h=new Or([],{});s[Gl(c)]=h}return{...i,...s}}function _Z(n,e){const t={};t[jn]=e;for(const r of n)if(""===r.path&&Gl(r)!==jn){const i=new Or([],{});t[Gl(r)]=i}return t}function c1(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class bZ{constructor(e,t,r,i,s,c,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new pZ(this.urlSerializer,this.urlTree)}noMatchError(e){return new u.vHH(4002,!1)}recognize(){const e=g$(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,jn).pipe(Fh(t=>{if(t instanceof p$)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof a1?this.noMatchError(t):t}),(0,Jt.U)(t=>{const r=new t1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jn,this.rootComponentType,null,{}),i=new Lh(r,t),s=new i$("",i),c=function fK(n,e,t=null,r=null){return qH(GH(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(s._root),{state:s,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,jn).pipe(Fh(r=>{throw r instanceof a1?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=r$(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Jn.D)(i).pipe(no(s=>{const c=r.children[s],h=function zK(n,e){const t=n.filter(r=>Gl(r)===e);return t.push(...n.filter(r=>Gl(r)!==e)),t}(t,s);return this.processSegmentGroup(e,h,c,s)}),qM((s,c)=>(s.push(...c),s)),GM(null),function $8(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gr((i,s)=>n(i,s,r)):DM.y,T2(1),t?GM(e):PH(()=>new $M))}(),(0,Ti.z)(s=>{if(null===s)return $0(r);const c=_$(s);return function TZ(n){n.sort((e,t)=>e.value.outlet===jn?-1:t.value.outlet===jn?1:e.value.outlet.localeCompare(t.value.outlet))}(c),(0,$t.of)(c)}))}processSegment(e,t,r,i,s,c){return(0,Jn.D)(t).pipe(no(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,s,c).pipe(Fh(p=>{if(p instanceof a1)return(0,$t.of)(null);throw p}))),Jp(h=>!!h),Fh(h=>{if(h$(h))return function IZ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?(0,$t.of)([]):$0(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,s,c,h){return function wZ(n,e,t,r){return!!(Gl(n)===r||r!==jn&&c1(e,t,n))&&("**"===n.path||B2(e,n,t).matched)}(r,i,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,c,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,c):$0(i):$0(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?m$(s):this.applyRedirects.lineralizeSegments(r,s).pipe((0,Ti.z)(c=>{const h=new Or(c,{});return this.processSegment(e,t,h,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){const{matched:h,consumedSegments:p,remainingSegments:_,positionalParamSegments:w}=B2(t,i,s);if(!h)return $0(t);const C=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,w);return i.redirectTo.startsWith("/")?m$(C):this.applyRedirects.lineralizeSegments(i,C).pipe((0,Ti.z)(R=>this.processSegment(e,r,t,R.concat(_),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,c){let h;if("**"===r.path){const p=i.length>0?OH(i).parameters:{},_=new t1(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,y$(r),Gl(r),r.component??r._loadedComponent??null,r,v$(r));h=(0,$t.of)({snapshot:_,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=mZ(t,r,i,e).pipe((0,Jt.U)(({matched:p,consumedSegments:_,remainingSegments:w,parameters:C})=>p?{snapshot:new t1(_,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,y$(r),Gl(r),r.component??r._loadedComponent??null,r,v$(r)),consumedSegments:_,remainingSegments:w}:null));return h.pipe((0,dr.w)(p=>null===p?$0(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,dr.w)(({routes:_})=>{const w=r._loadedInjector??e,{snapshot:C,consumedSegments:R,remainingSegments:N}=p,{segmentGroup:Y,slicedSegments:ne}=g$(t,R,N,_);if(0===ne.length&&Y.hasChildren())return this.processChildren(w,_,Y).pipe((0,Jt.U)(Ne=>null===Ne?null:[new Lh(C,Ne)]));if(0===_.length&&0===ne.length)return(0,$t.of)([new Lh(C,[])]);const te=Gl(r)===s;return this.processSegment(w,_,Y,ne,te?jn:s,!0).pipe((0,Jt.U)(Ne=>[new Lh(C,Ne)]))}))))}getChildConfig(e,t,r){return t.children?(0,$t.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,$t.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function uZ(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,$t.of)(!0);const s=i.map(c=>{const h=z0(c,n);return em(function YK(n){return n&&SC(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,$t.of)(s).pipe(H0(),f$())}(e,t,r).pipe((0,Ti.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ao.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function fZ(n){return pC(c$(!1,3))}())):(0,$t.of)({routes:[],injector:e})}}function CZ(n){const e=n.value.routeConfig;return e&&""===e.path}function _$(n){const e=[],t=new Set;for(const r of n){if(!CZ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=_$(r.children);e.push(new Lh(r.value,i))}return e.filter(r=>!t.has(r))}function y$(n){return n.data||{}}function v$(n){return n.resolve||{}}function w$(n){return"string"==typeof n.title||null===n.title}function j2(n){return(0,dr.w)(e=>{const t=n(e);return t?(0,Jn.D)(t).pipe((0,Jt.U)(()=>e)):(0,$t.of)(e)})}const G0=new u.OlP("ROUTES");let z2=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,$t.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=em(t.loadComponent()).pipe((0,Jt.U)(I$),(0,ao.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),_r(()=>{this.componentLoaders.delete(t)})),i=new d2(r,()=>new Ga.x).pipe(u2());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,$t.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function PZ(n,e,t,r){return em(n.loadChildren()).pipe((0,Jt.U)(I$),(0,Ti.z)(i=>i instanceof u.YKP||Array.isArray(i)?(0,$t.of)(i):(0,Jn.D)(e.compileModuleAsync(i))),(0,Jt.U)(i=>{r&&r(n);let s,c,h=!1;return Array.isArray(i)?(c=i,!0):(s=i.create(t).injector,c=s.get(G0,[],{optional:!0,self:!0}).flat()),{routes:c.map(V2),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(_r(()=>{this.childrenLoaders.delete(r)})),c=new d2(s,()=>new Ga.x).pipe(u2());return this.childrenLoaders.set(r,c),c}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I$(n){return function kZ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let l1=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ga.x,this.transitionAbortSubject=new Ga.x,this.configLoader=(0,u.f3M)(z2),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(_C),this.rootContexts=(0,u.f3M)(bC),this.inputBindingEnabled=null!==(0,u.f3M)(r1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,$t.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new CK(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new TK(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new mc.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:IC,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gr(s=>0!==s.id),(0,Jt.U)(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),(0,dr.w)(s=>{this.currentTransition=s;let c=!1,h=!1;return(0,$t.of)(s).pipe((0,ao.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,dr.w)(p=>{const _=p.currentBrowserUrl.toString(),w=!t.navigated||p.extractedUrl.toString()!==_||_!==p.currentUrlTree.toString();if(!w&&"reload"!==(p.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const R="";return this.events.next(new B0(p.id,this.urlSerializer.serialize(p.rawUrl),R,0)),p.resolve(null),Xp.E}if(t.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return(0,$t.of)(p).pipe((0,dr.w)(R=>{const N=this.transitions?.getValue();return this.events.next(new JM(R.id,this.urlSerializer.serialize(R.extractedUrl),R.source,R.restoredState)),N!==this.transitions?.getValue()?Xp.E:Promise.resolve(R)}),function AZ(n,e,t,r,i,s){return(0,Ti.z)(c=>function EZ(n,e,t,r,i,s,c="emptyOnly"){return new bZ(n,e,t,r,i,c,s).recognize()}(n,e,t,r,c.extractedUrl,i,s).pipe((0,Jt.U)(({state:h,tree:p})=>({...c,targetSnapshot:h,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ao.b)(R=>{s.targetSnapshot=R.targetSnapshot,s.urlAfterRedirects=R.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:R.urlAfterRedirects};const N=new XH(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects),R.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(p.currentRawUrl)){const{id:R,extractedUrl:N,source:Y,restoredState:ne,extras:te}=p,Ne=new JM(R,this.urlSerializer.serialize(N),Y,ne);this.events.next(Ne);const qe=n$(0,this.rootComponentType).snapshot;return this.currentTransition=s={...p,targetSnapshot:qe,urlAfterRedirects:N,extras:{...te,skipLocationChange:!1,replaceUrl:!1}},(0,$t.of)(s)}{const R="";return this.events.next(new B0(p.id,this.urlSerializer.serialize(p.extractedUrl),R,1)),p.resolve(null),Xp.E}}),(0,ao.b)(p=>{const _=new wK(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}),(0,Jt.U)(p=>(this.currentTransition=s={...p,guards:GK(p.targetSnapshot,p.currentSnapshot,this.rootContexts)},s)),function nZ(n,e){return(0,Ti.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?(0,$t.of)({...t,guardsResult:!0}):function rZ(n,e,t,r){return(0,Jn.D)(n).pipe((0,Ti.z)(i=>function lZ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,$t.of)(!0);const c=s.map(h=>{const p=CC(e)??i,_=z0(h,p);return em(function JK(n){return n&&SC(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):p.runInContext(()=>_(n,e,t,r))).pipe(Jp())});return(0,$t.of)(c).pipe(H0())}(i.component,i.route,t,e,r)),Jp(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Ti.z)(h=>h&&function ZK(n){return"boolean"==typeof n}(h)?function iZ(n,e,t,r){return(0,Jn.D)(e).pipe(no(i=>xM(function oZ(n,e){return null!==n&&e&&e(new AK(n)),(0,$t.of)(!0)}(i.route.parent,r),function sZ(n,e){return null!==n&&e&&e(new SK(n)),(0,$t.of)(!0)}(i.route,r),function cZ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function qK(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>MH(()=>{const h=c.guards.map(p=>{const _=CC(c.node)??t,w=z0(p,_);return em(function XK(n){return n&&SC(n.canActivateChild)}(w)?w.canActivateChild(r,n):_.runInContext(()=>w(r,n))).pipe(Jp())});return(0,$t.of)(h).pipe(H0())}));return(0,$t.of)(s).pipe(H0())}(n,i.path,t),function aZ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,$t.of)(!0);const i=r.map(s=>MH(()=>{const c=CC(e)??t,h=z0(s,c);return em(function QK(n){return n&&SC(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(Jp())}));return(0,$t.of)(i).pipe(H0())}(n,i.route,t))),Jp(i=>!0!==i,!0))}(r,s,n,e):(0,$t.of)(h)),(0,Jt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,p=>this.events.next(p)),(0,ao.b)(p=>{if(s.guardsResult=p.guardsResult,q_(p.guardsResult))throw a$(0,p.guardsResult);const _=new IK(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.events.next(_)}),gr(p=>!!p.guardsResult||(this.cancelNavigationTransition(p,"",3),!1)),j2(p=>{if(p.guards.canActivateChecks.length)return(0,$t.of)(p).pipe((0,ao.b)(_=>{const w=new EK(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}),(0,dr.w)(_=>{let w=!1;return(0,$t.of)(_).pipe(function DZ(n,e){return(0,Ti.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,$t.of)(t);let s=0;return(0,Jn.D)(i).pipe(no(c=>function SZ(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!w$(i)&&(s[mC]=i.title),function xZ(n,e,t,r){const i=function RZ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,$t.of)({});const s={};return(0,Jn.D)(i).pipe((0,Ti.z)(c=>function MZ(n,e,t,r){const i=CC(e)??r,s=z0(n,i);return em(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[c],e,t,r).pipe(Jp(),(0,ao.b)(h=>{s[c]=h}))),T2(1),function G8(n){return(0,Jt.U)(()=>n)}(s),Fh(c=>h$(c)?Xp.E:pC(c)))}(s,n,e,r).pipe((0,Jt.U)(c=>(n._resolvedData=c,n.data=r$(n,t).resolve,i&&w$(i)&&(n.data[mC]=i.title),null)))}(c.route,r,n,e)),(0,ao.b)(()=>s++),T2(1),(0,Ti.z)(c=>s===i.length?(0,$t.of)(t):Xp.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,ao.b)({next:()=>w=!0,complete:()=>{w||this.cancelNavigationTransition(_,"",2)}}))}),(0,ao.b)(_=>{const w=new bK(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}))}),j2(p=>{const _=w=>{const C=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,ao.b)(R=>{w.component=R}),(0,Jt.U)(()=>{})));for(const R of w.children)C.push(..._(R));return C};return SM(_(p.targetSnapshot.root)).pipe(GM(),kh(1))}),j2(()=>this.afterPreactivation()),(0,Jt.U)(p=>{const _=function OK(n,e,t){const r=TC(n,e._root,t?t._root:void 0);return new t$(r,e)}(t.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return this.currentTransition=s={...p,targetRouterState:_},s}),(0,ao.b)(()=>{this.events.next(new R2)}),((n,e,t,r)=>(0,Jt.U)(i=>(new $K(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,p=>this.events.next(p),this.inputBindingEnabled),kh(1),(0,ao.b)({next:p=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tm(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects))),t.titleStrategy?.updateTitle(p.targetRouterState.snapshot),p.resolve(!0)},complete:()=>{c=!0}}),z_(this.transitionAbortSubject.pipe((0,ao.b)(p=>{throw p}))),_r(()=>{c||h||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Fh(p=>{if(h=!0,l$(p))this.events.next(new EC(s.id,this.urlSerializer.serialize(s.extractedUrl),p.message,p.cancellationCode)),function LK(n){return l$(n)&&q_(n.url)}(p)?this.events.next(new M2(p.url)):s.resolve(!1);else{this.events.next(new e1(s.id,this.urlSerializer.serialize(s.extractedUrl),p,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(p))}catch(_){s.reject(_)}}return Xp.E}))}))}cancelNavigationTransition(t,r,i){const s=new EC(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function E$(n){return n!==IC}let b$=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===jn);return r}getResolvedTitleForRoute(t){return t.data[mC]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(OZ)},providedIn:"root"})}return n})(),OZ=(()=>{class n extends b${constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Xe))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(LZ)},providedIn:"root"})}return n})();class FZ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let LZ=(()=>{class n extends FZ{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const u1=new u.OlP("",{providedIn:"root",factory:()=>({})});let VZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(UZ)},providedIn:"root"})}return n})(),UZ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xC=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(xC||{});function T$(n,e){n.events.pipe(gr(t=>t instanceof tm||t instanceof EC||t instanceof e1||t instanceof B0),(0,Jt.U)(t=>t instanceof tm||t instanceof B0?xC.COMPLETE:t instanceof EC&&(0===t.code||1===t.code)?xC.REDIRECTING:xC.FAILED),gr(t=>t!==xC.REDIRECTING),kh(1)).subscribe(()=>{e()})}function BZ(n){throw n}function jZ(n,e,t){return e.parse("/")}const zZ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HZ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ys=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this._events=new Ga.x,this.options=(0,u.f3M)(u1,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||BZ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||jZ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(VZ),this.routeReuseStrategy=(0,u.f3M)(NZ),this.titleStrategy=(0,u.f3M)(b$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,u.f3M)(G0,{optional:!0})?.flat()??[],this.navigationTransitions=(0,u.f3M)(l1),this.urlSerializer=(0,u.f3M)(_C),this.location=(0,u.f3M)(vt),this.componentInputBindingEnabled=!!(0,u.f3M)(r1,{optional:!0}),this.eventsSubscription=new MM.w0,this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new U0,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=n$(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(C$(r)&&this._events.next(r));if(r instanceof JM)E$(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof B0)this.rawUrlTree=i.rawUrl;else if(r instanceof XH){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof R2)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof EC)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof M2){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||E$(i.source)};this.scheduleNavigation(s,IC,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof e1&&this.restoreHistory(i,!0),r instanceof tm&&(this.navigated=!0),C$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),IC,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const p={...i};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(V2),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,_=p?this.currentUrlTree.fragment:c;let C,w=null;switch(h){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}null!==w&&(w=this.removeEmptyProps(w));try{C=GH(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),C=this.currentUrlTree.root}return qH(C,t,w,_??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=q_(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,IC,null,r)}navigate(t,r={skipLocationChange:!1}){return function $Z(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new u.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...zZ}:!1===r?{...HZ}:r,q_(t))return FH(this.currentUrlTree,t,i);const s=this.parseUrl(t);return FH(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,c){if(this.disposed)return Promise.resolve(!1);let h,p,_;c?(h=c.resolve,p=c.reject,_=c.promise):_=new Promise((C,R)=>{h=C,p=R});const w=this.pendingTasks.add();return T$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:h,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(C=>Promise.reject(C))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function C$(n){return!(n instanceof R2||n instanceof M2)}let q0=(()=>{class n{constructor(t,r,i,s,c,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=c,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new Ga.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const p=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=t.events.subscribe(_=>{_ instanceof tm&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Ys),u.Y36(W_),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(st))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&u.NdJ("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&r&&u.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",u.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",u.VuI],replaceUrl:["replaceUrl","replaceUrl",u.VuI],routerLink:"routerLink"},standalone:!0,features:[u.Xq5,u.TTD]})}return n})();class A${}let WZ=(()=>{class n{constructor(t,r,i,s,c){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(gr(t=>t instanceof tm),no(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,u.MMx)(s.providers,t,`Route: ${s.path}`));const c=s._injector??t,h=s._loadedInjector??c;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(c,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,Jn.D)(i).pipe((0,aC.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,$t.of)(null);const s=i.pipe((0,Ti.z)(c=>null===c?(0,$t.of)(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Jn.D)([s,c]).pipe((0,aC.J)())}return s})}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ys),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(A$),u.LFG(z2))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const H2=new u.OlP("");let D$=(()=>{class n{constructor(t,r,i,s,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof JM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tm?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof B0&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof JH&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new JH(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){u.$Z()};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function Vh(n,e){return{\u0275kind:n,\u0275providers:e}}function x$(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(Ys),i=n.get(R$);1===n.get($2)&&r.initialNavigation(),n.get(M$,null,u.XFs.Optional)?.setUpPreloading(),n.get(H2,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const R$=new u.OlP("",{factory:()=>new Ga.x}),$2=new u.OlP("",{providedIn:"root",factory:()=>1}),M$=new u.OlP("");function QZ(n){return Vh(0,[{provide:M$,useExisting:WZ},{provide:A$,useExisting:n}])}const P$=new u.OlP("ROUTER_FORROOT_GUARD"),JZ=[vt,{provide:_C,useClass:C2},Ys,bC,{provide:W_,useFactory:function S$(n){return n.routerState.root},deps:[Ys]},z2,[]];function eY(){return new u.PXZ("Router",Ys)}let k$=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[JZ,[],{provide:G0,multi:!0,useValue:t},{provide:P$,useFactory:iY,deps:[[Ys,new u.FiY,new u.tp0]]},{provide:u1,useValue:r||{}},r?.useHash?{provide:st,useClass:Qe}:{provide:st,useClass:mt},{provide:H2,useFactory:()=>{const n=(0,u.f3M)(ts),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(u1),r=(0,u.f3M)(l1),i=(0,u.f3M)(_C);return t.scrollOffset&&n.setOffset(t.scrollOffset),new D$(i,r,n,e,t)}},r?.preloadingStrategy?QZ(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:eY},r?.initialNavigation?sY(r):[],r?.bindToComponentInputs?Vh(8,[o$,{provide:r1,useExisting:o$}]).\u0275providers:[],[{provide:O$,useFactory:x$},{provide:u.tb,multi:!0,useExisting:O$}]]}}static forChild(t){return{ngModule:n,providers:[{provide:G0,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(P$,8))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();function iY(n){return"guarded"}function sY(n){return["disabled"===n.initialNavigation?Vh(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(Ys);return()=>{e.setUpLocationChangeListener()}}},{provide:$2,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Vh(2,[{provide:$2,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(We,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ys),s=e.get(R$);T$(i,()=>{r(!0)}),e.get(l1).afterPreactivation=()=>(r(!0),s.closed?(0,$t.of)(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const O$=new u.OlP("");var Lt,aY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ql={},G2=G2||{},Rn=aY||self;function d1(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function RC(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var q2="closure_uid_"+(1e9*Math.random()>>>0),lY=0;function uY(n,e,t){return n.call.apply(n.bind,arguments)}function dY(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Zo(n,e,t){return(Zo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uY:dY).apply(null,arguments)}function h1(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function co(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function nm(){this.s=this.s,this.o=this.o}nm.prototype.s=!1,nm.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function cY(n){Object.prototype.hasOwnProperty.call(n,q2)&&n[q2]||(n[q2]=++lY)}(this)},nm.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const N$=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function W2(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function F$(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(d1(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let c=0;c<s;c++)n[i+c]=r[c]}else n.push(r)}}function Yo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Yo.prototype.h=function(){this.defaultPrevented=!0};var fY=function(){if(!Rn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rn.addEventListener("test",()=>{},e),Rn.removeEventListener("test",()=>{},e)}catch{}return n}();function MC(n){return/^[\s\xa0]*$/.test(n)}function f1(){var n=Rn.navigator;return n&&(n=n.userAgent)?n:""}function cd(n){return-1!=f1().indexOf(n)}function K2(n){return K2[" "](n),n}K2[" "]=function(){};var Y2,mY=cd("Opera"),W0=cd("Trident")||cd("MSIE"),L$=cd("Edge"),Z2=L$||W0,V$=cd("Gecko")&&!(-1!=f1().toLowerCase().indexOf("webkit")&&!cd("Edge"))&&!(cd("Trident")||cd("MSIE"))&&!cd("Edge"),gY=-1!=f1().toLowerCase().indexOf("webkit")&&!cd("Edge");function U$(){var n=Rn.document;return n?n.documentMode:void 0}e:{var Q2="",X2=function(){var n=f1();return V$?/rv:([^\);]+)(\)|;)/.exec(n):L$?/Edge\/([\d\.]+)/.exec(n):W0?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):gY?/WebKit\/(\S+)/.exec(n):mY?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(X2&&(Q2=X2?X2[1]:""),W0){var J2=U$();if(null!=J2&&J2>parseFloat(Q2)){Y2=String(J2);break e}}Y2=Q2}var _Y=Rn.document&&W0&&(U$()||parseInt(Y2,10))||void 0;function PC(n,e){if(Yo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(V$){e:{try{K2(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yY[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&PC.$.h.call(this)}}co(PC,Yo);var yY={2:"touch",3:"pen",4:"mouse"};PC.prototype.h=function(){PC.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var kC="closure_listenable_"+(1e6*Math.random()|0),vY=0;function wY(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++vY,this.fa=this.ia=!1}function p1(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function tL(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function j$(n){const e={};for(const t in n)e[t]=n[t];return e}const z$="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H$(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<z$.length;s++)t=z$[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function m1(n){this.src=n,this.g={},this.h=0}function nL(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=N$(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(p1(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rL(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}m1.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=rL(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new wY(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var iL="closure_lm_"+(1e6*Math.random()|0),sL={};function $$(n,e,t,r,i){if(r&&r.once)return q$(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)$$(n,e[s],t,r,i);return null}return t=lL(t),n&&n[kC]?n.O(e,t,RC(r)?!!r.capture:!!r,i):G$(n,e,t,!1,r,i)}function G$(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var c=RC(i)?!!i.capture:!!i,h=aL(n);if(h||(n[iL]=h=new m1(n)),(t=h.add(e,t,r,c,s)).proxy)return t;if(r=function EY(){const e=bY;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fY||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(K$(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function q$(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)q$(n,e[s],t,r,i);return null}return t=lL(t),n&&n[kC]?n.P(e,t,RC(r)?!!r.capture:!!r,i):G$(n,e,t,!0,r,i)}function W$(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)W$(n,e[s],t,r,i);else r=RC(r)?!!r.capture:!!r,t=lL(t),n&&n[kC]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rL(s=n.g[e],t,r,i))&&(p1(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=aL(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rL(e,t,r,i)),(t=-1<n?e[n]:null)&&oL(t))}function oL(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[kC])nL(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(K$(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=aL(e))?(nL(t,n),0==t.h&&(t.src=null,e[iL]=null)):p1(n)}}}function K$(n){return n in sL?sL[n]:sL[n]="on"+n}function bY(n,e){if(n.fa)n=!0;else{e=new PC(e,this);var t=n.listener,r=n.la||n.src;n.ia&&oL(n),n=t.call(r,e)}return n}function aL(n){return(n=n[iL])instanceof m1?n:null}var cL="__closure_events_fn_"+(1e9*Math.random()>>>0);function lL(n){return"function"==typeof n?n:(n[cL]||(n[cL]=function(e){return n.handleEvent(e)}),n[cL])}function lo(){nm.call(this),this.i=new m1(this),this.S=this,this.J=null}function Po(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Yo(e,n);else if(e instanceof Yo)e.target=e.target||n;else{var i=e;H$(e=new Yo(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];i=g1(c,r,!0,e)&&i}if(i=g1(c=e.g=n,r,!0,e)&&i,i=g1(c,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=g1(c=e.g=t[s],r,!1,e)&&i}function g1(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.fa&&c.capture==t){var h=c.listener,p=c.la||c.src;c.ia&&nL(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}co(lo,nm),lo.prototype[kC]=!0,lo.prototype.removeEventListener=function(n,e,t,r){W$(this,n,e,t,r)},lo.prototype.N=function(){if(lo.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)p1(t[r]);delete n.g[e],n.h--}}this.J=null},lo.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},lo.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var uL=Rn.JSON.stringify;function CY(){var n=dL;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Z$=new class TY{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new DY,n=>n.reset());class DY{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function SY(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function xY(n){Rn.setTimeout(()=>{throw n},0)}let OC,NC=!1,dL=new class AY{constructor(){this.h=this.g=null}add(e,t){const r=Z$.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Y$=()=>{const n=Rn.Promise.resolve(void 0);OC=()=>{n.then(RY)}};var RY=()=>{for(var n;n=CY();){try{n.h.call(n.g)}catch(t){xY(t)}var e=Z$;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}NC=!1};function _1(n,e){lo.call(this),this.h=n||1,this.g=e||Rn,this.j=Zo(this.qb,this),this.l=Date.now()}function hL(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function fL(n,e,t){if("function"==typeof n)t&&(n=Zo(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zo(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rn.setTimeout(n,e||0)}function Q$(n){n.g=fL(()=>{n.g=null,n.i&&(n.i=!1,Q$(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}co(_1,lo),(Lt=_1.prototype).ga=!1,Lt.T=null,Lt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Po(this,"tick"),this.ga&&(hL(this),this.start()))}},Lt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Lt.N=function(){_1.$.N.call(this),hL(this),delete this.g};class MY extends nm{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Q$(this)}N(){super.N(),this.g&&(Rn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function FC(n){nm.call(this),this.h=n,this.g={}}co(FC,nm);var X$=[];function J$(n,e,t,r){Array.isArray(t)||(t&&(X$[0]=t.toString()),t=X$);for(var i=0;i<t.length;i++){var s=$$(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function e4(n){tL(n.g,function(e,t){this.g.hasOwnProperty(t)&&oL(e)},n),n.g={}}function y1(){this.g=!0}function K0(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function NY(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return uL(t)}catch{return e}}(n,t)+(r?" "+r:"")})}FC.prototype.N=function(){FC.$.N.call(this),e4(this)},FC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},y1.prototype.Ea=function(){this.g=!1},y1.prototype.info=function(){};var K_={},t4=null;function v1(){return t4=t4||new lo}function n4(n){Yo.call(this,K_.Ta,n)}function LC(n){const e=v1();Po(e,new n4(e))}function r4(n,e){Yo.call(this,K_.STAT_EVENT,n),this.stat=e}function ba(n){const e=v1();Po(e,new r4(e,n))}function s4(n,e){Yo.call(this,K_.Ua,n),this.size=e}function VC(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rn.setTimeout(function(){n()},e)}K_.Ta="serverreachability",co(n4,Yo),K_.STAT_EVENT="statevent",co(r4,Yo),K_.Ua="timingevent",co(s4,Yo);var w1={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},o4={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function pL(){}function c4(){}pL.prototype.h=null;var _L,UC={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mL(){Yo.call(this,"d")}function gL(){Yo.call(this,"c")}function I1(){}function BC(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new FC(this),this.P=FY,this.V=new _1(n=Z2?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new l4}function l4(){this.i=null,this.g="",this.h=!1}co(mL,Yo),co(gL,Yo),co(I1,pL),I1.prototype.g=function(){return new XMLHttpRequest},I1.prototype.i=function(){return{}},_L=new I1;var FY=45e3,yL={},E1={};function vL(n,e,t){n.L=1,n.v=A1(Uh(e)),n.s=t,n.S=!0,u4(n,null)}function u4(n,e){n.G=Date.now(),jC(n),n.A=Uh(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),w4(t.i,"t",r),n.C=0,t=n.l.J,n.h=new l4,n.g=$4(n.l,t?e:null,!n.s),0<n.O&&(n.M=new MY(Zo(n.Pa,n,n.g),n.O)),J$(n.U,n.g,"readystatechange",n.nb),e=n.I?j$(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),LC(),function PY(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var w=_[0];_=_[1];var C=w.split("_");c=2<=C.length&&"type"==C[1]?c+(w+"=")+_+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function d4(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function h4(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=LY(n,t),i==E1){4==e&&(n.o=4,ba(14),r=!1),K0(n.j,n.m,null,"[Incomplete Response]");break}if(i==yL){n.o=4,ba(15),K0(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}K0(n.j,n.m,i,null),wL(n,i)}d4(n)&&i!=E1&&i!=yL&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ba(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),DL(e),e.M=!0,ba(11))):(K0(n.j,n.m,t,"[Invalid Chunked Response]"),Z_(n),zC(n))}function LY(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?E1:(t=Number(e.substring(t,r)),isNaN(t)?yL:(r+=1)+t>e.length?E1:(e=e.slice(r,r+t),n.C=r+t,e))}function jC(n){n.Y=Date.now()+n.P,f4(n,n.P)}function f4(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=VC(Zo(n.lb,n),e)}function b1(n){n.B&&(Rn.clearTimeout(n.B),n.B=null)}function zC(n){0==n.l.H||n.J||B4(n.l,n)}function Z_(n){b1(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,hL(n.V),e4(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function wL(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||IL(t.i,n)))if(!n.K&&IL(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;P1(t),R1(t)}AL(t),ba(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=VC(Zo(t.ib,t),6e3));if(1>=b4(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Q_(t,11)}else if((n.K||t.g==n)&&P1(t),!MC(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.V=_[0],_=_[1],2==t.H)if("c"==_[0]){t.K=_[1],t.pa=_[2];const w=_[3];null!=w&&(t.ra=w,t.l.info("VER="+t.ra));const C=_[4];null!=C&&(t.Ga=C,t.l.info("SVER="+t.Ga));const R=_[5];null!=R&&"number"==typeof R&&0<R&&(t.L=r=1.5*R,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const Y=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var s=r.i;s.g||-1==Y.indexOf("spdy")&&-1==Y.indexOf("quic")&&-1==Y.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(EL(s,s.h),s.h=null))}if(r.F){const ne=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.Da=ne,vi(r.I,r.F,ne))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=H4(r,r.J?r.pa:null,r.Y),c.K){T4(r.i,c);var h=c,p=r.L;p&&h.setTimeout(p),h.B&&(b1(h),jC(h)),r.g=c}else V4(r);0<t.j.length&&M1(t)}else"stop"!=_[0]&&"close"!=_[0]||Q_(t,7);else 3==t.H&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Q_(t,7):CL(t):"noop"!=_[0]&&t.h&&t.h.Aa(_),t.A=0)}LC()}catch{}}function p4(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(d1(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function UY(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(d1(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function VY(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(d1(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(Lt=BC.prototype).setTimeout=function(n){this.P=n},Lt.nb=function(n){n=n.target;const e=this.M;e&&3==ld(n)?e.l():this.Pa(n)},Lt.Pa=function(n){try{if(n==this.g)e:{const w=ld(this.g);var e=this.g.Ia();if(this.g.da(),!(3>w)&&(3!=w||Z2||this.g&&(this.h.h||this.g.ja()||P4(this.g)))){this.J||4!=w||7==e||LC(),b1(this);var t=this.g.da();this.ca=t;t:if(d4(this)){var r=P4(this.g);n="";var i=r.length,s=4==ld(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Z_(this),zC(this);var c="";break t}this.h.i=new Rn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function kY(n,e,t,r,i,s,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.W,w,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!MC(h)){var _=h;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,ba(12),Z_(this),zC(this);break e}K0(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wL(this,t)}this.S?(h4(this,w,c),Z2&&this.i&&3==w&&(J$(this.U,this.V,"tick",this.mb),this.V.start())):(K0(this.j,this.m,c,null),wL(this,c)),4==w&&Z_(this),this.i&&!this.J&&(4==w?B4(this.l,this):(this.i=!1,jC(this)))}else(function rQ(n){const e={};n=(n.g&&2<=ld(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(MC(n[r]))continue;var t=SY(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function IY(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ba(12)):(this.o=0,ba(13)),Z_(this),zC(this)}}}catch{}},Lt.mb=function(){if(this.g){var n=ld(this.g),e=this.g.ja();this.C<e.length&&(b1(this),h4(this,n,e),this.i&&4!=n&&jC(this))}},Lt.cancel=function(){this.J=!0,Z_(this)},Lt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function OY(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(LC(),ba(17)),Z_(this),this.o=2,zC(this)):f4(this,this.Y-n)};var m4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y_(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Y_){this.h=n.h,T1(this,n.j),this.s=n.s,this.g=n.g,C1(this,n.m),this.l=n.l;var e=n.i,t=new GC;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),g4(this,t),this.o=n.o}else n&&(e=String(n).match(m4))?(this.h=!1,T1(this,e[1]||"",!0),this.s=HC(e[2]||""),this.g=HC(e[3]||"",!0),C1(this,e[4]),this.l=HC(e[5]||"",!0),g4(this,e[6]||"",!0),this.o=HC(e[7]||"")):(this.h=!1,this.i=new GC(null,this.h))}function Uh(n){return new Y_(n)}function T1(n,e,t){n.j=t?HC(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function C1(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function g4(n,e,t){e instanceof GC?(n.i=e,function qY(n,e){e&&!n.j&&(rm(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(y4(this,r),w4(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=$C(e,$Y)),n.i=new GC(e,n.h))}function vi(n,e,t){n.i.set(e,t)}function A1(n){return vi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function HC(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function $C(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,jY),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function jY(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Y_.prototype.toString=function(){var n=[],e=this.j;e&&n.push($C(e,_4,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push($C(e,_4,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push($C(t,"/"==t.charAt(0)?HY:zY,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",$C(t,GY)),n.join("")};var _4=/[#\/\?@]/g,zY=/[#\?:]/g,HY=/[#\?]/g,$Y=/[#\?@]/g,GY=/#/g;function GC(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function rm(n){n.g||(n.g=new Map,n.h=0,n.i&&function BY(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function y4(n,e){rm(n),e=Z0(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function v4(n,e){return rm(n),e=Z0(n,e),n.g.has(e)}function w4(n,e,t){y4(n,e),0<t.length&&(n.i=null,n.g.set(Z0(n,e),W2(t)),n.h+=t.length)}function Z0(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function I4(n){this.l=n||KY,n=Rn.PerformanceNavigationTiming?0<(n=Rn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rn.g&&Rn.g.Ka&&Rn.g.Ka()&&Rn.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Lt=GC.prototype).add=function(n,e){rm(this),this.i=null,n=Z0(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Lt.forEach=function(n,e){rm(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Lt.ta=function(){rm(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},Lt.Z=function(n){rm(this);let e=[];if("string"==typeof n)v4(this,n)&&(e=e.concat(this.g.get(Z0(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Lt.set=function(n,e){return rm(this),this.i=null,v4(this,n=Z0(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Lt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=s;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var KY=10;function E4(n){return!!n.h||!!n.g&&n.g.size>=n.j}function b4(n){return n.h?1:n.g?n.g.size:0}function IL(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function EL(n,e){n.g?n.g.add(e):n.h=e}function T4(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function C4(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return W2(n.i)}I4.prototype.cancel=function(){if(this.i=C4(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var ZY=class{stringify(n){return Rn.JSON.stringify(n,void 0)}parse(n){return Rn.JSON.parse(n,void 0)}};function YY(){this.g=new ZY}function QY(n,e,t){const r=t||"";try{p4(n,function(i,s){let c=i;RC(i)&&(c=uL(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function D1(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function qC(n){this.l=n.ec||null,this.j=n.ob||!1}function S1(n,e){lo.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=bL,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}co(qC,pL),qC.prototype.g=function(){return new S1(this.l,this.j)},qC.prototype.i=function(n){return function(){return n}}({}),co(S1,lo);var bL=0;function A4(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function WC(n){n.readyState=4,n.l=null,n.j=null,n.A=null,KC(n)}function KC(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Lt=S1.prototype).open=function(n,e){if(this.readyState!=bL)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,KC(this)},Lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Rn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,WC(this)),this.readyState=bL},Lt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,KC(this)),this.g&&(this.readyState=3,KC(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Rn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;A4(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Lt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?WC(this):KC(this),3==this.readyState&&A4(this)}},Lt.Za=function(n){this.g&&(this.response=this.responseText=n,WC(this))},Lt.Ya=function(n){this.g&&(this.response=n,WC(this))},Lt.ka=function(){this.g&&WC(this)},Lt.setRequestHeader=function(n,e){this.v.append(n,e)},Lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(S1.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var JY=Rn.JSON.parse;function Yi(n){lo.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=D4,this.L=this.M=!1}co(Yi,lo);var D4="",eQ=/^https?$/i,tQ=["POST","PUT"];function S4(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,x4(n),x1(n)}function x4(n){n.F||(n.F=!0,Po(n,"complete"),Po(n,"error"))}function R4(n){if(n.h&&typeof G2<"u"&&(!n.C[1]||4!=ld(n)||2!=n.da()))if(n.v&&4==ld(n))fL(n.La,0,n);else if(Po(n,"readystatechange"),4==ld(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(m4)[1]||null;!i&&Rn.self&&Rn.self.location&&(i=Rn.self.location.protocol.slice(0,-1)),r=!eQ.test(i?i.toLowerCase():"")}t=r}if(t)Po(n,"complete"),Po(n,"success");else{n.m=6;try{var s=2<ld(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",x4(n)}}finally{x1(n)}}}function x1(n,e){if(n.g){M4(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Po(n,"ready");try{t.onreadystatechange=r}catch{}}}function M4(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Rn.clearTimeout(n.A),n.A=null)}function ld(n){return n.g?n.g.readyState:0}function P4(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case D4:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function k4(n){let e="";return tL(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function TL(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=k4(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):vi(n,e,t))}function ZC(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function O4(n){this.Ga=0,this.j=[],this.l=new y1,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ZC("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ZC("baseRetryDelayMs",5e3,n),this.hb=ZC("retryDelaySeedMs",1e4,n),this.eb=ZC("forwardChannelMaxRetries",2,n),this.xa=ZC("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new I4(n&&n.concurrentRequestLimit),this.Ja=new YY,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function CL(n){if(N4(n),3==n.H){var e=n.W++,t=Uh(n.I);if(vi(t,"SID",n.K),vi(t,"RID",e),vi(t,"TYPE","terminate"),YC(n,t),(e=new BC(n,n.l,e)).L=2,e.v=A1(Uh(t)),t=!1,Rn.navigator&&Rn.navigator.sendBeacon)try{t=Rn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Rn.Image&&((new Image).src=e.v,t=!0),t||(e.g=$4(e.l,null),e.g.ha(e.v)),e.G=Date.now(),jC(e)}z4(n)}function R1(n){n.g&&(DL(n),n.g.cancel(),n.g=null)}function N4(n){R1(n),n.u&&(Rn.clearTimeout(n.u),n.u=null),P1(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rn.clearTimeout(n.m),n.m=null)}function M1(n){if(!E4(n.i)&&!n.m){n.m=!0;var e=n.Na;OC||Y$(),NC||(OC(),NC=!0),dL.add(e,n),n.C=0}}function F4(n,e){var t;t=e?e.m:n.W++;const r=Uh(n.I);vi(r,"SID",n.K),vi(r,"RID",t),vi(r,"AID",n.V),YC(n,r),n.o&&n.s&&TL(r,n.o,n.s),t=new BC(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=L4(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),EL(n.i,t),vL(t,r,e)}function YC(n,e){n.na&&tL(n.na,function(t,r){vi(e,r,t)}),n.h&&p4({},function(t,r){vi(e,r,t)})}function L4(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Zo(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=i[0].g,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let _=i[p].g;const w=i[p].map;if(_-=s,0>_)s=Math.max(0,i[p].g-100),h=!1;else try{QY(w,c,"req"+_+"_")}catch{r&&r(w)}}if(h){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function V4(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;OC||Y$(),NC||(OC(),NC=!0),dL.add(e,n),n.A=0}}function AL(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=VC(Zo(n.Ma,n),j4(n,n.A)),n.A++,0))}function DL(n){null!=n.B&&(Rn.clearTimeout(n.B),n.B=null)}function U4(n){n.g=new BC(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Uh(n.wa);vi(e,"RID","rpc"),vi(e,"SID",n.K),vi(e,"AID",n.V),vi(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&vi(e,"TO",n.qa),vi(e,"TYPE","xmlhttp"),YC(n,e),n.o&&n.s&&TL(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=A1(Uh(e)),t.s=null,t.S=!0,u4(t,n)}function P1(n){null!=n.v&&(Rn.clearTimeout(n.v),n.v=null)}function B4(n,e){var t=null;if(n.g==e){P1(n),DL(n),n.g=null;var r=2}else{if(!IL(n.i,e))return;t=e.F,T4(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Po(r=v1(),new s4(r,t)),M1(n)}else V4(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function iQ(n,e){return!(b4(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=VC(Zo(n.Na,n,e),j4(n,n.C)),n.C++,0)))}(n,e)||2==r&&AL(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Q_(n,5);break;case 4:Q_(n,10);break;case 3:Q_(n,6);break;default:Q_(n,2)}}function j4(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Q_(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Zo(n.pb,n);t||(t=new Y_("//www.google.com/images/cleardot.gif"),Rn.location&&"http"==Rn.location.protocol||T1(t,"https"),A1(t)),function XY(n,e){const t=new y1;if(Rn.Image){const r=new Image;r.onload=h1(D1,t,r,"TestLoadImage: loaded",!0,e),r.onerror=h1(D1,t,r,"TestLoadImage: error",!1,e),r.onabort=h1(D1,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=h1(D1,t,r,"TestLoadImage: timeout",!1,e),Rn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ba(2);n.H=0,n.h&&n.h.za(e),z4(n),N4(n)}function z4(n){if(n.H=0,n.ma=[],n.h){const e=C4(n.i);(0!=e.length||0!=n.j.length)&&(F$(n.ma,e),F$(n.ma,n.j),n.i.i.length=0,W2(n.j),n.j.length=0),n.h.ya()}}function H4(n,e,t){var r=t instanceof Y_?Uh(t):new Y_(t);if(""!=r.g)e&&(r.g=e+"."+r.g),C1(r,r.m);else{var i=Rn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Y_(null);r&&T1(s,r),e&&(s.g=e),i&&C1(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&vi(r,t,e),vi(r,"VER",n.ra),YC(n,r),r}function $4(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yi(t&&n.Ha&&!n.va?new qC({ob:!0}):n.va)).Oa(n.J),e}function G4(){}function k1(){if(W0&&!(10<=Number(_Y)))throw Error("Environmental error: no available transport.")}function gc(n,e){lo.call(this),this.g=new O4(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!MC(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!MC(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Y0(this)}function q4(n){mL.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function W4(){gL.call(this),this.status=1}function Y0(n){this.g=n}function Wl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function SL(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],c=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;c=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(c<<7&4294967295|c>>>25))+((c=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((s=(e=t+((c=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=s+((c=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Nr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(Lt=Yi.prototype).Oa=function(n){this.M=n},Lt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_L.g(),this.C=function a4(n){return n.h||(n.h=n.i())}(this.u?this.u:_L),this.g.onreadystatechange=Zo(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void S4(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Rn.FormData&&n instanceof Rn.FormData,!(0<=N$(tQ,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of t)this.g.setRequestHeader(s,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{M4(this),0<this.B&&((this.L=function nQ(n){return W0&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zo(this.ua,this)):this.A=fL(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){S4(this,s)}},Lt.ua=function(){typeof G2<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Po(this,"timeout"),this.abort(8))},Lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Po(this,"complete"),Po(this,"abort"),x1(this))},Lt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),x1(this,!0)),Yi.$.N.call(this)},Lt.La=function(){this.s||(this.G||this.v||this.l?R4(this):this.kb())},Lt.kb=function(){R4(this)},Lt.isActive=function(){return!!this.g},Lt.da=function(){try{return 2<ld(this)?this.g.status:-1}catch{return-1}},Lt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Lt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),JY(e)}},Lt.Ia=function(){return this.m},Lt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Lt=O4.prototype).ra=8,Lt.H=1,Lt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new BC(this,this.l,n);let s=this.s;if(this.U&&(s?(s=j$(s),H$(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=L4(this,i,e),vi(t=Uh(this.I),"RID",n),vi(t,"CVER",22),this.F&&vi(t,"X-HTTP-Session-Id",this.F),YC(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(k4(s)))+"&"+e:this.o&&TL(t,this.o,s)),EL(this.i,i),this.bb&&vi(t,"TYPE","init"),this.P?(vi(t,"$req",e),vi(t,"SID","null"),i.aa=!0,vL(i,t,null)):vL(i,t,e),this.H=2}}else 3==this.H&&(n?F4(this,n):0==this.j.length||E4(this.i)||F4(this))},Lt.Ma=function(){if(this.u=null,U4(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=VC(Zo(this.jb,this),n)}},Lt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ba(10),R1(this),U4(this))},Lt.ib=function(){null!=this.v&&(this.v=null,R1(this),AL(this),ba(19))},Lt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ba(2)):(this.l.info("Failed to ping google.com"),ba(1))},Lt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Lt=G4.prototype).Ba=function(){},Lt.Aa=function(){},Lt.za=function(){},Lt.ya=function(){},Lt.isActive=function(){return!0},Lt.Va=function(){},k1.prototype.g=function(n,e){return new gc(n,e)},co(gc,lo),gc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ba(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=H4(n,null,n.Y),M1(n)},gc.prototype.close=function(){CL(this.g)},gc.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=uL(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&M1(e)},gc.prototype.N=function(){this.g.h=null,delete this.j,CL(this.g),delete this.g,gc.$.N.call(this)},co(q4,mL),co(W4,gL),co(Y0,G4),Y0.prototype.Ba=function(){Po(this.g,"a")},Y0.prototype.Aa=function(n){Po(this.g,new q4(n))},Y0.prototype.za=function(n){Po(this.g,new W4)},Y0.prototype.ya=function(){Po(this.g,"b")},co(Wl,function sQ(){this.blockSize=-1}),Wl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wl.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)SL(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){SL(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){SL(this,r),i=0;break}}this.h=i,this.i+=e},Wl.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var oQ={};function xL(n){return-128<=n&&128>n?function pY(n,e){var t=oQ;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Nr([0|e],0>e?-1:0)}):new Nr([0|n],0>n?-1:0)}function ud(n){if(isNaN(n)||!isFinite(n))return Q0;if(0>n)return ko(ud(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=RL;return new Nr(e,0)}var RL=4294967296,Q0=xL(0),ML=xL(1),Z4=xL(16777216);function Bh(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function nl(n){return-1==n.h}function ko(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Nr(t,~n.h).add(ML)}function O1(n,e){return n.add(ko(e))}function N1(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function QC(n,e){this.g=n,this.h=e}function F1(n,e){if(Bh(e))throw Error("division by zero");if(Bh(n))return new QC(Q0,Q0);if(nl(n))return e=F1(ko(n),e),new QC(ko(e.g),ko(e.h));if(nl(e))return e=F1(n,ko(e)),new QC(ko(e.g),e.h);if(30<n.g.length){if(nl(n)||nl(e))throw Error("slowDivide_ only works with positive integers.");for(var t=ML,r=e;0>=r.X(n);)t=Y4(t),r=Y4(r);var i=X0(t,1),s=X0(r,1);for(r=X0(r,2),t=X0(t,2);!Bh(r);){var c=s.add(r);0>=c.X(n)&&(i=i.add(t),s=c),r=X0(r,1),t=X0(t,1)}return e=O1(n,i.R(e)),new QC(i,e)}for(i=Q0;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(s=ud(t)).R(e);nl(c)||0<c.X(n);)c=(s=ud(t-=r)).R(e);Bh(s)&&(s=ML),i=i.add(s),n=O1(n,c)}return new QC(i,n)}function Y4(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Nr(t,n.h)}function X0(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Nr(i,n.h)}(Lt=Nr.prototype).ea=function(){if(nl(this))return-ko(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:RL+r)*e,e*=RL}return n},Lt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Bh(this))return"0";if(nl(this))return"-"+ko(this).toString(n);for(var e=ud(Math.pow(n,6)),t=this,r="";;){var i=F1(t,e).g,s=((0<(t=O1(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Bh(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Lt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Lt.X=function(n){return nl(n=O1(this,n))?-1:Bh(n)?0:1},Lt.abs=function(){return nl(this)?ko(this):this},Lt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),c=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(s&=65535)}return new Nr(t,-2147483648&t[t.length-1]?-1:0)},Lt.R=function(n){if(Bh(this)||Bh(n))return Q0;if(nl(this))return nl(n)?ko(this).R(ko(n)):ko(ko(this).R(n));if(nl(n))return ko(this.R(ko(n)));if(0>this.X(Z4)&&0>n.X(Z4))return ud(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,c=65535&this.D(r),h=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=c*p,N1(t,2*r+2*i),t[2*r+2*i+1]+=s*p,N1(t,2*r+2*i+1),t[2*r+2*i+1]+=c*h,N1(t,2*r+2*i+1),t[2*r+2*i+2]+=s*h,N1(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Nr(t,0)},Lt.gb=function(n){return F1(this,n).h},Lt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Nr(t,this.h&n.h)},Lt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Nr(t,this.h|n.h)},Lt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Nr(t,this.h^n.h)},k1.prototype.createWebChannel=k1.prototype.g,gc.prototype.send=gc.prototype.u,gc.prototype.open=gc.prototype.m,gc.prototype.close=gc.prototype.close,w1.NO_ERROR=0,w1.TIMEOUT=8,w1.HTTP_ERROR=6,o4.COMPLETE="complete",c4.EventType=UC,UC.OPEN="a",UC.CLOSE="b",UC.ERROR="c",UC.MESSAGE="d",lo.prototype.listen=lo.prototype.O,Yi.prototype.listenOnce=Yi.prototype.P,Yi.prototype.getLastError=Yi.prototype.Sa,Yi.prototype.getLastErrorCode=Yi.prototype.Ia,Yi.prototype.getStatus=Yi.prototype.da,Yi.prototype.getResponseJson=Yi.prototype.Wa,Yi.prototype.getResponseText=Yi.prototype.ja,Yi.prototype.send=Yi.prototype.ha,Yi.prototype.setWithCredentials=Yi.prototype.Oa,Wl.prototype.digest=Wl.prototype.l,Wl.prototype.reset=Wl.prototype.reset,Wl.prototype.update=Wl.prototype.j,Nr.prototype.add=Nr.prototype.add,Nr.prototype.multiply=Nr.prototype.R,Nr.prototype.modulo=Nr.prototype.gb,Nr.prototype.compare=Nr.prototype.X,Nr.prototype.toNumber=Nr.prototype.ea,Nr.prototype.toString=Nr.prototype.toString,Nr.prototype.getBits=Nr.prototype.D,Nr.fromNumber=ud,Nr.fromString=function K4(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ko(K4(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ud(Math.pow(e,8)),r=Q0,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+s),e);8>s?(s=ud(Math.pow(e,s)),r=r.R(s).add(ud(c))):r=(r=r.R(t)).add(ud(c))}return r},ql.createWebChannelTransport=function(){return new k1},ql.getStatEventTarget=function(){return v1()},ql.ErrorCode=w1,ql.EventType=o4,ql.Event=K_,ql.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ql.FetchXmlHttpFactory=qC,ql.WebChannel=c4,ql.XhrIo=Yi,ql.Md5=Wl;var aQ=ql.Integer=Nr;const Q4="@firebase/firestore";class uo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}uo.UNAUTHENTICATED=new uo(null),uo.GOOGLE_CREDENTIALS=new uo("google-credentials-uid"),uo.FIRST_PARTY=new uo("first-party-uid"),uo.MOCK_USER=new uo("mock-user");let XC="10.4.0";const im=new hn.Yd("@firebase/firestore");function ft(n,...e){if(im.logLevel<=hn.in.DEBUG){const t=e.map(PL);im.debug(`Firestore (${XC}): ${n}`,...t)}}function as(n,...e){if(im.logLevel<=hn.in.ERROR){const t=e.map(PL);im.error(`Firestore (${XC}): ${n}`,...t)}}function PL(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Gt(n="Unexpected state"){const e=`FIRESTORE (${XC}) INTERNAL ASSERTION FAILED: `+n;throw as(e),new Error(e)}function sn(n,e){n||Gt()}const Me_CANCELLED="cancelled",Me_INVALID_ARGUMENT="invalid-argument",Me_FAILED_PRECONDITION="failed-precondition",Me_UNAVAILABLE="unavailable";class lt extends xe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class X4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(uo.UNAUTHENTICATED))}shutdown(){}}class uQ{constructor(e){this.t=e,this.currentUser=uo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let c=new Qs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Qs,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const _=c;e.enqueueRetryable((0,Ve.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},p=_=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Qs)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(sn("string"==typeof r.accessToken),new X4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return sn(null===e||"string"==typeof e),new uo(e)}}class dQ{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=uo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hQ{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dQ(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(uo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class J4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.R;return this.R=s.token,ft("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(sn("string"==typeof t.token),this.R=t.token,new J4(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function pQ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class e3{static V(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=pQ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Dn(n,e){return n<e?-1:n>e?1:0}class L1{constructor(e,t,r){void 0===t?t=0:t>e.length&&Gt(),void 0===r?r=e.length-t:r>e.length-t&&Gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===L1.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof L1?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),c=t.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hr extends L1{construct(e,t,r){return new hr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new lt(Me_INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new hr(t)}static emptyPath(){return new hr([])}}class Ot{constructor(e){this.path=e}static fromPath(e){return new Ot(hr.fromString(e))}static fromName(e){return new Ot(hr.fromString(e).popFirst(5))}static empty(){return new Ot(hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ot(new hr(e.slice()))}}function om(n){return"IndexedDbTransactionError"===n.name}class ri{constructor(e,t){this.comparator=e,this.root=t||Oo.EMPTY}insert(e,t){return new ri(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oo.BLACK,null,null))}remove(e){return new ri(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new B1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new B1(this.root,e,this.comparator,!1)}getReverseIterator(){return new B1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new B1(this.root,e,this.comparator,!0)}}class B1{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oo{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Oo.RED,this.left=i??Oo.EMPTY,this.right=s??Oo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Oo(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Oo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Oo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Gt();const e=this.left.check();if(e!==this.right.check())throw Gt();return e+(this.isRed()?0:1)}}Oo.EMPTY=null,Oo.RED=!0,Oo.BLACK=!1,Oo.EMPTY=new class{constructor(){this.size=0}get key(){throw Gt()}get value(){throw Gt()}get color(){throw Gt()}get left(){throw Gt()}get right(){throw Gt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Oo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ii{constructor(e){this.comparator=e,this.data=new ri(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new g3(this.data.getIterator())}getIteratorFrom(e){return new g3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ii(this.comparator);return t.data=e,t}}class g3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _3("Invalid base64 string: "+s):s}}(e);return new Xs(t)}static fromUint8Array(e){const t=function(i){let s="";for(let c=0;c<i.length;++c)s+=String.fromCharCode(i[c]);return s}(e);return new Xs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function Xi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}Xs.EMPTY_BYTE_STRING=new Xs("");class jQ{constructor(e,t,r,i,s,c,h,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=_}}class ty{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ty("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ty&&e.projectId===this.projectId&&e.database===this.database}}var Ts,fr;new ri(Ot.comparator),new ri(Ot.comparator),new ri(Ot.comparator),new ii(Ot.comparator),new ii(Dn),(fr=Ts||(Ts={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS",new aQ([4294967295,4294967295],0);class ly{constructor(){}dt(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(Xi(e.integerValue));else if("doubleValue"in e){const r=Xi(e.doubleValue);isNaN(r)?this.At(t,13):(this.At(t,15),function tA(n){return 0===n&&1/n==-1/0}(r)?t.Rt(0):t.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt(`${r.seconds||""}`),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(function jh(n){return"string"==typeof n?Xs.fromBase64String(n):Xs.fromUint8Array(n)}(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(t,45),t.Rt(r.latitude||0),t.Rt(r.longitude||0)}else"mapValue"in e?function I3(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):Gt()}ft(e,t){this.At(t,25),this.Dt(e,t)}Dt(e,t){t.Vt(e)}St(e,t){const r=e.fields||{};this.At(t,55);for(const i of Object.keys(r))this.ft(i,t),this.Tt(r[i],t)}bt(e,t){const r=e.values||[];this.At(t,50);for(const i of r)this.Tt(i,t)}wt(e,t){this.At(t,37),Ot.fromName(e).path.forEach(r=>{this.At(t,60),this.Dt(r,t)})}At(e,t){e.Rt(t)}gt(e){e.Rt(2)}}ly.Ct=new ly,new Uint8Array(0);class Xo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xo(e,Xo.DEFAULT_COLLECTION_PERCENTILE,Xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fP(){return typeof document<"u"?document:null}Xo.DEFAULT_COLLECTION_PERCENTILE=10,Xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xo.DEFAULT=new Xo(41943040,Xo.DEFAULT_COLLECTION_PERCENTILE,Xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xo.DISABLED=new Xo(-1,0,0);class CV{constructor(e,t,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=t,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const t=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,t-r);i>0&&ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}class $V{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const c=Date.now()+r,h=new $V(e,t,c,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new lt(Me_CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class XJ{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=uo.UNAUTHENTICATED,this.clientId=e3.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ve.Z)(function*(h){ft("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ft("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new lt(Me_FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=function CI(n,e){if(as("AsyncQueue",`${e}: ${n}`),om(n))return new lt(Me_UNAVAILABLE,`${e}: ${n}`);throw n}(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function U6(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const B6=new Map;class $6{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new lt(Me_INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new lt(Me_INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function lee(n,e,t,r){if(!0===e&&!0===r)throw new lt(Me_INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=U6(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new lt(Me_INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt(Me_INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt(Me_INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $6({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new lt(Me_FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new lt(Me_FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $6(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new cQ;switch(r.type){case"firstParty":return new hQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new lt(Me_INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=B6.get(t);r&&(ft("ComponentProvider","Removing Datastore"),B6.delete(t),r.terminate())}(this),Promise.resolve()}}class hee{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new CV(this,"async_queue_retry"),this.ou=()=>{const t=fP();t&&ft("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ho.$o()};const e=fP();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const t=fP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const t=new Qs;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}uu(){var e=this;return(0,Ve.Z)(function*(){if(0!==e.Xa.length){try{yield e.Xa[0](),e.Xa.shift(),e.Ho.reset()}catch(t){if(!om(t))throw t;ft("AsyncQueue","Operation failed with retryable error: "+t)}e.Xa.length>0&&e.Ho.Qo(()=>e.uu())}})()}au(e){const t=this.Za.then(()=>(this.ru=!0,e().catch(r=>{throw this.nu=r,this.ru=!1,as("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.ru=!1,r))));return this.Za=t,t}enqueueAfterDelay(e,t,r){this._u(),this.su.indexOf(e)>-1&&(t=0);const i=$V.createAndSchedule(this,e,t,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&Gt()}verifyOperationInProgress(){}lu(){var e=this;return(0,Ve.Z)(function*(){let t;do{t=e.Za,yield t}while(t!==e.Za)})()}hu(e){for(const t of this.tu)if(t.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const t=this.tu.indexOf(e);this.tu.splice(t,1)}}class si extends xA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hee,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||function q6(n){var e,t,r;const i=n._freezeSettings(),s=(p=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new jQ(n._databaseId,p,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,U6(w.experimentalLongPollingOptions),w.useFetchStreams));var p,w;n._firestoreClient=new XJ(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}(this),this._firestoreClient.terminate()}}function BU(){return(0,fi.e)((n,e)=>{let t,r=!1;n.subscribe((0,pi.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}!function(e,t=!0){XC=It.SDK_VERSION,(0,It._registerComponent)(new Et.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const c=r.getProvider("app").getImmediate(),h=new si(new uQ(r.getProvider("auth-internal")),new fQ(r.getProvider("app-check-internal")),function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new lt(Me_INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ty(_.options.projectId,w)}(c,i),c);return s=Object.assign({useFetchStreams:t},s),h._setSettings(s),h},"PUBLIC").setMultipleInstances(!0)),(0,It.registerVersion)(Q4,"4.2.0",e),(0,It.registerVersion)(Q4,"4.2.0","esm2017")}();var Uee=j(3997),Bee=(j(8661),j(3399));function jU(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new nt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function m9(){if(typeof Uint8Array>"u")throw new nt("unimplemented","Uint8Arrays are not available in this environment.")}function g9(){if(!function zB(){return typeof atob<"u"}())throw new nt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class FA{constructor(e){this._delegate=e}static fromBase64String(e){return g9(),new FA(sd.fromBase64String(e))}static fromUint8Array(e){return m9(),new FA(sd.fromUint8Array(e))}toBase64(){return g9(),this._delegate.toBase64()}toUint8Array(){return m9(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zU(n){return function Hee(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class $ee{enableIndexedDbPersistence(e,t){return function Aq(n,e){Ej(n=ir(n,yi));const t=os(n);if(t._uninitializedComponentsProvider)throw new nt(Re.FAILED_PRECONDITION,"SDK cache is already specified.");_a("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new T0;return Ij(t,i,new vF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Dq(n){Ej(n=ir(n,yi));const e=os(n);if(e._uninitializedComponentsProvider)throw new nt(Re.FAILED_PRECONDITION,"SDK cache is already specified.");_a("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new T0;return Ij(e,r,new nj(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Sq(n){if(n._initialized&&!n._terminated)throw new nt(Re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ni;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{yield(t=(0,Ve.Z)(function*(r){if(!Ks.D())return Promise.resolve();const i=r+"main";yield Ks.delete(i)}),function(r){return t.apply(this,arguments)})(o0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _9{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_a("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){_j(this._delegate,e,t,r)}enableNetwork(){return function Rq(n){return function fq(n){return n.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield sj(n),t=yield oj(n);return e.setNetworkEnabled(!0),function(r){const i=Rt(r);return i.vu.delete(0),Lp(i)}(t)}))}(os(n=ir(n,yi)))}(this._delegate)}disableNetwork(){return function Mq(n){return function pq(n){return n.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield sj(n),t=yield oj(n);return e.setNetworkEnabled(!1),(r=(0,Ve.Z)(function*(i){const s=Rt(i);s.vu.add(0),yield Vp(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(os(n=ir(n,yi)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hj("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function xq(n){return function(e){const t=new Ni;return e.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function Y9(n,e){return rF.apply(this,arguments)}(yield AF(e),t)})),t.promise}(os(n=ir(n,yi)))}(this._delegate)}onSnapshotsInSync(e){return function l5(n,e){return function _q(n,e){const t=new QR(e);return n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return r=yield C0(n),i=t,Rt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return r=yield C0(n),i=t,void Rt(r).ku.delete(i);var r,i}))}}(os(n=ir(n,yi)),RF(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new nt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new FI(this,yj(this._delegate,e))}catch(t){throw Ca(t,"collection()","Firestore.collection()")}}doc(e){try{return new il(this,nM(this._delegate,e))}catch(t){throw Ca(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Aa(this,function Iq(n,e){if(n=ir(n,zT),SF("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new nt(Re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mo(n,null,(t=e,new Kc(rr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ca(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function w5(n,e,t){n=ir(n,yi);const r=Object.assign(Object.assign({},y5),t);return function(i){if(i.maxAttempts<1)throw new nt(Re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,c){const h=new Ni;return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){const p=yield function aj(n){return JR(n).then(e=>e.datastore)}(i);new dq(i.asyncQueue,p,c,s,h).run()})),h.promise}(os(n),i=>e(new v5(n,i)),r)}(this._delegate,t=>e(new y9(this,t)))}batch(){return os(this._delegate),new v9(new jj(this._delegate,e=>D0(this._delegate,e)))}loadBundle(e){return function Pq(n,e){const t=os(n=ir(n,yi)),r=new bq;return function yq(n,e,t,r){const i=function(s,c){let h;return h="string"==typeof s?nT().encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return rj(p,_);if(p instanceof ArrayBuffer)return rj(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new lq(p,c);var p}(t,f0(e));n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){!function aq(n,e,t){const r=Rt(n);var i;(i=(0,Ve.Z)(function*(s,c,h){try{const p=yield c.getMetadata();if(yield function(R,N){const Y=Rt(R),ne=Vi(N.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",te=>Y.qs.getBundleMetadata(te,N.id)).then(te=>!!te&&te.createTime.compareTo(ne)>=0)}(s.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=p).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(v(p));const _=new m(p,s.localStore,c.serializer);let w=yield c.bc();for(;w;){const R=yield _.zu(w);R&&h._updateProgress(R),w=yield c.bc()}const C=yield _.complete();return yield Rh(s,C.Ju,void 0),yield function(R,N){const Y=Rt(R);return Y.persistence.runTransaction("Save bundle","readwrite",ne=>Y.qs.saveBundleMetadata(ne,N))}(s.localStore,p),h._completeWith(C.progress),Promise.resolve(C.Hu)}catch(p){return _a("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var R}),function(s,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield AF(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function kq(n,e){return function vq(n,e){return n.asyncQueue.enqueue((0,Ve.Z)(function*(){return function(t,r){const i=Rt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield eM(n),e)}))}(os(n=ir(n,yi)),e).then(t=>t?new Mo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Aa(this,t):null)}}class MP extends LF{constructor(e){super(),this.firestore=e}convertBytes(e){return new FA(new sd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return il.forKey(t,this.firestore,null)}}class y9{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new MP(e)}get(e){const t=_y(e);return this._delegate.get(t).then(r=>new LA(this._firestore,new Ph(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=_y(e);return r?(jU("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=_y(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=_y(e);return this._delegate.delete(t),this}}class v9{constructor(e){this._delegate=e}set(e,t,r){const i=_y(e);return r?(jU("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=_y(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=_y(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gy{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ZT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new VA(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=gy.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new gy(e,new MP(e),t),i.set(t,s)),s}}gy.INSTANCES=new WeakMap;class il{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MP(e)}static forPath(e,t,r){if(e.length%2!=0)throw new nt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new il(t,new _i(t._delegate,r,new St(e)))}static forKey(e,t,r){return new il(t,new _i(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new FI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new FI(this.firestore,yj(this._delegate,e))}catch(t){throw Ca(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xe.m9)(e))instanceof _i&&vj(this._delegate,e)}set(e,t){t=jU("DocumentReference.set",t);try{return t?Vj(this._delegate,e,t):Vj(this._delegate,e)}catch(r){throw Ca(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Uj(this._delegate,e):Uj(this._delegate,e,t,...r)}catch(i){throw Ca(i,"updateDoc()","DocumentReference.update()")}}delete(){return function a5(n){return D0(ir(n.firestore,yi),[new gh(n._key,ni.none())])}(this._delegate)}onSnapshot(...e){const t=w9(e),r=I9(e,i=>new LA(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Bj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function t5(n){n=ir(n,_i);const e=ir(n.firestore,yi),t=os(e),r=new Gp(e);return function mq(n,e){const t=new Ni;return n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(r=(0,Ve.Z)(function*(i,s,c){try{const h=yield function(p,_){const w=Rt(p);return w.persistence.runTransaction("read document","readonly",C=>w.localDocuments.getDocument(C,_))}(i,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new nt(Re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=x_(h,`Failed to get document '${s} from cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield eM(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ph(e,r,n._key,i,new N_(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function n5(n){n=ir(n,_i);const e=ir(n.firestore,yi);return cj(os(e),n._key,{source:"server"}).then(t=>VF(e,n,t))}(this._delegate):function e5(n){n=ir(n,_i);const e=ir(n.firestore,yi);return cj(os(e),n._key).then(t=>VF(e,n,t))}(this._delegate),t.then(r=>new LA(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new il(this.firestore,this._delegate.withConverter(e?gy.getInstance(this.firestore,e):null))}}function Ca(n,e,t){return n.message=n.message.replace(e,t),n}function w9(n){for(const e of n)if("object"==typeof e&&!zU(e))return e;return{}}function I9(n,e){var t,r;let i;return i=zU(n[0])?n[0]:zU(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class LA{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new il(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Lj(this._delegate,e._delegate)}}class VA extends LA{data(e){const t=this._delegate.data(e);return function OS(n,e){n||zt()}(void 0!==t),t}}class Aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MP(e)}where(e,t,r){try{return new Aa(this.firestore,Hp(this._delegate,function Hq(n,e,t){const r=e,i=cM("where",n);return KT._create(i,r,t)}(e,t,r)))}catch(i){throw Ca(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Aa(this.firestore,Hp(this._delegate,function $q(n,e="asc"){const t=e,r=cM("orderBy",n);return FF._create(r,t)}(e,t)))}catch(r){throw Ca(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Aa(this.firestore,Hp(this._delegate,function Gq(n){return mj("limit",n),lM._create("limit",n,"F")}(e)))}catch(t){throw Ca(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Aa(this.firestore,Hp(this._delegate,function qq(n){return mj("limitToLast",n),lM._create("limitToLast",n,"L")}(e)))}catch(t){throw Ca(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Aa(this.firestore,Hp(this._delegate,function Wq(...n){return uM._create("startAt",n,!0)}(...e)))}catch(t){throw Ca(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Aa(this.firestore,Hp(this._delegate,function Kq(...n){return uM._create("startAfter",n,!1)}(...e)))}catch(t){throw Ca(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Aa(this.firestore,Hp(this._delegate,function Zq(...n){return dM._create("endBefore",n,!1)}(...e)))}catch(t){throw Ca(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Aa(this.firestore,Hp(this._delegate,function Yq(...n){return dM._create("endAt",n,!0)}(...e)))}catch(t){throw Ca(t,"endAt()","Query.endAt()")}}isEqual(e){return xF(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function s5(n){n=ir(n,Mo);const e=ir(n.firestore,yi),t=os(e),r=new Gp(e);return function gq(n,e){const t=new Ni;return n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(r=(0,Ve.Z)(function*(i,s,c){try{const h=yield D_(i,s,!0),p=new x(s,h.ir),_=p.sc(h.documents),w=p.applyChanges(_,!1);c.resolve(w.snapshot)}catch(h){const p=x_(h,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield eM(n),e,t);var r})),t.promise}(t,n._query).then(i=>new $p(e,r,n,i))}(this._delegate):"server"===e?.source?function o5(n){n=ir(n,Mo);const e=ir(n.firestore,yi),t=os(e),r=new Gp(e);return lj(t,n._query,{source:"server"}).then(i=>new $p(e,r,n,i))}(this._delegate):function r5(n){n=ir(n,Mo);const e=ir(n.firestore,yi),t=os(e),r=new Gp(e);return Rj(n._query),lj(t,n._query).then(i=>new $p(e,r,n,i))}(this._delegate),t.then(r=>new HU(this.firestore,new $p(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=w9(e),r=I9(e,i=>new HU(this.firestore,new $p(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Bj(this._delegate,t,r)}withConverter(e){return new Aa(this.firestore,this._delegate.withConverter(e?gy.getInstance(this.firestore,e):null))}}class qee{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new VA(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class HU{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Aa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new VA(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qee(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new VA(this._firestore,r))})}isEqual(e){return Lj(this._delegate,e._delegate)}}class FI extends Aa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new il(this.firestore,e):null}doc(e){try{return new il(this.firestore,void 0===e?nM(this._delegate):nM(this._delegate,e))}catch(t){throw Ca(t,"doc()","CollectionReference.doc()")}}add(e){return function c5(n,e){const t=ir(n.firestore,yi),r=nM(n),i=hM(n.converter,e);return D0(t,[sM(k_(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ni.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new il(this.firestore,t))}isEqual(e){return vj(this._delegate,e._delegate)}withConverter(e){return new FI(this.firestore,this._delegate.withConverter(e?gy.getInstance(this.firestore,e):null))}}function _y(n){return ir(n,_i)}class $U{constructor(...e){this._delegate=new Mh(...e)}static documentId(){return new $U(Si.keyField().canonicalString())}isEqual(e){return(e=(0,xe.m9)(e))instanceof Mh&&this._delegate._internalPath.isEqual(e._internalPath)}}class yy{constructor(e){this._delegate=e}static serverTimestamp(){const e=function E5(){return new MF("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yy(e)}static delete(){const e=function I5(){return new $T("deleteField")}();return e._methodName="FieldValue.delete",new yy(e)}static arrayUnion(...e){const t=function b5(...n){return new Vq("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new yy(t)}static arrayRemove(...e){const t=function T5(...n){return new Uq("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new yy(t)}static increment(e){const t=function C5(n){return new Bq("increment",n)}(e);return t._methodName="FieldValue.increment",new yy(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Wee={Firestore:_9,GeoPoint:rM,Timestamp:ti,Blob:FA,Transaction:y9,WriteBatch:v9,DocumentReference:il,DocumentSnapshot:LA,Query:Aa,QueryDocumentSnapshot:VA,QuerySnapshot:HU,CollectionReference:FI,FieldPath:$U,FieldValue:yy,setLogLevel:function Gee(n){!function jO(n){Hu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Zee(n){(function Kee(n,e){n.INTERNAL.registerComponent(new Et.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Wee)))})(n,(e,t)=>new _9(e,t,new $ee)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Bee.Z);var Yee=j(3019),PP=j(3093),Qee=j(4552);class Xee extends Ga.x{constructor(e=1/0,t=1/0,r=Qee.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:c}=this;t||(r.push(e),!i&&r.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let c=0;c<s.length&&!e.closed;c+=r?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const c=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var Jee=j(3020);function E9(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Jee.B)({connector:()=>new Xee(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function b9(n,e){return(0,Fa.m)(e)?(0,dr.w)(()=>n,e):(0,dr.w)(()=>n)}var GU=j(5137);const T9=new u.OlP("angularfire2.auth.use-emulator"),C9=new u.OlP("angularfire2.auth.settings"),A9=new u.OlP("angularfire2.auth.tenant-id"),D9=new u.OlP("angularfire2.auth.langugage-code"),S9=new u.OlP("angularfire2.auth.use-device-language"),x9=new u.OlP("angularfire.auth.persistence"),R9=(n,e,t,r,i,s,c,h)=>(0,L.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),c)for(const[_,w]of Object.entries(c))p.settings[_]=w;return h&&p.setPersistence(h),p},[t,r,i,s,c,h]);let M9=(()=>{class n{constructor(t,r,i,s,c,h,p,_,w,C,R,N){const Y=new Ga.x,ne=(0,$t.of)(void 0).pipe((0,PP.Q)(c.outsideAngular),(0,dr.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,8661)))),(0,Jt.U)(()=>(0,L.on)(t,s,r)),(0,Jt.U)(te=>R9(te,s,h,_,w,C,p,R)),E9({bufferSize:1,refCount:!1}));if(Ms(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,$t.of)(null);else{ne.pipe(Jp()).subscribe();const Ne=ne.pipe((0,dr.w)(rt=>rt.getRedirectResult().then(Tt=>Tt,()=>null)),Bn.iC,E9({bufferSize:1,refCount:!1})),qe=ne.pipe((0,dr.w)(rt=>new Wi.y(Tt=>({unsubscribe:s.runOutsideAngular(()=>rt.onAuthStateChanged(Pt=>Tt.next(Pt),Pt=>Tt.error(Pt),()=>Tt.complete()))})))),Pe=ne.pipe((0,dr.w)(rt=>new Wi.y(Tt=>({unsubscribe:s.runOutsideAngular(()=>rt.onIdTokenChanged(Pt=>Tt.next(Pt),Pt=>Tt.error(Pt),()=>Tt.complete()))}))));this.authState=Ne.pipe(b9(qe),(0,GU.R)(c.outsideAngular),(0,PP.Q)(c.insideAngular)),this.user=Ne.pipe(b9(Pe),(0,GU.R)(c.outsideAngular),(0,PP.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,dr.w)(rt=>rt?(0,Jn.D)(rt.getIdToken()):(0,$t.of)(null))),this.idTokenResult=this.user.pipe((0,dr.w)(rt=>rt?(0,Jn.D)(rt.getIdTokenResult()):(0,$t.of)(null))),this.credential=(0,Yee.T)(Ne,Y,this.authState.pipe(gr(rt=>!rt))).pipe((0,Jt.U)(rt=>rt?.user?rt:null),(0,GU.R)(c.outsideAngular),(0,PP.Q)(c.insideAngular))}return(0,L.pX)(this,ne,s,{spy:{apply:(te,Ne,qe)=>{(te.startsWith("signIn")||te.startsWith("createUser"))&&qe.then(Pe=>Y.next(Pe))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(L.Dh),u.LFG(L.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Bn.HU),u.LFG(T9,8),u.LFG(C9,8),u.LFG(A9,8),u.LFG(D9,8),u.LFG(S9,8),u.LFG(x9,8),u.LFG(Lc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function P9(n,e){return function tte(n,e=ce.z){return new Wi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function qU(n,e){return P9(n,e).pipe((0,Jt.U)(t=>({payload:t,type:"query"})))}function kP(n,e){return qU(n,e).pipe(cC(void 0),BU(),(0,Jt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=i.find(w=>w.doc.ref.isEqual(c.ref)),_=t?.payload.docs.find(w=>w.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function k9(n,e,t){return kP(n,t).pipe(qM((r,i)=>function rte(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ite(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return WU(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return WU(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return WU(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),(0,Uee.x)(),(0,Jt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function WU(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function O9(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class N9{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kP(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Jt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(cC(void 0),BU(),gr(([r,i])=>i.length>0||!r),(0,Jt.U)(([r,i])=>i),Bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(qM((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=O9(e);return k9(this.query,t,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}valueChanges(e={}){return qU(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Bn.iC)}get(e){return(0,Jn.D)(this.query.get(e)).pipe(Bn.iC)}add(e){return this.ref.add(e)}doc(e){return new F9(this.ref.doc(e),this.afs)}}class F9{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=L9(r,t);return new N9(i,s,this.afs)}snapshotChanges(){return function nte(n,e){return P9(n,e).pipe(cC(void 0),BU(),(0,Jt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Jt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jn.D)(this.ref.get(e)).pipe(Bn.iC)}}class ste{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),gr(t=>t.length>0),Bn.iC):kP(this.query,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(qM((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=O9(e);return k9(this.query,t,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}valueChanges(e={}){return qU(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Bn.iC)}get(e){return(0,Jn.D)(this.query.get(e)).pipe(Bn.iC)}}const ote=new u.OlP("angularfire2.enableFirestorePersistence"),ate=new u.OlP("angularfire2.firestore.persistenceSettings"),cte=new u.OlP("angularfire2.firestore.settings"),lte=new u.OlP("angularfire2.firestore.use-emulator");function L9(n,e=(t=>t)){return{query:e(n),ref:n}}let V9=(()=>{class n{constructor(t,r,i,s,c,h,p,_,w,C,R,N,Y,ne,te,Ne,qe){this.schedulers=p;const Pe=(0,L.on)(t,h,r),rt=w;C&&R9(Pe,h,R,Y,ne,te,N,Ne),[this.firestore,this.persistenceEnabled$]=(0,L.cc)(`${Pe.name}.firestore`,"AngularFirestore",Pe.name,()=>{const Tt=h.runOutsideAngular(()=>Pe.firestore());if(s&&Tt.settings(s),rt&&Tt.useEmulator(...rt),i&&!Ms(c)){const Pt=()=>{try{return(0,Jn.D)(Tt.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(Ln){return typeof console<"u"&&console.warn(Ln),(0,$t.of)(!1)}};return[Tt,h.runOutsideAngular(Pt)]}return[Tt,(0,$t.of)(!1)]},[s,rt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=L9(i,r),h=this.schedulers.ngZone.run(()=>s);return new N9(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),s=this.firestore.collectionGroup(t);return new ste(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new F9(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(L.Dh),u.LFG(L.xv,8),u.LFG(ote,8),u.LFG(cte,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Bn.HU),u.LFG(ate,8),u.LFG(lte,8),u.LFG(M9,8),u.LFG(T9,8),u.LFG(C9,8),u.LFG(A9,8),u.LFG(D9,8),u.LFG(S9,8),u.LFG(x9,8),u.LFG(Lc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),U9=(()=>{class n{constructor(t,r){this.firestore=t,this.router=r}uploadProduct(t){this.firestore.collection("products").add({...t,id:this.firestore.createId()}).then(()=>{console.log("Success"),this.router.navigate(["/"])}).catch(r=>{console.log(r)})}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(V9),u.LFG(Ys))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class B9{constructor(e,t,r,i){this.email=e,this.id=t,this._token=r,this._tokenExpirationDate=i}get token(){return!this._tokenExpirationDate||new Date>this._tokenExpirationDate?null:this._token}}let UA=(()=>{class n{constructor(t,r){this.http=t,this.router=r,this.users=localStorage.getItem("users")||"",this.user=new mc.X(null)}getUsers(){this.http.get("http://localhost:3000/users").subscribe(t=>this.objUsers=t)}signup(t){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBsv9RRWMipsQbrgOvq16gClAraUZRZA3U",{email:t.email,password:t.inputPassword,returnSecureToken:!0}).pipe(Fh(this.handleError),(0,ao.b)(s=>{this.handleAuth(s.email,s.localId,s.idToken,+s.expiresIn)}))}handleError(t){return console.log(t.error.error.message),t.error}handleAuth(t,r,i,s){const c=new Date((new Date).getTime()+1e3*s),h=new B9(t,r,i,c);this.user.next(h),this.autoLogout(1e3*s),localStorage.setItem("loggedData",JSON.stringify(h))}login(t,r){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBsv9RRWMipsQbrgOvq16gClAraUZRZA3U",{email:t,password:r,returnSecureToken:!0}).pipe(Fh(this.handleError),(0,ao.b)(i=>{this.handleAuth(i.email,i.localId,i.idToken,+i.expiresIn),this.user.next(i.idToken),this.router.navigate(["/admin"])}))}isLogged(){return localStorage.getItem("loggedData")}logout(){localStorage.removeItem("loggedData"),this.user.next(null),this.router.navigate(["/login"]),this.tokenExpirationTimer&&clearTimeout(this.tokenExpirationTimer),this.tokenExpirationTimer=null}autoLogin(){const t=localStorage.getItem("loggedData"),r=t?JSON.parse(t):null;if(!r)return;const i=new B9(r.email,r.userId,r._token,new Date(r._tokenExpirationDate));i.token&&this.user.next(i)}autoLogout(t){this.tokenExpirationTimer=setTimeout(()=>{this.logout()},t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Il),u.LFG(Ys))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ute(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.logout())}),u._uU(1," Logout "),u.qZA()}}function dte(n,e){1&n&&(u.TgZ(0,"button",6),u._uU(1," Login "),u.qZA())}let hte=(()=>{class n{constructor(t){this.auth=t,this.isAuth=!1}ngOnInit(){this.auth.user.subscribe(t=>{this.isAuth=!!t})}logout(){this.auth.logout()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(UA))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-header"]],decls:5,vars:2,consts:[[1,"bg-transparent"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-transparent"],[1,"container-fluid"],["class","btn  btn-outline-dark mx-auto",3,"click",4,"ngIf"],["class","btn  btn-outline-dark mx-auto","routerLink","/login",4,"ngIf"],[1,"btn","btn-outline-dark","mx-auto",3,"click"],["routerLink","/login",1,"btn","btn-outline-dark","mx-auto"]],template:function(r,i){1&r&&(u.TgZ(0,"header",0)(1,"nav",1)(2,"div",2),u.YNc(3,ute,2,0,"button",3),u.YNc(4,dte,2,0,"button",4),u.qZA()()()),2&r&&(u.xp6(3),u.Q6J("ngIf",i.isAuth),u.xp6(1),u.Q6J("ngIf",!i.isAuth))},dependencies:[xs,q0]})}return n})(),fte=(()=>{class n{constructor(t){this.prodService=t,this.list=["smartphones","skincare","fragrances","laptops","groceries"]}formHandler(t){let r=t.form.value,i=[];i.push(r.images),console.log(i);let s={...r,images:i};console.log(s),this.prodService.uploadProduct(s)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(U9))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-admin-panel"]],decls:18,vars:0,consts:[[1,"row"],[1,"col-2","position-fixed","h-100","bg-white","rounded"],[1,"py-3","mx-1"],[1,"mt-0","mb-3","mx-2"],["routerLink","/",1,"navbar-brand","fw-bold"],["src","\\assets\\logo.svg","alt","Anywhere-logo"],[1,"h4","fw-bold"],[1,"list-group"],["routerLink","product-list",1,"list-group-item"],["routerLink","add-product",1,"list-group-item"],["routerLink","add-category",1,"list-group-item"],[1,"col-8","mx-auto","rounded"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),u._UZ(5,"img",5),u.TgZ(6,"span",6),u._uU(7," Anywhere App "),u.qZA()()(),u.TgZ(8,"ul",7)(9,"a",8),u._uU(10,"Product List"),u.qZA(),u.TgZ(11,"a",9),u._uU(12,"Add Product"),u.qZA(),u.TgZ(13,"a",10),u._uU(14,"Add Category"),u.qZA()()(),u._UZ(15,"app-header"),u.qZA(),u.TgZ(16,"div",11),u._UZ(17,"router-outlet"),u.qZA()())},dependencies:[n1,q0,hte],styles:["#filterBar[_ngcontent-%COMP%]{position:fixed;left:4%;border-radius:10px;background-color:#feffff!important}"]})}return n})();function pte(n,e){if(1&n&&(u.TgZ(0,"span",18),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.error)}}let mte=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.error="",this.isEmail=!0}formOp(t){this.auth.login(t.value.email,t.value.password).subscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(UA),u.Y36(Ys))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-login"]],decls:28,vars:2,consts:[[1,"container","my-5"],[1,"fw-bold","h6","my-0","text-secondary"],[1,"display-5","fw-bold","text-white","my-0"],[1,"text-primary","fw-bolder","display-3"],[1,"h6","text-secondary","my-2"],["href","/signup",1,"text-decoration-none"],["id","box",1,"col-xl-6","col-lg-6","col-md-10","col-sm-12","my-5","rounded"],["id","form",3,"ngSubmit"],["authForm","ngForm"],["class","text-danger small",4,"ngIf"],[1,"col-11"],["for","email",1,"col-sm-5","col-form-label","fw-semibold"],["type","email","id","Email","ngModel","","name","email","placeholder","Enter Email","email","","required","",1,"form-control","rounded-4","py-3"],["for","password",1,"col-sm-5","col-form-label","fw-semibold"],["type","password","id","password","ngModel","","name","password","placeholder","Enter Password","required","","password","","minlength","8",1,"form-control","rounded-4","py-3"],[1,"col-11","justify-content-between","d-flex","my-4","px-4"],["href","/signup",1,"btn","btn-secondary","fw-bold","col-5","my-3","py-3","rounded-pill","px-2"],["type","submit","id","signup",1,"btn","btn-primary","col-5","my-3","rounded-pill","py-3","px-2","fw-bold",3,"disabled"],[1,"text-danger","small"]],template:function(r,i){if(1&r){const s=u.EpF();u.TgZ(0,"div",0)(1,"p",1),u._uU(2,"WELCOME BACK"),u.qZA(),u.TgZ(3,"h1",2),u._uU(4," Account Login "),u.TgZ(5,"span",3),u._uU(6,"."),u.qZA()(),u.TgZ(7,"p",4),u._uU(8,"Don't have an Account? "),u.TgZ(9,"a",5),u._uU(10,"Create New Account"),u.qZA()(),u.TgZ(11,"div",6)(12,"form",7,8),u.NdJ("ngSubmit",function(){u.CHM(s);const h=u.MAs(13);return u.KtG(i.formOp(h))}),u.YNc(14,pte,2,1,"span",9),u.TgZ(15,"div",10)(16,"label",11),u._uU(17,"Email"),u.qZA(),u._UZ(18,"input",12),u.qZA(),u.TgZ(19,"div",10)(20,"label",13),u._uU(21,"Password"),u.qZA(),u._UZ(22,"input",14),u.qZA(),u.TgZ(23,"div",15)(24,"a",16),u._uU(25,"Change Method"),u.qZA(),u.TgZ(26,"button",17),u._uU(27,"Next"),u.qZA()()()()()}if(2&r){const s=u.MAs(13);u.xp6(14),u.Q6J("ngIf",i.error),u.xp6(12),u.Q6J("disabled",!s.valid)}},dependencies:[xs,M0,Wp,S0,x0,iC,TM,bM,XF,EM]})}return n})();function gte(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," Enter a valid Email "),u.qZA())}function _te(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," Email is required "),u.qZA())}function yte(n,e){if(1&n&&(u.TgZ(0,"span",23),u.YNc(1,gte,2,0,"span",14),u.YNc(2,_te,2,0,"span",14),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.authForm.get("email").errors.email),u.xp6(1),u.Q6J("ngIf",t.authForm.get("email").errors.required)}}function vte(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," Passoword is required "),u.qZA())}function wte(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," Passoword should match the criteria and should be 8 chars long "),u.qZA())}function Ite(n,e){if(1&n&&(u.TgZ(0,"span",23),u.YNc(1,vte,2,0,"span",14),u.YNc(2,wte,2,0,"span",14),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.authForm.get("inputPassword").errors.required),u.xp6(1),u.Q6J("ngIf",t.authForm.get("inputPassword").errors.pattern||t.authForm.get("inputPassword").errors.minlength)}}function Ete(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," Confirm Passoword is required "),u.qZA())}function bte(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," Both password should match "),u.qZA())}function Tte(n,e){if(1&n&&(u.TgZ(0,"span",23),u.YNc(1,Ete,2,0,"span",14),u.YNc(2,bte,2,0,"span",14),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.authForm.get("confirmPassword").errors.required),u.xp6(1),u.Q6J("ngIf",t.ifMatched&&t.authForm.get("inputPassword").valid)}}let Cte=(()=>{class n{constructor(t){this.auth=t,this.confirmPassword="",this.inputPassword="",this.ifMatched=!0,this.passwordRegex=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-])/,this.isValid=!1,this.numEx=/^[A-Za-z]+$/}ngOnInit(){this.authForm=new L_({email:new Ea(null,[bs.required,bs.email]),inputPassword:new Ea(null,[bs.required,bs.pattern(this.passwordRegex)]),confirmPassword:new Ea(null,[bs.required,bs.pattern(this.passwordRegex)])})}onSubmit(){console.log(this.authForm),this.auth.signup(this.authForm.value).subscribe()}passwordMatch(){this.ifMatched=this.confirmPassword===this.inputPassword}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(UA))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-up"]],decls:39,vars:5,consts:[[1,"container","my-5"],[1,"fw-bold","h6","my-0","text-secondary"],[1,"display-5","fw-bold","text-white"],[1,"text-primary","fw-bolder","display-4"],[1,"h6","text-secondary"],["routerLink","/login",1,"text-decoration-none"],[1,"col-xl-6","col-md-10","col-sm-12","my-5"],[3,"formGroup","ngSubmit"],[1,"form-group"],["id","",1,"text-danger"],[1,"col-11"],[1,"form-group",3,"has-error"],["for","email",1,"col-sm-5","col-form-label","fw-semibold"],["type","email","id","Email","formControlName","email","placeholder","Enter Email","required","","email","",1,"form-control","rounded-4","py-3"],["class","small text-danger",4,"ngIf"],["for","inputPassword",1,"col-sm-5","col-form-label","fw-semibold"],["title","A mixture of both uppercase and lowercase letters.\n  A mixture of letters and numbers.\n  Inclusion of at least one special character, e.g., ! @ # ? ]","data-bs-placement","bottom",1,"tt"],["type","password","id","inputPassword","formControlName","inputPassword","placeholder","Enter Password","required","","minlength","8","password","",1,"form-control","rounded-4","py-3",3,"ngModelChange"],["for","confirmPassword",1,"col-sm-5","col-form-label","fw-semibold"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Re-enter Password","required","","minlength","8",1,"form-control","rounded-4","py-3",3,"ngModelChange"],[1,"col-11","justify-content-between","d-flex","my-4","px-4"],["routerLink","/login",1,"btn","btn-secondary","fw-bold","col-5","my-3","py-3","rounded-pill","px-2"],["type","submit","id","signup",1,"btn","btn-primary","col-5","my-3","rounded-pill","py-3","px-2","fw-bold",3,"disabled"],[1,"small","text-danger"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"p",1),u._uU(2,"START FOR FREE"),u.qZA(),u.TgZ(3,"h1",2),u._uU(4," Create new account "),u.TgZ(5,"span",3),u._uU(6,"."),u.qZA()(),u.TgZ(7,"p",4),u._uU(8," Already A Member? "),u.TgZ(9,"a",5),u._uU(10,"Log In"),u.qZA()(),u.TgZ(11,"div",6)(12,"form",7),u.NdJ("ngSubmit",function(){return i.onSubmit()}),u.TgZ(13,"div",8),u._UZ(14,"span",9),u.TgZ(15,"div",10)(16,"div",11)(17,"label",12),u._uU(18,"Email"),u.qZA(),u._UZ(19,"input",13),u.qZA(),u.YNc(20,yte,3,2,"span",14),u.qZA()(),u.TgZ(21,"div",10)(22,"div",11)(23,"label",15),u._uU(24,"Password"),u.qZA(),u.TgZ(25,"span",16)(26,"input",17),u.NdJ("ngModelChange",function(){return i.passwordMatch()}),u.qZA()()(),u.YNc(27,Ite,3,2,"span",14),u.qZA(),u.TgZ(28,"div",10)(29,"div",11)(30,"label",18),u._uU(31,"Confirm Password"),u.qZA(),u.TgZ(32,"input",19),u.NdJ("ngModelChange",function(){return i.passwordMatch()}),u.qZA()(),u.YNc(33,Tte,3,2,"span",14),u.qZA(),u.TgZ(34,"div",20)(35,"a",21),u._uU(36,"Change Method"),u.qZA(),u.TgZ(37,"button",22),u._uU(38," Create Account "),u.qZA()()()()()),2&r&&(u.xp6(12),u.Q6J("formGroup",i.authForm),u.xp6(8),u.Q6J("ngIf",!i.authForm.get("email").valid&&i.authForm.get("email").touched),u.xp6(7),u.Q6J("ngIf",!i.authForm.get("inputPassword").valid&&i.authForm.get("inputPassword").touched),u.xp6(6),u.Q6J("ngIf",!i.authForm.get("confirmPassword").valid&&i.authForm.get("confirmPassword").touched),u.xp6(4),u.Q6J("disabled",!i.authForm.valid||!i.ifMatched))},dependencies:[xs,q0,M0,Wp,S0,x0,iC,TM,bM,U_,P0]})}return n})(),Ate=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}canActivate(){return!!this.auth.isLogged()||(this.router.navigate(["/login"]),!1)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(UA),u.LFG(Ys))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();(0,It.registerVersion)("firebase","10.4.0","app");let OP=(()=>{class n{constructor(t,r){this.firestore=t,this.router=r}getProducts(){return this.firestore.collection("products").valueChanges()}deleteProduct(t){this.firestore.collection("products",r=>r.where("id","==",t)).get().subscribe(r=>{r.forEach(i=>{i.ref.delete().then(()=>{console.log("deleted")})})})}getProductById(t){return this.firestore.collection("products",r=>r.where("id","==",t)).valueChanges()}updateProduct(t,r){this.firestore.collection("products",i=>i.where("id","==",t)).get().subscribe(i=>{i.forEach(s=>{s.ref.update(r).then(()=>{console.log("updated"),this.router.navigate(["admin"])})})})}getCategories(){return this.firestore.collection("categories").doc("UhXnpCPXIasl4tEGsBu7").valueChanges()}setCategories(t){return this.firestore.collection("categories").doc("UhXnpCPXIasl4tEGsBu7").set(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(V9),u.LFG(Ys))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xte=["angularCropper"],Rte=["image"],Mte=["cropperJsRoot"];function Pte(n,e){1&n&&(u.TgZ(0,"span",24),u._uU(1," Title is required "),u.qZA())}function kte(n,e){if(1&n&&(u.TgZ(0,"span",24),u.YNc(1,Pte,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.productForm.get("title").errors.required)}}function Ote(n,e){if(1&n&&(u.TgZ(0,"option",25),u._uU(1),u.ALo(2,"uppercase"),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t),u.xp6(1),u.hij(" ",u.lcZ(2,2,t)," ")}}function Nte(n,e){1&n&&(u.TgZ(0,"span",24),u._uU(1," Category is required "),u.qZA())}function Fte(n,e){if(1&n&&(u.TgZ(0,"span",24),u.YNc(1,Nte,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.productForm.get("category").errors.required)}}function Lte(n,e){1&n&&(u.TgZ(0,"div",26),u._UZ(1,"div",27),u.qZA())}function Vte(n,e){if(1&n&&(u.TgZ(0,"div",28),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij(" ",t.loadImageErrorText," ")}}function Ute(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",29)(1,"img",30,31),u.NdJ("load",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s.imageLoadedS(i))})("error",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s.imageLoadError(i))}),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("src",t.targetGif,u.LSH)}}function Bte(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",32),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.exportCanvas())}),u._uU(1,"Crop"),u.qZA()}}function jte(n,e){1&n&&(u.TgZ(0,"span",24),u._uU(1," Please crop the image before uploading."),u.qZA())}function zte(n,e){if(1&n&&u._UZ(0,"img",33),2&n){const t=u.oxw();u.Q6J("src",t.croppedImage,u.LSH)}}function Hte(n,e){1&n&&(u.TgZ(0,"span",24),u._uU(1," Price should only contain numbers. "),u.qZA())}function $te(n,e){1&n&&(u.TgZ(0,"span",24),u._uU(1," Price is required "),u.qZA())}function Gte(n,e){if(1&n&&(u.TgZ(0,"span",24),u.YNc(1,Hte,2,0,"span",6),u.YNc(2,$te,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.productForm.get("price").errors.pattern),u.xp6(1),u.Q6J("ngIf",t.productForm.get("price").errors.required)}}function qte(n,e){1&n&&(u.TgZ(0,"span",24),u._uU(1," Stock should only contain numbers. "),u.qZA())}function Wte(n,e){1&n&&(u.TgZ(0,"span",24),u._uU(1," Stock is required "),u.qZA())}function Kte(n,e){if(1&n&&(u.TgZ(0,"span",24),u.YNc(1,qte,2,0,"span",6),u.YNc(2,Wte,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.productForm.get("stock").errors.pattern),u.xp6(1),u.Q6J("ngIf",t.productForm.get("stock").errors.required)}}let Zte=(()=>{class n{constructor(t,r){this.data=t,this.prodService=r,this.cropperOptions={},this.export=new u.vpe,this.ready=new u.vpe,this.isLoading=!0,this.imageChangedEvent="",this.croppedImage="",this.numRegex=/\d+$/,this.targetUrl="",this.firebaseApp=(0,It.initializeApp)(HM_firebaseConfig),this.isGif=!1,this.croppedImageList=[],this.list=[],this.storage=function oB(n=(0,It.getApp)(),e){n=(0,xe.m9)(n);const r=(0,It._getProvider)(n,fk).getImmediate({identifier:e}),i=(0,xe.P0)("storage");return i&&yk(r,...i),r}(this.firebaseApp)}ngOnInit(){this.productForm=new L_({title:new Ea("",bs.required),category:new Ea("",bs.required),price:new Ea(null,[bs.required,bs.pattern(this.numRegex)]),stock:new Ea(null,[bs.required,bs.pattern(this.numRegex)])}),this.data.getCategories().subscribe(t=>{this.list=Object.values(t)})}onGifUpload(t){this.croppedImage="",this.targetGif="";const r=t.target.files[0],i=new FileReader;i.readAsDataURL(r),i.onload=()=>{this.targetGif=i.result}}ngOnDestroy(){this.cropper&&(this.cropper.destroy(),this.cropper=null)}imageLoadedS(t){this.loadError=!1;const r=t.target;this.imageElement=r,this.cropperOptions.checkCrossOrigin&&(r.crossOrigin="anonymous"),r.addEventListener("ready",()=>{this.ready.emit(!0),this.isLoading=!1,this.cropbox&&this.cropper.setCropBoxData(this.cropbox)});let i=NaN;if(this.settings){const{width:s,height:c}=this.settings;i=s/c}this.cropperOptions={aspectRatio:i,checkCrossOrigin:!0,...this.cropperOptions},this.cropper&&(this.cropper.destroy(),this.cropper=void 0),this.cropper=new(k8())(r,this.cropperOptions)}imageLoadError(t){this.loadError=!0,this.isLoading=!1}exportCanvas(t){const r=this.cropper.getImageData(),i=this.cropper.getCropBoxData(),s=this.cropper.getCroppedCanvas(),c={imageData:r,cropData:i};new Promise(p=>{s.toBlob(_=>{const w=new File([_],"png",{type:_.type}),C=new FileReader;C.onload=R=>{this.croppedImage=C.result,this.base64=w},C.onerror=()=>{},C.readAsDataURL(w)})}).then(p=>{this.export.emit({...c,...p})})}formHandler(){let t=this.productForm.value,r=[];(function mk(n,e,t){return function Xy(n,e,t){n._throwIfRoot("uploadBytes");const r=Ky(n.storage,n._location,Cu(),new Nc(e,!0),t);return n.storage.makeRequestWithTokens(r,Ba).then(i=>({metadata:i,ref:n}))}(n=(0,xe.m9)(n),e,t)})(nv(this.storage,`images/${t.title}`),this.base64).then(s=>hE(s.ref)).then(s=>{r.push(s)}).then(()=>{let s={...t,images:r};this.prodService.uploadProduct(s)})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(OP),u.Y36(U9))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-add-product"]],viewQuery:function(r,i){if(1&r&&(u.Gf(xte,5),u.Gf(Rte,7),u.Gf(Mte,5)),2&r){let s;u.iGM(s=u.CRH())&&(i.angularCropper=s.first),u.iGM(s=u.CRH())&&(i.image=s.first),u.iGM(s=u.CRH())&&(i.cropperJsRoot=s.first)}},inputs:{imageUrl:"imageUrl",settings:"settings",cropbox:"cropbox",loadImageErrorText:"loadImageErrorText",cropperOptions:"cropperOptions"},outputs:{export:"export",ready:"ready"},decls:38,vars:13,consts:[[1,"container"],[1,"col-6","bg-white","mx-auto","rounded","px-3","py-4"],[3,"formGroup","ngSubmit"],[1,"col-12"],["for","title",1,"form-label"],["type","text","formControlName","title","id","title",1,"form-control"],["class","small text-danger",4,"ngIf"],["for","category",1,"form-label"],["formControlName","category","id","category","ngModel","general",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"cropper-wrapper"],["for","image",1,"form-label"],["type","file","accept","image/png,image/jpeg,image/webp",1,"form-control",3,"change"],["class","loading-block",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","cropper",4,"ngIf"],["type","button","class","btn btn-outline-primary btn-sm my-2",3,"click",4,"ngIf"],["alt","croppedImage","width","250px",3,"src",4,"ngIf"],["for","price",1,"form-label"],["type","text","formControlName","price","id","price",1,"form-control"],["for","stock",1,"form-label"],["type","text","formControlName","stock","id","stock",1,"form-control"],[1,"col","my-2"],[1,"btn","btn-success",3,"disabled"],[1,"small","text-danger"],[3,"value"],[1,"loading-block"],[1,"spinner"],[1,"alert","alert-warning"],[1,"cropper"],["alt","image",3,"src","load","error"],["image",""],["type","button",1,"btn","btn-outline-primary","btn-sm","my-2",3,"click"],["alt","croppedImage","width","250px",3,"src"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"div",1)(2,"form",2),u.NdJ("ngSubmit",function(){return i.formHandler()}),u.TgZ(3,"div",3)(4,"label",4),u._uU(5,"Title"),u.qZA(),u._UZ(6,"input",5),u.YNc(7,kte,2,1,"span",6),u.qZA(),u.TgZ(8,"div",3)(9,"label",7),u._uU(10,"Category"),u.qZA(),u.TgZ(11,"select",8),u.YNc(12,Ote,3,4,"option",9),u.qZA(),u.YNc(13,Fte,2,1,"span",6),u.qZA(),u.TgZ(14,"div",10)(15,"label",11),u._uU(16,"Image"),u.qZA(),u.TgZ(17,"input",12),u.NdJ("change",function(c){return i.onGifUpload(c)}),u.qZA(),u.YNc(18,Lte,2,0,"div",13),u.YNc(19,Vte,2,1,"div",14),u.YNc(20,Ute,3,1,"div",15),u.YNc(21,Bte,2,0,"button",16),u._UZ(22,"br"),u.YNc(23,jte,2,0,"span",6),u.YNc(24,zte,1,1,"img",17),u.qZA(),u.TgZ(25,"div",3)(26,"label",18),u._uU(27,"Price"),u.qZA(),u._UZ(28,"input",19),u.YNc(29,Gte,3,2,"span",6),u.qZA(),u.TgZ(30,"div",3)(31,"label",20),u._uU(32,"Stock"),u.qZA(),u._UZ(33,"input",21),u.YNc(34,Kte,3,2,"span",6),u.qZA(),u._UZ(35,"div",22),u.TgZ(36,"button",23),u._uU(37," Add "),u.qZA()()()()),2&r&&(u.xp6(2),u.Q6J("formGroup",i.productForm),u.xp6(5),u.Q6J("ngIf",!i.productForm.get("title").valid&&i.productForm.get("title").touched),u.xp6(5),u.Q6J("ngForOf",i.list),u.xp6(1),u.Q6J("ngIf",!i.productForm.get("category").valid&&i.productForm.get("category").touched),u.xp6(5),u.Q6J("ngIf",i.isLoading&&i.targetGif),u.xp6(1),u.Q6J("ngIf",i.loadError),u.xp6(1),u.Q6J("ngIf",i.targetGif),u.xp6(1),u.Q6J("ngIf",i.targetGif),u.xp6(2),u.Q6J("ngIf",i.targetGif&&!i.croppedImage),u.xp6(1),u.Q6J("ngIf",i.croppedImage),u.xp6(5),u.Q6J("ngIf",!i.productForm.get("price").valid&&i.productForm.get("price").touched),u.xp6(5),u.Q6J("ngIf",!i.productForm.get("stock").valid&&i.productForm.get("stock").touched),u.xp6(2),u.Q6J("disabled",!i.productForm.valid||!i.croppedImage))},dependencies:[ra,xs,M0,n2,s2,Wp,rC,S0,x0,U_,P0,wr],styles:[':host{display:block}.cropper img{max-width:100%;max-height:100%;height:auto}.cropper-wrapper{position:relative;min-height:80px}.cropper-wrapper .loading-block{position:absolute;top:0;left:0;width:100%;height:100%}.cropper-wrapper .loading-block .spinner{width:31px;height:31px;margin:0 auto;border:2px solid rgba(97,100,193,.98);border-radius:50%;border-left-color:transparent;border-right-color:transparent;-webkit-animation:cssload-spin 425ms infinite linear;position:absolute;top:calc(50% - 15px);left:calc(50% - 15px);animation:cssload-spin 425ms infinite linear}@keyframes cssload-spin{to{transform:rotate(360deg)}}/*!\n * Cropper.js v1.4.1\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2018-07-15T09:54:43.167Z\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;touch-action:none;-webkit-user-select:none;user-select:none}.cropper-container img{display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-wrap-box,.cropper-canvas,.cropper-drag-box,.cropper-crop-box,.cropper-modal{inset:0;position:absolute}.cropper-wrap-box,.cropper-canvas{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline-color:#3399ffbf;outline:1px solid #39f;overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:33.3333333333%;left:0;top:33.3333333333%;width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:33.3333333333%;top:0;width:33.3333333333%}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:before,.cropper-center:after{background-color:#eee;content:" ";display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width: 768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width: 992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width: 1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:" ";display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC)}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}\n'],encapsulation:2})}return n})();function Yte(n,e){1&n&&(u.TgZ(0,"span",8),u._uU(1," category is required "),u.qZA())}function Qte(n,e){1&n&&(u.TgZ(0,"span",8),u._uU(1," Category should be of minimum 3 chars. "),u.qZA())}function Xte(n,e){if(1&n&&(u.TgZ(0,"span",8),u.YNc(1,Yte,2,0,"span",6),u.YNc(2,Qte,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.categoryForm.get("category").errors.required),u.xp6(1),u.Q6J("ngIf",t.categoryForm.get("category").errors.minlength)}}let Jte=(()=>{class n{constructor(t,r){this.data=t,this.router=r}ngOnInit(){this.categoryForm=new L_({category:new Ea("",bs.required)}),this.data.getCategories().subscribe(t=>{this.cat=Object.values(t)})}formHandler(){let t=this.categoryForm.value.category;console.log(t),this.cat.push(t),this.data.setCategories({...this.cat}),this.router.navigate(["/"])}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(OP),u.Y36(Ys))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-add-category"]],decls:10,vars:3,consts:[[1,"container","mt-5"],[1,"col-6","bg-white","mx-auto","rounded","px-3","py-4"],[3,"formGroup","ngSubmit"],[1,"col-12"],["for","category",1,"form-label"],["type","text","formControlName","category","id","category",1,"form-control"],["class","small text-danger",4,"ngIf"],[1,"btn","btn-primary","my-3",3,"disabled"],[1,"small","text-danger"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"div",1)(2,"form",2),u.NdJ("ngSubmit",function(){return i.formHandler()}),u.TgZ(3,"div",3)(4,"label",4),u._uU(5,"Category"),u.qZA(),u._UZ(6,"input",5),u.YNc(7,Xte,3,2,"span",6),u.qZA(),u.TgZ(8,"button",7),u._uU(9," Add "),u.qZA()()()()),2&r&&(u.xp6(2),u.Q6J("formGroup",i.categoryForm),u.xp6(5),u.Q6J("ngIf",!i.categoryForm.get("category").valid&&i.categoryForm.get("category").touched),u.xp6(1),u.Q6J("disabled",!i.categoryForm.valid))},dependencies:[xs,M0,Wp,S0,x0,U_,P0]})}return n})(),ene=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-loader"]],decls:13,vars:0,consts:[[1,"loader"],[1,"bar1"],[1,"bar2"],[1,"bar3"],[1,"bar4"],[1,"bar5"],[1,"bar6"],[1,"bar7"],[1,"bar8"],[1,"bar9"],[1,"bar10"],[1,"bar11"],[1,"bar12"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0),u._UZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),u.qZA())},styles:[".loader[_ngcontent-%COMP%]{position:relative;width:54px;height:54px;top:5em;border-radius:10px}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:8%;height:24%;background:rgb(255,255,255);position:absolute;left:50%;top:30%;opacity:0;border-radius:50px;box-shadow:0 0 3px #0003;animation:_ngcontent-%COMP%_fade458 1s linear infinite}@keyframes _ngcontent-%COMP%_fade458{0%{opacity:1}to{opacity:.25}}.loader[_ngcontent-%COMP%]   .bar1[_ngcontent-%COMP%]{transform:rotate(0) translateY(-130%);animation-delay:0s}.loader[_ngcontent-%COMP%]   .bar2[_ngcontent-%COMP%]{transform:rotate(30deg) translateY(-130%);animation-delay:-1.1s}.loader[_ngcontent-%COMP%]   .bar3[_ngcontent-%COMP%]{transform:rotate(60deg) translateY(-130%);animation-delay:-1s}.loader[_ngcontent-%COMP%]   .bar4[_ngcontent-%COMP%]{transform:rotate(90deg) translateY(-130%);animation-delay:-.9s}.loader[_ngcontent-%COMP%]   .bar5[_ngcontent-%COMP%]{transform:rotate(120deg) translateY(-130%);animation-delay:-.8s}.loader[_ngcontent-%COMP%]   .bar6[_ngcontent-%COMP%]{transform:rotate(150deg) translateY(-130%);animation-delay:-.7s}.loader[_ngcontent-%COMP%]   .bar7[_ngcontent-%COMP%]{transform:rotate(180deg) translateY(-130%);animation-delay:-.6s}.loader[_ngcontent-%COMP%]   .bar8[_ngcontent-%COMP%]{transform:rotate(210deg) translateY(-130%);animation-delay:-.5s}.loader[_ngcontent-%COMP%]   .bar9[_ngcontent-%COMP%]{transform:rotate(240deg) translateY(-130%);animation-delay:-.4s}.loader[_ngcontent-%COMP%]   .bar10[_ngcontent-%COMP%]{transform:rotate(270deg) translateY(-130%);animation-delay:-.3s}.loader[_ngcontent-%COMP%]   .bar11[_ngcontent-%COMP%]{transform:rotate(300deg) translateY(-130%);animation-delay:-.2s}.loader[_ngcontent-%COMP%]   .bar12[_ngcontent-%COMP%]{transform:rotate(330deg) translateY(-130%);animation-delay:-.1s}"]})}return n})();function tne(n,e){1&n&&u._UZ(0,"app-loader")}function nne(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr")(1,"td"),u._uU(2),u.ALo(3,"uppercase"),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.qZA(),u.TgZ(10,"td")(11,"button",7),u.NdJ("click",function(){const s=u.CHM(t).$implicit,c=u.oxw(2);return u.KtG(c.editProduct(s.id))}),u._UZ(12,"i",8),u.qZA(),u.TgZ(13,"button",7),u.NdJ("click",function(){const i=u.CHM(t),s=i.$implicit,c=i.index,h=u.oxw(2);return u.KtG(h.deleteProduct(s.id,c))}),u._UZ(14,"i",9),u.qZA()()()}if(2&n){const t=e.$implicit;u.xp6(2),u.Oqu(u.lcZ(3,4,t.title)),u.xp6(3),u.hij("$",t.price,""),u.xp6(2),u.Oqu(t.category),u.xp6(2),u.Oqu(t.stock)}}function rne(n,e){if(1&n&&(u.TgZ(0,"div",3)(1,"table",4)(2,"thead")(3,"tr")(4,"th",5),u._uU(5,"Title"),u.qZA(),u.TgZ(6,"th"),u._uU(7,"Price"),u.qZA(),u.TgZ(8,"th"),u._uU(9,"Category"),u.qZA(),u.TgZ(10,"th"),u._uU(11,"QTY"),u.qZA(),u.TgZ(12,"th"),u._uU(13,"Actions"),u.qZA()()(),u.TgZ(14,"tbody"),u.YNc(15,nne,15,6,"tr",6),u.qZA()()()),2&n){const t=u.oxw();u.xp6(15),u.Q6J("ngForOf",t.productsList)}}let ine=(()=>{class n{constructor(t,r){this.data=t,this.router=r}ngOnInit(){this.data.getProducts().subscribe(t=>this.productsList=t)}editProduct(t){this.router.navigate([`admin/edit-product/${t}`])}deleteProduct(t,r){this.productsList.splice(r,1),this.data.deleteProduct(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(OP),u.Y36(Ys))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-product-list"]],decls:3,vars:2,consts:[[1,"text-center","col-1","mx-auto"],[4,"ngIf"],["class","col-10 mx-auto bg-white p-3 mt-0 rounded",4,"ngIf"],[1,"col-10","mx-auto","bg-white","p-3","mt-0","rounded"],[1,"table"],[1,"col-5"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm",3,"click"],[1,"bi","bi-pencil-square"],[1,"bi","bi-trash"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0),u.YNc(1,tne,1,0,"app-loader",1),u.qZA(),u.YNc(2,rne,16,1,"div",2)),2&r&&(u.xp6(1),u.Q6J("ngIf",!i.productsList),u.xp6(1),u.Q6J("ngIf",i.productsList))},dependencies:[ra,xs,ene,wr]})}return n})();function sne(n,e){1&n&&(u.TgZ(0,"span",18),u._uU(1," Title is required "),u.qZA())}function one(n,e){if(1&n&&(u.TgZ(0,"span",18),u.YNc(1,sne,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.productForm.get("title").errors.required)}}function ane(n,e){if(1&n&&(u.TgZ(0,"option",19),u._uU(1),u.ALo(2,"uppercase"),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t),u.xp6(1),u.hij(" ",u.lcZ(2,2,t)," ")}}function cne(n,e){1&n&&(u.TgZ(0,"span",18),u._uU(1," Category is required "),u.qZA())}function lne(n,e){if(1&n&&(u.TgZ(0,"span",18),u.YNc(1,cne,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.productForm.get("category").errors.required)}}function une(n,e){1&n&&(u.TgZ(0,"span",18),u._uU(1," Image is required "),u.qZA())}function dne(n,e){if(1&n&&(u.TgZ(0,"span",18),u.YNc(1,une,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.productForm.get("images").errors.required)}}function hne(n,e){1&n&&(u.TgZ(0,"span",18),u._uU(1," Price should only contain numbers. "),u.qZA())}function fne(n,e){1&n&&(u.TgZ(0,"span",18),u._uU(1," Price is required "),u.qZA())}function pne(n,e){if(1&n&&(u.TgZ(0,"span",18),u.YNc(1,hne,2,0,"span",6),u.YNc(2,fne,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.productForm.get("price").errors.pattern),u.xp6(1),u.Q6J("ngIf",t.productForm.get("price").errors.required)}}function mne(n,e){1&n&&(u.TgZ(0,"span",18),u._uU(1," Stock should only contain numbers. "),u.qZA())}function gne(n,e){1&n&&(u.TgZ(0,"span",18),u._uU(1," Stock is required "),u.qZA())}function _ne(n,e){if(1&n&&(u.TgZ(0,"span",18),u.YNc(1,mne,2,0,"span",6),u.YNc(2,gne,2,0,"span",6),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.productForm.get("stock").errors.pattern),u.xp6(1),u.Q6J("ngIf",t.productForm.get("stock").errors.required)}}const yne=[{path:"",redirectTo:"admin",pathMatch:"full"},{path:"admin",component:fte,canActivate:[Ate],children:[{path:"",redirectTo:"product-list",pathMatch:"full"},{path:"add-product",component:Zte},{path:"add-category",component:Jte},{path:"product-list",component:ine},{path:"edit-product",children:[{path:":id",component:(()=>{class n{constructor(t,r){this.actRoute=t,this.data=r,this.productId="",this.numRegex=/\d+$/,this.list=[]}ngOnInit(){this.actRoute.params.subscribe(t=>this.productId=t.id),this.productForm=new L_({title:new Ea("",bs.required),category:new Ea("",bs.required),images:new Ea("",bs.required),price:new Ea(null,[bs.required,bs.pattern(this.numRegex)]),stock:new Ea(null,[bs.required,bs.pattern(this.numRegex)])}),this.data.getProductById(this.productId).subscribe(t=>{this.product=t,this.productForm.patchValue({title:t[0].title,category:t[0].category,images:t[0].images[0],price:t[0].price,stock:t[0].stock})}),this.data.getCategories().subscribe(t=>{this.list=Object.values(t)})}formHandler(){let t=this.productForm.value,r=[];r.push(t.images),console.log(r);let i={...t,images:r,id:this.productId};console.log(i),this.data.updateProduct(this.product[0].id,i)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(W_),u.Y36(OP))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit-product"]],decls:32,vars:8,consts:[[1,"container"],[1,"col-6","bg-white","mx-auto","rounded","px-3","py-4"],[3,"formGroup","ngSubmit"],[1,"col-12"],["for","title",1,"form-label"],["type","text","formControlName","title","id","title",1,"form-control"],["class","small text-danger",4,"ngIf"],["for","category",1,"form-label"],["formControlName","category","id","category",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","images",1,"form-label"],["type","text","formControlName","images","id","images",1,"form-control"],["for","price",1,"form-label"],["type","text","formControlName","price","id","price",1,"form-control"],["for","stock",1,"form-label"],["type","text","formControlName","stock","id","stock",1,"form-control"],[1,"col","my-2"],[1,"btn","btn-success",3,"disabled"],[1,"small","text-danger"],[3,"value"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"div",1)(2,"form",2),u.NdJ("ngSubmit",function(){return i.formHandler()}),u.TgZ(3,"div",3)(4,"label",4),u._uU(5,"Title"),u.qZA(),u._UZ(6,"input",5),u.YNc(7,one,2,1,"span",6),u.qZA(),u.TgZ(8,"div",3)(9,"label",7),u._uU(10,"Category"),u.qZA(),u.TgZ(11,"select",8),u.YNc(12,ane,3,4,"option",9),u.qZA(),u.YNc(13,lne,2,1,"span",6),u.qZA(),u.TgZ(14,"div",3)(15,"label",10),u._uU(16,"Image"),u.qZA(),u._UZ(17,"input",11),u.YNc(18,dne,2,1,"span",6),u.qZA(),u.TgZ(19,"div",3)(20,"label",12),u._uU(21,"Price"),u.qZA(),u._UZ(22,"input",13),u.YNc(23,pne,3,2,"span",6),u.qZA(),u.TgZ(24,"div",3)(25,"label",14),u._uU(26,"Stock"),u.qZA(),u._UZ(27,"input",15),u.YNc(28,_ne,3,2,"span",6),u.qZA(),u._UZ(29,"div",16),u.TgZ(30,"button",17),u._uU(31," Edit "),u.qZA()()()()),2&r&&(u.xp6(2),u.Q6J("formGroup",i.productForm),u.xp6(5),u.Q6J("ngIf",!i.productForm.get("title").valid&&i.productForm.get("title").touched),u.xp6(5),u.Q6J("ngForOf",i.list),u.xp6(1),u.Q6J("ngIf",!i.productForm.get("category").valid&&i.productForm.get("category").touched),u.xp6(5),u.Q6J("ngIf",!i.productForm.get("images").valid&&i.productForm.get("images").touched),u.xp6(5),u.Q6J("ngIf",!i.productForm.get("price").valid&&i.productForm.get("price").touched),u.xp6(5),u.Q6J("ngIf",!i.productForm.get("stock").valid&&i.productForm.get("stock").touched),u.xp6(2),u.Q6J("disabled",!i.productForm.valid))},dependencies:[ra,xs,M0,n2,s2,Wp,rC,S0,x0,U_,P0,wr]})}return n})()}]}]},{path:"login",component:mte},{path:"signup",component:Cte}];let vne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[k$.forRoot(yne),k$]})}return n})(),wne=(()=>{class n{constructor(t){this.auth=t,this.title="eCom"}ngOnInit(){this.auth.autoLogin()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(UA))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container-fluid","ps-0","m-0"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0),u._UZ(1,"router-outlet"),u.qZA())},dependencies:[n1]})}return n})(),Ine=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n,bootstrap:[wne]});static#n=this.\u0275inj=u.cJS({imports:[Ac,Su,vne,O7,U8,O8,an,MW,OW,R8,HW,L.hO,N7,P5(()=>k5()),L.hO.initializeApp(HM_firebaseConfig),jm(()=>g(HM_firebaseConfig))]})}return n})();hi().bootstrapModule(Ine).catch(n=>console.error(n))},3061:function(Vt){Vt.exports=function(){"use strict";function je(Q,k){var B=Object.keys(Q);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(Q);k&&(F=F.filter(function(ue){return Object.getOwnPropertyDescriptor(Q,ue).enumerable})),B.push.apply(B,F)}return B}function j(Q){for(var k=1;k<arguments.length;k++){var B=null!=arguments[k]?arguments[k]:{};k%2?je(Object(B),!0).forEach(function(F){ge(Q,F,B[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(B)):je(Object(B)).forEach(function(F){Object.defineProperty(Q,F,Object.getOwnPropertyDescriptor(B,F))})}return Q}function u(Q){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(Q)}function V(Q,k){for(var B=0;B<k.length;B++){var F=k[B];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(Q,st(F.key),F)}}function ge(Q,k,B){return(k=st(k))in Q?Object.defineProperty(Q,k,{value:B,enumerable:!0,configurable:!0,writable:!0}):Q[k]=B,Q}function Ae(Q){return function Ue(Q){if(Array.isArray(Q))return q(Q)}(Q)||function We(Q){if(typeof Symbol<"u"&&null!=Q[Symbol.iterator]||null!=Q["@@iterator"])return Array.from(Q)}(Q)||function De(Q,k){if(Q){if("string"==typeof Q)return q(Q,k);var B=Object.prototype.toString.call(Q).slice(8,-1);if("Object"===B&&Q.constructor&&(B=Q.constructor.name),"Map"===B||"Set"===B)return Array.from(Q);if("Arguments"===B||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return q(Q,k)}}(Q)||function re(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(Q,k){(null==k||k>Q.length)&&(k=Q.length);for(var B=0,F=new Array(k);B<k;B++)F[B]=Q[B];return F}function st(Q){var k=function pe(Q,k){if("object"!=typeof Q||null===Q)return Q;var B=Q[Symbol.toPrimitive];if(void 0!==B){var F=B.call(Q,k||"default");if("object"!=typeof F)return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===k?String:Number)(Q)}(Q,"string");return"symbol"==typeof k?k:String(k)}var Ye=typeof window<"u"&&typeof window.document<"u",mt=Ye?window:{},Qe=!(!Ye||!mt.document.documentElement)&&"ontouchstart"in mt.document.documentElement,vt=!!Ye&&"PointerEvent"in mt,ke="cropper",X="n",Ke="ne",ht="nw",Ht="se",bn="sw",Qn="".concat(ke,"-crop"),tr="".concat(ke,"-disabled"),gn="".concat(ke,"-hidden"),Zn="".concat(ke,"-hide"),Wr="".concat(ke,"-invisible"),_e="".concat(ke,"-modal"),be="".concat(ke,"-move"),Te="".concat(ke,"Action"),ve="".concat(ke,"Preview"),ze="crop",gt="crop",Vn="cropend",Kt="cropmove",Tn="cropstart",Bt="dblclick",Un=vt?"pointerdown":Qe?"touchstart":"mousedown",br=vt?"pointermove":Qe?"touchmove":"mousemove",Ii=vt?"pointerup pointercancel":Qe?"touchend touchcancel":"mouseup",Br="zoom",Ji="image/jpeg",Wt=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Xt=/^data:/,un=/^data:image\/jpeg;base64,/,Sn=/^img|canvas$/i,pn={viewMode:0,dragMode:ze,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Bi=Number.isNaN||mt.isNaN;function Nt(Q){return"number"==typeof Q&&!Bi(Q)}var oi=function(k){return k>0&&k<1/0};function _n(Q){return typeof Q>"u"}function Wn(Q){return"object"===u(Q)&&null!==Q}var es=Object.prototype.hasOwnProperty;function ai(Q){if(!Wn(Q))return!1;try{var k=Q.constructor,B=k.prototype;return k&&B&&es.call(B,"isPrototypeOf")}catch{return!1}}function Hn(Q){return"function"==typeof Q}var Dr=Array.prototype.slice;function Se(Q){return Array.from?Array.from(Q):Dr.call(Q)}function J(Q,k){return Q&&Hn(k)&&(Array.isArray(Q)||Nt(Q.length)?Se(Q).forEach(function(B,F){k.call(Q,B,F,Q)}):Wn(Q)&&Object.keys(Q).forEach(function(B){k.call(Q,Q[B],B,Q)})),Q}var Ie=Object.assign||function(k){for(var B=arguments.length,F=new Array(B>1?B-1:0),ue=1;ue<B;ue++)F[ue-1]=arguments[ue];return Wn(k)&&F.length>0&&F.forEach(function(ie){Wn(ie)&&Object.keys(ie).forEach(function(le){k[le]=ie[le]})}),k},ct=/\.\d*(?:0|9){12}\d*$/;function Ct(Q){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return ct.test(Q)?Math.round(Q*k)/k:Q}var jt=/^width|height|left|top|marginLeft|marginTop$/;function yn(Q,k){var B=Q.style;J(k,function(F,ue){jt.test(ue)&&Nt(F)&&(F="".concat(F,"px")),B[ue]=F})}function W(Q,k){if(k){if(Nt(Q.length))return void J(Q,function(F){W(F,k)});if(Q.classList)return void Q.classList.add(k);var B=Q.className.trim();B?B.indexOf(k)<0&&(Q.className="".concat(B," ").concat(k)):Q.className=k}}function z(Q,k){if(k){if(Nt(Q.length))return void J(Q,function(B){z(B,k)});if(Q.classList)return void Q.classList.remove(k);Q.className.indexOf(k)>=0&&(Q.className=Q.className.replace(k,""))}}function H(Q,k,B){if(k){if(Nt(Q.length))return void J(Q,function(F){H(F,k,B)});B?W(Q,k):z(Q,k)}}var U=/([a-z\d])([A-Z])/g;function de(Q){return Q.replace(U,"$1-$2").toLowerCase()}function Ze(Q,k){return Wn(Q[k])?Q[k]:Q.dataset?Q.dataset[k]:Q.getAttribute("data-".concat(de(k)))}function _t(Q,k,B){Wn(B)?Q[k]=B:Q.dataset?Q.dataset[k]=B:Q.setAttribute("data-".concat(de(k)),B)}var At=/\s\s*/,$n=function(){var Q=!1;if(Ye){var k=!1,B=function(){},F=Object.defineProperty({},"once",{get:function(){return Q=!0,k},set:function(ie){k=ie}});mt.addEventListener("test",B,F),mt.removeEventListener("test",B,F)}return Q}();function Zt(Q,k,B){var F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},ue=B;k.trim().split(At).forEach(function(ie){if(!$n){var le=Q.listeners;le&&le[ie]&&le[ie][B]&&(ue=le[ie][B],delete le[ie][B],0===Object.keys(le[ie]).length&&delete le[ie],0===Object.keys(le).length&&delete Q.listeners)}Q.removeEventListener(ie,ue,F)})}function wn(Q,k,B){var F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},ue=B;k.trim().split(At).forEach(function(ie){if(F.once&&!$n){var le=Q.listeners,Be=void 0===le?{}:le;ue=function(){delete Be[ie][B],Q.removeEventListener(ie,ue,F);for(var et=arguments.length,Oe=new Array(et),He=0;He<et;He++)Oe[He]=arguments[He];B.apply(Q,Oe)},Be[ie]||(Be[ie]={}),Be[ie][B]&&Q.removeEventListener(ie,Be[ie][B],F),Be[ie][B]=ue,Q.listeners=Be}Q.addEventListener(ie,ue,F)})}function dn(Q,k,B){var F;return Hn(Event)&&Hn(CustomEvent)?F=new CustomEvent(k,{detail:B,bubbles:!0,cancelable:!0}):(F=document.createEvent("CustomEvent")).initCustomEvent(k,!0,!0,B),Q.dispatchEvent(F)}function Mi(Q){var k=Q.getBoundingClientRect();return{left:k.left+(window.pageXOffset-document.documentElement.clientLeft),top:k.top+(window.pageYOffset-document.documentElement.clientTop)}}var po=mt.location,mo=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Cs(Q){var k=Q.match(mo);return null!==k&&(k[1]!==po.protocol||k[2]!==po.hostname||k[3]!==po.port)}function As(Q){var k="timestamp=".concat((new Date).getTime());return Q+(-1===Q.indexOf("?")?"?":"&")+k}function Ei(Q){var k=Q.rotate,B=Q.scaleX,F=Q.scaleY,ue=Q.translateX,ie=Q.translateY,le=[];Nt(ue)&&0!==ue&&le.push("translateX(".concat(ue,"px)")),Nt(ie)&&0!==ie&&le.push("translateY(".concat(ie,"px)")),Nt(k)&&0!==k&&le.push("rotate(".concat(k,"deg)")),Nt(B)&&1!==B&&le.push("scaleX(".concat(B,")")),Nt(F)&&1!==F&&le.push("scaleY(".concat(F,")"));var Be=le.length?le.join(" "):"none";return{WebkitTransform:Be,msTransform:Be,transform:Be}}function Ds(Q,k){var B=Q.pageX,F=Q.pageY,ue={endX:B,endY:F};return k?ue:j({startX:B,startY:F},ue)}function Ss(Q){var k=Q.aspectRatio,B=Q.height,F=Q.width,ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",ie=oi(F),le=oi(B);if(ie&&le){var Be=B*k;"contain"===ue&&Be>F||"cover"===ue&&Be<F?B=F/k:F=B*k}else ie?B=F/k:le&&(F=B*k);return{width:F,height:B}}var ta=String.fromCharCode;var sl=/^data:.*,/;function na(Q){var B,k=new DataView(Q);try{var F,ue,ie;if(255===k.getUint8(0)&&216===k.getUint8(1))for(var le=k.byteLength,Be=2;Be+1<le;){if(255===k.getUint8(Be)&&225===k.getUint8(Be+1)){ue=Be;break}Be+=1}if(ue){var et=ue+10;if("Exif"===function Sa(Q,k,B){var F="";B+=k;for(var ue=k;ue<B;ue+=1)F+=ta(Q.getUint8(ue));return F}(k,ue+4,4)){var Oe=k.getUint16(et);if(((F=18761===Oe)||19789===Oe)&&42===k.getUint16(et+2,F)){var He=k.getUint32(et+4,F);He>=8&&(ie=et+He)}}}if(ie){var Mn,Cn,ut=k.getUint16(ie,F);for(Cn=0;Cn<ut;Cn+=1)if(274===k.getUint16(Mn=ie+12*Cn+2,F)){B=k.getUint16(Mn+=8,F),k.setUint16(Mn,1,F);break}}}catch{B=1}return B}var ra={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var k=this.element,B=this.options,F=this.container,ue=this.cropper,ie=Number(B.minContainerWidth),le=Number(B.minContainerHeight);W(ue,gn),z(k,gn);var Be={width:Math.max(F.offsetWidth,ie>=0?ie:200),height:Math.max(F.offsetHeight,le>=0?le:100)};this.containerData=Be,yn(ue,{width:Be.width,height:Be.height}),W(k,gn),z(ue,gn)},initCanvas:function(){var k=this.containerData,B=this.imageData,F=this.options.viewMode,ue=Math.abs(B.rotate)%180==90,ie=ue?B.naturalHeight:B.naturalWidth,le=ue?B.naturalWidth:B.naturalHeight,Be=ie/le,it=k.width,et=k.height;k.height*Be>k.width?3===F?it=k.height*Be:et=k.width/Be:3===F?et=k.width/Be:it=k.height*Be;var Oe={aspectRatio:Be,naturalWidth:ie,naturalHeight:le,width:it,height:et};this.canvasData=Oe,this.limited=1===F||2===F,this.limitCanvas(!0,!0),Oe.width=Math.min(Math.max(Oe.width,Oe.minWidth),Oe.maxWidth),Oe.height=Math.min(Math.max(Oe.height,Oe.minHeight),Oe.maxHeight),Oe.left=(k.width-Oe.width)/2,Oe.top=(k.height-Oe.height)/2,Oe.oldLeft=Oe.left,Oe.oldTop=Oe.top,this.initialCanvasData=Ie({},Oe)},limitCanvas:function(k,B){var F=this.options,ue=this.containerData,ie=this.canvasData,le=this.cropBoxData,Be=F.viewMode,it=ie.aspectRatio,et=this.cropped&&le;if(k){var Oe=Number(F.minCanvasWidth)||0,He=Number(F.minCanvasHeight)||0;Be>1?(Oe=Math.max(Oe,ue.width),He=Math.max(He,ue.height),3===Be&&(He*it>Oe?Oe=He*it:He=Oe/it)):Be>0&&(Oe?Oe=Math.max(Oe,et?le.width:0):He?He=Math.max(He,et?le.height:0):et&&((He=le.height)*it>(Oe=le.width)?Oe=He*it:He=Oe/it));var ut=Ss({aspectRatio:it,width:Oe,height:He});He=ut.height,ie.minWidth=Oe=ut.width,ie.minHeight=He,ie.maxWidth=1/0,ie.maxHeight=1/0}if(B)if(Be>(et?0:1)){var Mn=ue.width-ie.width,Cn=ue.height-ie.height;ie.minLeft=Math.min(0,Mn),ie.minTop=Math.min(0,Cn),ie.maxLeft=Math.max(0,Mn),ie.maxTop=Math.max(0,Cn),et&&this.limited&&(ie.minLeft=Math.min(le.left,le.left+(le.width-ie.width)),ie.minTop=Math.min(le.top,le.top+(le.height-ie.height)),ie.maxLeft=le.left,ie.maxTop=le.top,2===Be&&(ie.width>=ue.width&&(ie.minLeft=Math.min(0,Mn),ie.maxLeft=Math.max(0,Mn)),ie.height>=ue.height&&(ie.minTop=Math.min(0,Cn),ie.maxTop=Math.max(0,Cn))))}else ie.minLeft=-ie.width,ie.minTop=-ie.height,ie.maxLeft=ue.width,ie.maxTop=ue.height},renderCanvas:function(k,B){var F=this.canvasData,ue=this.imageData;if(B){var ie=function vc(Q){var k=Q.width,B=Q.height,F=Q.degree;if(90==(F=Math.abs(F)%180))return{width:B,height:k};var ue=F%90*Math.PI/180,ie=Math.sin(ue),le=Math.cos(ue),Be=k*le+B*ie,it=k*ie+B*le;return F>90?{width:it,height:Be}:{width:Be,height:it}}({width:ue.naturalWidth*Math.abs(ue.scaleX||1),height:ue.naturalHeight*Math.abs(ue.scaleY||1),degree:ue.rotate||0}),le=ie.width,Be=ie.height,it=F.width*(le/F.naturalWidth),et=F.height*(Be/F.naturalHeight);F.left-=(it-F.width)/2,F.top-=(et-F.height)/2,F.width=it,F.height=et,F.aspectRatio=le/Be,F.naturalWidth=le,F.naturalHeight=Be,this.limitCanvas(!0,!1)}(F.width>F.maxWidth||F.width<F.minWidth)&&(F.left=F.oldLeft),(F.height>F.maxHeight||F.height<F.minHeight)&&(F.top=F.oldTop),F.width=Math.min(Math.max(F.width,F.minWidth),F.maxWidth),F.height=Math.min(Math.max(F.height,F.minHeight),F.maxHeight),this.limitCanvas(!1,!0),F.left=Math.min(Math.max(F.left,F.minLeft),F.maxLeft),F.top=Math.min(Math.max(F.top,F.minTop),F.maxTop),F.oldLeft=F.left,F.oldTop=F.top,yn(this.canvas,Ie({width:F.width,height:F.height},Ei({translateX:F.left,translateY:F.top}))),this.renderImage(k),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(k){var B=this.canvasData,F=this.imageData,ue=F.naturalWidth*(B.width/B.naturalWidth),ie=F.naturalHeight*(B.height/B.naturalHeight);Ie(F,{width:ue,height:ie,left:(B.width-ue)/2,top:(B.height-ie)/2}),yn(this.image,Ie({width:F.width,height:F.height},Ei(Ie({translateX:F.left,translateY:F.top},F)))),k&&this.output()},initCropBox:function(){var k=this.options,B=this.canvasData,F=k.aspectRatio||k.initialAspectRatio,ue=Number(k.autoCropArea)||.8,ie={width:B.width,height:B.height};F&&(B.height*F>B.width?ie.height=ie.width/F:ie.width=ie.height*F),this.cropBoxData=ie,this.limitCropBox(!0,!0),ie.width=Math.min(Math.max(ie.width,ie.minWidth),ie.maxWidth),ie.height=Math.min(Math.max(ie.height,ie.minHeight),ie.maxHeight),ie.width=Math.max(ie.minWidth,ie.width*ue),ie.height=Math.max(ie.minHeight,ie.height*ue),ie.left=B.left+(B.width-ie.width)/2,ie.top=B.top+(B.height-ie.height)/2,ie.oldLeft=ie.left,ie.oldTop=ie.top,this.initialCropBoxData=Ie({},ie)},limitCropBox:function(k,B){var F=this.options,ue=this.containerData,ie=this.canvasData,le=this.cropBoxData,Be=this.limited,it=F.aspectRatio;if(k){var et=Number(F.minCropBoxWidth)||0,Oe=Number(F.minCropBoxHeight)||0,He=Be?Math.min(ue.width,ie.width,ie.width+ie.left,ue.width-ie.left):ue.width,ut=Be?Math.min(ue.height,ie.height,ie.height+ie.top,ue.height-ie.top):ue.height;et=Math.min(et,ue.width),Oe=Math.min(Oe,ue.height),it&&(et&&Oe?Oe*it>et?Oe=et/it:et=Oe*it:et?Oe=et/it:Oe&&(et=Oe*it),ut*it>He?ut=He/it:He=ut*it),le.minWidth=Math.min(et,He),le.minHeight=Math.min(Oe,ut),le.maxWidth=He,le.maxHeight=ut}B&&(Be?(le.minLeft=Math.max(0,ie.left),le.minTop=Math.max(0,ie.top),le.maxLeft=Math.min(ue.width,ie.left+ie.width)-le.width,le.maxTop=Math.min(ue.height,ie.top+ie.height)-le.height):(le.minLeft=0,le.minTop=0,le.maxLeft=ue.width-le.width,le.maxTop=ue.height-le.height))},renderCropBox:function(){var k=this.options,B=this.containerData,F=this.cropBoxData;(F.width>F.maxWidth||F.width<F.minWidth)&&(F.left=F.oldLeft),(F.height>F.maxHeight||F.height<F.minHeight)&&(F.top=F.oldTop),F.width=Math.min(Math.max(F.width,F.minWidth),F.maxWidth),F.height=Math.min(Math.max(F.height,F.minHeight),F.maxHeight),this.limitCropBox(!1,!0),F.left=Math.min(Math.max(F.left,F.minLeft),F.maxLeft),F.top=Math.min(Math.max(F.top,F.minTop),F.maxTop),F.oldLeft=F.left,F.oldTop=F.top,k.movable&&k.cropBoxMovable&&_t(this.face,Te,F.width>=B.width&&F.height>=B.height?"move":"all"),yn(this.cropBox,Ie({width:F.width,height:F.height},Ei({translateX:F.left,translateY:F.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),dn(this.element,gt,this.getData())}},Sr={initPreview:function(){var k=this.element,B=this.crossOrigin,F=this.options.preview,ue=B?this.crossOriginUrl:this.url,ie=k.alt||"The image to preview",le=document.createElement("img");if(B&&(le.crossOrigin=B),le.src=ue,le.alt=ie,this.viewBox.appendChild(le),this.viewBoxImage=le,F){var Be=F;"string"==typeof F?Be=k.ownerDocument.querySelectorAll(F):F.querySelector&&(Be=[F]),this.previews=Be,J(Be,function(it){var et=document.createElement("img");_t(it,ve,{width:it.offsetWidth,height:it.offsetHeight,html:it.innerHTML}),B&&(et.crossOrigin=B),et.src=ue,et.alt=ie,et.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',it.innerHTML="",it.appendChild(et)})}},resetPreview:function(){J(this.previews,function(k){var B=Ze(k,ve);yn(k,{width:B.width,height:B.height}),k.innerHTML=B.html,function cn(Q,k){if(Wn(Q[k]))try{delete Q[k]}catch{Q[k]=void 0}else if(Q.dataset)try{delete Q.dataset[k]}catch{Q.dataset[k]=void 0}else Q.removeAttribute("data-".concat(de(k)))}(k,ve)})},preview:function(){var k=this.imageData,B=this.canvasData,F=this.cropBoxData,ue=F.width,ie=F.height,le=k.width,Be=k.height,it=F.left-B.left-k.left,et=F.top-B.top-k.top;!this.cropped||this.disabled||(yn(this.viewBoxImage,Ie({width:le,height:Be},Ei(Ie({translateX:-it,translateY:-et},k)))),J(this.previews,function(Oe){var He=Ze(Oe,ve),ut=He.width,Mn=He.height,Cn=ut,ar=Mn,Nn=1;ue&&(ar=ie*(Nn=ut/ue)),ie&&ar>Mn&&(Cn=ue*(Nn=Mn/ie),ar=Mn),yn(Oe,{width:Cn,height:ar}),yn(Oe.getElementsByTagName("img")[0],Ie({width:le*Nn,height:Be*Nn},Ei(Ie({translateX:-it*Nn,translateY:-et*Nn},k))))}))}},Wh={bind:function(){var k=this.element,B=this.options,F=this.cropper;Hn(B.cropstart)&&wn(k,Tn,B.cropstart),Hn(B.cropmove)&&wn(k,Kt,B.cropmove),Hn(B.cropend)&&wn(k,Vn,B.cropend),Hn(B.crop)&&wn(k,gt,B.crop),Hn(B.zoom)&&wn(k,Br,B.zoom),wn(F,Un,this.onCropStart=this.cropStart.bind(this)),B.zoomable&&B.zoomOnWheel&&wn(F,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),B.toggleDragModeOnDblclick&&wn(F,Bt,this.onDblclick=this.dblclick.bind(this)),wn(k.ownerDocument,br,this.onCropMove=this.cropMove.bind(this)),wn(k.ownerDocument,Ii,this.onCropEnd=this.cropEnd.bind(this)),B.responsive&&wn(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var k=this.element,B=this.options,F=this.cropper;Hn(B.cropstart)&&Zt(k,Tn,B.cropstart),Hn(B.cropmove)&&Zt(k,Kt,B.cropmove),Hn(B.cropend)&&Zt(k,Vn,B.cropend),Hn(B.crop)&&Zt(k,gt,B.crop),Hn(B.zoom)&&Zt(k,Br,B.zoom),Zt(F,Un,this.onCropStart),B.zoomable&&B.zoomOnWheel&&Zt(F,"wheel",this.onWheel,{passive:!1,capture:!0}),B.toggleDragModeOnDblclick&&Zt(F,Bt,this.onDblclick),Zt(k.ownerDocument,br,this.onCropMove),Zt(k.ownerDocument,Ii,this.onCropEnd),B.responsive&&Zt(window,"resize",this.onResize)}},xs={resize:function(){if(!this.disabled){var Be,it,k=this.options,B=this.container,F=this.containerData,ue=B.offsetWidth/F.width,ie=B.offsetHeight/F.height,le=Math.abs(ue-1)>Math.abs(ie-1)?ue:ie;1!==le&&(k.restore&&(Be=this.getCanvasData(),it=this.getCropBoxData()),this.render(),k.restore&&(this.setCanvasData(J(Be,function(et,Oe){Be[Oe]=et*le})),this.setCropBoxData(J(it,function(et,Oe){it[Oe]=et*le}))))}},dblclick:function(){this.disabled||"none"===this.options.dragMode||this.setDragMode(function ee(Q,k){return Q.classList?Q.classList.contains(k):Q.className.indexOf(k)>-1}(this.dragBox,Qn)?"move":ze)},wheel:function(k){var B=this,F=Number(this.options.wheelZoomRatio)||.1,ue=1;this.disabled||(k.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){B.wheeling=!1},50),k.deltaY?ue=k.deltaY>0?1:-1:k.wheelDelta?ue=-k.wheelDelta/120:k.detail&&(ue=k.detail>0?1:-1),this.zoom(-ue*F,k)))},cropStart:function(k){var B=k.buttons,F=k.button;if(!(this.disabled||("mousedown"===k.type||"pointerdown"===k.type&&"mouse"===k.pointerType)&&(Nt(B)&&1!==B||Nt(F)&&0!==F||k.ctrlKey))){var le,ue=this.options,ie=this.pointers;k.changedTouches?J(k.changedTouches,function(Be){ie[Be.identifier]=Ds(Be)}):ie[k.pointerId||0]=Ds(k),le=Object.keys(ie).length>1&&ue.zoomable&&ue.zoomOnTouch?"zoom":Ze(k.target,Te),Wt.test(le)&&!1!==dn(this.element,Tn,{originalEvent:k,action:le})&&(k.preventDefault(),this.action=le,this.cropping=!1,"crop"===le&&(this.cropping=!0,W(this.dragBox,_e)))}},cropMove:function(k){var B=this.action;if(!this.disabled&&B){var F=this.pointers;k.preventDefault(),!1!==dn(this.element,Kt,{originalEvent:k,action:B})&&(k.changedTouches?J(k.changedTouches,function(ue){Ie(F[ue.identifier]||{},Ds(ue,!0))}):Ie(F[k.pointerId||0]||{},Ds(k,!0)),this.change(k))}},cropEnd:function(k){if(!this.disabled){var B=this.action,F=this.pointers;k.changedTouches?J(k.changedTouches,function(ue){delete F[ue.identifier]}):delete F[k.pointerId||0],B&&(k.preventDefault(),Object.keys(F).length||(this.action=""),this.cropping&&(this.cropping=!1,H(this.dragBox,_e,this.cropped&&this.options.modal)),dn(this.element,Vn,{originalEvent:k,action:B}))}}},Kh={change:function(k){var mr,F=this.canvasData,ue=this.containerData,ie=this.cropBoxData,le=this.pointers,Be=this.action,it=this.options.aspectRatio,et=ie.left,Oe=ie.top,He=ie.width,ut=ie.height,Mn=et+He,Cn=Oe+ut,ar=0,Nn=0,wr=ue.width,en=ue.height,An=!0;!it&&k.shiftKey&&(it=He&&ut?He/ut:1),this.limited&&(Nn=ie.minTop,wr=(ar=ie.minLeft)+Math.min(ue.width,F.width,F.left+F.width),en=Nn+Math.min(ue.height,F.height,F.top+F.height));var Kr=le[Object.keys(le)[0]],ot={x:Kr.endX-Kr.startX,y:Kr.endY-Kr.startY},Yn=function(Zr){switch(Zr){case"e":Mn+ot.x>wr&&(ot.x=wr-Mn);break;case"w":et+ot.x<ar&&(ot.x=ar-et);break;case X:Oe+ot.y<Nn&&(ot.y=Nn-Oe);break;case"s":Cn+ot.y>en&&(ot.y=en-Cn)}};switch(Be){case"all":et+=ot.x,Oe+=ot.y;break;case"e":if(ot.x>=0&&(Mn>=wr||it&&(Oe<=Nn||Cn>=en))){An=!1;break}Yn("e"),(He+=ot.x)<0&&(Be="w",et-=He=-He),it&&(Oe+=(ie.height-(ut=He/it))/2);break;case X:if(ot.y<=0&&(Oe<=Nn||it&&(et<=ar||Mn>=wr))){An=!1;break}Yn(X),Oe+=ot.y,(ut-=ot.y)<0&&(Be="s",Oe-=ut=-ut),it&&(et+=(ie.width-(He=ut*it))/2);break;case"w":if(ot.x<=0&&(et<=ar||it&&(Oe<=Nn||Cn>=en))){An=!1;break}Yn("w"),et+=ot.x,(He-=ot.x)<0&&(Be="e",et-=He=-He),it&&(Oe+=(ie.height-(ut=He/it))/2);break;case"s":if(ot.y>=0&&(Cn>=en||it&&(et<=ar||Mn>=wr))){An=!1;break}Yn("s"),(ut+=ot.y)<0&&(Be=X,Oe-=ut=-ut),it&&(et+=(ie.width-(He=ut*it))/2);break;case Ke:if(it){if(ot.y<=0&&(Oe<=Nn||Mn>=wr)){An=!1;break}Yn(X),Oe+=ot.y,He=(ut-=ot.y)*it}else Yn(X),Yn("e"),ot.x>=0?Mn<wr?He+=ot.x:ot.y<=0&&Oe<=Nn&&(An=!1):He+=ot.x,ot.y<=0?Oe>Nn&&(ut-=ot.y,Oe+=ot.y):(ut-=ot.y,Oe+=ot.y);He<0&&ut<0?(Be=bn,Oe-=ut=-ut,et-=He=-He):He<0?(Be=ht,et-=He=-He):ut<0&&(Be=Ht,Oe-=ut=-ut);break;case ht:if(it){if(ot.y<=0&&(Oe<=Nn||et<=ar)){An=!1;break}Yn(X),Oe+=ot.y,et+=ie.width-(He=(ut-=ot.y)*it)}else Yn(X),Yn("w"),ot.x<=0?et>ar?(He-=ot.x,et+=ot.x):ot.y<=0&&Oe<=Nn&&(An=!1):(He-=ot.x,et+=ot.x),ot.y<=0?Oe>Nn&&(ut-=ot.y,Oe+=ot.y):(ut-=ot.y,Oe+=ot.y);He<0&&ut<0?(Be=Ht,Oe-=ut=-ut,et-=He=-He):He<0?(Be=Ke,et-=He=-He):ut<0&&(Be=bn,Oe-=ut=-ut);break;case bn:if(it){if(ot.x<=0&&(et<=ar||Cn>=en)){An=!1;break}Yn("w"),et+=ot.x,ut=(He-=ot.x)/it}else Yn("s"),Yn("w"),ot.x<=0?et>ar?(He-=ot.x,et+=ot.x):ot.y>=0&&Cn>=en&&(An=!1):(He-=ot.x,et+=ot.x),ot.y>=0?Cn<en&&(ut+=ot.y):ut+=ot.y;He<0&&ut<0?(Be=Ke,Oe-=ut=-ut,et-=He=-He):He<0?(Be=Ht,et-=He=-He):ut<0&&(Be=ht,Oe-=ut=-ut);break;case Ht:if(it){if(ot.x>=0&&(Mn>=wr||Cn>=en)){An=!1;break}Yn("e"),ut=(He+=ot.x)/it}else Yn("s"),Yn("e"),ot.x>=0?Mn<wr?He+=ot.x:ot.y>=0&&Cn>=en&&(An=!1):He+=ot.x,ot.y>=0?Cn<en&&(ut+=ot.y):ut+=ot.y;He<0&&ut<0?(Be=ht,Oe-=ut=-ut,et-=He=-He):He<0?(Be=bn,et-=He=-He):ut<0&&(Be=Ke,Oe-=ut=-ut);break;case"move":this.move(ot.x,ot.y),An=!1;break;case"zoom":this.zoom(function On(Q){var k=j({},Q),B=0;return J(Q,function(F,ue){delete k[ue],J(k,function(ie){var le=Math.abs(F.startX-ie.startX),Be=Math.abs(F.startY-ie.startY),it=Math.abs(F.endX-ie.endX),et=Math.abs(F.endY-ie.endY),Oe=Math.sqrt(le*le+Be*Be),ut=(Math.sqrt(it*it+et*et)-Oe)/Oe;Math.abs(ut)>Math.abs(B)&&(B=ut)})}),B}(le),k),An=!1;break;case"crop":if(!ot.x||!ot.y){An=!1;break}mr=Mi(this.cropper),et=Kr.startX-mr.left,Oe=Kr.startY-mr.top,He=ie.minWidth,ut=ie.minHeight,ot.x>0?Be=ot.y>0?Ht:Ke:ot.x<0&&(et-=He,Be=ot.y>0?bn:ht),ot.y<0&&(Oe-=ut),this.cropped||(z(this.cropBox,gn),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}An&&(ie.width=He,ie.height=ut,ie.left=et,ie.top=Oe,this.action=Be,this.renderCropBox()),J(le,function(Mr){Mr.startX=Mr.endX,Mr.startY=Mr.endY})}},Zl={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&W(this.dragBox,_e),z(this.cropBox,gn),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Ie({},this.initialImageData),this.canvasData=Ie({},this.initialCanvasData),this.cropBoxData=Ie({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Ie(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),z(this.dragBox,_e),W(this.cropBox,gn)),this},replace:function(k){var B=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&k&&(this.isImg&&(this.element.src=k),B?(this.url=k,this.image.src=k,this.ready&&(this.viewBoxImage.src=k,J(this.previews,function(F){F.getElementsByTagName("img")[0].src=k}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(k))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,z(this.cropper,tr)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,W(this.cropper,tr)),this},destroy:function(){var k=this.element;return k[ke]?(k[ke]=void 0,this.isImg&&this.replaced&&(k.src=this.originalUrl),this.uncreate(),this):this},move:function(k){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,F=this.canvasData,ue=F.left,ie=F.top;return this.moveTo(_n(k)?k:ue+Number(k),_n(B)?B:ie+Number(B))},moveTo:function(k){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,F=this.canvasData,ue=!1;return k=Number(k),B=Number(B),this.ready&&!this.disabled&&this.options.movable&&(Nt(k)&&(F.left=k,ue=!0),Nt(B)&&(F.top=B,ue=!0),ue&&this.renderCanvas(!0)),this},zoom:function(k,B){var F=this.canvasData;return k=Number(k),this.zoomTo(F.width*(k=k<0?1/(1-k):1+k)/F.naturalWidth,null,B)},zoomTo:function(k,B,F){var ue=this.options,ie=this.canvasData,le=ie.width,Be=ie.height,it=ie.naturalWidth,et=ie.naturalHeight;if((k=Number(k))>=0&&this.ready&&!this.disabled&&ue.zoomable){var Oe=it*k,He=et*k;if(!1===dn(this.element,Br,{ratio:k,oldRatio:le/it,originalEvent:F}))return this;if(F){var ut=this.pointers,Mn=Mi(this.cropper),Cn=ut&&Object.keys(ut).length?function Da(Q){var k=0,B=0,F=0;return J(Q,function(ue){k+=ue.startX,B+=ue.startY,F+=1}),{pageX:k/=F,pageY:B/=F}}(ut):{pageX:F.pageX,pageY:F.pageY};ie.left-=(Cn.pageX-Mn.left-ie.left)/le*(Oe-le),ie.top-=(Cn.pageY-Mn.top-ie.top)/Be*(He-Be)}else ai(B)&&Nt(B.x)&&Nt(B.y)?(ie.left-=(B.x-ie.left)/le*(Oe-le),ie.top-=(B.y-ie.top)/Be*(He-Be)):(ie.left-=(Oe-le)/2,ie.top-=(He-Be)/2);ie.width=Oe,ie.height=He,this.renderCanvas(!0)}return this},rotate:function(k){return this.rotateTo((this.imageData.rotate||0)+Number(k))},rotateTo:function(k){return Nt(k=Number(k))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=k%360,this.renderCanvas(!0,!0)),this},scaleX:function(k){var B=this.imageData.scaleY;return this.scale(k,Nt(B)?B:1)},scaleY:function(k){var B=this.imageData.scaleX;return this.scale(Nt(B)?B:1,k)},scale:function(k){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,F=this.imageData,ue=!1;return k=Number(k),B=Number(B),this.ready&&!this.disabled&&this.options.scalable&&(Nt(k)&&(F.scaleX=k,ue=!0),Nt(B)&&(F.scaleY=B,ue=!0),ue&&this.renderCanvas(!0,!0)),this},getData:function(){var le,k=arguments.length>0&&void 0!==arguments[0]&&arguments[0],B=this.options,F=this.imageData,ue=this.canvasData,ie=this.cropBoxData;if(this.ready&&this.cropped){var Be=F.width/F.naturalWidth;if(J(le={x:ie.left-ue.left,y:ie.top-ue.top,width:ie.width,height:ie.height},function(Oe,He){le[He]=Oe/Be}),k){var it=Math.round(le.y+le.height),et=Math.round(le.x+le.width);le.x=Math.round(le.x),le.y=Math.round(le.y),le.width=et-le.x,le.height=it-le.y}}else le={x:0,y:0,width:0,height:0};return B.rotatable&&(le.rotate=F.rotate||0),B.scalable&&(le.scaleX=F.scaleX||1,le.scaleY=F.scaleY||1),le},setData:function(k){var B=this.options,F=this.imageData,ue=this.canvasData,ie={};if(this.ready&&!this.disabled&&ai(k)){var le=!1;B.rotatable&&Nt(k.rotate)&&k.rotate!==F.rotate&&(F.rotate=k.rotate,le=!0),B.scalable&&(Nt(k.scaleX)&&k.scaleX!==F.scaleX&&(F.scaleX=k.scaleX,le=!0),Nt(k.scaleY)&&k.scaleY!==F.scaleY&&(F.scaleY=k.scaleY,le=!0)),le&&this.renderCanvas(!0,!0);var Be=F.width/F.naturalWidth;Nt(k.x)&&(ie.left=k.x*Be+ue.left),Nt(k.y)&&(ie.top=k.y*Be+ue.top),Nt(k.width)&&(ie.width=k.width*Be),Nt(k.height)&&(ie.height=k.height*Be),this.setCropBoxData(ie)}return this},getContainerData:function(){return this.ready?Ie({},this.containerData):{}},getImageData:function(){return this.sized?Ie({},this.imageData):{}},getCanvasData:function(){var k=this.canvasData,B={};return this.ready&&J(["left","top","width","height","naturalWidth","naturalHeight"],function(F){B[F]=k[F]}),B},setCanvasData:function(k){var B=this.canvasData,F=B.aspectRatio;return this.ready&&!this.disabled&&ai(k)&&(Nt(k.left)&&(B.left=k.left),Nt(k.top)&&(B.top=k.top),Nt(k.width)?(B.width=k.width,B.height=k.width/F):Nt(k.height)&&(B.height=k.height,B.width=k.height*F),this.renderCanvas(!0)),this},getCropBoxData:function(){var B,k=this.cropBoxData;return this.ready&&this.cropped&&(B={left:k.left,top:k.top,width:k.width,height:k.height}),B||{}},setCropBoxData:function(k){var ue,ie,B=this.cropBoxData,F=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ai(k)&&(Nt(k.left)&&(B.left=k.left),Nt(k.top)&&(B.top=k.top),Nt(k.width)&&k.width!==B.width&&(ue=!0,B.width=k.width),Nt(k.height)&&k.height!==B.height&&(ie=!0,B.height=k.height),F&&(ue?B.height=B.width/F:ie&&(B.width=B.height*F)),this.renderCropBox()),this},getCroppedCanvas:function(){var k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var B=this.canvasData,F=function go(Q,k,B,F){var ue=k.aspectRatio,ie=k.naturalWidth,le=k.naturalHeight,Be=k.rotate,it=void 0===Be?0:Be,et=k.scaleX,Oe=void 0===et?1:et,He=k.scaleY,ut=void 0===He?1:He,Mn=B.aspectRatio,Cn=B.naturalWidth,ar=B.naturalHeight,Nn=F.fillColor,wr=void 0===Nn?"transparent":Nn,en=F.imageSmoothingEnabled,An=void 0===en||en,mr=F.imageSmoothingQuality,Kr=void 0===mr?"low":mr,ot=F.maxWidth,Yn=void 0===ot?1/0:ot,Mr=F.maxHeight,Zr=void 0===Mr?1/0:Mr,bi=F.minWidth,ds=void 0===bi?0:bi,nr=F.minHeight,yt=void 0===nr?0:nr,rn=document.createElement("canvas"),In=rn.getContext("2d"),jr=Ss({aspectRatio:Mn,width:Yn,height:Zr}),hs=Ss({aspectRatio:Mn,width:ds,height:yt},"cover"),ci=Math.min(jr.width,Math.max(hs.width,Cn)),yo=Math.min(jr.height,Math.max(hs.height,ar)),ur=Ss({aspectRatio:ue,width:Yn,height:Zr}),Js=Ss({aspectRatio:ue,width:ds,height:yt},"cover"),vo=Math.min(ur.width,Math.max(Js.width,ie)),Yt=Math.min(ur.height,Math.max(Js.height,le)),Rs=[-vo/2,-Yt/2,vo,Yt];return rn.width=Ct(ci),rn.height=Ct(yo),In.fillStyle=wr,In.fillRect(0,0,ci,yo),In.save(),In.translate(ci/2,yo/2),In.rotate(it*Math.PI/180),In.scale(Oe,ut),In.imageSmoothingEnabled=An,In.imageSmoothingQuality=Kr,In.drawImage.apply(In,[Q].concat(Ae(Rs.map(function(Yl){return Math.floor(Ct(Yl))})))),In.restore(),rn}(this.image,this.imageData,B,k);if(!this.cropped)return F;var ue=this.getData(k.rounded),ie=ue.x,le=ue.y,Be=ue.width,it=ue.height,et=F.width/Math.floor(B.naturalWidth);1!==et&&(ie*=et,le*=et,Be*=et,it*=et);var Oe=Be/it,He=Ss({aspectRatio:Oe,width:k.maxWidth||1/0,height:k.maxHeight||1/0}),ut=Ss({aspectRatio:Oe,width:k.minWidth||0,height:k.minHeight||0},"cover"),Mn=Ss({aspectRatio:Oe,width:k.width||(1!==et?F.width:Be),height:k.height||(1!==et?F.height:it)}),Cn=Mn.width,ar=Mn.height;Cn=Math.min(He.width,Math.max(ut.width,Cn)),ar=Math.min(He.height,Math.max(ut.height,ar));var Nn=document.createElement("canvas"),wr=Nn.getContext("2d");Nn.width=Ct(Cn),Nn.height=Ct(ar),wr.fillStyle=k.fillColor||"transparent",wr.fillRect(0,0,Cn,ar);var en=k.imageSmoothingEnabled,mr=k.imageSmoothingQuality;wr.imageSmoothingEnabled=void 0===en||en,mr&&(wr.imageSmoothingQuality=mr);var Zr,bi,ds,nr,yt,rn,Kr=F.width,ot=F.height,Yn=ie,Mr=le;Yn<=-Be||Yn>Kr?(Yn=0,Zr=0,ds=0,yt=0):Yn<=0?(ds=-Yn,Yn=0,yt=Zr=Math.min(Kr,Be+Yn)):Yn<=Kr&&(ds=0,yt=Zr=Math.min(Be,Kr-Yn)),Zr<=0||Mr<=-it||Mr>ot?(Mr=0,bi=0,nr=0,rn=0):Mr<=0?(nr=-Mr,Mr=0,rn=bi=Math.min(ot,it+Mr)):Mr<=ot&&(nr=0,rn=bi=Math.min(it,ot-Mr));var In=[Yn,Mr,Zr,bi];if(yt>0&&rn>0){var jr=Cn/Be;In.push(ds*jr,nr*jr,yt*jr,rn*jr)}return wr.drawImage.apply(wr,[F].concat(Ae(In.map(function(hs){return Math.floor(Ct(hs))})))),Nn},setAspectRatio:function(k){var B=this.options;return!this.disabled&&!_n(k)&&(B.aspectRatio=Math.max(0,k)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(k){var B=this.options,F=this.dragBox,ue=this.face;if(this.ready&&!this.disabled){var ie=k===ze,le=B.movable&&"move"===k;B.dragMode=k=ie||le?k:"none",_t(F,Te,k),H(F,Qn,ie),H(F,be,le),B.cropBoxMovable||(_t(ue,Te,k),H(ue,Qn,ie),H(ue,be,le))}return this}},ji=mt.Cropper,Ra=function(){function Q(k){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function K(Q,k){if(!(Q instanceof k))throw new TypeError("Cannot call a class as a function")}(this,Q),!k||!Sn.test(k.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=k,this.options=Ie({},pn,ai(B)&&B),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function ae(Q,k,B){return k&&V(Q.prototype,k),B&&V(Q,B),Object.defineProperty(Q,"prototype",{writable:!1}),Q}(Q,[{key:"init",value:function(){var ue,B=this.element,F=B.tagName.toLowerCase();if(!B[ke]){if(B[ke]=this,"img"===F){if(this.isImg=!0,ue=B.getAttribute("src")||"",this.originalUrl=ue,!ue)return;ue=B.src}else"canvas"===F&&window.HTMLCanvasElement&&(ue=B.toDataURL());this.load(ue)}}},{key:"load",value:function(B){var F=this;if(B){this.url=B,this.imageData={};var ue=this.element,ie=this.options;if(!ie.rotatable&&!ie.scalable&&(ie.checkOrientation=!1),!ie.checkOrientation||!window.ArrayBuffer)return void this.clone();if(Xt.test(B))return void(un.test(B)?this.read(function xa(Q){var k=Q.replace(sl,""),B=atob(k),F=new ArrayBuffer(B.length),ue=new Uint8Array(F);return J(ue,function(ie,le){ue[le]=B.charCodeAt(le)}),F}(B)):this.clone());var le=new XMLHttpRequest,Be=this.clone.bind(this);this.reloading=!0,this.xhr=le,le.onabort=Be,le.onerror=Be,le.ontimeout=Be,le.onprogress=function(){le.getResponseHeader("content-type")!==Ji&&le.abort()},le.onload=function(){F.read(le.response)},le.onloadend=function(){F.reloading=!1,F.xhr=null},ie.checkCrossOrigin&&Cs(B)&&ue.crossOrigin&&(B=As(B)),le.open("GET",B,!0),le.responseType="arraybuffer",le.withCredentials="use-credentials"===ue.crossOrigin,le.send()}}},{key:"read",value:function(B){var F=this.options,ue=this.imageData,ie=na(B),le=0,Be=1,it=1;if(ie>1){this.url=function _o(Q,k){for(var B=[],ue=new Uint8Array(Q);ue.length>0;)B.push(ta.apply(null,Se(ue.subarray(0,8192)))),ue=ue.subarray(8192);return"data:".concat(k,";base64,").concat(btoa(B.join("")))}(B,Ji);var et=function Ka(Q){var k=0,B=1,F=1;switch(Q){case 2:B=-1;break;case 3:k=-180;break;case 4:F=-1;break;case 5:k=90,F=-1;break;case 6:k=90;break;case 7:k=90,B=-1;break;case 8:k=-90}return{rotate:k,scaleX:B,scaleY:F}}(ie);le=et.rotate,Be=et.scaleX,it=et.scaleY}F.rotatable&&(ue.rotate=le),F.scalable&&(ue.scaleX=Be,ue.scaleY=it),this.clone()}},{key:"clone",value:function(){var B=this.element,F=this.url,ue=B.crossOrigin,ie=F;this.options.checkCrossOrigin&&Cs(F)&&(ue||(ue="anonymous"),ie=As(F)),this.crossOrigin=ue,this.crossOriginUrl=ie;var le=document.createElement("img");ue&&(le.crossOrigin=ue),le.src=ie||F,le.alt=B.alt||"The image to crop",this.image=le,le.onload=this.start.bind(this),le.onerror=this.stop.bind(this),W(le,Zn),B.parentNode.insertBefore(le,B.nextSibling)}},{key:"start",value:function(){var B=this,F=this.image;F.onload=null,F.onerror=null,this.sizing=!0;var ue=mt.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(mt.navigator.userAgent),ie=function(et,Oe){Ie(B.imageData,{naturalWidth:et,naturalHeight:Oe,aspectRatio:et/Oe}),B.initialImageData=Ie({},B.imageData),B.sizing=!1,B.sized=!0,B.build()};if(!F.naturalWidth||ue){var le=document.createElement("img"),Be=document.body||document.documentElement;this.sizingImage=le,le.onload=function(){ie(le.width,le.height),ue||Be.removeChild(le)},le.src=F.src,ue||(le.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",Be.appendChild(le))}else ie(F.naturalWidth,F.naturalHeight)}},{key:"stop",value:function(){var B=this.image;B.onload=null,B.onerror=null,B.parentNode.removeChild(B),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var B=this.element,F=this.options,ue=this.image,ie=B.parentNode,le=document.createElement("div");le.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var Be=le.querySelector(".".concat(ke,"-container")),it=Be.querySelector(".".concat(ke,"-canvas")),et=Be.querySelector(".".concat(ke,"-drag-box")),Oe=Be.querySelector(".".concat(ke,"-crop-box")),He=Oe.querySelector(".".concat(ke,"-face"));this.container=ie,this.cropper=Be,this.canvas=it,this.dragBox=et,this.cropBox=Oe,this.viewBox=Be.querySelector(".".concat(ke,"-view-box")),this.face=He,it.appendChild(ue),W(B,gn),ie.insertBefore(Be,B.nextSibling),z(ue,Zn),this.initPreview(),this.bind(),F.initialAspectRatio=Math.max(0,F.initialAspectRatio)||NaN,F.aspectRatio=Math.max(0,F.aspectRatio)||NaN,F.viewMode=Math.max(0,Math.min(3,Math.round(F.viewMode)))||0,W(Oe,gn),F.guides||W(Oe.getElementsByClassName("".concat(ke,"-dashed")),gn),F.center||W(Oe.getElementsByClassName("".concat(ke,"-center")),gn),F.background&&W(Be,"".concat(ke,"-bg")),F.highlight||W(He,Wr),F.cropBoxMovable&&(W(He,be),_t(He,Te,"all")),F.cropBoxResizable||(W(Oe.getElementsByClassName("".concat(ke,"-line")),gn),W(Oe.getElementsByClassName("".concat(ke,"-point")),gn)),this.render(),this.ready=!0,this.setDragMode(F.dragMode),F.autoCrop&&this.crop(),this.setData(F.data),Hn(F.ready)&&wn(B,"ready",F.ready,{once:!0}),dn(B,"ready")}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var B=this.cropper.parentNode;B&&B.removeChild(this.cropper),z(this.element,gn)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ji,Q}},{key:"setDefaults",value:function(B){Ie(pn,ai(B)&&B)}}]),Q}();return Ie(Ra.prototype,ra,Sr,Wh,xs,Kh,Zl),Ra}()},5619:(Vt,je,j)=>{"use strict";j.d(je,{X:()=>K});var u=j(8645);class K extends u.x{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const ge=super._subscribe(ae);return!ge.closed&&ae.next(this._value),ge}getValue(){const{hasError:ae,thrownError:ge,_value:Ae}=this;if(ae)throw ge;return this._throwIfClosed(),Ae}next(ae){super.next(this._value=ae)}}},5592:(Vt,je,j)=>{"use strict";j.d(je,{y:()=>We});var u=j(305),K=j(7394),V=j(4850),ae=j(8407),ge=j(2653),Ae=j(4674),Ue=j(1441);let We=(()=>{class pe{constructor(Ye){Ye&&(this._subscribe=Ye)}lift(Ye){const mt=new pe;return mt.source=this,mt.operator=Ye,mt}subscribe(Ye,mt,Qe){const vt=function re(pe){return pe&&pe instanceof u.Lv||function q(pe){return pe&&(0,Ae.m)(pe.next)&&(0,Ae.m)(pe.error)&&(0,Ae.m)(pe.complete)}(pe)&&(0,K.Nn)(pe)}(Ye)?Ye:new u.Hp(Ye,mt,Qe);return(0,Ue.x)(()=>{const{operator:ke,source:Ut}=this;vt.add(ke?ke.call(vt,Ut):Ut?this._subscribe(vt):this._trySubscribe(vt))}),vt}_trySubscribe(Ye){try{return this._subscribe(Ye)}catch(mt){Ye.error(mt)}}forEach(Ye,mt){return new(mt=De(mt))((Qe,vt)=>{const ke=new u.Hp({next:Ut=>{try{Ye(Ut)}catch(Ft){vt(Ft),ke.unsubscribe()}},error:vt,complete:Qe});this.subscribe(ke)})}_subscribe(Ye){var mt;return null===(mt=this.source)||void 0===mt?void 0:mt.subscribe(Ye)}[V.L](){return this}pipe(...Ye){return(0,ae.U)(Ye)(this)}toPromise(Ye){return new(Ye=De(Ye))((mt,Qe)=>{let vt;this.subscribe(ke=>vt=ke,ke=>Qe(ke),()=>mt(vt))})}}return pe.create=st=>new pe(st),pe})();function De(pe){var st;return null!==(st=pe??ge.config.Promise)&&void 0!==st?st:Promise}},8645:(Vt,je,j)=>{"use strict";j.d(je,{x:()=>Ue});var u=j(5592),K=j(7394);const ae=(0,j(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=j(9039),Ae=j(1441);let Ue=(()=>{class De extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const pe=new We(this,this);return pe.operator=re,pe}_throwIfClosed(){if(this.closed)throw new ae}next(re){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(re)}})}error(re){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:pe}=this;for(;pe.length;)pe.shift().error(re)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:pe,isStopped:st,observers:Ye}=this;return pe||st?K.Lc:(this.currentObservers=null,Ye.push(re),new K.w0(()=>{this.currentObservers=null,(0,ge.P)(Ye,re)}))}_checkFinalizedStatuses(re){const{hasError:pe,thrownError:st,isStopped:Ye}=this;pe?re.error(st):Ye&&re.complete()}asObservable(){const re=new u.y;return re.source=this,re}}return De.create=(q,re)=>new We(q,re),De})();class We extends Ue{constructor(q,re){super(),this.destination=q,this.source=re}next(q){var re,pe;null===(pe=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===pe||pe.call(re,q)}error(q){var re,pe;null===(pe=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===pe||pe.call(re,q)}complete(){var q,re;null===(re=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===re||re.call(q)}_subscribe(q){var re,pe;return null!==(pe=null===(re=this.source)||void 0===re?void 0:re.subscribe(q))&&void 0!==pe?pe:K.Lc}}},305:(Vt,je,j)=>{"use strict";j.d(je,{Hp:()=>Qe,Lv:()=>pe});var u=j(4674),K=j(7394),V=j(2653),ae=j(3894),ge=j(2420);const Ae=De("C",void 0,void 0);function De(me,$e,ye){return{kind:me,value:$e,error:ye}}var q=j(7599),re=j(1441);class pe extends K.w0{constructor($e){super(),this.isStopped=!1,$e?(this.destination=$e,(0,K.Nn)($e)&&$e.add(this)):this.destination=Ft}static create($e,ye,Fe){return new Qe($e,ye,Fe)}next($e){this.isStopped?Ut(function We(me){return De("N",me,void 0)}($e),this):this._next($e)}error($e){this.isStopped?Ut(function Ue(me){return De("E",void 0,me)}($e),this):(this.isStopped=!0,this._error($e))}complete(){this.isStopped?Ut(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next($e){this.destination.next($e)}_error($e){try{this.destination.error($e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const st=Function.prototype.bind;function Ye(me,$e){return st.call(me,$e)}class mt{constructor($e){this.partialObserver=$e}next($e){const{partialObserver:ye}=this;if(ye.next)try{ye.next($e)}catch(Fe){vt(Fe)}}error($e){const{partialObserver:ye}=this;if(ye.error)try{ye.error($e)}catch(Fe){vt(Fe)}else vt($e)}complete(){const{partialObserver:$e}=this;if($e.complete)try{$e.complete()}catch(ye){vt(ye)}}}class Qe extends pe{constructor($e,ye,Fe){let Je;if(super(),(0,u.m)($e)||!$e)Je={next:$e??void 0,error:ye??void 0,complete:Fe??void 0};else{let X;this&&V.config.useDeprecatedNextContext?(X=Object.create($e),X.unsubscribe=()=>this.unsubscribe(),Je={next:$e.next&&Ye($e.next,X),error:$e.error&&Ye($e.error,X),complete:$e.complete&&Ye($e.complete,X)}):Je=$e}this.destination=new mt(Je)}}function vt(me){V.config.useDeprecatedSynchronousErrorHandling?(0,re.O)(me):(0,ae.h)(me)}function Ut(me,$e){const{onStoppedNotification:ye}=V.config;ye&&q.z.setTimeout(()=>ye(me,$e))}const Ft={closed:!0,next:ge.Z,error:function ke(me){throw me},complete:ge.Z}},7394:(Vt,je,j)=>{"use strict";j.d(je,{Lc:()=>Ae,w0:()=>ge,Nn:()=>Ue});var u=j(4674);const V=(0,j(2306).d)(De=>function(re){De(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((pe,st)=>`${st+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var ae=j(9039);class ge{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const Ye of re)Ye.remove(this);else re.remove(this);const{initialTeardown:pe}=this;if((0,u.m)(pe))try{pe()}catch(Ye){q=Ye instanceof V?Ye.errors:[Ye]}const{_finalizers:st}=this;if(st){this._finalizers=null;for(const Ye of st)try{We(Ye)}catch(mt){q=q??[],mt instanceof V?q=[...q,...mt.errors]:q.push(mt)}}if(q)throw new V(q)}}add(q){var re;if(q&&q!==this)if(this.closed)We(q);else{if(q instanceof ge){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(q)}}_hasParent(q){const{_parentage:re}=this;return re===q||Array.isArray(re)&&re.includes(q)}_addParent(q){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(q),re):re?[re,q]:q}_removeParent(q){const{_parentage:re}=this;re===q?this._parentage=null:Array.isArray(re)&&(0,ae.P)(re,q)}remove(q){const{_finalizers:re}=this;re&&(0,ae.P)(re,q),q instanceof ge&&q._removeParent(this)}}ge.EMPTY=(()=>{const De=new ge;return De.closed=!0,De})();const Ae=ge.EMPTY;function Ue(De){return De instanceof ge||De&&"closed"in De&&(0,u.m)(De.remove)&&(0,u.m)(De.add)&&(0,u.m)(De.unsubscribe)}function We(De){(0,u.m)(De)?De():De.unsubscribe()}},2653:(Vt,je,j)=>{"use strict";j.d(je,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(Vt,je,j)=>{"use strict";j.d(je,{E:()=>K});const K=new(j(5592).y)(ge=>ge.complete())},2459:(Vt,je,j)=>{"use strict";j.d(je,{D:()=>$e});var u=j(4829),K=j(3093),V=j(5137),Ae=j(5592),We=j(4971),De=j(4674),q=j(7103);function pe(ye,Fe){if(!ye)throw new Error("Iterable cannot be null");return new Ae.y(Je=>{(0,q.f)(Je,Fe,()=>{const X=ye[Symbol.asyncIterator]();(0,q.f)(Je,Fe,()=>{X.next().then(Ke=>{Ke.done?Je.complete():Je.next(Ke.value)})},0,!0)})})}var st=j(8382),Ye=j(4026),mt=j(4266),Qe=j(3664),vt=j(5726),ke=j(9853),Ut=j(541);function $e(ye,Fe){return Fe?function me(ye,Fe){if(null!=ye){if((0,st.c)(ye))return function ae(ye,Fe){return(0,u.Xf)(ye).pipe((0,V.R)(Fe),(0,K.Q)(Fe))}(ye,Fe);if((0,mt.z)(ye))return function Ue(ye,Fe){return new Ae.y(Je=>{let X=0;return Fe.schedule(function(){X===ye.length?Je.complete():(Je.next(ye[X++]),Je.closed||this.schedule())})})}(ye,Fe);if((0,Ye.t)(ye))return function ge(ye,Fe){return(0,u.Xf)(ye).pipe((0,V.R)(Fe),(0,K.Q)(Fe))}(ye,Fe);if((0,vt.D)(ye))return pe(ye,Fe);if((0,Qe.T)(ye))return function re(ye,Fe){return new Ae.y(Je=>{let X;return(0,q.f)(Je,Fe,()=>{X=ye[We.h](),(0,q.f)(Je,Fe,()=>{let Ke,ht;try{({value:Ke,done:ht}=X.next())}catch(Ht){return void Je.error(Ht)}ht?Je.complete():Je.next(Ke)},0,!0)}),()=>(0,De.m)(X?.return)&&X.return()})}(ye,Fe);if((0,Ut.L)(ye))return function Ft(ye,Fe){return pe((0,Ut.Q)(ye),Fe)}(ye,Fe)}throw(0,ke.z)(ye)}(ye,Fe):(0,u.Xf)(ye)}},4829:(Vt,je,j)=>{"use strict";j.d(je,{Xf:()=>st});var u=j(7582),K=j(4266),V=j(4026),ae=j(5592),ge=j(8382),Ae=j(5726),Ue=j(9853),We=j(3664),De=j(541),q=j(4674),re=j(3894),pe=j(4850);function st(me){if(me instanceof ae.y)return me;if(null!=me){if((0,ge.c)(me))return function Ye(me){return new ae.y($e=>{const ye=me[pe.L]();if((0,q.m)(ye.subscribe))return ye.subscribe($e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(me);if((0,K.z)(me))return function mt(me){return new ae.y($e=>{for(let ye=0;ye<me.length&&!$e.closed;ye++)$e.next(me[ye]);$e.complete()})}(me);if((0,V.t)(me))return function Qe(me){return new ae.y($e=>{me.then(ye=>{$e.closed||($e.next(ye),$e.complete())},ye=>$e.error(ye)).then(null,re.h)})}(me);if((0,Ae.D)(me))return ke(me);if((0,We.T)(me))return function vt(me){return new ae.y($e=>{for(const ye of me)if($e.next(ye),$e.closed)return;$e.complete()})}(me);if((0,De.L)(me))return function Ut(me){return ke((0,De.Q)(me))}(me)}throw(0,Ue.z)(me)}function ke(me){return new ae.y($e=>{(function Ft(me,$e){var ye,Fe,Je,X;return(0,u.mG)(this,void 0,void 0,function*(){try{for(ye=(0,u.KL)(me);!(Fe=yield ye.next()).done;)if($e.next(Fe.value),$e.closed)return}catch(Ke){Je={error:Ke}}finally{try{Fe&&!Fe.done&&(X=ye.return)&&(yield X.call(ye))}finally{if(Je)throw Je.error}}$e.complete()})})(me,$e).catch(ye=>$e.error(ye))})}},3019:(Vt,je,j)=>{"use strict";j.d(je,{T:()=>Ae});var u=j(7537),K=j(4829),V=j(6232),ae=j(9940),ge=j(2459);function Ae(...Ue){const We=(0,ae.yG)(Ue),De=(0,ae._6)(Ue,1/0),q=Ue;return q.length?1===q.length?(0,K.Xf)(q[0]):(0,u.J)(De)((0,ge.D)(q,We)):V.E}},2096:(Vt,je,j)=>{"use strict";j.d(je,{of:()=>V});var u=j(9940),K=j(2459);function V(...ae){const ge=(0,u.yG)(ae);return(0,K.D)(ae,ge)}},8251:(Vt,je,j)=>{"use strict";j.d(je,{x:()=>K});var u=j(305);function K(ae,ge,Ae,Ue,We){return new V(ae,ge,Ae,Ue,We)}class V extends u.Lv{constructor(ge,Ae,Ue,We,De,q){super(ge),this.onFinalize=De,this.shouldUnsubscribe=q,this._next=Ae?function(re){try{Ae(re)}catch(pe){ge.error(pe)}}:super._next,this._error=We?function(re){try{We(re)}catch(pe){ge.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=Ue?function(){try{Ue()}catch(re){ge.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},3997:(Vt,je,j)=>{"use strict";j.d(je,{x:()=>ae});var u=j(2737),K=j(9360),V=j(8251);function ae(Ae,Ue=u.y){return Ae=Ae??ge,(0,K.e)((We,De)=>{let q,re=!0;We.subscribe((0,V.x)(De,pe=>{const st=Ue(pe);(re||!Ae(q,st))&&(re=!1,q=st,De.next(pe))}))})}function ge(Ae,Ue){return Ae===Ue}},7398:(Vt,je,j)=>{"use strict";j.d(je,{U:()=>V});var u=j(9360),K=j(8251);function V(ae,ge){return(0,u.e)((Ae,Ue)=>{let We=0;Ae.subscribe((0,K.x)(Ue,De=>{Ue.next(ae.call(ge,De,We++))}))})}},7537:(Vt,je,j)=>{"use strict";j.d(je,{J:()=>V});var u=j(1631),K=j(2737);function V(ae=1/0){return(0,u.z)(K.y,ae)}},1631:(Vt,je,j)=>{"use strict";j.d(je,{z:()=>We});var u=j(7398),K=j(4829),V=j(9360),ae=j(7103),ge=j(8251),Ue=j(4674);function We(De,q,re=1/0){return(0,Ue.m)(q)?We((pe,st)=>(0,u.U)((Ye,mt)=>q(pe,Ye,st,mt))((0,K.Xf)(De(pe,st))),re):("number"==typeof q&&(re=q),(0,V.e)((pe,st)=>function Ae(De,q,re,pe,st,Ye,mt,Qe){const vt=[];let ke=0,Ut=0,Ft=!1;const me=()=>{Ft&&!vt.length&&!ke&&q.complete()},$e=Fe=>ke<pe?ye(Fe):vt.push(Fe),ye=Fe=>{Ye&&q.next(Fe),ke++;let Je=!1;(0,K.Xf)(re(Fe,Ut++)).subscribe((0,ge.x)(q,X=>{st?.(X),Ye?$e(X):q.next(X)},()=>{Je=!0},void 0,()=>{if(Je)try{for(ke--;vt.length&&ke<pe;){const X=vt.shift();mt?(0,ae.f)(q,mt,()=>ye(X)):ye(X)}me()}catch(X){q.error(X)}}))};return De.subscribe((0,ge.x)(q,$e,()=>{Ft=!0,me()})),()=>{Qe?.()}}(pe,st,De,re)))}},3093:(Vt,je,j)=>{"use strict";j.d(je,{Q:()=>ae});var u=j(7103),K=j(9360),V=j(8251);function ae(ge,Ae=0){return(0,K.e)((Ue,We)=>{Ue.subscribe((0,V.x)(We,De=>(0,u.f)(We,ge,()=>We.next(De),Ae),()=>(0,u.f)(We,ge,()=>We.complete(),Ae),De=>(0,u.f)(We,ge,()=>We.error(De),Ae)))})}},3020:(Vt,je,j)=>{"use strict";j.d(je,{B:()=>ge});var u=j(4829),K=j(8645),V=j(305),ae=j(9360);function ge(Ue={}){const{connector:We=(()=>new K.x),resetOnError:De=!0,resetOnComplete:q=!0,resetOnRefCountZero:re=!0}=Ue;return pe=>{let st,Ye,mt,Qe=0,vt=!1,ke=!1;const Ut=()=>{Ye?.unsubscribe(),Ye=void 0},Ft=()=>{Ut(),st=mt=void 0,vt=ke=!1},me=()=>{const $e=st;Ft(),$e?.unsubscribe()};return(0,ae.e)(($e,ye)=>{Qe++,!ke&&!vt&&Ut();const Fe=mt=mt??We();ye.add(()=>{Qe--,0===Qe&&!ke&&!vt&&(Ye=Ae(me,re))}),Fe.subscribe(ye),!st&&Qe>0&&(st=new V.Hp({next:Je=>Fe.next(Je),error:Je=>{ke=!0,Ut(),Ye=Ae(Ft,De,Je),Fe.error(Je)},complete:()=>{vt=!0,Ut(),Ye=Ae(Ft,q),Fe.complete()}}),(0,u.Xf)($e).subscribe(st))})(pe)}}function Ae(Ue,We,...De){if(!0===We)return void Ue();if(!1===We)return;const q=new V.Hp({next:()=>{q.unsubscribe(),Ue()}});return(0,u.Xf)(We(...De)).subscribe(q)}},5137:(Vt,je,j)=>{"use strict";j.d(je,{R:()=>K});var u=j(9360);function K(V,ae=0){return(0,u.e)((ge,Ae)=>{Ae.add(V.schedule(()=>ge.subscribe(Ae),ae))})}},4664:(Vt,je,j)=>{"use strict";j.d(je,{w:()=>ae});var u=j(4829),K=j(9360),V=j(8251);function ae(ge,Ae){return(0,K.e)((Ue,We)=>{let De=null,q=0,re=!1;const pe=()=>re&&!De&&We.complete();Ue.subscribe((0,V.x)(We,st=>{De?.unsubscribe();let Ye=0;const mt=q++;(0,u.Xf)(ge(st,mt)).subscribe(De=(0,V.x)(We,Qe=>We.next(Ae?Ae(st,Qe,mt,Ye++):Qe),()=>{De=null,pe()}))},()=>{re=!0,pe()}))})}},9397:(Vt,je,j)=>{"use strict";j.d(je,{b:()=>ge});var u=j(4674),K=j(9360),V=j(8251),ae=j(2737);function ge(Ae,Ue,We){const De=(0,u.m)(Ae)||Ue||We?{next:Ae,error:Ue,complete:We}:Ae;return De?(0,K.e)((q,re)=>{var pe;null===(pe=De.subscribe)||void 0===pe||pe.call(De);let st=!0;q.subscribe((0,V.x)(re,Ye=>{var mt;null===(mt=De.next)||void 0===mt||mt.call(De,Ye),re.next(Ye)},()=>{var Ye;st=!1,null===(Ye=De.complete)||void 0===Ye||Ye.call(De),re.complete()},Ye=>{var mt;st=!1,null===(mt=De.error)||void 0===mt||mt.call(De,Ye),re.error(Ye)},()=>{var Ye,mt;st&&(null===(Ye=De.unsubscribe)||void 0===Ye||Ye.call(De)),null===(mt=De.finalize)||void 0===mt||mt.call(De)}))}):ae.y}},1954:(Vt,je,j)=>{"use strict";j.d(je,{o:()=>ge});var u=j(7394);class K extends u.w0{constructor(Ue,We){super()}schedule(Ue,We=0){return this}}const V={setInterval(Ae,Ue,...We){const{delegate:De}=V;return De?.setInterval?De.setInterval(Ae,Ue,...We):setInterval(Ae,Ue,...We)},clearInterval(Ae){const{delegate:Ue}=V;return(Ue?.clearInterval||clearInterval)(Ae)},delegate:void 0};var ae=j(9039);class ge extends K{constructor(Ue,We){super(Ue,We),this.scheduler=Ue,this.work=We,this.pending=!1}schedule(Ue,We=0){var De;if(this.closed)return this;this.state=Ue;const q=this.id,re=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(re,q,We)),this.pending=!0,this.delay=We,this.id=null!==(De=this.id)&&void 0!==De?De:this.requestAsyncId(re,this.id,We),this}requestAsyncId(Ue,We,De=0){return V.setInterval(Ue.flush.bind(Ue,this),De)}recycleAsyncId(Ue,We,De=0){if(null!=De&&this.delay===De&&!1===this.pending)return We;null!=We&&V.clearInterval(We)}execute(Ue,We){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(Ue,We);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ue,We){let q,De=!1;try{this.work(Ue)}catch(re){De=!0,q=re||new Error("Scheduled action threw falsy error")}if(De)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:Ue,scheduler:We}=this,{actions:De}=We;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(De,this),null!=Ue&&(this.id=this.recycleAsyncId(We,Ue,null)),this.delay=null,super.unsubscribe()}}}},2631:(Vt,je,j)=>{"use strict";j.d(je,{v:()=>V});var u=j(4552);class K{constructor(ge,Ae=K.now){this.schedulerActionCtor=ge,this.now=Ae}schedule(ge,Ae=0,Ue){return new this.schedulerActionCtor(this,ge).schedule(Ue,Ae)}}K.now=u.l.now;class V extends K{constructor(ge,Ae=K.now){super(ge,Ae),this.actions=[],this._active=!1}flush(ge){const{actions:Ae}=this;if(this._active)return void Ae.push(ge);let Ue;this._active=!0;do{if(Ue=ge.execute(ge.state,ge.delay))break}while(ge=Ae.shift());if(this._active=!1,Ue){for(;ge=Ae.shift();)ge.unsubscribe();throw Ue}}}},6321:(Vt,je,j)=>{"use strict";j.d(je,{P:()=>ae,z:()=>V});var u=j(1954);const V=new(j(2631).v)(u.o),ae=V},4552:(Vt,je,j)=>{"use strict";j.d(je,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},7599:(Vt,je,j)=>{"use strict";j.d(je,{z:()=>u});const u={setTimeout(K,V,...ae){const{delegate:ge}=u;return ge?.setTimeout?ge.setTimeout(K,V,...ae):setTimeout(K,V,...ae)},clearTimeout(K){const{delegate:V}=u;return(V?.clearTimeout||clearTimeout)(K)},delegate:void 0}},4971:(Vt,je,j)=>{"use strict";j.d(je,{h:()=>K});const K=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Vt,je,j)=>{"use strict";j.d(je,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(Vt,je,j)=>{"use strict";j.d(je,{_6:()=>Ae,jO:()=>ae,yG:()=>ge});var u=j(4674),K=j(671);function V(Ue){return Ue[Ue.length-1]}function ae(Ue){return(0,u.m)(V(Ue))?Ue.pop():void 0}function ge(Ue){return(0,K.K)(V(Ue))?Ue.pop():void 0}function Ae(Ue,We){return"number"==typeof V(Ue)?Ue.pop():We}},9039:(Vt,je,j)=>{"use strict";function u(K,V){if(K){const ae=K.indexOf(V);0<=ae&&K.splice(ae,1)}}j.d(je,{P:()=>u})},2306:(Vt,je,j)=>{"use strict";function u(K){const ae=K(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}j.d(je,{d:()=>u})},1441:(Vt,je,j)=>{"use strict";j.d(je,{O:()=>ae,x:()=>V});var u=j(2653);let K=null;function V(ge){if(u.config.useDeprecatedSynchronousErrorHandling){const Ae=!K;if(Ae&&(K={errorThrown:!1,error:null}),ge(),Ae){const{errorThrown:Ue,error:We}=K;if(K=null,Ue)throw We}}else ge()}function ae(ge){u.config.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=ge)}},7103:(Vt,je,j)=>{"use strict";function u(K,V,ae,ge=0,Ae=!1){const Ue=V.schedule(function(){ae(),Ae?K.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(K.add(Ue),!Ae)return Ue}j.d(je,{f:()=>u})},2737:(Vt,je,j)=>{"use strict";function u(K){return K}j.d(je,{y:()=>u})},4266:(Vt,je,j)=>{"use strict";j.d(je,{z:()=>u});const u=K=>K&&"number"==typeof K.length&&"function"!=typeof K},5726:(Vt,je,j)=>{"use strict";j.d(je,{D:()=>K});var u=j(4674);function K(V){return Symbol.asyncIterator&&(0,u.m)(V?.[Symbol.asyncIterator])}},4674:(Vt,je,j)=>{"use strict";function u(K){return"function"==typeof K}j.d(je,{m:()=>u})},8382:(Vt,je,j)=>{"use strict";j.d(je,{c:()=>V});var u=j(4850),K=j(4674);function V(ae){return(0,K.m)(ae[u.L])}},3664:(Vt,je,j)=>{"use strict";j.d(je,{T:()=>V});var u=j(4971),K=j(4674);function V(ae){return(0,K.m)(ae?.[u.h])}},4026:(Vt,je,j)=>{"use strict";j.d(je,{t:()=>K});var u=j(4674);function K(V){return(0,u.m)(V?.then)}},541:(Vt,je,j)=>{"use strict";j.d(je,{L:()=>ae,Q:()=>V});var u=j(7582),K=j(4674);function V(ge){return(0,u.FC)(this,arguments,function*(){const Ue=ge.getReader();try{for(;;){const{value:We,done:De}=yield(0,u.qq)(Ue.read());if(De)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(We)}}finally{Ue.releaseLock()}})}function ae(ge){return(0,K.m)(ge?.getReader)}},671:(Vt,je,j)=>{"use strict";j.d(je,{K:()=>K});var u=j(4674);function K(V){return V&&(0,u.m)(V.schedule)}},9360:(Vt,je,j)=>{"use strict";j.d(je,{A:()=>K,e:()=>V});var u=j(4674);function K(ae){return(0,u.m)(ae?.lift)}function V(ae){return ge=>{if(K(ge))return ge.lift(function(Ae){try{return ae(Ae,this)}catch(Ue){this.error(Ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(Vt,je,j)=>{"use strict";function u(){}j.d(je,{Z:()=>u})},8407:(Vt,je,j)=>{"use strict";j.d(je,{U:()=>V,z:()=>K});var u=j(2737);function K(...ae){return V(ae)}function V(ae){return 0===ae.length?u.y:1===ae.length?ae[0]:function(Ae){return ae.reduce((Ue,We)=>We(Ue),Ae)}}},3894:(Vt,je,j)=>{"use strict";j.d(je,{h:()=>V});var u=j(2653),K=j(7599);function V(ae){K.z.setTimeout(()=>{const{onUnhandledError:ge}=u.config;if(!ge)throw ae;ge(ae)})}},9853:(Vt,je,j)=>{"use strict";function u(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(je,{z:()=>u})},5879:(Vt,je,j)=>{"use strict";j.d(je,{$8M:()=>Eu,$WT:()=>Kr,$Z:()=>sO,AFp:()=>uv,ALo:()=>bx,AaK:()=>pe,BQk:()=>Zv,CHM:()=>Ns,CRH:()=>Lx,EJc:()=>Xw,EpF:()=>Ng,F$t:()=>wb,F4k:()=>hc,FYo:()=>Pk,FiY:()=>Ce,Gf:()=>Nx,GfV:()=>FD,GkF:()=>_b,Gpc:()=>mt,HDt:()=>T_,Hsn:()=>Fg,JOm:()=>jy,KtG:()=>kd,LFG:()=>_t,LSH:()=>gE,Lbi:()=>AE,Lck:()=>hh,MAs:()=>ES,MMx:()=>Kc,MR2:()=>ng,NdJ:()=>Qv,Ojb:()=>hv,OlP:()=>yr,Oqu:()=>Ni,P3R:()=>bD,PXZ:()=>n0,Q6J:()=>sp,QGY:()=>Yv,Qsj:()=>kk,R0b:()=>$s,RDi:()=>ok,Rgc:()=>Yu,SBq:()=>vv,Sil:()=>tR,Suo:()=>Fx,TTD:()=>ou,TgZ:()=>op,Udp:()=>dw,VuI:()=>Bp,X6Q:()=>AR,XFs:()=>Wt,Xpm:()=>et,Xq5:()=>ku,Xts:()=>tg,Y36:()=>hg,YKP:()=>xw,YNc:()=>qv,Yjl:()=>wr,Yz7:()=>Bt,Z0I:()=>Un,ZZ4:()=>Up,_Bn:()=>px,_UZ:()=>oh,_c5:()=>YN,_uU:()=>OS,aQg:()=>_0,c2e:()=>E_,cJS:()=>vr,cg1:()=>Bl,dDg:()=>hR,dqk:()=>pn,eFA:()=>kp,eJc:()=>Hw,ekj:()=>zu,eoX:()=>fR,f3M:()=>At,g9A:()=>dv,h0i:()=>dh,hGG:()=>MT,hij:()=>zg,iGM:()=>rT,ifc:()=>As,ip1:()=>Yw,jDz:()=>fh,kL8:()=>_w,lG2:()=>Nn,lcZ:()=>Zu,lqb:()=>lc,lri:()=>pT,n5z:()=>Wd,oAB:()=>Mn,oxw:()=>Jv,q4F:()=>Nk,qFp:()=>UT,qLn:()=>Su,qOj:()=>Yf,qZA:()=>Og,rWj:()=>dR,rg0:()=>Dd,sBO:()=>vT,s_b:()=>Dp,soG:()=>Mp,tb:()=>gT,tp0:()=>Et,uIk:()=>Uv,vHH:()=>me,vpe:()=>Nl,wAp:()=>vs,xp6:()=>rO,ynx:()=>Kv,z2F:()=>Ah,zSh:()=>ov,zs3:()=>uc});var u=j(8645),K=j(7394),V=j(5592),ae=j(3019),ge=j(5619),Ae=j(2096),Ue=j(3020),We=j(4664),De=j(3997);function q(o){for(let a in o)if(o[a]===q)return a;throw Error("Could not find renamed property on target object.")}function re(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function pe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(pe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function st(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Ye=q({__forward_ref__:q});function mt(o){return o.__forward_ref__=mt,o.toString=function(){return pe(this())},o}function Qe(o){return vt(o)?o():o}function vt(o){return"function"==typeof o&&o.hasOwnProperty(Ye)&&o.__forward_ref__===mt}function ke(o){return o&&!!o.\u0275providers}const Ft="https://g.co/ng/security#xss";class me extends Error{constructor(a,l){super(function $e(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,l)),this.code=a}}function ye(o){return"string"==typeof o?o:null==o?"":String(o)}function ht(o,a){throw new me(-201,!1)}function wt(o,a){null==o&&function gt(o,a,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function Bt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function vr(o){return{providers:o.providers||[],imports:o.imports||[]}}function or(o){return br(o,cr)||br(o,Br)}function Un(o){return null!==or(o)}function br(o,a){return o.hasOwnProperty(a)?o[a]:null}function Vr(o){return o&&(o.hasOwnProperty(pr)||o.hasOwnProperty(Ji))?o[pr]:null}const cr=q({\u0275prov:q}),pr=q({\u0275inj:q}),Br=q({ngInjectableDef:q}),Ji=q({ngInjectorDef:q});var Wt=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(Wt||{});let Xt;function Sn(o){const a=Xt;return Xt=o,a}function Ar(o,a,l){const d=or(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&Wt.Optional?null:void 0!==a?a:void ht(pe(o))}const pn=globalThis,ct={},Ct="__NG_DI_FLAG__",jt="ngTempTokenPath",ee=/\n/gm,z="__source";let H;function de(o){const a=H;return H=o,a}function Ze(o,a=Wt.Default){if(void 0===H)throw new me(-203,!1);return null===H?Ar(o,void 0,a):H.get(o,a&Wt.Optional?null:void 0,a)}function _t(o,a=Wt.Default){return(function un(){return Xt}()||Ze)(Qe(o),a)}function At(o,a=Wt.Default){return _t(o,$n(a))}function $n(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function Zt(o){const a=[];for(let l=0;l<o.length;l++){const d=Qe(o[l]);if(Array.isArray(d)){if(0===d.length)throw new me(900,!1);let f,m=Wt.Default;for(let v=0;v<d.length;v++){const I=d[v],D=dn(I);"number"==typeof D?-1===D?f=I.token:m|=D:f=I}a.push(_t(f,m))}else a.push(_t(d))}return a}function wn(o,a){return o[Ct]=a,o.prototype[Ct]=a,o}function dn(o){return o[Ct]}function mo(o){return{toString:o}.toString()}var Cs=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(Cs||{}),As=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(As||{});const Ei={},On=[],Ds=q({\u0275cmp:q}),Da=q({\u0275dir:q}),Ss=q({\u0275pipe:q}),vc=q({\u0275mod:q}),go=q({\u0275fac:q}),ta=q({__NG_ELEMENT_ID__:q}),Sa=q({__NG_ENV_ID__:q});function sl(o,a,l){let d=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===d||o.charCodeAt(f+m)<=32)return f}l=f+1}}function xa(o,a,l){let d=0;for(;d<l.length;){const f=l[d];if("number"==typeof f){if(0!==f)break;d++;const m=l[d++],v=l[d++],I=l[d++];o.setAttribute(a,v,I,m)}else{const m=f,v=l[++d];na(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),d++}}return d}function _o(o){return 3===o||4===o||6===o}function na(o){return 64===o.charCodeAt(0)}function Ka(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||ra(o,l,f,null,-1===l||2===l?a[++d]:null)}}return o}function ra(o,a,l,d,f){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const I=o[m++];if("number"==typeof I){if(I===a){v=-1;break}if(I>a){v=m-1;break}}}for(;m<o.length;){const I=o[m];if("number"==typeof I)break;if(I===l){if(null===d)return void(null!==f&&(o[m+1]=f));if(d===o[m+1])return void(o[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,l),null!==d&&o.splice(m++,0,d),null!==f&&o.splice(m++,0,f)}const Sr="ng-template";function Wh(o,a,l){let d=0,f=!0;for(;d<o.length;){let m=o[d++];if("string"==typeof m&&f){const v=o[d++];if(l&&"class"===m&&-1!==sl(v.toLowerCase(),a,0))return!0}else{if(1===m){for(;d<o.length&&"string"==typeof(m=o[d++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(f=!1)}}return!1}function xs(o){return 4===o.type&&o.value!==Sr}function Kh(o,a,l){return a===(4!==o.type||l?o.value:Sr)}function Zl(o,a,l){let d=4;const f=o.attrs||[],m=function B(o){for(let a=0;a<o.length;a++)if(_o(o[a]))return a;return o.length}(f);let v=!1;for(let I=0;I<a.length;I++){const D=a[I];if("number"!=typeof D){if(!v)if(4&d){if(d=2|1&d,""!==D&&!Kh(o,D,l)||""===D&&1===a.length){if(ji(d))return!1;v=!0}}else{const x=8&d?D:a[++I];if(8&d&&null!==o.attrs){if(!Wh(o.attrs,x,l)){if(ji(d))return!1;v=!0}continue}const G=Ra(8&d?"class":D,f,xs(o),l);if(-1===G){if(ji(d))return!1;v=!0;continue}if(""!==x){let oe;oe=G>m?"":f[G+1].toLowerCase();const fe=8&d?oe:null;if(fe&&-1!==sl(fe,x,0)||2&d&&x!==oe){if(ji(d))return!1;v=!0}}}}else{if(!v&&!ji(d)&&!ji(D))return!1;if(v&&ji(D))continue;v=!1,d=D|1&d}}return ji(d)||v}function ji(o){return 0==(1&o)}function Ra(o,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let m=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let I=a[++f];for(;"string"==typeof I;)I=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function F(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,o)}function Q(o,a,l=!1){for(let d=0;d<a.length;d++)if(Zl(o,a[d],l))return!0;return!1}function ue(o,a){e:for(let l=0;l<a.length;l++){const d=a[l];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function ie(o,a){return o?":not("+a.trim()+")":a}function le(o){let a=o[0],l=1,d=2,f="",m=!1;for(;l<o.length;){let v=o[l];if("string"==typeof v)if(2&d){const I=o[++l];f+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!ji(v)&&(a+=ie(m,f),f=""),d=v,m=m||!ji(d);l++}return""!==f&&(a+=ie(m,f)),a}function et(o){return mo(()=>{const a=Yn(o),l={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===Cs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||As.Emulated,styles:o.styles||On,_:null,schemas:o.schemas||null,tView:null,id:""};Mr(l);const d=o.dependencies;return l.directiveDefs=Zr(d,!1),l.pipeDefs=Zr(d,!0),l.id=function ds(o){let a=0;const l=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const f of l)a=Math.imul(31,a)+f.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(l),l})}function He(o){return en(o)||An(o)}function ut(o){return null!==o}function Mn(o){return mo(()=>({type:o.type,bootstrap:o.bootstrap||On,declarations:o.declarations||On,imports:o.imports||On,exports:o.exports||On,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function ar(o,a){if(null==o)return Ei;const l={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),l[f]=d,a&&(a[f]=m)}return l}function Nn(o){return mo(()=>{const a=Yn(o);return Mr(a),a})}function wr(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function en(o){return o[Ds]||null}function An(o){return o[Da]||null}function mr(o){return o[Ss]||null}function Kr(o){const a=en(o)||An(o)||mr(o);return null!==a&&a.standalone}function ot(o,a){const l=o[vc]||null;if(!l&&!0===a)throw new Error(`Type ${pe(o)} does not have '\u0275mod' property.`);return l}function Yn(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:o.inputs||Ei,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||On,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ar(o.inputs,a),outputs:ar(o.outputs)}}function Mr(o){o.features?.forEach(a=>a(o))}function Zr(o,a){if(!o)return null;const l=a?mr:He;return()=>("function"==typeof o?o():o).map(d=>l(d)).filter(ut)}const nr=0,yt=1,rn=2,In=3,jr=4,hs=5,ci=6,yo=7,ur=8,Js=9,vo=10,Yt=11,Rs=12,Yl=13,Ms=14,li=15,wc=16,Ps=17,ts=18,Ma=19,Ql=20,Za=21,eo=22,Xl=23,ks=24,Fn=25,yd=1,Ic=2,Pi=7,Pa=9,ui=11;function Hi(o){return Array.isArray(o)&&"object"==typeof o[yd]}function $i(o){return Array.isArray(o)&&!0===o[yd]}function vd(o){return 0!=(4&o.flags)}function ia(o){return o.componentOffset>-1}function Os(o){return 1==(1&o.flags)}function fs(o){return!!o.template}function Qa(o){return 0!=(512&o[rn])}function sa(o,a){return o.hasOwnProperty(go)?o[go]:null}let Yr=null,al=!1;function Gi(o){const a=Yr;return Yr=o,a}const cl={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function bd(o){if(!dl(o)||o.dirty){if(!o.producerMustRecompute(o)&&!Dm(o))return void(o.dirty=!1);o.producerRecomputeValue(o),o.dirty=!1}}function Td(o){o.dirty=!0,function Xh(o){if(void 0===o.liveConsumerNode)return;const a=al;al=!0;try{for(const l of o.liveConsumerNode)l.dirty||Td(l)}finally{al=a}}(o),o.consumerMarkedDirty?.(o)}function Jh(o){return o&&(o.nextProducerIndex=0),Gi(o)}function Qr(o,a){if(Gi(a),o&&void 0!==o.producerNode&&void 0!==o.producerIndexOfThis&&void 0!==o.producerLastReadVersion){if(dl(o))for(let l=o.nextProducerIndex;l<o.producerNode.length;l++)Xa(o.producerNode[l],o.producerIndexOfThis[l]);for(;o.producerNode.length>o.nextProducerIndex;)o.producerNode.pop(),o.producerLastReadVersion.pop(),o.producerIndexOfThis.pop()}}function Dm(o){Fo(o);for(let a=0;a<o.producerNode.length;a++){const l=o.producerNode[a],d=o.producerLastReadVersion[a];if(d!==l.version||(bd(l),d!==l.version))return!0}return!1}function ul(o){if(Fo(o),dl(o))for(let a=0;a<o.producerNode.length;a++)Xa(o.producerNode[a],o.producerIndexOfThis[a]);o.producerNode.length=o.producerLastReadVersion.length=o.producerIndexOfThis.length=0,o.liveConsumerNode&&(o.liveConsumerNode.length=o.liveConsumerIndexOfThis.length=0)}function Xa(o,a){if(function Cd(o){o.liveConsumerNode??=[],o.liveConsumerIndexOfThis??=[]}(o),Fo(o),1===o.liveConsumerNode.length)for(let d=0;d<o.producerNode.length;d++)Xa(o.producerNode[d],o.producerIndexOfThis[d]);const l=o.liveConsumerNode.length-1;if(o.liveConsumerNode[a]=o.liveConsumerNode[l],o.liveConsumerIndexOfThis[a]=o.liveConsumerIndexOfThis[l],o.liveConsumerNode.length--,o.liveConsumerIndexOfThis.length--,a<o.liveConsumerNode.length){const d=o.liveConsumerIndexOfThis[a],f=o.liveConsumerNode[a];Fo(f),f.producerIndexOfThis[d]=a}}function dl(o){return o.consumerIsAlwaysLive||(o?.liveConsumerNode?.length??0)>0}function Fo(o){o.producerNode??=[],o.producerIndexOfThis??=[],o.producerLastReadVersion??=[]}let rf=null;function Dd(o){const a=Gi(null);try{return o()}finally{Gi(a)}}const Sd=()=>{},Ey=(()=>({...cl,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:o=>{o.schedule(o.ref)},hasRun:!1,cleanupFn:Sd}))();class Mm{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function ou(){return ml}function ml(o){return o.type.prototype.ngOnChanges&&(o.setInput=Eo),au}function au(){const o=gl(this),a=o?.current;if(a){const l=o.previous;if(l===Ei)o.previous=a;else for(let d in a)l[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Eo(o,a,l,d){const f=this.declaredInputs[l],m=gl(o)||function lf(o,a){return o[Tc]=a}(o,{previous:Ei,current:null}),v=m.current||(m.current={}),I=m.previous,D=I[f];v[f]=new Mm(D&&D.currentValue,a,I===Ei),o[d]=a}ou.ngInherit=!0;const Tc="__ngSimpleChanges__";function gl(o){return o[Tc]||null}const to=function(o,a,l){};function Xn(o){for(;Array.isArray(o);)o=o[nr];return o}function Lo(o,a){return Xn(a[o])}function ns(o,a){return Xn(a[o.index])}function Rd(o,a){return o.data[a]}function Ja(o,a){return o[a]}function qi(o,a){const l=a[o];return Hi(l)?l:l[nr]}function ec(o,a){return null==a?null:o[a]}function Pm(o){o[Ps]=0}function tc(o){1024&o[rn]||(o[rn]|=1024,di(o,1))}function Cy(o){1024&o[rn]&&(o[rn]&=-1025,di(o,-1))}function di(o,a){let l=o[In];if(null===l)return;l[hs]+=a;let d=l;for(l=l[In];null!==l&&(1===a&&1===d[hs]||-1===a&&0===d[hs]);)l[hs]+=a,d=l,l=l[In]}const ln={lFrame:Wi(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Xr(){return ln.bindingsEnabled}function Na(){return null!==ln.skipHydrationRootTNode}function Xe(){return ln.lFrame.lView}function Gn(){return ln.lFrame.tView}function Ns(o){return ln.lFrame.contextLView=o,o[ur]}function kd(o){return ln.lFrame.contextLView=null,o}function ki(){let o=hu();for(;null!==o&&64===o.type;)o=o.parent;return o}function hu(){return ln.lFrame.currentTNode}function Vo(o,a){const l=ln.lFrame;l.currentTNode=o,l.isParent=a}function mf(){return ln.lFrame.isParent}function Od(){ln.lFrame.isParent=!1}function nc(){return ln.lFrame.bindingIndex++}function fu(o,a){const l=ln.lFrame;l.bindingIndex=l.bindingRootIndex=o,pu(a)}function pu(o){ln.lFrame.currentDirectiveIndex=o}function Ld(){return ln.lFrame.currentQueryIndex}function yf(o){ln.lFrame.currentQueryIndex=o}function vf(o){const a=o[yt];return 2===a.type?a.declTNode:1===a.type?o[ci]:null}function Vd(o,a,l){if(l&Wt.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||l&Wt.Host||(f=vf(m),null===f||(m=m[Ms],10&f.type))););if(null===f)return!1;a=f,o=m}const d=ln.lFrame=Jn();return d.currentTNode=a,d.lView=o,!0}function $t(o){const a=Jn(),l=o[yt];ln.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Jn(){const o=ln.lFrame,a=null===o?null:o.child;return null===a?Wi(o):a}function Wi(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Ti(){const o=ln.lFrame;return ln.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Fa=Ti;function no(){const o=Ti();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function gr(){return ln.lFrame.selectedIndex}function Jt(o){ln.lFrame.selectedIndex=o}function _r(){const o=ln.lFrame;return Rd(o.tView,o.selectedIndex)}let rc=!0;function Sc(){return rc}function oa(o){rc=o}function aa(o,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const m=o.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:O}=m;v&&(o.contentHooks??=[]).push(-l,v),I&&((o.contentHooks??=[]).push(l,I),(o.contentCheckHooks??=[]).push(l,I)),D&&(o.viewHooks??=[]).push(-l,D),x&&((o.viewHooks??=[]).push(l,x),(o.viewCheckHooks??=[]).push(l,x)),null!=O&&(o.destroyHooks??=[]).push(l,O)}}function xc(o,a,l){Ud(o,a,3,l)}function Ls(o,a,l,d){(3&o[rn])===l&&Ud(o,a,l,d)}function If(o,a){let l=o[rn];(3&l)===a&&(l&=8191,l+=1,o[rn]=l)}function Ud(o,a,l,d){const m=d??-1,v=a.length-1;let I=0;for(let D=void 0!==d?65535&o[Ps]:0;D<v;D++)if("number"==typeof a[D+1]){if(I=a[D],null!=d&&I>=d)break}else a[D]<0&&(o[Ps]+=65536),(I<m||-1==m)&&(Ef(o,l,a,D),o[Ps]=(4294901760&o[Ps])+D+2),D++}function mu(o,a){to(4,o,a);const l=Gi(null);try{a.call(o)}finally{Gi(l),to(5,o,a)}}function Ef(o,a,l,d){const f=l[d]<0,m=l[d+1],I=o[f?-l[d]:l[d]];f?o[rn]>>13<o[Ps]>>16&&(3&o[rn])===a&&(o[rn]+=8192,mu(I,m)):mu(I,m)}const Vs=-1;class wl{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Il(o){return o!==Vs}function El(o){return 32767&o}function gu(o,a){let l=function jd(o){return o>>16}(o),d=a;for(;l>0;)d=d[Ms],l--;return d}let _u=!0;function bl(o){const a=_u;return _u=o,a}const Lm=255,yu=5;let Vm=0;const Us={};function ro(o,a){const l=vu(o,a);if(-1!==l)return l;const d=a[yt];d.firstCreatePass&&(o.injectorIndex=a.length,Mc(d.data,o),Mc(a,null),Mc(d.blueprint,null));const f=ic(o,a),m=o.injectorIndex;if(Il(f)){const v=El(f),I=gu(f,a),D=I[yt].data;for(let x=0;x<8;x++)a[m+x]=I[v+x]|D[v+x]}return a[m+8]=f,m}function Mc(o,a){o.push(0,0,0,0,0,0,0,0,a)}function vu(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ic(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){if(d=Sf(f),null===d)return Vs;if(l++,f=f[Ms],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return Vs}function Tl(o,a,l){!function zd(o,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(ta)&&(d=l[ta]),null==d&&(d=l[ta]=Vm++);const f=d&Lm;a.data[o+(f>>yu)]|=1<<f}(o,a,l)}function wu(o,a,l){if(l&Wt.Optional||void 0!==o)return o;ht()}function $d(o,a,l,d){if(l&Wt.Optional&&void 0===d&&(d=null),!(l&(Wt.Self|Wt.Host))){const f=o[Js],m=Sn(void 0);try{return f?f.get(a,d,l&Wt.Optional):Ar(a,d,l&Wt.Optional)}finally{Sn(m)}}return wu(d,0,l)}function Iu(o,a,l,d=Wt.Default,f){if(null!==o){if(2048&a[rn]&&!(d&Wt.Self)){const v=function Df(o,a,l,d,f){let m=o,v=a;for(;null!==m&&null!==v&&2048&v[rn]&&!(512&v[rn]);){const I=Cl(m,v,l,d|Wt.Self,Us);if(I!==Us)return I;let D=m.parent;if(!D){const x=v[Ql];if(x){const O=x.get(l,Us,d);if(O!==Us)return O}D=Sf(v),v=v[Ms]}m=D}return f}(o,a,l,d,Us);if(v!==Us)return v}const m=Cl(o,a,l,d,Us);if(m!==Us)return m}return $d(a,l,d,f)}function Cl(o,a,l,d,f){const m=function qd(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ta)?o[ta]:void 0;return"number"==typeof a?a>=0?a&Lm:cc:a}(l);if("function"==typeof m){if(!Vd(a,o,d))return d&Wt.Host?wu(f,0,d):$d(a,l,d,f);try{let v;if(v=m(d),null!=v||d&Wt.Optional)return v;ht()}finally{Fa()}}else if("number"==typeof m){let v=null,I=vu(o,a),D=Vs,x=d&Wt.Host?a[li][ci]:null;for((-1===I||d&Wt.SkipSelf)&&(D=-1===I?ic(o,a):a[I+8],D!==Vs&&oc(d,!1)?(v=a[yt],I=El(D),a=gu(D,a)):I=-1);-1!==I;){const O=a[yt];if(Um(m,I,O.data)){const G=Ry(I,a,l,v,d,x);if(G!==Us)return G}D=a[I+8],D!==Vs&&oc(d,a[yt].data[I+8]===x)&&Um(m,I,a)?(v=O,I=El(D),a=gu(D,a)):I=-1}}return f}function Ry(o,a,l,d,f,m){const v=a[yt],I=v.data[o+8],O=Gd(I,v,l,null==d?ia(I)&&_u:d!=v&&0!=(3&I.type),f&Wt.Host&&m===I);return null!==O?sc(a,v,O,I):Us}function Gd(o,a,l,d,f){const m=o.providerIndexes,v=a.data,I=1048575&m,D=o.directiveStart,O=m>>20,oe=f?I+O:o.directiveEnd;for(let fe=d?I:I+O;fe<oe;fe++){const Ge=v[fe];if(fe<D&&l===Ge||fe>=D&&Ge.type===l)return fe}if(f){const fe=v[D];if(fe&&fs(fe)&&fe.type===l)return D}return null}function sc(o,a,l,d){let f=o[l];const m=a.data;if(function xy(o){return o instanceof wl}(f)){const v=f;v.resolving&&function Je(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new me(-200,`Circular dependency in DI detected for ${o}${l}`)}(function Fe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ye(o)}(m[l]));const I=bl(v.canSeeViewProviders);v.resolving=!0;const x=v.injectImpl?Sn(v.injectImpl):null;Vd(o,d,Wt.Default);try{f=o[l]=v.factory(void 0,m,o,d),a.firstCreatePass&&l>=d.directiveStart&&function jo(o,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(d){const v=ml(a);(l.preOrderHooks??=[]).push(o,v),(l.preOrderCheckHooks??=[]).push(o,v)}f&&(l.preOrderHooks??=[]).push(0-o,f),m&&((l.preOrderHooks??=[]).push(o,m),(l.preOrderCheckHooks??=[]).push(o,m))}(l,m[l],a)}finally{null!==x&&Sn(x),bl(I),v.resolving=!1,Fa()}}return f}function Um(o,a,l){return!!(l[a+(o>>yu)]&1<<o)}function oc(o,a){return!(o&Wt.Self||o&Wt.Host&&a)}class Jr{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return Iu(this._tNode,this._lView,a,$n(d),l)}}function cc(){return new Jr(ki(),Xe())}function Wd(o){return mo(()=>{const a=o.prototype.constructor,l=a[go]||la(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const m=f[go]||la(f);if(m&&m!==l)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function la(o){return vt(o)?()=>{const a=la(Qe(o));return a&&a()}:sa(o)}function Sf(o){const a=o[yt],l=a.type;return 2===l?a.declTNode:1===l?o[ci]:null}function Eu(o){return function Hd(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const m=l[f];if(_o(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(m===a)return l[f+1];f+=2}}}return null}(ki(),o)}const Al="__parameters__";function M(o,a,l){return mo(()=>{const d=function S(o){return function(...l){if(o){const d=o(...l);for(const f in d)this[f]=d[f]}}}(a);function f(...m){if(this instanceof f)return d.apply(this,m),this;const v=new f(...m);return I.annotation=v,I;function I(D,x,O){const G=D.hasOwnProperty(Al)?D[Al]:Object.defineProperty(D,Al,{value:[]})[Al];for(;G.length<=O;)G.push(null);return(G[O]=G[O]||[]).push(v),D}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}function kc(o,a){o.forEach(l=>Array.isArray(l)?kc(l,a):a(l))}function Dl(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function Bn(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function ua(o,a){const l=[];for(let d=0;d<o;d++)l.push(a);return l}function Co(o,a,l){let d=bu(o,a);return d>=0?o[1|d]=l:(d=~d,function My(o,a,l,d){let f=o.length;if(f==a)o.push(l,d);else if(1===f)o.push(d,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=d}}(o,d,a,l)),d}function Bm(o,a){const l=bu(o,a);if(l>=0)return o[1|l]}function bu(o,a){return function jm(o,a,l){let d=0,f=o.length>>l;for(;f!==d;){const m=d+(f-d>>1),v=o[m<<l];if(a===v)return m<<l;v>a?f=m:d=m+1}return~(f<<l)}(o,a,1)}const Ce=wn(M("Optional"),8),Et=wn(M("SkipSelf"),4);function Uy(o){return 128==(128&o.flags)}var jy=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(jy||{});const $P=/^>|^->|<!--|-->|--!>|<!-$/g,GP=/(<|>)/g,zy="\u200b$1\u200b";const Gm=new Map;let KI=0;const YI="__ngContext__";function io(o,a){Hi(a)?(o[YI]=a[Ma],function qA(o){Gm.set(o[Ma],o)}(a)):o[YI]=a}let $y;function JI(o,a){return $y(o,a)}function Wm(o){const a=o[In];return $i(a)?a[In]:a}function JA(o){return tE(o[Rs])}function eD(o){return tE(o[jr])}function tE(o){for(;null!==o&&!$i(o);)o=o[jr];return o}function Pf(o,a,l,d,f){if(null!=d){let m,v=!1;$i(d)?m=d:Hi(d)&&(v=!0,d=d[nr]);const I=Xn(d);0===o&&null!==l?null==f?kf(a,l,I):Ua(a,l,I,f||null,!0):1===o&&null!==l?Ua(a,l,I,f||null,!0):2===o?function Yy(o,a,l){const d=Wy(o,a);d&&function JP(o,a,l,d){o.removeChild(a,l,d)}(o,d,a,l)}(a,I,v):3===o&&a.destroyNode(I),null!=m&&function cD(o,a,l,d,f){const m=l[Pi];m!==Xn(l)&&Pf(a,o,d,m,f);for(let I=ui;I<l.length;I++){const D=l[I];Qd(D[yt],D,o,a,d,m)}}(a,o,m,l,f)}}function nE(o,a){return o.createComment(function WI(o){return o.replace($P,a=>a.replace(GP,zy))}(a))}function Cu(o,a,l){return o.createElement(a,l)}function iE(o,a){const l=o[Pa],d=l.indexOf(a);Cy(a),l.splice(d,1)}function Gy(o,a){if(o.length<=ui)return;const l=ui+a,d=o[l];if(d){const f=d[wc];null!==f&&f!==o&&iE(f,d),a>0&&(o[l-1][jr]=d[jr]);const m=Bn(o,ui+a);!function YP(o,a){Qd(o,a,a[Yt],2,null,null),a[nr]=null,a[ci]=null}(d[yt],d);const v=m[ts];null!==v&&v.detachView(m[yt]),d[In]=null,d[jr]=null,d[rn]&=-129}return d}function sE(o,a){if(!(256&a[rn])){const l=a[Yt];a[Xl]&&ul(a[Xl]),a[ks]&&ul(a[ks]),l.destroyNode&&Qd(o,a,l,3,null,null),function XP(o){let a=o[Rs];if(!a)return Va(o[yt],o);for(;a;){let l=null;if(Hi(a))l=a[Rs];else{const d=a[ui];d&&(l=d)}if(!l){for(;a&&!a[jr]&&a!==o;)Hi(a)&&Va(a[yt],a),a=a[In];null===a&&(a=o),Hi(a)&&Va(a[yt],a),l=a&&a[jr]}a=l}}(a)}}function Va(o,a){if(!(256&a[rn])){a[rn]&=-129,a[rn]|=256,function qy(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof wl)){const m=l[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const I=f[m[v]],D=m[v+1];to(4,I,D);try{D.call(I)}finally{to(5,I,D)}}else{to(4,f,m);try{m.call(f)}finally{to(5,f,m)}}}}}(o,a),function Fc(o,a){const l=o.cleanup,d=a[yo];if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+3];v>=0?d[v]():d[-v].unsubscribe(),m+=2}else l[m].call(d[l[m+1]]);null!==d&&(a[yo]=null);const f=a[Za];if(null!==f){a[Za]=null;for(let m=0;m<f.length;m++)(0,f[m])()}}(o,a),1===a[yt].type&&a[Yt].destroy();const l=a[wc];if(null!==l&&$i(a[In])){l!==a[In]&&iE(l,a);const d=a[ts];null!==d&&d.detachView(o)}!function WA(o){Gm.delete(o[Ma])}(a)}}function oE(o,a,l){return function rD(o,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[nr];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:m}=o.data[d.directiveStart+f];if(m===As.None||m===As.Emulated)return null}return ns(d,l)}}(o,a.parent,l)}function Ua(o,a,l,d,f){o.insertBefore(a,l,d,f)}function kf(o,a,l){o.appendChild(a,l)}function aE(o,a,l,d,f){null!==d?Ua(o,a,l,d,f):kf(o,a,l)}function Wy(o,a){return o.parentNode(a)}function iD(o,a,l){return cE(o,a,l)}let Ky,Xy,Jy,cE=function sD(o,a,l){return 40&o.type?ns(o,l):null};function Of(o,a,l,d){const f=oE(o,d,a),m=a[Yt],I=iD(d.parent||a[ci],d,a);if(null!=f)if(Array.isArray(l))for(let D=0;D<l.length;D++)aE(m,f,l[D],I,!1);else aE(m,f,l,I,!1);void 0!==Ky&&Ky(m,d,a,l,f)}function Ym(o,a){if(null!==a){const l=a.type;if(3&l)return ns(a,o);if(4&l)return Zy(-1,o[a.index]);if(8&l){const d=a.child;if(null!==d)return Ym(o,d);{const f=o[a.index];return $i(f)?Zy(-1,f):Xn(f)}}if(32&l)return JI(a,o)()||Xn(o[a.index]);{const d=oD(o,a);return null!==d?Array.isArray(d)?d[0]:Ym(Wm(o[li]),d):Ym(o,a.next)}}return null}function oD(o,a){return null!==a?o[li][ci].projection[a.projection]:null}function Zy(o,a){const l=ui+o+1;if(l<a.length){const d=a[l],f=d[yt].firstChild;if(null!==f)return Ym(d,f)}return a[Pi]}function Hs(o,a,l,d,f,m,v){for(;null!=l;){const I=d[l.index],D=l.type;if(v&&0===a&&(I&&io(Xn(I),d),l.flags|=2),32!=(32&l.flags))if(8&D)Hs(o,a,l.child,d,f,m,!1),Pf(a,o,f,I,m);else if(32&D){const x=JI(l,d);let O;for(;O=x();)Pf(a,o,f,O,m);Pf(a,o,f,I,m)}else 16&D?Xd(o,a,d,l,f,m):Pf(a,o,f,I,m);l=v?l.projectionNext:l.next}}function Qd(o,a,l,d,f,m){Hs(l,d,o.firstChild,a,f,m,!1)}function Xd(o,a,l,d,f,m){const v=l[li],D=v[ci].projection[d.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)Pf(a,o,f,D[x],m);else{let x=D;const O=v[In];Uy(d)&&(x.flags|=128),Hs(o,a,x,O,f,m,!0)}}function Ba(o,a,l){""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l)}function lD(o,a,l){const{mergedAttrs:d,classes:f,styles:m}=l;null!==d&&xa(o,a,d),null!==f&&Ba(o,a,f),null!==m&&function ik(o,a,l){o.setAttribute(a,"style",l)}(o,a,m)}function ok(o){Xy=o}function dD(o){return function ev(){if(void 0===Jy&&(Jy=null,pn.trustedTypes))try{Jy=pn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Jy}()?.createScriptURL(o)||o}class hD{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ft})`}}function Pl(o){return o instanceof hD?o.changingThisBreaksApplicationSecurity:o}function Qm(o,a){const l=function pD(o){return o instanceof hD&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${Ft})`)}return l===a}const _k=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Lf=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(Lf||{});function gE(o){const a=eg();return a?a.sanitize(Lf.URL,o)||"":Qm(o,"URL")?Pl(o):function dE(o){return(o=String(o)).match(_k)?o:"unsafe:"+o}(ye(o))}function gi(o){const a=eg();if(a)return dD(a.sanitize(Lf.RESOURCE_URL,o)||"");if(Qm(o,"ResourceURL"))return dD(Pl(o));throw new me(904,!1)}function bD(o,a,l){return function Ek(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?gi:gE}(a,l)(o)}function eg(){const o=Xe();return o&&o[vo].sanitizer}class yr{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Bt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const tg=new yr("ENVIRONMENT_INITIALIZER"),TD=new yr("INJECTOR",-1),gs=new yr("INJECTOR_DEF_TYPES");class Vf{get(a,l=ct){if(l===ct){const d=new Error(`NullInjectorError: No provider for ${pe(a)}!`);throw d.name="NullInjectorError",d}return l}}function ng(o){return{\u0275providers:o}}function yE(...o){return{\u0275providers:rg(0,o),\u0275fromNgModule:!0}}function rg(o,...a){const l=[],d=new Set;let f;const m=v=>{l.push(v)};return kc(a,v=>{const I=v;Uf(I,m,[],d)&&(f||=[],f.push(I))}),void 0!==f&&ig(f,m),l}function ig(o,a){for(let l=0;l<o.length;l++){const{ngModule:d,providers:f}=o[l];vE(f,m=>{a(m,d)})}}function Uf(o,a,l,d){if(!(o=Qe(o)))return!1;let f=null,m=Vr(o);const v=!m&&en(o);if(m||v){if(v&&!v.standalone)return!1;f=o}else{const D=o.ngModule;if(m=Vr(D),!m)return!1;f=D}const I=d.has(f);if(v){if(I)return!1;if(d.add(f),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of D)Uf(x,a,l,d)}}else{if(!m)return!1;{if(null!=m.imports&&!I){let x;d.add(f);try{kc(m.imports,O=>{Uf(O,a,l,d)&&(x||=[],x.push(O))})}finally{}void 0!==x&&ig(x,a)}if(!I){const x=sa(f)||(()=>new f);a({provide:f,useFactory:x,deps:On},f),a({provide:gs,useValue:f,multi:!0},f),a({provide:tg,useValue:()=>_t(f),multi:!0},f)}const D=m.providers;if(null!=D&&!I){const x=o;vE(D,O=>{a(O,x)})}}}return f!==o&&void 0!==o.providers}function vE(o,a){for(let l of o)ke(l)&&(l=l.\u0275providers),Array.isArray(l)?vE(l,a):a(l)}const CD=q({provide:String,useValue:q});function wE(o){return null!==o&&"object"==typeof o&&CD in o}function Au(o){return"function"==typeof o}const ov=new yr("Set Injector scope."),av={},Tk={};let IE;function cv(){return void 0===IE&&(IE=new Vf),IE}class lc{}class jf extends lc{get destroyed(){return this._destroyed}constructor(a,l,d,f){super(),this.parent=l,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sg(a,v=>this.processProvider(v)),this.records.set(TD,Hf(void 0,this)),f.has("environment")&&this.records.set(lc,Hf(void 0,this));const m=this.records.get(ov);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(gs.multi,On,Wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of a)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const l=de(this),d=Sn(void 0);try{return a()}finally{de(l),Sn(d)}}get(a,l=ct,d=Wt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(Sa))return a[Sa](this);d=$n(d);const m=de(this),v=Sn(void 0);try{if(!(d&Wt.SkipSelf)){let D=this.records.get(a);if(void 0===D){const x=function Ck(o){return"function"==typeof o||"object"==typeof o&&o instanceof yr}(a)&&or(a);D=x&&this.injectableDefInScope(x)?Hf(lv(a),av):null,this.records.set(a,D)}if(null!=D)return this.hydrate(a,D)}return(d&Wt.Self?cv():this.parent).get(a,l=d&Wt.Optional&&l===ct?null:l)}catch(I){if("NullInjectorError"===I.name){if((I[jt]=I[jt]||[]).unshift(pe(a)),m)throw I;return function Mi(o,a,l,d){const f=o[jt];throw a[z]&&f.unshift(a[z]),o.message=function po(o,a,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=pe(a);if(Array.isArray(a))f=a.map(pe).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let I=a[v];m.push(v+":"+("string"==typeof I?JSON.stringify(I):pe(I)))}f=`{${m.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${o.replace(ee,"\n  ")}`}("\n"+o.message,f,l,d),o.ngTokenPath=f,o[jt]=null,o}(I,a,"R3InjectorError",this.source)}throw I}finally{Sn(v),de(m)}}resolveInjectorInitializers(){const a=de(this),l=Sn(void 0);try{const f=this.get(tg.multi,On,Wt.Self);for(const m of f)m()}finally{de(a),Sn(l)}}toString(){const a=[],l=this.records;for(const d of l.keys())a.push(pe(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(a){let l=Au(a=Qe(a))?a:Qe(a&&a.provide);const d=function DD(o){return wE(o)?Hf(void 0,o.useValue):Hf(zf(o),av)}(a);if(Au(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=Hf(void 0,av,!0),f.factory=()=>Zt(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,d)}hydrate(a,l){return l.value===av&&(l.value=Tk,l.value=l.factory()),"object"==typeof l.value&&l.value&&function TE(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=Qe(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}removeOnDestroy(a){const l=this._onDestroyHooks.indexOf(a);-1!==l&&this._onDestroyHooks.splice(l,1)}}function lv(o){const a=or(o),l=null!==a?a.factory:sa(o);if(null!==l)return l;if(o instanceof yr)throw new me(204,!1);if(o instanceof Function)return function EE(o){const a=o.length;if(a>0)throw ua(a,"?"),new me(204,!1);const l=function Ii(o){return o&&(o[cr]||o[Br])||null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new me(204,!1)}function zf(o,a,l){let d;if(Au(o)){const f=Qe(o);return sa(f)||lv(f)}if(wE(o))d=()=>Qe(o.useValue);else if(function Bf(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...Zt(o.deps||[]));else if(function AD(o){return!(!o||!o.useExisting)}(o))d=()=>_t(Qe(o.useExisting));else{const f=Qe(o&&(o.useClass||o.provide));if(!function bE(o){return!!o.deps}(o))return sa(f)||lv(f);d=()=>new f(...Zt(o.deps))}return d}function Hf(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function sg(o,a){for(const l of o)Array.isArray(l)?sg(l,a):l&&ke(l)?sg(l.\u0275providers,a):a(l)}const uv=new yr("AppId",{providedIn:"root",factory:()=>CE}),CE="ng",dv=new yr("Platform Initializer"),AE=new yr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),hv=new yr("CSP nonce",{providedIn:"root",factory:()=>function Ff(){if(void 0!==Xy)return Xy;if(typeof document<"u")return document;throw new me(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let kE=(o,a,l)=>null;function NE(o,a,l=!1){return kE(o,a,l)}class LE{}class xk{}class Mk{resolveComponentFactory(a){throw function mB(o){const a=Error(`No component factory found for ${pe(o)}.`);return a.ngComponent=o,a}(a)}}let lg=(()=>{class o{static#e=this.NULL=new Mk}return o})();function VE(){return Lc(ki(),Xe())}function Lc(o,a){return new vv(ns(o,a))}let vv=(()=>{class o{constructor(l){this.nativeElement=l}static#e=this.__NG_ELEMENT_ID__=VE}return o})();function UE(o){return o instanceof vv?o.nativeElement:o}class Pk{}let kk=(()=>{class o{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function gB(){const o=Xe(),l=qi(ki().index,o);return(Hi(l)?l:o)[Yt]}()}return o})(),Ok=(()=>{class o{static#e=this.\u0275prov=Bt({token:o,providedIn:"root",factory:()=>null})}return o})();class FD{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Nk=new FD("16.2.9"),LD={};function jD(o,a=null,l=null,d){const f=zD(o,a,l,d);return f.resolveInjectorInitializers(),f}function zD(o,a=null,l=null,d,f=new Set){const m=[l||On,yE(o)];return d=d||("object"==typeof o?void 0:pe(o)),new jf(m,a||cv(),d||null,f)}let uc=(()=>{class o{static#e=this.THROW_IF_NOT_FOUND=ct;static#t=this.NULL=new Vf;static create(l,d){if(Array.isArray(l))return jD({name:""},d,l,"");{const f=l.name??"";return jD({name:f},l.parent,l.providers,f)}}static#n=this.\u0275prov=Bt({token:o,providedIn:"any",factory:()=>_t(TD)});static#r=this.__NG_ELEMENT_ID__=-1}return o})();function BE(o){return o.ngOriginalError}class Su{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&BE(a);for(;l&&BE(l);)l=BE(l);return l||null}}function Iv(o){return a=>{setTimeout(o,void 0,a)}}const Nl=class jE extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){let f=a,m=l||(()=>null),v=d;if(a&&"object"==typeof a){const D=a;f=D.next?.bind(D),m=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(m=Iv(m),f&&(f=Iv(f)),v&&(v=Iv(v)));const I=super.subscribe({next:f,error:m,complete:v});return a instanceof K.w0&&a.add(I),I}};function Ev(...o){}class $s{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nl(!1),this.onMicrotaskEmpty=new Nl(!1),this.onStable=new Nl(!1),this.onError=new Nl(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Bk(){const o="function"==typeof pn.requestAnimationFrame;let a=pn[o?"requestAnimationFrame":"setTimeout"],l=pn[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&l){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const f=l[Zone.__symbol__("OriginalDelegate")];f&&(l=f)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function TB(o){const a=()=>{!function bB(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(pn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,GD(o),o.isCheckStableRunning=!0,zE(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),GD(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,m,v,I)=>{if(function AB(o){return!(!Array.isArray(o)||1!==o.length)&&!0===o[0].data?.__ignore_ng_zone__}(I))return l.invokeTask(f,m,v,I);try{return jk(o),l.invokeTask(f,m,v,I)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),zk(o)}},onInvoke:(l,d,f,m,v,I,D)=>{try{return jk(o),l.invoke(f,m,v,I,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),zk(o)}},onHasTask:(l,d,f,m)=>{l.hasTask(f,m),d===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,GD(o),zE(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,d,f,m)=>(l.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$s.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if($s.isInAngularZone())throw new me(909,!1)}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,a,EB,Ev,Ev);try{return m.runTask(v,l,d)}finally{m.cancelTask(v)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const EB={};function zE(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function GD(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function jk(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function zk(o){o._nesting--,zE(o)}class CB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nl,this.onMicrotaskEmpty=new Nl,this.onStable=new Nl,this.onError=new Nl}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}const Hk=new yr("",{providedIn:"root",factory:$k});function $k(){const o=At($s);let a=!0;const l=new V.y(f=>{a=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{f.next(a),f.complete()})}),d=new V.y(f=>{let m;o.runOutsideAngular(()=>{m=o.onStable.subscribe(()=>{$s.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(a=!0,f.next(!0))})})});const v=o.onUnstable.subscribe(()=>{$s.assertInAngularZone(),a&&(a=!1,o.runOutsideAngular(()=>{f.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});return(0,ae.T)(l,d.pipe((0,Ue.B)()))}function xu(o){return o instanceof Function?o():o}let qD=(()=>{class o{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Bt({token:o,providedIn:"root",factory:()=>new o})}return o})();function bv(o){for(;o;){o[rn]|=64;const a=Wm(o);if(Qa(o)&&!a)return o;o=a}return null}const Zk=new yr("",{providedIn:"root",factory:()=>!1});let $E=null;function Jk(o,a){return o[a]??nO()}function eO(o,a){const l=nO();l.producerNode?.length&&(o[a]=$E,l.lView=o,$E=tO())}const FB={...cl,consumerIsAlwaysLive:!0,consumerMarkedDirty:o=>{bv(o.lView)},lView:null};function tO(){return Object.create(FB)}function nO(){return $E??=tO(),$E}const xn={};function rO(o){iO(Gn(),Xe(),gr()+o,!1)}function iO(o,a,l,d){if(!d)if(3==(3&a[rn])){const m=o.preOrderCheckHooks;null!==m&&xc(a,m,l)}else{const m=o.preOrderHooks;null!==m&&Ls(a,m,0,l)}Jt(l)}function hg(o,a=Wt.Default){const l=Xe();return null===l?_t(o,a):Iu(ki(),l,Qe(o),a)}function sO(){throw new Error("invalid")}function GE(o,a,l,d,f,m,v,I,D,x,O){const G=a.blueprint.slice();return G[nr]=f,G[rn]=140|d,(null!==x||o&&2048&o[rn])&&(G[rn]|=2048),Pm(G),G[In]=G[Ms]=o,G[ur]=l,G[vo]=v||o&&o[vo],G[Yt]=I||o&&o[Yt],G[Js]=D||o&&o[Js]||null,G[ci]=m,G[Ma]=function Ml(){return KI++}(),G[eo]=O,G[Ql]=x,G[li]=2==a.type?o[li]:G,G}function fg(o,a,l,d,f){let m=o.data[a];if(null===m)m=function WD(o,a,l,d,f){const m=hu(),v=mf(),D=o.data[a]=function lO(o,a,l,d,f,m){let v=a?a.injectorIndex:-1,I=0;return Na()&&(I|=128),{type:l,index:d,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,a,d,f);return null===o.firstChild&&(o.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D,D.prev=m)),D}(o,a,l,d,f),function Dy(){return ln.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=l,m.value=d,m.attrs=f;const v=function vl(){const o=ln.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Vo(m,!0),m}function Tv(o,a,l,d){if(0===l)return-1;const f=a.length;for(let m=0;m<l;m++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function oO(o,a,l,d,f){const m=Jk(a,Xl),v=gr(),I=2&d;try{Jt(-1),I&&a.length>Fn&&iO(o,a,Fn,!1),to(I?2:0,f);const x=I?m:null,O=Jh(x);try{null!==x&&(x.dirty=!1),l(d,f)}finally{Qr(x,O)}}finally{I&&null===a[Xl]&&eO(a,Xl),Jt(v),to(I?3:1,f)}}function KD(o,a,l){if(vd(a)){const d=Gi(null);try{const m=a.directiveEnd;for(let v=a.directiveStart;v<m;v++){const I=o.data[v];I.contentQueries&&I.contentQueries(1,l[v],v)}}finally{Gi(d)}}}function qE(o,a,l){Xr()&&(function Vc(o,a,l,d){const f=l.directiveStart,m=l.directiveEnd;ia(l)&&function eS(o,a,l){const d=ns(a,o),f=kt(l);let v=16;l.signals?v=4096:l.onPush&&(v=64);const I=Pu(o,GE(o,f,null,v,d,a,null,o[vo].rendererFactory.createRenderer(d,l),null,null,null));o[a.index]=I}(a,l,o.data[f+l.componentOffset]),o.firstCreatePass||ro(l,a),io(d,a);const v=l.initialInputs;for(let I=f;I<m;I++){const D=o.data[I],x=sc(a,o,I,l);io(x,a),null!==v&&YE(0,I-f,x,D,0,v),fs(D)&&(qi(l.index,a)[ur]=sc(a,o,I,l))}}(o,a,l,ns(l,a)),64==(64&l.flags)&&Dv(o,a,l))}function fa(o,a,l=ns){const d=a.localNames;if(null!==d){let f=a.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],I=-1===v?l(a,o):o[v];o[f++]=I}}}function kt(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=pg(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):a}function pg(o,a,l,d,f,m,v,I,D,x,O){const G=Fn+d,oe=G+f,fe=function En(o,a){const l=[];for(let d=0;d<a;d++)l.push(d<o?null:xn);return l}(G,oe),Ge="function"==typeof x?x():x;return fe[yt]={type:o,blueprint:fe,template:l,queries:null,viewQuery:I,declTNode:a,data:fe.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Ge,incompleteFirstPass:!1,ssrId:O}}let ZD=o=>null;function Gs(o,a,l,d){for(let f in o)if(o.hasOwnProperty(f)){l=null===l?{}:l;const m=o[f];null===d?gg(l,a,f,m):d.hasOwnProperty(f)&&gg(l,a,d[f],m)}return l}function gg(o,a,l,d){o.hasOwnProperty(l)?o[l].push(a,d):o[l]=[a,d]}function ys(o,a,l,d){if(Xr()){const f=null===d?null:{"":-1},m=function hO(o,a){const l=o.directiveRegistry;let d=null,f=null;if(l)for(let m=0;m<l.length;m++){const v=l[m];if(Q(a,v.selectors,!1))if(d||(d=[]),fs(v))if(null!==v.findHostDirectiveDefs){const I=[];f=f||new Map,v.findHostDirectiveDefs(v,I,f),d.unshift(...I,v),Mu(o,a,I.length)}else d.unshift(v),Mu(o,a,0);else f=f||new Map,v.findHostDirectiveDefs?.(v,d,f),d.push(v)}return null===d?null:[d,f]}(o,l);let v,I;null===m?v=I=null:[v,I]=m,null!==v&&QD(o,a,l,v,f,I),f&&function XD(o,a,l){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=l[a[f+1]];if(null==m)throw new me(-301,!1);d.push(a[f],m)}}}(l,d,f)}l.mergedAttrs=Ka(l.mergedAttrs,l.attrs)}function QD(o,a,l,d,f,m){for(let x=0;x<d.length;x++)Tl(ro(l,a),o,d[x].type);!function JD(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}(l,o.data.length,d.length);for(let x=0;x<d.length;x++){const O=d[x];O.providersResolver&&O.providersResolver(O)}let v=!1,I=!1,D=Tv(o,a,d.length,null);for(let x=0;x<d.length;x++){const O=d[x];l.mergedAttrs=Ka(l.mergedAttrs,O.hostAttrs),fO(o,l,a,D,O),ZE(D,O,f),null!==O.contentQueries&&(l.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(l.flags|=64);const G=O.type.prototype;!v&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((o.preOrderHooks??=[]).push(l.index),v=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(l.index),I=!0),D++}!function _s(o,a,l){const f=a.directiveEnd,m=o.data,v=a.attrs,I=[];let D=null,x=null;for(let O=a.directiveStart;O<f;O++){const G=m[O],oe=l?l.get(G):null,Ge=oe?oe.outputs:null;D=Gs(G.inputs,O,D,oe?oe.inputs:null),x=Gs(G.outputs,O,x,Ge);const dt=null===D||null===v||xs(a)?null:QE(D,O,v);I.push(dt)}null!==D&&(D.hasOwnProperty("class")&&(a.flags|=8),D.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=I,a.inputs=D,a.outputs=x}(o,l,m)}function Dv(o,a,l){const d=l.directiveStart,f=l.directiveEnd,m=l.index,v=function Sy(){return ln.lFrame.currentDirectiveIndex}();try{Jt(m);for(let I=d;I<f;I++){const D=o.data[I],x=a[I];pu(I),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&dO(D,x)}}finally{Jt(-1),pu(v)}}function dO(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Mu(o,a,l){a.componentOffset=l,(o.components??=[]).push(a.index)}function ZE(o,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=o;fs(a)&&(l[""]=o)}}function fO(o,a,l,d,f){o.data[d]=f;const m=f.factory||(f.factory=sa(f.type)),v=new wl(m,fs(f),hg);o.blueprint[d]=v,l[d]=v,function _g(o,a,l,d,f){const m=f.hostBindings;if(m){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const I=~a.index;(function Av(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(v)!=I&&v.push(I),v.push(l,d,m)}}(o,a,d,Tv(o,l,f.hostVars,xn),f)}function ja(o,a,l,d,f,m){const v=ns(o,a);!function yg(o,a,l,d,f,m,v){if(null==m)o.removeAttribute(a,f,l);else{const I=null==v?ye(m):v(m,d||"",f);o.setAttribute(a,f,I,l)}}(a[Yt],v,m,o.value,l,d,f)}function YE(o,a,l,d,f,m){const v=m[a];if(null!==v)for(let I=0;I<v.length;)Sv(d,l,v[I++],v[I++],v[I++])}function Sv(o,a,l,d,f){const m=Gi(null);try{const v=o.inputTransforms;null!==v&&v.hasOwnProperty(d)&&(f=v[d].call(a,f)),null!==o.setInput?o.setInput(a,f,l,d):a[d]=f}finally{Gi(m)}}function QE(o,a,l){let d=null,f=0;for(;f<l.length;){const m=l[f];if(0!==m)if(5!==m){if("number"==typeof m)break;if(o.hasOwnProperty(m)){null===d&&(d=[]);const v=o[m];for(let I=0;I<v.length;I+=2)if(v[I]===a){d.push(m,v[I+1],l[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function XE(o,a,l,d){return[o,!0,!1,a,null,0,d,l,null,null,null]}function tS(o,a){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const m=l[d+1];if(-1!==m){const v=o.data[m];yf(l[d]),v.contentQueries(2,a[m],m)}}}function Pu(o,a){return o[Rs]?o[Yl][jr]=a:o[Rs]=a,o[Yl]=a,a}function JE(o,a,l){yf(0);const d=Gi(null);try{a(o,l)}finally{Gi(d)}}function nS(o){return o[yo]||(o[yo]=[])}function rS(o){return o.cleanup||(o.cleanup=[])}function Rv(o,a){const l=o[Js],d=l?l.get(Su,null):null;d&&d.handleError(a)}function eb(o,a,l,d,f){for(let m=0;m<l.length;){const v=l[m++],I=l[m++];Sv(o.data[v],a[v],d,I,f)}}function iS(o,a){const l=qi(a,o),d=l[yt];!function sS(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])}(d,l);const f=l[nr];null!==f&&null===l[eo]&&(l[eo]=NE(f,l[Js])),Wf(d,l,l[ur])}function Wf(o,a,l){$t(a);try{const d=o.viewQuery;null!==d&&JE(1,d,l);const f=o.template;null!==f&&oO(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&tS(o,a),o.staticViewQueries&&JE(2,o.viewQuery,l);const m=o.components;null!==m&&function tb(o,a){for(let l=0;l<a.length;l++)iS(o,a[l])}(a,m)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[rn]&=-5,no()}}let Mv=(()=>{class o{constructor(){this.all=new Set,this.queue=new Map}create(l,d,f){const m=typeof Zone>"u"?null:Zone.current,v=function Rm(o,a,l){const d=Object.create(Ey);l&&(d.consumerAllowSignalWrites=!0),d.fn=o,d.schedule=a;const f=v=>{d.cleanupFn=v};return d.ref={notify:()=>Td(d),run:()=>{if(d.dirty=!1,d.hasRun&&!Dm(d))return;d.hasRun=!0;const v=Jh(d);try{d.cleanupFn(),d.cleanupFn=Sd,d.fn(f)}finally{Qr(d,v)}},cleanup:()=>d.cleanupFn()},d.ref}(l,x=>{this.all.has(x)&&this.queue.set(x,m)},f);let I;this.all.add(v),v.notify();const D=()=>{v.cleanup(),I?.(),this.all.delete(v),this.queue.delete(v)};return I=d?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[l,d]of this.queue)this.queue.delete(l),d?d.run(()=>l.run()):l.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Bt({token:o,providedIn:"root",factory:()=>new o})}return o})();function Kf(o,a,l){let d=l?o.styles:null,f=l?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const I=a[v];"number"==typeof I?m=I:1==m?f=st(f,I):2==m&&(d=st(d,I+": "+a[++v]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=f:o.classesWithoutHost=f}function Zf(o,a,l,d,f=!1){for(;null!==l;){const m=a[l.index];null!==m&&d.push(Xn(m)),$i(m)&&rb(m,d);const v=l.type;if(8&v)Zf(o,a,l.child,d);else if(32&v){const I=JI(l,a);let D;for(;D=I();)d.push(D)}else if(16&v){const I=oD(a,l);if(Array.isArray(I))d.push(...I);else{const D=Wm(a[li]);Zf(D[yt],D,I,d,!0)}}l=f?l.projectionNext:l.next}return d}function rb(o,a){for(let l=ui;l<o.length;l++){const d=o[l],f=d[yt].firstChild;null!==f&&Zf(d[yt],d,f,a)}o[Pi]!==o[nr]&&a.push(o[Pi])}function Pv(o,a,l,d=!0){const f=a[vo],m=f.rendererFactory,v=f.afterRenderEventManager;m.begin?.(),v?.begin();try{kv(o,a,o.template,l)}catch(D){throw d&&Rv(a,D),D}finally{m.end?.(),f.effectManager?.flush(),v?.end()}}function kv(o,a,l,d){const f=a[rn];if(256!=(256&f)){a[vo].effectManager?.flush(),$t(a);try{Pm(a),function gf(o){return ln.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&oO(o,a,l,2,d);const v=3==(3&f);if(v){const x=o.preOrderCheckHooks;null!==x&&xc(a,x,null)}else{const x=o.preOrderHooks;null!==x&&Ls(a,x,0,null),If(a,0)}if(function mO(o){for(let a=JA(o);null!==a;a=eD(a)){if(!a[Ic])continue;const l=a[Pa];for(let d=0;d<l.length;d++){tc(l[d])}}}(a),ib(a,2),null!==o.contentQueries&&tS(o,a),v){const x=o.contentCheckHooks;null!==x&&xc(a,x)}else{const x=o.contentHooks;null!==x&&Ls(a,x,1),If(a,1)}!function LB(o,a){const l=o.hostBindingOpCodes;if(null===l)return;const d=Jk(a,ks);try{for(let f=0;f<l.length;f++){const m=l[f];if(m<0)Jt(~m);else{const v=m,I=l[++f],D=l[++f];fu(I,v),d.dirty=!1;const x=Jh(d);try{D(2,a[v])}finally{Qr(d,x)}}}}finally{null===a[ks]&&eO(a,ks),Jt(-1)}}(o,a);const I=o.components;null!==I&&Nv(a,I,0);const D=o.viewQuery;if(null!==D&&JE(2,D,d),v){const x=o.viewCheckHooks;null!==x&&xc(a,x)}else{const x=o.viewHooks;null!==x&&Ls(a,x,2),If(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[rn]&=-73,Cy(a)}finally{no()}}}function ib(o,a){for(let l=JA(o);null!==l;l=eD(l))for(let d=ui;d<l.length;d++)Ov(l[d],a)}function sb(o,a,l){Ov(qi(a,o),l)}function Ov(o,a){if(!function df(o){return 128==(128&o[rn])}(o))return;const l=o[yt],d=o[rn];if(80&d&&0===a||1024&d||2===a)kv(l,o,l.template,o[ur]);else if(o[hs]>0){ib(o,1);const f=l.components;null!==f&&Nv(o,f,1)}}function Nv(o,a,l){for(let d=0;d<a.length;d++)sb(o,a[d],l)}class Ci{get rootNodes(){const a=this._lView,l=a[yt];return Zf(l,a,l.firstChild,[])}constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ur]}set context(a){this._lView[ur]=a}get destroyed(){return 256==(256&this._lView[rn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[In];if($i(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(Gy(a,d),Bn(l,d))}this._attachedToViewContainer=!1}sE(this._lView[yt],this._lView)}onDestroy(a){!function Cc(o,a){if(256==(256&o[rn]))throw new me(911,!1);null===o[Za]&&(o[Za]=[]),o[Za].push(a)}(this._lView,a)}markForCheck(){bv(this._cdRefInjectingView||this._lView)}detach(){this._lView[rn]&=-129}reattach(){this._lView[rn]|=128}detectChanges(){Pv(this._lView[yt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function tD(o,a){Qd(o,a,a[Yt],2,null,null)}(this._lView[yt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=a}}class qs extends Ci{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Pv(a[yt],a,a[ur],!1)}checkNoChanges(){}get context(){return null}}class wg extends lg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=en(a);return new Ig(l,this.ngModule)}}function Fv(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class _O{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,d){d=$n(d);const f=this.injector.get(a,LD,d);return f!==LD||l===LD?f:this.parentInjector.get(a,l,d)}}class Ig extends xk{get inputs(){const a=this.componentDef,l=a.inputTransforms,d=Fv(a.inputs);if(null!==l)for(const f of d)l.hasOwnProperty(f.propName)&&(f.transform=l[f.propName]);return d}get outputs(){return Fv(this.componentDef.outputs)}constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function Be(o){return o.map(le).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}create(a,l,d,f){let m=(f=f||this.ngModule)instanceof lc?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new _O(a,m):a,I=v.get(Pk,null);if(null===I)throw new me(407,!1);const G={rendererFactory:I,sanitizer:v.get(Ok,null),effectManager:v.get(Mv,null),afterRenderEventManager:v.get(qD,null)},oe=I.createRenderer(null,this.componentDef),fe=this.componentDef.selectors[0][0]||"div",Ge=d?function Cv(o,a,l,d){const m=d.get(Zk,!1)||l===As.ShadowDom,v=o.selectRootElement(a,m);return function mg(o){ZD(o)}(v),v}(oe,d,this.componentDef.encapsulation,v):Cu(oe,fe,function gO(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(fe)),nn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let tt=null;null!==Ge&&(tt=NE(Ge,v,!0));const mn=pg(0,null,null,1,0,null,null,null,null,null,null),kn=GE(null,mn,null,nn,null,null,G,oe,v,null,tt);let Er,oo;$t(kn);try{const el=this.componentDef;let zp,M_=null;el.findHostDirectiveDefs?(zp=[],M_=new Map,el.findHostDirectiveDefs(el,zp,M_),zp.push(el)):zp=[el];const tF=function yO(o,a){const l=o[yt],d=Fn;return o[d]=a,fg(l,d,2,"#host",null)}(kn,Ge),BT=function vO(o,a,l,d,f,m,v){const I=f[yt];!function wO(o,a,l,d){for(const f of o)a.mergedAttrs=Ka(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(Kf(a,a.mergedAttrs,!0),null!==l&&lD(d,l,a))}(d,o,a,v);let D=null;null!==a&&(D=NE(a,f[Js]));const x=m.rendererFactory.createRenderer(a,l);let O=16;l.signals?O=4096:l.onPush&&(O=64);const G=GE(f,kt(l),null,O,f[o.index],o,m,x,null,null,D);return I.firstCreatePass&&Mu(I,o,d.length-1),Pu(f,G),f[o.index]=G}(tF,Ge,el,zp,kn,G,oe);oo=Rd(mn,Fn),Ge&&function bg(o,a,l,d){if(d)xa(o,l,["ng-version",Nk.full]);else{const{attrs:f,classes:m}=function it(o){const a=[],l=[];let d=1,f=2;for(;d<o.length;){let m=o[d];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++d]):8===f&&l.push(m);else{if(!ji(f))break;f=m}d++}return{attrs:a,classes:l}}(a.selectors[0]);f&&xa(o,l,f),m&&m.length>0&&Ba(o,l,m.join(" "))}}(oe,el,Ge,d),void 0!==l&&function ob(o,a,l){const d=o.projection=[];for(let f=0;f<a.length;f++){const m=l[f];d.push(null!=m?Array.from(m):null)}}(oo,this.ngContentSelectors,l),Er=function Eg(o,a,l,d,f,m){const v=ki(),I=f[yt],D=ns(v,f);QD(I,f,v,l,null,d);for(let O=0;O<l.length;O++)io(sc(f,I,v.directiveStart+O,v),f);Dv(I,f,v),D&&io(D,f);const x=sc(f,I,v.directiveStart+v.componentOffset,v);if(o[ur]=f[ur]=x,null!==m)for(const O of m)O(x,a);return KD(I,v,o),x}(BT,el,zp,M_,kn,[cS]),Wf(mn,kn,null)}finally{no()}return new aS(this.componentType,Er,Lc(oo,kn),kn,oo)}}class aS extends LE{constructor(a,l,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.previousInputValues=null,this.instance=l,this.hostView=this.changeDetectorRef=new qs(f),this.componentType=a}setInput(a,l){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),l))return;const m=this._rootLView;eb(m[yt],m,f,a,l),this.previousInputValues.set(a,l),bv(qi(this._tNode.index,m))}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function cS(){const o=ki();aa(Xe()[yt],o)}function Yf(o){let a=function lS(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;a;){let f;if(fs(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new me(903,!1);f=a.\u0275dir}if(f){if(l){d.push(f);const v=o;v.inputs=Qf(o.inputs),v.inputTransforms=Qf(o.inputTransforms),v.declaredInputs=Qf(o.declaredInputs),v.outputs=Qf(o.outputs);const I=f.hostBindings;I&&Tg(o,I);const D=f.viewQuery,x=f.contentQueries;if(D&&uS(o,D),x&&IO(o,x),re(o.inputs,f.inputs),re(o.declaredInputs,f.declaredInputs),re(o.outputs,f.outputs),null!==f.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),re(v.inputTransforms,f.inputTransforms)),fs(f)&&f.data.animation){const O=o.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const I=m[v];I&&I.ngInherit&&I(o),I===Yf&&(l=!1)}}a=Object.getPrototypeOf(a)}!function ab(o){let a=0,l=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Ka(f.hostAttrs,l=Ka(l,f.hostAttrs))}}(d)}function Qf(o){return o===Ei?{}:o===On?[]:o}function uS(o,a){const l=o.viewQuery;o.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function IO(o,a){const l=o.contentQueries;o.contentQueries=l?(d,f,m)=>{a(d,f,m),l(d,f,m)}:a}function Tg(o,a){const l=o.hostBindings;o.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}function ku(o){const a=o.inputConfig,l={};for(const d in a)if(a.hasOwnProperty(d)){const f=a[d];Array.isArray(f)&&f[2]&&(l[d]=f[2])}o.inputTransforms=l}function th(o){return!!Vv(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function Vv(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function is(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function Uv(o,a,l,d){const f=Xe();return is(f,nc(),a)&&(Gn(),ja(_r(),f,o,a,l,d)),Uv}function qv(o,a,l,d,f,m,v,I){const D=Xe(),x=Gn(),O=o+Fn,G=x.firstCreatePass?function pb(o,a,l,d,f,m,v,I,D){const x=a.consts,O=fg(a,o,4,v||null,ec(x,I));ys(a,l,O,ec(x,D)),aa(a,O);const G=O.tView=pg(2,O,d,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x,null);return null!==a.queries&&(a.queries.template(a,O),G.queries=a.queries.embeddedTView(O)),O}(O,x,D,a,l,d,f,m,v):x.data[O];Vo(G,!1);const oe=mb(x,D,G,o);Sc()&&Of(x,D,oe,G),io(oe,D),Pu(D,D[O]=XE(oe,D,oe,G)),Os(G)&&qE(x,D,G),null!=v&&fa(D,G,I)}let mb=function gb(o,a,l,d){return oa(!0),a[Yt].createComment("")};function ES(o){return Ja(function Nm(){return ln.lFrame.contextLView}(),Fn+o)}function sp(o,a,l){const d=Xe();return is(d,nc(),a)&&function pa(o,a,l,d,f,m,v,I){const D=ns(a,l);let O,x=a.inputs;!I&&null!=x&&(O=x[d])?(eb(o,l,O,d,f),ia(a)&&function YD(o,a){const l=qi(a,o);16&l[rn]||(l[rn]|=64)}(l,a.index)):3&a.type&&(d=function Ru(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,m.setProperty(D,d,f))}(Gn(),_r(),d,o,a,d[Yt],l,!1),sp}function sh(o,a,l,d,f){const v=f?"class":"style";eb(o,l,a.inputs[v],v,d)}function op(o,a,l,d){const f=Xe(),m=Gn(),v=Fn+o,I=f[Yt],D=m.firstCreatePass?function Wv(o,a,l,d,f,m){const v=a.consts,D=fg(a,o,2,d,ec(v,f));return ys(a,l,D,ec(v,m)),null!==D.attrs&&Kf(D,D.attrs,!1),null!==D.mergedAttrs&&Kf(D,D.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,D),D}(v,m,f,a,l,d):m.data[v],x=ap(m,f,D,I,a,o);f[v]=x;const O=Os(D);return Vo(D,!0),lD(I,x,D),32!=(32&D.flags)&&Sc()&&Of(m,f,x,D),0===function du(){return ln.lFrame.elementDepthCount}()&&io(x,f),function hi(){ln.lFrame.elementDepthCount++}(),O&&(qE(m,f,D),KD(m,D,f)),null!==d&&fa(f,D),op}function Og(){let o=ki();mf()?Od():(o=o.parent,Vo(o,!1));const a=o;(function Ac(o){return ln.skipHydrationRootTNode===o})(a)&&function pf(){ln.skipHydrationRootTNode=null}(),function km(){ln.lFrame.elementDepthCount--}();const l=Gn();return l.firstCreatePass&&(aa(l,o),vd(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function bf(o){return 0!=(8&o.flags)}(a)&&sh(l,a,Xe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Rc(o){return 0!=(16&o.flags)}(a)&&sh(l,a,Xe(),a.stylesWithoutHost,!1),Og}function oh(o,a,l,d){return op(o,a,l,d),Og(),oh}let ap=(o,a,l,d,f,m)=>(oa(!0),Cu(d,f,function wf(){return ln.lFrame.currentNamespace}()));function Kv(o,a,l){const d=Xe(),f=Gn(),m=o+Fn,v=f.firstCreatePass?function bS(o,a,l,d,f){const m=a.consts,v=ec(m,d),I=fg(a,o,8,"ng-container",v);return null!==v&&Kf(I,v,!0),ys(a,l,I,ec(m,f)),null!==a.queries&&a.queries.elementStart(a,I),I}(m,f,d,a,l):f.data[m];Vo(v,!0);const I=yb(f,d,v,o);return d[m]=I,Sc()&&Of(f,d,I,v),io(I,d),Os(v)&&(qE(f,d,v),KD(f,v,d)),null!=l&&fa(d,v),Kv}function Zv(){let o=ki();const a=Gn();return mf()?Od():(o=o.parent,Vo(o,!1)),a.firstCreatePass&&(aa(a,o),vd(o)&&a.queries.elementEnd(o)),Zv}function _b(o,a,l){return Kv(o,a,l),Zv(),_b}let yb=(o,a,l,d)=>(oa(!0),nE(a[Yt],""));function Ng(){return Xe()}function Yv(o){return!!o&&"function"==typeof o.then}function hc(o){return!!o&&"function"==typeof o.subscribe}function Qv(o,a,l,d){const f=Xe(),m=Gn(),v=ki();return function Xv(o,a,l,d,f,m,v){const I=Os(d),x=o.firstCreatePass&&rS(o),O=a[ur],G=nS(a);let oe=!0;if(3&d.type||v){const dt=ns(d,a),xt=v?v(dt):dt,nn=G.length,tt=v?kn=>v(Xn(kn[d.index])):d.index;let mn=null;if(!v&&I&&(mn=function DS(o,a,l,d){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===l&&f[m+1]===d){const I=a[yo],D=f[m+2];return I.length>D?I[D]:null}"string"==typeof v&&(m+=2)}return null}(o,a,f,d.index)),null!==mn)(mn.__ngLastListenerFn__||mn).__ngNextListenerFn__=m,mn.__ngLastListenerFn__=m,oe=!1;else{m=vb(d,a,O,m,!1);const kn=l.listen(xt,f,m);G.push(m,kn),x&&x.push(f,tt,nn,nn+1)}}else m=vb(d,a,O,m,!1);const fe=d.outputs;let Ge;if(oe&&null!==fe&&(Ge=fe[f])){const dt=Ge.length;if(dt)for(let xt=0;xt<dt;xt+=2){const Er=a[Ge[xt]][Ge[xt+1]].subscribe(m),oo=G.length;G.push(m,Er),x&&x.push(f,d.index,oo,-(oo+1))}}}(m,f,f[Yt],v,o,a,d),Qv}function cp(o,a,l,d){try{return to(6,a,l),!1!==l(d)}catch(f){return Rv(o,f),!1}finally{to(7,a,l)}}function vb(o,a,l,d,f){return function m(v){if(v===Function)return d;bv(o.componentOffset>-1?qi(o.index,a):a);let D=cp(a,l,d,v),x=m.__ngNextListenerFn__;for(;x;)D=cp(a,l,x,v)&&D,x=x.__ngNextListenerFn__;return f&&!1===D&&v.preventDefault(),D}}function Jv(o=1){return function fi(o){return(ln.lFrame.contextLView=function pi(o,a){for(;o>0;)a=a[Ms],o--;return a}(o,ln.lFrame.contextLView))[ur]}(o)}function ew(o,a){let l=null;const d=function k(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(!(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===d?Q(o,m,!0):ue(d,m))return f}else l=f}return l}function wb(o){const a=Xe()[li][ci];if(!a.projection){const d=a.projection=ua(o?o.length:1,null),f=d.slice();let m=a.child;for(;null!==m;){const v=o?ew(m,o):0;null!==v&&(f[v]?f[v].projectionNext=m:d[v]=m,f[v]=m),m=m.next}}}function Fg(o,a=0,l){const d=Xe(),f=Gn(),m=fg(f,Fn+o,16,null,l||null);null===m.projection&&(m.projection=a),Od(),(!d[eo]||Na())&&32!=(32&m.flags)&&function nk(o,a,l){Xd(a[Yt],0,a,l,oE(o,l,a),iD(l.parent||a[ci],l,a))}(f,d,m)}function Vg(o,a){return o<<17|a<<2}function Ho(o){return o>>17&32767}function iw(o){return 2|o}function ju(o){return(131068&o)>>2}function up(o,a){return-131069&o|a<<2}function sw(o){return 1|o}function ow(o,a,l,d,f){const m=o[l+1],v=null===a;let I=d?Ho(m):ju(m),D=!1;for(;0!==I&&(!1===D||v);){const O=o[I+1];Cr(o[I],a)&&(D=!0,o[I+1]=d?sw(O):iw(O)),I=d?Ho(O):ju(O)}D&&(o[l+1]=d?iw(m):sw(m))}function Cr(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&bu(o,a)>=0}function dw(o,a,l){return pc(o,a,l,!1),dw}function zu(o,a){return pc(o,a,null,!0),zu}function pc(o,a,l,d){const f=Xe(),m=Gn(),v=function Bo(o){const a=ln.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}(2);m.firstUpdatePass&&function jg(o,a,l,d){const f=o.data;if(null===f[l+1]){const m=f[gr()],v=function PS(o,a){return a>=o.expandoStartIndex}(o,l);(function Qt(o,a){return 0!=(o.flags&(a?8:16))})(m,d)&&null===a&&!v&&(a=!1),a=function UO(o,a,l,d){const f=function Fd(o){const a=ln.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=Gc(l=Ki(null,o,a,l,d),a.attrs,d),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(l=Ki(f,o,a,l,d),null===m){let D=function BO(o,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==ju(d))return o[Ho(d)]}(o,a,d);void 0!==D&&Array.isArray(D)&&(D=Ki(null,o,a,D[1],d),D=Gc(D,a.attrs,d),function fp(o,a,l,d){o[Ho(l?a.classBindings:a.styleBindings)]=d}(o,a,d,D))}else m=function kS(o,a,l){let d;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)d=Gc(d,o[m].hostAttrs,l);return Gc(d,a.attrs,l)}(o,a,d)}return void 0!==m&&(d?a.residualClasses=m:a.residualStyles=m),l}(f,m,a,d),function LO(o,a,l,d,f,m){let v=m?a.classBindings:a.styleBindings,I=Ho(v),D=ju(v);o[d]=l;let O,x=!1;if(Array.isArray(l)?(O=l[1],(null===O||bu(l,O)>0)&&(x=!0)):O=l,f)if(0!==D){const oe=Ho(o[I+1]);o[d+1]=Vg(oe,I),0!==oe&&(o[oe+1]=up(o[oe+1],d)),o[I+1]=function RS(o,a){return 131071&o|a<<17}(o[I+1],d)}else o[d+1]=Vg(I,0),0!==I&&(o[I+1]=up(o[I+1],d)),I=d;else o[d+1]=Vg(D,0),0===I?I=d:o[D+1]=up(o[D+1],d),D=d;x&&(o[d+1]=iw(o[d+1])),ow(o,O,d,!0),ow(o,O,d,!1),function fc(o,a,l,d,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&bu(m,a)>=0&&(l[d+1]=sw(l[d+1]))}(a,O,o,d,m),v=Vg(I,D),m?a.classBindings=v:a.styleBindings=v}(f,m,a,l,v,d)}}(m,o,v,d),a!==xn&&is(f,v,a)&&function Di(o,a,l,d,f,m,v,I){if(!(3&a.type))return;const D=o.data,x=D[I+1],O=function ga(o){return 1==(1&o)}(x)?_a(D,a,l,f,ju(x),v):void 0;pp(O)||(pp(m)||function xS(o){return 2==(2&o)}(x)&&(m=_a(D,null,l,f,I,v)),function rk(o,a,l,d,f){if(a)f?o.addClass(l,d):o.removeClass(l,d);else{let m=-1===d.indexOf("-")?void 0:jy.DashCase;null==f?o.removeStyle(l,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=jy.Important),o.setStyle(l,d,f,m))}}(d,v,Lo(gr(),l),f,m))}(m,m.data[gr()],f,f[Yt],o,f[v+1]=function zt(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=pe(Pl(o)))),o}(a,l),d,v)}function Ki(o,a,l,d,f){let m=null;const v=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<v&&(m=a[I],d=Gc(d,m.hostAttrs,f),m!==o);)I++;return null!==o&&(l.directiveStylingLast=I),d}function Gc(o,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Co(o,v,!!l||a[++m]))}return void 0===o?null:o}function _a(o,a,l,d,f,m){const v=null===a;let I;for(;f>0;){const D=o[f],x=Array.isArray(D),O=x?D[1]:D,G=null===O;let oe=l[f+1];oe===xn&&(oe=G?On:void 0);let fe=G?Bm(oe,d):O===d?oe:void 0;if(x&&!pp(fe)&&(fe=Bm(D,d)),pp(fe)&&(I=fe,v))return I;const Ge=o[f+1];f=v?Ho(Ge):ju(Ge)}if(null!==a){let D=m?a.residualClasses:a.residualStyles;null!=D&&(I=Bm(D,d))}return I}function pp(o){return void 0!==o}function OS(o,a=""){const l=Xe(),d=Gn(),f=o+Fn,m=d.firstCreatePass?fg(d,f,1,a,null):d.data[f],v=Rt(d,l,m,a,o);l[f]=v,Sc()&&Of(d,l,v,m),Vo(m,!1)}let Rt=(o,a,l,d,f)=>(oa(!0),function ms(o,a){return o.createText(a)}(a[Yt],d));function Ni(o){return zg("",o,""),Ni}function zg(o,a,l){const d=Xe(),f=function Nu(o,a,l,d){return is(o,nc(),l)?a+ye(l)+d:xn}(d,o,a,l);return f!==xn&&function Uc(o,a,l){const d=Lo(a,o);!function Km(o,a,l){o.setValue(a,l)}(o[Yt],d,l)}(d,gr(),f),zg}const Ks=void 0;var Gg=["en",[["a","p"],["AM","PM"],Ks],[["AM","PM"],Ks,Ks],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ks,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ks,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ks,"{1} 'at' {0}",Ks],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function WO(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let ya={};function Bl(o){const a=function qg(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=HS(a);if(l)return l;const d=a.split("-")[0];if(l=HS(d),l)return l;if("en"===d)return Gg;throw new me(701,!1)}function _w(o){return Bl(o)[vs.PluralCase]}function HS(o){return o in ya||(ya[o]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[o]),ya[o]}var vs=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(vs||{});const Fi="en-US";let Nb=Fi;function Dw(o,a,l,d,f){if(o=Qe(o),Array.isArray(o))for(let m=0;m<o.length;m++)Dw(o[m],a,l,d,f);else{const m=Gn(),v=Xe(),I=ki();let D=Au(o)?o:Qe(o.provide);const x=zf(o),O=1048575&I.providerIndexes,G=I.directiveStart,oe=I.providerIndexes>>20;if(Au(o)||!o.multi){const fe=new wl(x,f,hg),Ge=Hb(D,a,f?O:O+oe,G);-1===Ge?(Tl(ro(I,v),m,D),zb(m,o,a.length),a.push(D),I.directiveStart++,I.directiveEnd++,f&&(I.providerIndexes+=1048576),l.push(fe),v.push(fe)):(l[Ge]=fe,v[Ge]=fe)}else{const fe=Hb(D,a,O+oe,G),Ge=Hb(D,a,O,O+oe),xt=Ge>=0&&l[Ge];if(f&&!xt||!f&&!(fe>=0&&l[fe])){Tl(ro(I,v),m,D);const nn=function lN(o,a,l,d,f){const m=new wl(o,l,hg);return m.multi=[],m.index=a,m.componentProviders=0,hx(m,f,d&&!l),m}(f?cN:fx,l.length,f,d,x);!f&&xt&&(l[Ge].providerFactory=nn),zb(m,o,a.length,0),a.push(D),I.directiveStart++,I.directiveEnd++,f&&(I.providerIndexes+=1048576),l.push(nn),v.push(nn)}else zb(m,o,fe>-1?fe:Ge,hx(l[f?Ge:fe],x,!f&&d));!f&&d&&xt&&l[Ge].componentProviders++}}}function zb(o,a,l,d){const f=Au(a),m=function sv(o){return!!o.useClass}(a);if(f||m){const D=(m?Qe(a.useClass):a).prototype.ngOnDestroy;if(D){const x=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const O=x.indexOf(l);-1===O?x.push(l,[d,D]):x[O+1].push(d,D)}else x.push(l,D)}}}function hx(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function Hb(o,a,l,d){for(let f=l;f<d;f++)if(a[f]===o)return f;return-1}function fx(o,a,l,d){return Sw(this.multi,[])}function cN(o,a,l,d){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=sc(l,l[yt],this.providerFactory.index,d);m=I.slice(0,v),Sw(f,m);for(let D=v;D<I.length;D++)m.push(I[D])}else m=[],Sw(f,m);return m}function Sw(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function px(o,a=[]){return l=>{l.providersResolver=(d,f)=>function dx(o,a,l){const d=Gn();if(d.firstCreatePass){const f=fs(o);Dw(l,d.data,d.blueprint,f,!0),Dw(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class dh{}class xw{}function hh(o,a){return new Ip(o,a??null,[])}class Ip extends dh{constructor(a,l,d){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wg(this);const f=ot(a);this._bootstrapComponents=xu(f.bootstrap),this._r3Injector=zD(a,l,[{provide:dh,useValue:this},{provide:lg,useValue:this.componentFactoryResolver},...d],pe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Ep extends xw{constructor(a){super(),this.moduleType=a}create(a){return new Ip(this.moduleType,a,[])}}class $b extends dh{constructor(a){super(),this.componentFactoryResolver=new wg(this),this.instance=null;const l=new jf([...a.providers,{provide:dh,useValue:this},{provide:lg,useValue:this.componentFactoryResolver}],a.parent||cv(),a.debugName,new Set(["environment"]));this.injector=l,a.runEnvironmentInitializers&&l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Kc(o,a,l=null){return new $b({providers:o,parent:a,debugName:l,runEnvironmentInitializers:!0}).injector}let gx=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const d=rg(0,l.type),f=d.length>0?Kc([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,f)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Bt({token:o,providedIn:"environment",factory:()=>new o(_t(lc))})}return o})();function fh(o){o.getStandaloneInjector=a=>a.get(gx).getOrCreateStandaloneInjector(o)}function Nw(o,a,l,d,f,m){const v=a+l;return is(o,v,f)?function dc(o,a,l){return o[a]=l}(o,v+1,m?d.call(m,f):d(f)):function a_(o,a){const l=o[a];return l===xn?void 0:l}(o,v+1)}function bx(o,a){const l=Gn();let d;const f=o+Fn;l.firstCreatePass?(d=function fN(o,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(o===d.name)return d}}(a,l.pipeRegistry),l.data[f]=d,d.onDestroy&&(l.destroyHooks??=[]).push(f,d.onDestroy)):d=l.data[f];const m=d.factory||(d.factory=sa(d.type)),I=Sn(hg);try{const D=bl(!1),x=m();return bl(D),function OO(o,a,l,d){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),a[l]=d}(l,Xe(),f,x),x}finally{Sn(I)}}function Zu(o,a,l){const d=o+Fn,f=Xe(),m=Ja(f,d);return function Cp(o,a){return o[yt].data[a].pure}(f,d)?Nw(f,function Oi(){const o=ln.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),a,m.transform,l,m):m.transform(l)}function Ax(){return this._results[Symbol.iterator]()}class mh{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Nl)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=mh.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=Ax)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=function zr(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function To(o,a,l){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],m=a[d];if(l&&(f=l(f),m=l(m)),m!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function ni(o,a,l,d=!0){const f=a[yt];if(function rE(o,a,l,d){const f=ui+d,m=l.length;d>0&&(l[f-1][jr]=a),d<m-ui?(a[jr]=l[f],Dl(l,ui+d,a)):(l.push(a),a[jr]=null),a[In]=l;const v=a[wc];null!==v&&l!==v&&function nD(o,a){const l=o[Pa];a[li]!==a[In][In][li]&&(o[Ic]=!0),null===l?o[Pa]=[a]:l.push(a)}(v,a);const I=a[ts];null!==I&&I.insertView(o),a[rn]|=128}(f,a,o,l),d){const m=Zy(l,o),v=a[Yt],I=Wy(v,o[Pi]);null!==I&&function QP(o,a,l,d,f,m){d[nr]=f,d[ci]=a,Qd(o,d,l,1,f,m)}(f,o[ci],v,a,I,m)}}let Yu=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=u_}return o})();const Dx=Yu,gN=class extends Dx{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,l){return this.createEmbeddedViewImpl(a,l)}createEmbeddedViewImpl(a,l,d){const f=function mN(o,a,l,d){const f=a.tView,I=GE(o,f,l,4096&o[rn]?4096:16,null,a,null,null,null,d?.injector??null,d?.hydrationInfo??null);I[wc]=o[a.index];const x=o[ts];return null!==x&&(I[ts]=x.createEmbeddedView(f)),Wf(f,I,l),I}(this._declarationLView,this._declarationTContainer,a,{injector:l,hydrationInfo:d});return new Ci(f)}};function u_(){return Fw(ki(),Xe())}function Fw(o,a){return 4&o.type?new gN(a,o,Lc(o,a)):null}let Dp=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=_N}return o})();function _N(){return eT(ki(),Xe())}const yN=Dp,Li=class extends yN{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return Lc(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){const a=ic(this._hostTNode,this._hostLView);if(Il(a)){const l=gu(a,this._hostLView),d=El(a);return new Jr(l[yt].data[d+8],l)}return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=er(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-ui}createEmbeddedView(a,l,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const I=a.createEmbeddedViewImpl(l||{},m,null);return this.insertImpl(I,f,false),I}createComponent(a,l,d,f,m){const v=a&&!function zo(o){return"function"==typeof o}(a);let I;if(v)I=l;else{const dt=l||{};I=dt.index,d=dt.injector,f=dt.projectableNodes,m=dt.environmentInjector||dt.ngModuleRef}const D=v?a:new Ig(en(a)),x=d||this.parentInjector;if(!m&&null==D.ngModule){const xt=(v?x:this.parentInjector).get(lc,null);xt&&(m=xt)}en(D.componentType??{});const fe=D.create(x,f,null,m);return this.insertImpl(fe.hostView,I,false),fe}insert(a,l){return this.insertImpl(a,l,!1)}insertImpl(a,l,d){const f=a._lView;if(function lu(o){return $i(o[In])}(f)){const D=this.indexOf(a);if(-1!==D)this.detach(D);else{const x=f[In],O=new Li(x,x[ci],x[In]);O.detach(O.indexOf(a))}}const v=this._adjustIndex(l),I=this._lContainer;return ni(I,f,v,!d),a.attachToViewContainerRef(),Dl(Vw(I),v,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=er(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=Gy(this._lContainer,l);d&&(Bn(Vw(this._lContainer),l),sE(d[yt],d))}detach(a){const l=this._adjustIndex(a,-1),d=Gy(this._lContainer,l);return d&&null!=Bn(Vw(this._lContainer),l)?new Ci(d):null}_adjustIndex(a,l=0){return a??this.length+l}};function er(o){return o[8]}function Vw(o){return o[8]||(o[8]=[])}function eT(o,a){let l;const d=a[o.index];return $i(d)?l=d:(l=XE(d,a,null,o),a[o.index]=l,Pu(a,l)),h_(l,a,o,d),new Li(l,o,a)}let h_=function nT(o,a,l,d){if(o[Pi])return;let f;f=8&l.type?Xn(d):function tT(o,a){const l=o[Yt],d=l.createComment(""),f=ns(a,o);return Ua(l,Wy(l,f),d,function tk(o,a){return o.nextSibling(a)}(l,f),!1),d}(a,l),o[Pi]=f};class Uw{constructor(a){this.queryList=a,this.matches=null}clone(){return new Uw(this.queryList)}setDirty(){this.queryList.setDirty()}}class f_{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let m=0;m<d;m++){const v=l.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new f_(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Ux(a,l).matches&&this.queries[l].setDirty()}}class Sp{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class _h{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,m=this.getByIndex(d).embeddedTView(a,f);m&&(m.indexInDeclarationView=d,null!==l?l.push(m):l=[m])}return null!==l?new _h(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class yh{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new yh(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(a,l,Bw(l,m)),this.matchTNodeWithReadOption(a,l,Gd(l,a,m,!1,!1))}else d===Yu?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Gd(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===vv||f===Dp||f===Yu&&4&l.type)this.addMatch(l.index,-2);else{const m=Gd(l,a,f,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function Bw(o,a){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function Px(o,a,l,d){return-1===l?function Mx(o,a){return 11&o.type?Lc(o,a):4&o.type?Fw(o,a):null}(a,o):-2===l?function kx(o,a,l){return l===vv?Lc(a,o):l===Yu?Fw(a,o):l===Dp?eT(a,o):void 0}(o,a,d):sc(o,o[yt],l,a)}function Ox(o,a,l,d){const f=a[ts].queries[d];if(null===f.matches){const m=o.data,v=l.matches,I=[];for(let D=0;D<v.length;D+=2){const x=v[D];I.push(x<0?null:Px(a,m[x],v[D+1],l.metadata.read))}f.matches=I}return f.matches}function jw(o,a,l,d){const f=o.queries.getByIndex(l),m=f.matches;if(null!==m){const v=Ox(o,a,f,l);for(let I=0;I<m.length;I+=2){const D=m[I];if(D>0)d.push(v[I/2]);else{const x=m[I+1],O=a[-D];for(let G=ui;G<O.length;G++){const oe=O[G];oe[wc]===oe[In]&&jw(oe[yt],oe,x,d)}if(null!==O[Pa]){const G=O[Pa];for(let oe=0;oe<G.length;oe++){const fe=G[oe];jw(fe[yt],fe,x,d)}}}}}return d}function rT(o){const a=Xe(),l=Gn(),d=Ld();yf(d+1);const f=Ux(l,d);if(o.dirty&&function Md(o){return 4==(4&o[rn])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?jw(l,a,d,[]):Ox(l,a,f,d);o.reset(m,UE),o.notifyOnChanges()}return!0}return!1}function Nx(o,a,l){const d=Gn();d.firstCreatePass&&(vh(d,new Sp(o,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),zw(d,Xe(),a)}function Fx(o,a,l,d){const f=Gn();if(f.firstCreatePass){const m=ki();vh(f,new Sp(a,l,d),m.index),function Vx(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}zw(f,Xe(),l)}function Lx(){return function wN(o,a){return o[ts].queries[a].queryList}(Xe(),Ld())}function zw(o,a,l){const d=new mh(4==(4&l));(function cO(o,a,l,d){const f=nS(a);f.push(l),o.firstCreatePass&&rS(o).push(d,f.length-1)})(o,a,d,d.destroy),null===a[ts]&&(a[ts]=new f_),a[ts].queries.push(new Uw(d))}function vh(o,a,l){null===o.queries&&(o.queries=new _h),o.queries.track(new yh(a,l))}function Ux(o,a){return o.queries.getByIndex(a)}function Hw(o){return!!ot(o)}const Yw=new yr("Application Initializer");let Qw=(()=>{class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d}),this.appInits=At(Yw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const f of this.appInits){const m=f();if(Yv(m))l.push(m);else if(hc(m)){const v=new Promise((I,D)=>{m.subscribe({complete:I,error:D})});l.push(v)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=Bt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),E_=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=Bt({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();const Mp=new yr("LocaleId",{providedIn:"root",factory:()=>At(Mp,Wt.Optional|Wt.SkipSelf)||function kN(){return typeof $localize<"u"&&$localize.locale||Fi}()}),Xw=new yr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let T_=(()=>{class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=Bt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();class C_{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let tR=(()=>{class o{compileModuleSync(l){return new Ep(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),m=xu(ot(l).declarations).reduce((v,I)=>{const D=en(I);return D&&v.push(new Ig(D)),v},[]);return new C_(d,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=Bt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const pT=new yr(""),dR=new yr("");let A_,hR=(()=>{class o{constructor(l,d,f){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,A_||(function BN(o){A_=o}(f),f.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$s.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,f){return[]}static#e=this.\u0275fac=function(d){return new(d||o)(_t($s),_t(fR),_t(dR))};static#t=this.\u0275prov=Bt({token:o,factory:o.\u0275fac})}return o})(),fR=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return A_?.findTestabilityInTree(this,l,d)??null}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=Bt({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})(),qr=null;const pR=new yr("AllowMultipleToken"),mT=new yr("PlatformDestroyListeners"),gT=new yr("appBootstrapListener");class n0{constructor(a,l){this.name=a,this.token=l}}function kp(o,a,l=[]){const d=`Platform: ${a}`,f=new yr(d);return(m=[])=>{let v=a0();if(!v||v.injector.get(pR,!1)){const I=[...l,...m,{provide:f,useValue:!0}];o?o(I):function zN(o){if(qr&&!qr.get(pR,!1))throw new me(400,!1);(function gR(){!function sf(o){rf=o}(()=>{throw new me(600,!1)})})(),qr=o;const a=o.get(wR);(function r0(o){o.get(dv,null)?.forEach(l=>l())})(o)}(function o0(o=[],a){return uc.create({name:a,providers:[{provide:ov,useValue:"platform"},{provide:mT,useValue:new Set([()=>qr=null])},...o]})}(I,d))}return function s0(o){const a=a0();if(!a)throw new me(401,!1);return a}()}}function a0(){return qr?.get(wR)??null}let wR=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const f=function IR(o="zone.js",a){return"noop"===o?new CB:"zone.js"===o?new $s(a):o}(d?.ngZone,function _T(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return f.run(()=>{const m=function mx(o,a,l){return new Ip(o,a,l)}(l.moduleType,this.injector,function D_(o){return[{provide:$s,useFactory:o},{provide:tg,multi:!0,useFactory:()=>{const a=At(Np,{optional:!0});return()=>a.initialize()}},{provide:bR,useFactory:Op},{provide:Hk,useFactory:$k}]}(()=>f)),v=m.injector.get(Su,null);return f.runOutsideAngular(()=>{const I=f.onError.subscribe({next:D=>{v.handleError(D)}});m.onDestroy(()=>{l0(this._modules,m),I.unsubscribe()})}),function c0(o,a,l){try{const d=l();return Yv(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(v,f,()=>{const I=m.injector.get(Qw);return I.runInitializers(),I.donePromise.then(()=>(function GS(o){wt(o,"Expected localeId to be defined"),"string"==typeof o&&(Nb=o.toLowerCase().replace(/_/g,"-"))}(m.injector.get(Mp,Fi)||Fi),this._moduleDoBootstrap(m),m))})})}bootstrapModule(l,d=[]){const f=ER({},d);return function jN(o,a,l){const d=new Ep(l);return Promise.resolve(d)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(l){const d=l.injector.get(Ah);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new me(-403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(mT,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(d){return new(d||o)(_t(uc))};static#t=this.\u0275prov=Bt({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();function ER(o,a){return Array.isArray(a)?a.reduce(ER,o):{...o,...a}}let Ah=(()=>{class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=At(bR),this.zoneIsStable=At(Hk),this.componentTypes=[],this.components=[],this.isStable=At(T_).hasPendingTasks.pipe((0,We.w)(l=>l?(0,Ae.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Ue.B)()),this._injector=At(lc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const f=l instanceof xk;if(!this._injector.get(Qw).done)throw!f&&Kr(l),new me(405,!1);let v;v=f?l:this._injector.get(lg).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const I=function t0(o){return o.isBoundToModule}(v)?void 0:this._injector.get(dh),x=v.create(uc.NULL,[],d||v.selector,I),O=x.location.nativeElement,G=x.injector.get(pT,null);return G?.registerApplication(O),x.onDestroy(()=>{this.detachView(x.hostView),l0(this.components,x),G?.unregisterApplication(O)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;l0(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const d=this._injector.get(gT,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>l0(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new me(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=Bt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function l0(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}const bR=new yr("",{providedIn:"root",factory:()=>At(Su).handleError.bind(void 0)});function Op(){const o=At($s),a=At(Su);return l=>o.runOutsideAngular(()=>a.handleError(l))}let Np=(()=>{class o{constructor(){this.zone=At($s),this.applicationRef=At(Ah)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||o)};static#t=this.\u0275prov=Bt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function AR(){return!1}let vT=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=xR}return o})();function xR(o){return function RR(o,a,l){if(ia(o)&&!l){const d=qi(o.index,a);return new Ci(d,d)}return 47&o.type?new Ci(a[li],a):null}(ki(),Xe(),16==(16&o))}class NR{constructor(){}supports(a){return th(a)}create(a){return new WN(a)}}const qN=(o,a)=>a;class WN{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||qN}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,m=null;for(;l||d;){const v=!d||l&&l.currentIndex<LR(d,f,m)?l:d,I=LR(v,f,m),D=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{m||(m=[]);const x=I-f,O=D-f;if(x!=O){for(let oe=0;oe<x;oe++){const fe=oe<m.length?m[oe]:m[oe]=0,Ge=fe+oe;O<=Ge&&Ge<x&&(m[oe]=fe+1)}m[v.previousIndex]=O-x}}I!==D&&a(v,I,D)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!th(a))throw new me(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,v,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let I=0;I<this.length;I++)m=a[I],v=this._trackByFn(I,m),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,m,v,I)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,I),d=!0),l=l._next}else f=0,function Cg(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Symbol.iterator]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,I=>{v=this._trackByFn(f,I),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,I,v,f)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,v,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,m,f)):a=this._addAfter(new KN(l,d),m,f),a}_verifyReinsertion(a,l,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new FR),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FR),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class KN{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DT{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class FR{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new DT,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LR(o,a,l){const d=o.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class Lp{constructor(){}supports(a){return a instanceof Map||Vv(a)}create(){return new ST}}class ST{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Vv(a)))throw new me(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const d=new Vp(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class Vp{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function p0(){return new Up([new NR])}let Up=(()=>{class o{static#e=this.\u0275prov=Bt({token:o,providedIn:"root",factory:p0});constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||p0()),deps:[[o,new Et,new Ce]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new me(901,!1)}}return o})();function g0(){return new _0([new Lp])}let _0=(()=>{class o{static#e=this.\u0275prov=Bt({token:o,providedIn:"root",factory:g0});constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||g0()),deps:[[o,new Et,new Ce]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new me(901,!1)}}return o})();const YN=kp(null,"core",[]);let MT=(()=>{class o{constructor(l){}static#e=this.\u0275fac=function(d){return new(d||o)(_t(Ah))};static#t=this.\u0275mod=Mn({type:o});static#n=this.\u0275inj=vr({})}return o})();function Bp(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function UT(o){const a=en(o);if(!a)return null;const l=new Ig(a);return{get selector(){return l.selector},get type(){return l.componentType},get inputs(){return l.inputs},get outputs(){return l.outputs},get ngContentSelectors(){return l.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3399:(Vt,je,j)=>{"use strict";j.d(je,{Z:()=>mt});var u=j(9058),K=j(4537),V=j(7592),ae=j(7879);class ge{constructor(vt,ke){this._delegate=vt,this.firebase=ke,(0,V._addComponent)(vt,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=vt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(vt){this._delegate.automaticDataCollectionEnabled=vt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(vt=>{this._delegate.checkDestroyed(),vt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(vt,ke=V._DEFAULT_ENTRY_NAME){var Ut;this._delegate.checkDestroyed();const Ft=this._delegate.container.getProvider(vt);return!Ft.isInitialized()&&"EXPLICIT"===(null===(Ut=Ft.getComponent())||void 0===Ut?void 0:Ut.instantiationMode)&&Ft.initialize(),Ft.getImmediate({identifier:ke})}_removeServiceInstance(vt,ke=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(vt).clearInstance(ke)}_addComponent(vt){(0,V._addComponent)(this._delegate,vt)}_addOrOverwriteComponent(vt){(0,V._addOrOverwriteComponent)(this._delegate,vt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ue=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function De(){const Qe=function We(Qe){const vt={},ke={__esModule:!0,initializeApp:function me(Je,X={}){const Ke=V.initializeApp(Je,X);if((0,u.r3)(vt,Ke.name))return vt[Ke.name];const ht=new Qe(Ke,ke);return vt[Ke.name]=ht,ht},app:Ft,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function ye(Je){const X=Je.name,Ke=X.replace("-compat","");if(V._registerComponent(Je)&&"PUBLIC"===Je.type){const ht=(Ht=Ft())=>{if("function"!=typeof Ht[Ke])throw Ue.create("invalid-app-argument",{appName:X});return Ht[Ke]()};void 0!==Je.serviceProps&&(0,u.ZB)(ht,Je.serviceProps),ke[Ke]=ht,Qe.prototype[Ke]=function(...Ht){return this._getService.bind(this,X).apply(this,Je.multipleInstances?Ht:[])}}return"PUBLIC"===Je.type?ke[Ke]:null},removeApp:function Ut(Je){delete vt[Je]},useAsService:function Fe(Je,X){return"serverAuth"===X?null:X},modularAPIs:V}};function Ft(Je){if(!(0,u.r3)(vt,Je=Je||V._DEFAULT_ENTRY_NAME))throw Ue.create("no-app",{appName:Je});return vt[Je]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function $e(){return Object.keys(vt).map(Je=>vt[Je])}}),Ft.App=Qe,ke}(ge);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function vt(ke){(0,u.ZB)(Qe,ke)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Qe}(),re=new ae.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const mt=q;!function Ye(Qe){(0,V.registerVersion)("@firebase/app-compat","0.2.13",Qe)}()},7592:(Vt,je,j)=>{"use strict";j.r(je),j.d(je,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>vr,_DEFAULT_ENTRY_NAME:()=>_e,_addComponent:()=>ze,_addOrOverwriteComponent:()=>at,_apps:()=>Te,_clearComponents:()=>Kt,_components:()=>ve,_getProvider:()=>gt,_registerComponent:()=>wt,_removeServiceInstance:()=>Vn,deleteApp:()=>Ii,getApp:()=>Un,getApps:()=>br,initializeApp:()=>or,onLog:()=>pr,registerVersion:()=>cr,setLogLevel:()=>Br});var u=j(5861),K=j(4537),V=j(7879),ae=j(9058),ge=j(1878);class Ae{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Ie=>{if(function Ue(Se){const J=Se.getComponent();return"VERSION"===J?.type}(Ie)){const ct=Ie.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(Ie=>Ie).join(" ")}}const We="@firebase/app",q=new V.Yd("@firebase/app"),_e="[DEFAULT]",be={[We]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Te=new Map,ve=new Map;function ze(Se,J){try{Se.container.addComponent(J)}catch(Ie){q.debug(`Component ${J.name} failed to register with FirebaseApp ${Se.name}`,Ie)}}function at(Se,J){Se.container.addOrOverwriteComponent(J)}function wt(Se){const J=Se.name;if(ve.has(J))return q.debug(`There were multiple attempts to register component ${J}.`),!1;ve.set(J,Se);for(const Ie of Te.values())ze(Ie,Se);return!0}function gt(Se,J){const Ie=Se.container.getProvider("heartbeat").getImmediate({optional:!0});return Ie&&Ie.triggerHeartbeat(),Se.container.getProvider(J)}function Vn(Se,J,Ie=_e){gt(Se,J).clearInstance(Ie)}function Kt(){ve.clear()}const Bt=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qn{constructor(J,Ie,ct){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Ie),this._name=Ie.name,this._automaticDataCollectionEnabled=Ie.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}}const vr="9.23.0";function or(Se,J={}){let Ie=Se;"object"!=typeof J&&(J={name:J});const ct=Object.assign({name:_e,automaticDataCollectionEnabled:!1},J),Ct=ct.name;if("string"!=typeof Ct||!Ct)throw Bt.create("bad-app-name",{appName:String(Ct)});if(Ie||(Ie=(0,ae.aH)()),!Ie)throw Bt.create("no-options");const jt=Te.get(Ct);if(jt){if((0,ae.vZ)(Ie,jt.options)&&(0,ae.vZ)(ct,jt.config))return jt;throw Bt.create("duplicate-app",{appName:Ct})}const yn=new K.H0(Ct);for(const W of ve.values())yn.addComponent(W);const ee=new qn(Ie,ct,yn);return Te.set(Ct,ee),ee}function Un(Se=_e){const J=Te.get(Se);if(!J&&Se===_e&&(0,ae.aH)())return or();if(!J)throw Bt.create("no-app",{appName:Se});return J}function br(){return Array.from(Te.values())}function Ii(Se){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,u.Z)(function*(Se){const J=Se.name;Te.has(J)&&(Te.delete(J),yield Promise.all(Se.container.getProviders().map(Ie=>Ie.delete())),Se.isDeleted=!0)})).apply(this,arguments)}function cr(Se,J,Ie){var ct;let Ct=null!==(ct=be[Se])&&void 0!==ct?ct:Se;Ie&&(Ct+=`-${Ie}`);const jt=Ct.match(/\s|\//),yn=J.match(/\s|\//);if(jt||yn){const ee=[`Unable to register library "${Ct}" with version "${J}":`];return jt&&ee.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),jt&&yn&&ee.push("and"),yn&&ee.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void q.warn(ee.join(" "))}wt(new K.wA(`${Ct}-version`,()=>({library:Ct,version:J}),"VERSION"))}function pr(Se,J){if(null!==Se&&"function"!=typeof Se)throw Bt.create("invalid-log-argument");(0,V.Am)(Se,J)}function Br(Se){(0,V.Ub)(Se)}const Ji="firebase-heartbeat-database",Wt=1,Xt="firebase-heartbeat-store";let un=null;function Sn(){return un||(un=(0,ge.X3)(Ji,Wt,{upgrade:(Se,J)=>{0===J&&Se.createObjectStore(Xt)}}).catch(Se=>{throw Bt.create("idb-open",{originalErrorMessage:Se.message})})),un}function Rr(){return(Rr=(0,u.Z)(function*(Se){try{return yield(yield Sn()).transaction(Xt).objectStore(Xt).get(Bi(Se))}catch(J){if(J instanceof ae.ZR)q.warn(J.message);else{const Ie=Bt.create("idb-get",{originalErrorMessage:J?.message});q.warn(Ie.message)}}})).apply(this,arguments)}function pn(Se,J){return lr.apply(this,arguments)}function lr(){return(lr=(0,u.Z)(function*(Se,J){try{const ct=(yield Sn()).transaction(Xt,"readwrite");yield ct.objectStore(Xt).put(J,Bi(Se)),yield ct.done}catch(Ie){if(Ie instanceof ae.ZR)q.warn(Ie.message);else{const ct=Bt.create("idb-set",{originalErrorMessage:Ie?.message});q.warn(ct.message)}}})).apply(this,arguments)}function Bi(Se){return`${Se.name}!${Se.options.appId}`}class _n{constructor(J){this.container=J,this._heartbeatsCache=null;const Ie=this.container.getProvider("app").getImmediate();this._storage=new ai(Ie),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var J=this;return(0,u.Z)(function*(){const ct=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=Wn();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!J._heartbeatsCache.heartbeats.some(jt=>jt.date===Ct))return J._heartbeatsCache.heartbeats.push({date:Ct,agent:ct}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(jt=>{const yn=new Date(jt.date).valueOf();return Date.now()-yn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,u.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Ie=Wn(),{heartbeatsToSend:ct,unsentEntries:Ct}=function es(Se,J=1024){const Ie=[];let ct=Se.slice();for(const Ct of Se){const jt=Ie.find(yn=>yn.agent===Ct.agent);if(jt){if(jt.dates.push(Ct.date),Hn(Ie)>J){jt.dates.pop();break}}else if(Ie.push({agent:Ct.agent,dates:[Ct.date]}),Hn(Ie)>J){Ie.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:Ie,unsentEntries:ct}}(J._heartbeatsCache.heartbeats),jt=(0,ae.L)(JSON.stringify({version:2,heartbeats:ct}));return J._heartbeatsCache.lastSentHeartbeatDate=Ie,Ct.length>0?(J._heartbeatsCache.heartbeats=Ct,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),jt})()}}function Wn(){return(new Date).toISOString().substring(0,10)}class ai{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,u.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Ar(Se){return Rr.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Ie=this;return(0,u.Z)(function*(){var ct;if(yield Ie._canUseIndexedDBPromise){const jt=yield Ie.read();return pn(Ie.app,{lastSentHeartbeatDate:null!==(ct=J.lastSentHeartbeatDate)&&void 0!==ct?ct:jt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Ie=this;return(0,u.Z)(function*(){var ct;if(yield Ie._canUseIndexedDBPromise){const jt=yield Ie.read();return pn(Ie.app,{lastSentHeartbeatDate:null!==(ct=J.lastSentHeartbeatDate)&&void 0!==ct?ct:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...J.heartbeats]})}})()}}function Hn(Se){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Se})).length}!function Dr(Se){wt(new K.wA("platform-logger",J=>new Ae(J),"PRIVATE")),wt(new K.wA("heartbeat",J=>new _n(J),"PRIVATE")),cr(We,"0.9.13",Se),cr(We,"0.9.13","esm2017"),cr("fire-js","")}("")},4097:(Vt,je,j)=>{"use strict";j.d(je,{C6:()=>u.getApps,KN:()=>u.registerVersion,Mq:()=>u.getApp,ZF:()=>u.initializeApp});var u=j(7592);(0,u.registerVersion)("firebase","9.23.0","app")},120:(Vt,je,j)=>{"use strict";j.d(je,{Z:()=>u.Z});var u=j(3399);u.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(Vt,je,j)=>{"use strict";j.r(je);var u=j(5861),K=j(3399),V=j(6710),ae=j(9058),Ue=(j(7592),j(7879),j(4537));function We(){return window}function re(){return re=(0,u.Z)(function*(z,H,U){var de;const{BuildInfo:Ze}=We();(0,V.as)(H.sessionId,"AuthEvent did not contain a session ID");const _t=yield function ke(z){return Ut.apply(this,arguments)}(H.sessionId),cn={};return(0,V.at)()?cn.ibi=Ze.packageName:(0,V.au)()?cn.apn=Ze.packageName:(0,V.av)(z,"operation-not-supported-in-this-environment"),Ze.displayName&&(cn.appDisplayName=Ze.displayName),cn.sessionId=_t,(0,V.aw)(z,U,H.type,void 0,null!==(de=H.eventId)&&void 0!==de?de:void 0,cn)}),re.apply(this,arguments)}function st(){return(st=(0,u.Z)(function*(z){const{BuildInfo:H}=We(),U={};(0,V.at)()?U.iosBundleId=H.packageName:(0,V.au)()?U.androidPackageName=H.packageName:(0,V.av)(z,"operation-not-supported-in-this-environment"),yield(0,V.ax)(z,U)})).apply(this,arguments)}function Qe(){return(Qe=(0,u.Z)(function*(z,H,U){const{cordova:de}=We();let Ze=()=>{};try{yield new Promise((_t,cn)=>{let At=null;function $n(){var dn;_t();const Mi=null===(dn=de.plugins.browsertab)||void 0===dn?void 0:dn.close;"function"==typeof Mi&&Mi(),"function"==typeof U?.close&&U.close()}function Zt(){At||(At=window.setTimeout(()=>{cn((0,V.az)(z,"redirect-cancelled-by-user"))},2e3))}function wn(){"visible"===document?.visibilityState&&Zt()}H.addPassiveListener($n),document.addEventListener("resume",Zt,!1),(0,V.au)()&&document.addEventListener("visibilitychange",wn,!1),Ze=()=>{H.removePassiveListener($n),document.removeEventListener("resume",Zt,!1),document.removeEventListener("visibilitychange",wn,!1),At&&window.clearTimeout(At)}})}finally{Ze()}})).apply(this,arguments)}function Ut(){return(Ut=(0,u.Z)(function*(z){const H=function Ft(z){if((0,V.as)(/[0-9a-zA-Z]+/.test(z),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(z);const H=new ArrayBuffer(z.length),U=new Uint8Array(H);for(let de=0;de<z.length;de++)U[de]=z.charCodeAt(de);return U}(z),U=yield crypto.subtle.digest("SHA-256",H);return Array.from(new Uint8Array(U)).map(Ze=>Ze.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class $e extends V.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(H=>{this.resolveInialized=H})}addPassiveListener(H){this.passiveListeners.add(H)}removePassiveListener(H){this.passiveListeners.delete(H)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(H){return this.resolveInialized(),this.passiveListeners.forEach(U=>U(H)),super.onEvent(H)}initialized(){var H=this;return(0,u.Z)(function*(){yield H.initPromise})()}}function Je(z){return X.apply(this,arguments)}function X(){return(X=(0,u.Z)(function*(z){const H=yield Ht()._get(bn(z));return H&&(yield Ht()._remove(bn(z))),H})).apply(this,arguments)}function ht(){const z=[];for(let U=0;U<20;U++){const de=Math.floor(62*Math.random());z.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(de))}return z.join("")}function Ht(){return(0,V.aC)(V.b)}function bn(z){return(0,V.aD)("authEvent",z.config.apiKey,z.name)}function gn(z){if(!z?.includes("?"))return{};const[H,...U]=z.split("?");return(0,ae.zd)(U.join("?"))}const _e=class Wr{constructor(){this._redirectPersistence=V.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=V.aE,this._overrideRedirectResult=V.aF}_initialize(H){var U=this;return(0,u.Z)(function*(){const de=H._key();let Ze=U.eventManagers.get(de);return Ze||(Ze=new $e(H),U.eventManagers.set(de,Ze),U.attachCallbackListeners(H,Ze)),Ze})()}_openPopup(H){(0,V.av)(H,"operation-not-supported-in-this-environment")}_openRedirect(H,U,de,Ze){var _t=this;return(0,u.Z)(function*(){!function vt(z){var H,U,de,Ze,_t,cn,At,$n,Zt,wn;const dn=We();(0,V.aA)("function"==typeof(null===(H=dn?.universalLinks)||void 0===H?void 0:H.subscribe),z,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,V.aA)(typeof(null===(U=dn?.BuildInfo)||void 0===U?void 0:U.packageName)<"u",z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,V.aA)("function"==typeof(null===(_t=null===(Ze=null===(de=dn?.cordova)||void 0===de?void 0:de.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===_t?void 0:_t.openUrl),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aA)("function"==typeof(null===($n=null===(At=null===(cn=dn?.cordova)||void 0===cn?void 0:cn.plugins)||void 0===At?void 0:At.browsertab)||void 0===$n?void 0:$n.isAvailable),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aA)("function"==typeof(null===(wn=null===(Zt=dn?.cordova)||void 0===Zt?void 0:Zt.InAppBrowser)||void 0===wn?void 0:wn.open),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(H);const cn=yield _t._initialize(H);yield cn.initialized(),cn.resetRedirect(),(0,V.aG)(),yield _t._originValidation(H);const At=function ye(z,H,U=null){return{type:H,eventId:U,urlResponse:null,sessionId:ht(),postBody:null,tenantId:z.tenantId,error:(0,V.az)(z,"no-auth-event")}}(H,de,Ze);yield function Fe(z,H){return Ht()._set(bn(z),H)}(H,At);const $n=yield function q(z,H,U){return re.apply(this,arguments)}(H,At,U),Zt=yield function Ye(z){const{cordova:H}=We();return new Promise(U=>{H.plugins.browsertab.isAvailable(de=>{let Ze=null;de?H.plugins.browsertab.openUrl(z):Ze=H.InAppBrowser.open(z,(0,V.ay)()?"_blank":"_system","location=yes"),U(Ze)})})}($n);return function mt(z,H,U){return Qe.apply(this,arguments)}(H,cn,Zt)})()}_isIframeWebStorageSupported(H,U){throw new Error("Method not implemented.")}_originValidation(H){const U=H._key();return this.originValidationPromises[U]||(this.originValidationPromises[U]=function pe(z){return st.apply(this,arguments)}(H)),this.originValidationPromises[U]}attachCallbackListeners(H,U){const{universalLinks:de,handleOpenURL:Ze,BuildInfo:_t}=We(),cn=setTimeout((0,u.Z)(function*(){yield Je(H),U.onEvent(be())}),500),At=function(){var wn=(0,u.Z)(function*(dn){clearTimeout(cn);const Mi=yield Je(H);let po=null;Mi&&dn?.url&&(po=function Ke(z,H){var U,de;const Ze=function tr(z){const H=gn(z),U=H.link?decodeURIComponent(H.link):void 0,de=gn(U).link,Ze=H.deep_link_id?decodeURIComponent(H.deep_link_id):void 0;return gn(Ze).link||Ze||de||U||z}(H);if(Ze.includes("/__/auth/callback")){const _t=gn(Ze),cn=_t.firebaseError?function Qn(z){try{return JSON.parse(z)}catch{return null}}(decodeURIComponent(_t.firebaseError)):null,At=null===(de=null===(U=cn?.code)||void 0===U?void 0:U.split("auth/"))||void 0===de?void 0:de[1],$n=At?(0,V.az)(At):null;return $n?{type:z.type,eventId:z.eventId,tenantId:z.tenantId,error:$n,urlResponse:null,sessionId:null,postBody:null}:{type:z.type,eventId:z.eventId,tenantId:z.tenantId,sessionId:z.sessionId,urlResponse:Ze,postBody:null}}return null}(Mi,dn.url)),U.onEvent(po||be())});return function(Mi){return wn.apply(this,arguments)}}();typeof de<"u"&&"function"==typeof de.subscribe&&de.subscribe(null,At);const $n=Ze,Zt=`${_t.packageName.toLowerCase()}://`;We().handleOpenURL=function(){var wn=(0,u.Z)(function*(dn){if(dn.toLowerCase().startsWith(Zt)&&At({url:dn}),"function"==typeof $n)try{$n(dn)}catch(Mi){console.error(Mi)}});return function(dn){return wn.apply(this,arguments)}}()}};function be(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,V.az)("no-auth-event")}}function wt(){var z;return(null===(z=self?.location)||void 0===z?void 0:z.protocol)||null}function Vn(z=(0,ae.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()&&"capacitor:"!==wt()||!z.toLowerCase().match(/iphone|ipad|ipod|android/))}function vr(){try{const z=self.localStorage,H=V.aL();if(z)return z.setItem(H,"1"),z.removeItem(H),!function qn(z=(0,ae.z$)()){return function Tn(){return(0,ae.w1)()&&11===document?.documentMode}()||function Bt(z=(0,ae.z$)()){return/Edge\/\d+/.test(z)}(z)}()||(0,ae.hl)()}catch{return or()&&(0,ae.hl)()}return!1}function or(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function gt(){return"http:"===wt()||"https:"===wt()}()||(0,ae.ru)()||Vn())&&!function Kt(){return(0,ae.b$)()||(0,ae.UG)()}()&&vr()&&!or()}function br(){return Vn()&&typeof document<"u"}function Vr(){return(Vr=(0,u.Z)(function*(){return!!br()&&new Promise(z=>{const H=setTimeout(()=>{z(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(H),z(!0)})})})).apply(this,arguments)}const pr={LOCAL:"local",NONE:"none",SESSION:"session"},Br=V.aA,Ji="persistence";function Xt(z){return un.apply(this,arguments)}function un(){return(un=(0,u.Z)(function*(z){yield z._initializationPromise;const H=Ar(),U=V.aD(Ji,z.config.apiKey,z.name);H&&H.setItem(U,z._getPersistence())})).apply(this,arguments)}function Ar(){var z;try{return(null===(z=function cr(){return typeof window<"u"?window:null}())||void 0===z?void 0:z.sessionStorage)||null}catch{return null}}const Rr=V.aA;class pn{constructor(){this.browserResolver=V.aC(V.k),this.cordovaResolver=V.aC(_e),this.underlyingResolver=null,this._redirectPersistence=V.a,this._completeRedirectFn=V.aE,this._overrideRedirectResult=V.aF}_initialize(H){var U=this;return(0,u.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._initialize(H)})()}_openPopup(H,U,de,Ze){var _t=this;return(0,u.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openPopup(H,U,de,Ze)})()}_openRedirect(H,U,de,Ze){var _t=this;return(0,u.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openRedirect(H,U,de,Ze)})()}_isIframeWebStorageSupported(H,U){this.assertedUnderlyingResolver._isIframeWebStorageSupported(H,U)}_originValidation(H){return this.assertedUnderlyingResolver._originValidation(H)}get _shouldInitProactively(){return br()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var H=this;return(0,u.Z)(function*(){if(H.underlyingResolver)return;const U=yield function Ii(){return Vr.apply(this,arguments)}();H.underlyingResolver=U?H.cordovaResolver:H.browserResolver})()}}function lr(z){return z.unwrap()}function Nt(z){return _n(z)}function _n(z){const{_tokenResponse:H}=z instanceof ae.ZR?z.customData:z;if(!H)return null;if(!(z instanceof ae.ZR)&&"temporaryProof"in H&&"phoneNumber"in H)return V.P.credentialFromResult(z);const U=H.providerId;if(!U||U===V.p.PASSWORD)return null;let de;switch(U){case V.p.GOOGLE:de=V.V;break;case V.p.FACEBOOK:de=V.U;break;case V.p.GITHUB:de=V.W;break;case V.p.TWITTER:de=V.Z;break;default:const{oauthIdToken:Ze,oauthAccessToken:_t,oauthTokenSecret:cn,pendingToken:At,nonce:$n}=H;return _t||cn||Ze||At?At?U.startsWith("saml.")?V.aO._create(U,At):V.L._fromParams({providerId:U,signInMethod:U,pendingToken:At,idToken:Ze,accessToken:_t}):new V.X(U).credential({idToken:Ze,accessToken:_t,rawNonce:$n}):null}return z instanceof ae.ZR?de.credentialFromError(z):de.credentialFromResult(z)}function Wn(z,H){return H.catch(U=>{throw U instanceof ae.ZR&&function oi(z,H){var U;const de=null===(U=H.customData)||void 0===U?void 0:U._tokenResponse;if("auth/multi-factor-auth-required"===H?.code)H.resolver=new Hn(z,V.aq(z,H));else if(de){const Ze=_n(H),_t=H;Ze&&(_t.credential=Ze,_t.tenantId=de.tenantId||void 0,_t.email=de.email||void 0,_t.phoneNumber=de.phoneNumber||void 0)}}(z,U),U}).then(U=>{const Ze=U.user;return{operationType:U.operationType,credential:Nt(U),additionalUserInfo:V.ao(U),user:Dr.getOrCreate(Ze)}})}function es(z,H){return ai.apply(this,arguments)}function ai(){return(ai=(0,u.Z)(function*(z,H){const U=yield H;return{verificationId:U.verificationId,confirm:de=>Wn(z,U.confirm(de))}})).apply(this,arguments)}class Hn{constructor(H,U){this.resolver=U,this.auth=function Bi(z){return z.wrapped()}(H)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(H){return Wn(lr(this.auth),this.resolver.resolveSignIn(H))}}class Dr{constructor(H){this._delegate=H,this.multiFactor=V.ar(H)}static getOrCreate(H){return Dr.USER_MAP.has(H)||Dr.USER_MAP.set(H,new Dr(H)),Dr.USER_MAP.get(H)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(H){return this._delegate.getIdTokenResult(H)}getIdToken(H){return this._delegate.getIdToken(H)}linkAndRetrieveDataWithCredential(H){return this.linkWithCredential(H)}linkWithCredential(H){var U=this;return(0,u.Z)(function*(){return Wn(U.auth,V.a0(U._delegate,H))})()}linkWithPhoneNumber(H,U){var de=this;return(0,u.Z)(function*(){return es(de.auth,V.l(de._delegate,H,U))})()}linkWithPopup(H){var U=this;return(0,u.Z)(function*(){return Wn(U.auth,V.d(U._delegate,H,pn))})()}linkWithRedirect(H){var U=this;return(0,u.Z)(function*(){return yield Xt(V.aH(U.auth)),V.g(U._delegate,H,pn)})()}reauthenticateAndRetrieveDataWithCredential(H){return this.reauthenticateWithCredential(H)}reauthenticateWithCredential(H){var U=this;return(0,u.Z)(function*(){return Wn(U.auth,V.a1(U._delegate,H))})()}reauthenticateWithPhoneNumber(H,U){return es(this.auth,V.r(this._delegate,H,U))}reauthenticateWithPopup(H){return Wn(this.auth,V.e(this._delegate,H,pn))}reauthenticateWithRedirect(H){var U=this;return(0,u.Z)(function*(){return yield Xt(V.aH(U.auth)),V.h(U._delegate,H,pn)})()}sendEmailVerification(H){return V.ae(this._delegate,H)}unlink(H){var U=this;return(0,u.Z)(function*(){return yield V.an(U._delegate,H),U})()}updateEmail(H){return V.aj(this._delegate,H)}updatePassword(H){return V.ak(this._delegate,H)}updatePhoneNumber(H){return V.u(this._delegate,H)}updateProfile(H){return V.ai(this._delegate,H)}verifyBeforeUpdateEmail(H,U){return V.af(this._delegate,H,U)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Dr.USER_MAP=new WeakMap;const Se=V.aA;let J=(()=>{class z{constructor(U,de){if(this.app=U,de.isInitialized())return this._delegate=de.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ze}=U.options;Se(Ze,"invalid-api-key",{appName:U.name}),Se(Ze,"invalid-api-key",{appName:U.name});const _t=typeof window<"u"?pn:void 0;this._delegate=de.initialize({options:{persistence:ct(Ze,U.name),popupRedirectResolver:_t}}),this._delegate._updateErrorMap(V.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Dr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(U){this._delegate.languageCode=U}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(U){this._delegate.tenantId=U}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(U,de){V.I(this._delegate,U,de)}applyActionCode(U){return V.a5(this._delegate,U)}checkActionCode(U){return V.a6(this._delegate,U)}confirmPasswordReset(U,de){return V.a4(this._delegate,U,de)}createUserWithEmailAndPassword(U,de){var Ze=this;return(0,u.Z)(function*(){return Wn(Ze._delegate,V.a8(Ze._delegate,U,de))})()}fetchProvidersForEmail(U){return this.fetchSignInMethodsForEmail(U)}fetchSignInMethodsForEmail(U){return V.ad(this._delegate,U)}isSignInWithEmailLink(U){return V.ab(this._delegate,U)}getRedirectResult(){var U=this;return(0,u.Z)(function*(){Se(Un(),U._delegate,"operation-not-supported-in-this-environment");const de=yield V.j(U._delegate,pn);return de?Wn(U._delegate,Promise.resolve(de)):{credential:null,user:null}})()}addFrameworkForLogging(U){!function Te(z,H){(0,V.aH)(z)._logFramework(H)}(this._delegate,U)}onAuthStateChanged(U,de,Ze){const{next:_t,error:cn,complete:At}=Ie(U,de,Ze);return this._delegate.onAuthStateChanged(_t,cn,At)}onIdTokenChanged(U,de,Ze){const{next:_t,error:cn,complete:At}=Ie(U,de,Ze);return this._delegate.onIdTokenChanged(_t,cn,At)}sendSignInLinkToEmail(U,de){return V.aa(this._delegate,U,de)}sendPasswordResetEmail(U,de){return V.a3(this._delegate,U,de||void 0)}setPersistence(U){var de=this;return(0,u.Z)(function*(){let Ze;switch(function Wt(z,H){Br(Object.values(pr).includes(H),z,"invalid-persistence-type"),(0,ae.b$)()?Br(H!==pr.SESSION,z,"unsupported-persistence-type"):(0,ae.UG)()?Br(H===pr.NONE,z,"unsupported-persistence-type"):or()?Br(H===pr.NONE||H===pr.LOCAL&&(0,ae.hl)(),z,"unsupported-persistence-type"):Br(H===pr.NONE||vr(),z,"unsupported-persistence-type")}(de._delegate,U),U){case pr.SESSION:Ze=V.a;break;case pr.LOCAL:Ze=(yield V.aC(V.i)._isAvailable())?V.i:V.b;break;case pr.NONE:Ze=V.N;break;default:return V.av("argument-error",{appName:de._delegate.name})}return de._delegate.setPersistence(Ze)})()}signInAndRetrieveDataWithCredential(U){return this.signInWithCredential(U)}signInAnonymously(){return Wn(this._delegate,V._(this._delegate))}signInWithCredential(U){return Wn(this._delegate,V.$(this._delegate,U))}signInWithCustomToken(U){return Wn(this._delegate,V.a2(this._delegate,U))}signInWithEmailAndPassword(U,de){return Wn(this._delegate,V.a9(this._delegate,U,de))}signInWithEmailLink(U,de){return Wn(this._delegate,V.ac(this._delegate,U,de))}signInWithPhoneNumber(U,de){return es(this._delegate,V.s(this._delegate,U,de))}signInWithPopup(U){var de=this;return(0,u.Z)(function*(){return Se(Un(),de._delegate,"operation-not-supported-in-this-environment"),Wn(de._delegate,V.c(de._delegate,U,pn))})()}signInWithRedirect(U){var de=this;return(0,u.Z)(function*(){return Se(Un(),de._delegate,"operation-not-supported-in-this-environment"),yield Xt(de._delegate),V.f(de._delegate,U,pn)})()}updateCurrentUser(U){return this._delegate.updateCurrentUser(U)}verifyPasswordResetCode(U){return V.a7(this._delegate,U)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return z.Persistence=pr,z})();function Ie(z,H,U){let de=z;"function"!=typeof z&&({next:de,error:H,complete:U}=z);const Ze=de;return{next:cn=>Ze(cn&&Dr.getOrCreate(cn)),error:H,complete:U}}function ct(z,H){const U=function Sn(z,H){const U=Ar();if(!U)return[];const de=V.aD(Ji,z,H);switch(U.getItem(de)){case pr.NONE:return[V.N];case pr.LOCAL:return[V.i,V.a];case pr.SESSION:return[V.a];default:return[]}}(z,H);if(typeof self<"u"&&!U.includes(V.i)&&U.push(V.i),typeof window<"u")for(const de of[V.b,V.a])U.includes(de)||U.push(de);return U.includes(V.N)||U.push(V.N),U}class Ct{constructor(){this.providerId="phone",this._delegate=new V.P(lr(K.Z.auth()))}static credential(H,U){return V.P.credential(H,U)}verifyPhoneNumber(H,U){return this._delegate.verifyPhoneNumber(H,U)}unwrap(){return this._delegate}}Ct.PHONE_SIGN_IN_METHOD=V.P.PHONE_SIGN_IN_METHOD,Ct.PROVIDER_ID=V.P.PROVIDER_ID;const jt=V.aA;class yn{constructor(H,U,de=K.Z.app()){var Ze;jt(null===(Ze=de.options)||void 0===Ze?void 0:Ze.apiKey,"invalid-api-key",{appName:de.name}),this._delegate=new V.R(H,U,de.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function W(z){z.INTERNAL.registerComponent(new Ue.wA("auth-compat",H=>{const U=H.getProvider("app-compat").getImmediate(),de=H.getProvider("auth");return new J(U,de)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:V.A.EMAIL_SIGNIN,PASSWORD_RESET:V.A.PASSWORD_RESET,RECOVER_EMAIL:V.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:V.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:V.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:V.A.VERIFY_EMAIL}},EmailAuthProvider:V.Q,FacebookAuthProvider:V.U,GithubAuthProvider:V.W,GoogleAuthProvider:V.V,OAuthProvider:V.X,SAMLAuthProvider:V.Y,PhoneAuthProvider:Ct,PhoneMultiFactorGenerator:V.m,RecaptchaVerifier:yn,TwitterAuthProvider:V.Z,Auth:J,AuthCredential:V.J,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),z.registerVersion("@firebase/auth-compat","0.4.2")}(K.Z)},4303:(Vt,je,j)=>{"use strict";j.r(je),j.d(je,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>vr,_DEFAULT_ENTRY_NAME:()=>_e,_addComponent:()=>ze,_addOrOverwriteComponent:()=>at,_apps:()=>Te,_clearComponents:()=>Kt,_components:()=>ve,_getProvider:()=>gt,_registerComponent:()=>wt,_removeServiceInstance:()=>Vn,deleteApp:()=>Ii,getApp:()=>Un,getApps:()=>br,initializeApp:()=>or,onLog:()=>pr,registerVersion:()=>cr,setLogLevel:()=>Br});var u=j(5861),K=j(4537),V=j(7879),ae=j(9058),ge=j(1878);class Ae{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Ie=>{if(function Ue(Se){const J=Se.getComponent();return"VERSION"===J?.type}(Ie)){const ct=Ie.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(Ie=>Ie).join(" ")}}const We="@firebase/app",q=new V.Yd("@firebase/app"),_e="[DEFAULT]",be={[We]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Te=new Map,ve=new Map;function ze(Se,J){try{Se.container.addComponent(J)}catch(Ie){q.debug(`Component ${J.name} failed to register with FirebaseApp ${Se.name}`,Ie)}}function at(Se,J){Se.container.addOrOverwriteComponent(J)}function wt(Se){const J=Se.name;if(ve.has(J))return q.debug(`There were multiple attempts to register component ${J}.`),!1;ve.set(J,Se);for(const Ie of Te.values())ze(Ie,Se);return!0}function gt(Se,J){const Ie=Se.container.getProvider("heartbeat").getImmediate({optional:!0});return Ie&&Ie.triggerHeartbeat(),Se.container.getProvider(J)}function Vn(Se,J,Ie=_e){gt(Se,J).clearInstance(Ie)}function Kt(){ve.clear()}const Bt=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qn{constructor(J,Ie,ct){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Ie),this._name=Ie.name,this._automaticDataCollectionEnabled=Ie.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}}const vr="10.4.0";function or(Se,J={}){let Ie=Se;"object"!=typeof J&&(J={name:J});const ct=Object.assign({name:_e,automaticDataCollectionEnabled:!1},J),Ct=ct.name;if("string"!=typeof Ct||!Ct)throw Bt.create("bad-app-name",{appName:String(Ct)});if(Ie||(Ie=(0,ae.aH)()),!Ie)throw Bt.create("no-options");const jt=Te.get(Ct);if(jt){if((0,ae.vZ)(Ie,jt.options)&&(0,ae.vZ)(ct,jt.config))return jt;throw Bt.create("duplicate-app",{appName:Ct})}const yn=new K.H0(Ct);for(const W of ve.values())yn.addComponent(W);const ee=new qn(Ie,ct,yn);return Te.set(Ct,ee),ee}function Un(Se=_e){const J=Te.get(Se);if(!J&&Se===_e&&(0,ae.aH)())return or();if(!J)throw Bt.create("no-app",{appName:Se});return J}function br(){return Array.from(Te.values())}function Ii(Se){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,u.Z)(function*(Se){const J=Se.name;Te.has(J)&&(Te.delete(J),yield Promise.all(Se.container.getProviders().map(Ie=>Ie.delete())),Se.isDeleted=!0)})).apply(this,arguments)}function cr(Se,J,Ie){var ct;let Ct=null!==(ct=be[Se])&&void 0!==ct?ct:Se;Ie&&(Ct+=`-${Ie}`);const jt=Ct.match(/\s|\//),yn=J.match(/\s|\//);if(jt||yn){const ee=[`Unable to register library "${Ct}" with version "${J}":`];return jt&&ee.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),jt&&yn&&ee.push("and"),yn&&ee.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void q.warn(ee.join(" "))}wt(new K.wA(`${Ct}-version`,()=>({library:Ct,version:J}),"VERSION"))}function pr(Se,J){if(null!==Se&&"function"!=typeof Se)throw Bt.create("invalid-log-argument");(0,V.Am)(Se,J)}function Br(Se){(0,V.Ub)(Se)}const Ji="firebase-heartbeat-database",Wt=1,Xt="firebase-heartbeat-store";let un=null;function Sn(){return un||(un=(0,ge.X3)(Ji,Wt,{upgrade:(Se,J)=>{0===J&&Se.createObjectStore(Xt)}}).catch(Se=>{throw Bt.create("idb-open",{originalErrorMessage:Se.message})})),un}function Rr(){return(Rr=(0,u.Z)(function*(Se){try{return yield(yield Sn()).transaction(Xt).objectStore(Xt).get(Bi(Se))}catch(J){if(J instanceof ae.ZR)q.warn(J.message);else{const Ie=Bt.create("idb-get",{originalErrorMessage:J?.message});q.warn(Ie.message)}}})).apply(this,arguments)}function pn(Se,J){return lr.apply(this,arguments)}function lr(){return(lr=(0,u.Z)(function*(Se,J){try{const ct=(yield Sn()).transaction(Xt,"readwrite");yield ct.objectStore(Xt).put(J,Bi(Se)),yield ct.done}catch(Ie){if(Ie instanceof ae.ZR)q.warn(Ie.message);else{const ct=Bt.create("idb-set",{originalErrorMessage:Ie?.message});q.warn(ct.message)}}})).apply(this,arguments)}function Bi(Se){return`${Se.name}!${Se.options.appId}`}class _n{constructor(J){this.container=J,this._heartbeatsCache=null;const Ie=this.container.getProvider("app").getImmediate();this._storage=new ai(Ie),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var J=this;return(0,u.Z)(function*(){const ct=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=Wn();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!J._heartbeatsCache.heartbeats.some(jt=>jt.date===Ct))return J._heartbeatsCache.heartbeats.push({date:Ct,agent:ct}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(jt=>{const yn=new Date(jt.date).valueOf();return Date.now()-yn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,u.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Ie=Wn(),{heartbeatsToSend:ct,unsentEntries:Ct}=function es(Se,J=1024){const Ie=[];let ct=Se.slice();for(const Ct of Se){const jt=Ie.find(yn=>yn.agent===Ct.agent);if(jt){if(jt.dates.push(Ct.date),Hn(Ie)>J){jt.dates.pop();break}}else if(Ie.push({agent:Ct.agent,dates:[Ct.date]}),Hn(Ie)>J){Ie.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:Ie,unsentEntries:ct}}(J._heartbeatsCache.heartbeats),jt=(0,ae.L)(JSON.stringify({version:2,heartbeats:ct}));return J._heartbeatsCache.lastSentHeartbeatDate=Ie,Ct.length>0?(J._heartbeatsCache.heartbeats=Ct,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),jt})()}}function Wn(){return(new Date).toISOString().substring(0,10)}class ai{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,u.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Ar(Se){return Rr.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Ie=this;return(0,u.Z)(function*(){var ct;if(yield Ie._canUseIndexedDBPromise){const jt=yield Ie.read();return pn(Ie.app,{lastSentHeartbeatDate:null!==(ct=J.lastSentHeartbeatDate)&&void 0!==ct?ct:jt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Ie=this;return(0,u.Z)(function*(){var ct;if(yield Ie._canUseIndexedDBPromise){const jt=yield Ie.read();return pn(Ie.app,{lastSentHeartbeatDate:null!==(ct=J.lastSentHeartbeatDate)&&void 0!==ct?ct:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...J.heartbeats]})}})()}}function Hn(Se){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Se})).length}!function Dr(Se){wt(new K.wA("platform-logger",J=>new Ae(J),"PRIVATE")),wt(new K.wA("heartbeat",J=>new _n(J),"PRIVATE")),cr(We,"0.9.19",Se),cr(We,"0.9.19","esm2017"),cr("fire-js","")}("")},4537:(Vt,je,j)=>{"use strict";j.d(je,{H0:()=>We,wA:()=>V});var u=j(5861),K=j(9058);class V{constructor(q,re,pe){this.name=q,this.instanceFactory=re,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const ae="[DEFAULT]";class ge{constructor(q,re){this.name=q,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const re=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(re)){const pe=new K.BH;if(this.instancesDeferred.set(re,pe),this.isInitialized(re)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:re});st&&pe.resolve(st)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(q){var re;const pe=this.normalizeInstanceIdentifier(q?.identifier),st=null!==(re=q?.optional)&&void 0!==re&&re;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(Ye){if(st)return null;throw Ye}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function Ue(De){return"EAGER"===De.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[re,pe]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(re);try{const Ye=this.getOrInitializeService({instanceIdentifier:st});pe.resolve(Ye)}catch{}}}}clearInstance(q=ae){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,u.Z)(function*(){const re=Array.from(q.instances.values());yield Promise.all([...re.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...re.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=ae){return this.instances.has(q)}getOptions(q=ae){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:re={}}=q,pe=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:pe,options:re});for(const[Ye,mt]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(Ye)&&mt.resolve(st);return st}onInit(q,re){var pe;const st=this.normalizeInstanceIdentifier(re),Ye=null!==(pe=this.onInitCallbacks.get(st))&&void 0!==pe?pe:new Set;Ye.add(q),this.onInitCallbacks.set(st,Ye);const mt=this.instances.get(st);return mt&&q(mt,st),()=>{Ye.delete(q)}}invokeOnInitCallbacks(q,re){const pe=this.onInitCallbacks.get(re);if(pe)for(const st of pe)try{st(q,re)}catch{}}getOrInitializeService({instanceIdentifier:q,options:re={}}){let pe=this.instances.get(q);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(De=q,De===ae?void 0:De),options:re}),this.instances.set(q,pe),this.instancesOptions.set(q,re),this.invokeOnInitCallbacks(pe,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,pe)}catch{}var De;return pe||null}normalizeInstanceIdentifier(q=ae){return this.component?this.component.multipleInstances?q:ae:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class We{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const re=this.getProvider(q.name);if(re.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);re.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const re=new ge(q,this);return this.providers.set(q,re),re}getProviders(){return Array.from(this.providers.values())}}},7879:(Vt,je,j)=>{"use strict";j.d(je,{Am:()=>De,Ub:()=>We,Yd:()=>Ue,in:()=>K});const u=[];var K=function(q){return q[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",q}(K||{});const V={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},ae=K.INFO,ge={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},Ae=(q,re,...pe)=>{if(re<q.logLevel)return;const st=(new Date).toISOString(),Ye=ge[re];if(!Ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[Ye](`[${st}]  ${q.name}:`,...pe)};class Ue{constructor(re){this.name=re,this._logLevel=ae,this._logHandler=Ae,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in K))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?V[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...re),this._logHandler(this,K.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...re),this._logHandler(this,K.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,K.INFO,...re),this._logHandler(this,K.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,K.WARN,...re),this._logHandler(this,K.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...re),this._logHandler(this,K.ERROR,...re)}}function We(q){u.forEach(re=>{re.setLogLevel(q)})}function De(q,re){for(const pe of u){let st=null;re&&re.level&&(st=V[re.level]),pe.userLogHandler=null===q?null:(Ye,mt,...Qe)=>{const vt=Qe.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch{return null}}).filter(ke=>ke).join(" ");mt>=(st??Ye.logLevel)&&q({level:K[mt].toLowerCase(),message:vt,args:Qe,type:Ye.name})}}}},1878:(Vt,je,j)=>{"use strict";j.d(je,{X3:()=>Ft});var u=j(5861);const K=(X,Ke)=>Ke.some(ht=>X instanceof ht);let V,ae;const Ue=new WeakMap,We=new WeakMap,De=new WeakMap,q=new WeakMap,re=new WeakMap;let Ye={get(X,Ke,ht){if(X instanceof IDBTransaction){if("done"===Ke)return We.get(X);if("objectStoreNames"===Ke)return X.objectStoreNames||De.get(X);if("store"===Ke)return ht.objectStoreNames[1]?void 0:ht.objectStore(ht.objectStoreNames[0])}return ke(X[Ke])},set:(X,Ke,ht)=>(X[Ke]=ht,!0),has:(X,Ke)=>X instanceof IDBTransaction&&("done"===Ke||"store"===Ke)||Ke in X};function vt(X){return"function"==typeof X?function Qe(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...Ke){return X.apply(Ut(this),Ke),ke(Ue.get(this))}:function(...Ke){return ke(X.apply(Ut(this),Ke))}:function(Ke,...ht){const Ht=X.call(Ut(this),Ke,...ht);return De.set(Ht,Ke.sort?Ke.sort():[Ke]),ke(Ht)}}(X):(X instanceof IDBTransaction&&function st(X){if(We.has(X))return;const Ke=new Promise((ht,Ht)=>{const bn=()=>{X.removeEventListener("complete",Qn),X.removeEventListener("error",tr),X.removeEventListener("abort",tr)},Qn=()=>{ht(),bn()},tr=()=>{Ht(X.error||new DOMException("AbortError","AbortError")),bn()};X.addEventListener("complete",Qn),X.addEventListener("error",tr),X.addEventListener("abort",tr)});We.set(X,Ke)}(X),K(X,function ge(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,Ye):X)}function ke(X){if(X instanceof IDBRequest)return function pe(X){const Ke=new Promise((ht,Ht)=>{const bn=()=>{X.removeEventListener("success",Qn),X.removeEventListener("error",tr)},Qn=()=>{ht(ke(X.result)),bn()},tr=()=>{Ht(X.error),bn()};X.addEventListener("success",Qn),X.addEventListener("error",tr)});return Ke.then(ht=>{ht instanceof IDBCursor&&Ue.set(ht,X)}).catch(()=>{}),re.set(Ke,X),Ke}(X);if(q.has(X))return q.get(X);const Ke=vt(X);return Ke!==X&&(q.set(X,Ke),re.set(Ke,X)),Ke}const Ut=X=>re.get(X);function Ft(X,Ke,{blocked:ht,upgrade:Ht,blocking:bn,terminated:Qn}={}){const tr=indexedDB.open(X,Ke),gn=ke(tr);return Ht&&tr.addEventListener("upgradeneeded",Zn=>{Ht(ke(tr.result),Zn.oldVersion,Zn.newVersion,ke(tr.transaction),Zn)}),ht&&tr.addEventListener("blocked",Zn=>ht(Zn.oldVersion,Zn.newVersion,Zn)),gn.then(Zn=>{Qn&&Zn.addEventListener("close",()=>Qn()),bn&&Zn.addEventListener("versionchange",Wr=>bn(Wr.oldVersion,Wr.newVersion,Wr))}).catch(()=>{}),gn}const $e=["get","getKey","getAll","getAllKeys","count"],ye=["put","add","delete","clear"],Fe=new Map;function Je(X,Ke){if(!(X instanceof IDBDatabase)||Ke in X||"string"!=typeof Ke)return;if(Fe.get(Ke))return Fe.get(Ke);const ht=Ke.replace(/FromIndex$/,""),Ht=Ke!==ht,bn=ye.includes(ht);if(!(ht in(Ht?IDBIndex:IDBObjectStore).prototype)||!bn&&!$e.includes(ht))return;const Qn=function(){var tr=(0,u.Z)(function*(gn,...Zn){const Wr=this.transaction(gn,bn?"readwrite":"readonly");let _e=Wr.store;return Ht&&(_e=_e.index(Zn.shift())),(yield Promise.all([_e[ht](...Zn),bn&&Wr.done]))[0]});return function(Zn){return tr.apply(this,arguments)}}();return Fe.set(Ke,Qn),Qn}!function mt(X){Ye=X(Ye)}(X=>({...X,get:(Ke,ht,Ht)=>Je(Ke,ht)||X.get(Ke,ht,Ht),has:(Ke,ht)=>!!Je(Ke,ht)||X.has(Ke,ht)}))},5861:(Vt,je,j)=>{"use strict";function u(V,ae,ge,Ae,Ue,We,De){try{var q=V[We](De),re=q.value}catch(pe){return void ge(pe)}q.done?ae(re):Promise.resolve(re).then(Ae,Ue)}function K(V){return function(){var ae=this,ge=arguments;return new Promise(function(Ae,Ue){var We=V.apply(ae,ge);function De(re){u(We,Ae,Ue,De,q,"next",re)}function q(re){u(We,Ae,Ue,De,q,"throw",re)}De(void 0)})}}j.d(je,{Z:()=>K})},7582:(Vt,je,j)=>{"use strict";function ae(_e,be){var Te={};for(var ve in _e)Object.prototype.hasOwnProperty.call(_e,ve)&&be.indexOf(ve)<0&&(Te[ve]=_e[ve]);if(null!=_e&&"function"==typeof Object.getOwnPropertySymbols){var ze=0;for(ve=Object.getOwnPropertySymbols(_e);ze<ve.length;ze++)be.indexOf(ve[ze])<0&&Object.prototype.propertyIsEnumerable.call(_e,ve[ze])&&(Te[ve[ze]]=_e[ve[ze]])}return Te}function pe(_e,be,Te,ve){return new(Te||(Te=Promise))(function(at,wt){function gt(Tn){try{Kt(ve.next(Tn))}catch(Bt){wt(Bt)}}function Vn(Tn){try{Kt(ve.throw(Tn))}catch(Bt){wt(Bt)}}function Kt(Tn){Tn.done?at(Tn.value):function ze(at){return at instanceof Te?at:new Te(function(wt){wt(at)})}(Tn.value).then(gt,Vn)}Kt((ve=ve.apply(_e,be||[])).next())})}function me(_e){return this instanceof me?(this.v=_e,this):new me(_e)}function $e(_e,be,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,ve=Te.apply(_e,be||[]),at=[];return ze={},wt("next"),wt("throw"),wt("return"),ze[Symbol.asyncIterator]=function(){return this},ze;function wt(qn){ve[qn]&&(ze[qn]=function(vr){return new Promise(function(or,Un){at.push([qn,vr,or,Un])>1||gt(qn,vr)})})}function gt(qn,vr){try{!function Vn(qn){qn.value instanceof me?Promise.resolve(qn.value.v).then(Kt,Tn):Bt(at[0][2],qn)}(ve[qn](vr))}catch(or){Bt(at[0][3],or)}}function Kt(qn){gt("next",qn)}function Tn(qn){gt("throw",qn)}function Bt(qn,vr){qn(vr),at.shift(),at.length&&gt(at[0][0],at[0][1])}}function Fe(_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,be=_e[Symbol.asyncIterator];return be?be.call(_e):(_e=function Qe(_e){var be="function"==typeof Symbol&&Symbol.iterator,Te=be&&_e[be],ve=0;if(Te)return Te.call(_e);if(_e&&"number"==typeof _e.length)return{next:function(){return _e&&ve>=_e.length&&(_e=void 0),{value:_e&&_e[ve++],done:!_e}}};throw new TypeError(be?"Object is not iterable.":"Symbol.iterator is not defined.")}(_e),Te={},ve("next"),ve("throw"),ve("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function ve(at){Te[at]=_e[at]&&function(wt){return new Promise(function(gt,Vn){!function ze(at,wt,gt,Vn){Promise.resolve(Vn).then(function(Kt){at({value:Kt,done:gt})},wt)}(gt,Vn,(wt=_e[at](wt)).done,wt.value)})}}}j.d(je,{FC:()=>$e,KL:()=>Fe,_T:()=>ae,mG:()=>pe,qq:()=>me}),"function"==typeof SuppressedError&&SuppressedError}},Vt=>{Vt(Vt.s=6297)}]);